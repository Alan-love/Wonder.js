<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>绘制彩色三角形</title>

    <script src="/project/dist/Engine.js" type="text/javascript"></script>
</head>
<body>
<canvas id="canvas" width="600" height="400"></canvas>


<script>
    window.onload = function(){
        var camera = null,
                scene = null;

        Engine3D.LoaderManager.getInstance().load([
            {url:"./vertex.glsl", id:"vs"},
            {url:"./fragment.glsl", id:"fs"}
        ]);

        function init(){
            _initContext();
            _initScene();

        }

        function loop(){
            var gl = Engine3D.WebGLContext.gl;
            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

            scene.run();

            requestAnimationFrame(loop);
        }

        function _initContext(){
            Engine3D.WebGLContext.createGL("canvas");
        }

        function _initScene(){
            var triangle = null;

            camera = Engine3D.Camera.create({
                        eyeX: 0.0,
                        eyeY: 0.0,
                        eyeZ: 1.0,
                        centerX:0,
                        centerY:0,
                        centerZ: -1,
                        upX:0,
                        upY: 1,
                        upZ: 0
                    },
                    {
                        angle: 60,
                        aspect : canvas.width / canvas.height,
                        near : 0.1,
                        far : 10
                    });

            scene = Engine3D.Scene.create(camera,
                    Engine3D.GLSLLoader.getInstance().getGLSL("vs"),
                    Engine3D.GLSLLoader.getInstance().getGLSL("fs"));


            triangle = Engine3D.TriangleGeometry.create(5, 5, -5.0);
            var material = Engine3D.MeshMaterial.create( { color: "#FFCDff"} );

            var mesh = Engine3D.Mesh.create(triangle, material );

            /*            var geometry = new THREE.BoxGeometry( 200, 200, 200 );

             var texture = THREE.ImageUtils.loadTexture( 'textures/crate.gif' );
             texture.anisotropy = renderer.getMaxAnisotropy();

             var material = new THREE.MeshBasicMaterial( { map: texture } );

             mesh = new THREE.Mesh( geometry, material );*/


            scene.add(mesh);

            scene.init();
        }

        Engine3D.LoaderManager.getInstance().onload = function(){
            init();
            loop();
        };
    };
</script>
</body>
</html>

