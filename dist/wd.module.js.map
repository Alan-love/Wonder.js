{"version":3,"file":"wd.module.js","sources":["../node_modules/wonder-commonlib/dist/es2015/utils/JudgeUtils.ts","../node_modules/wonder-commonlib/dist/es2015/global/Variable.ts","../node_modules/wonder-commonlib/dist/es2015/Log.ts","../src/utils/Log.ts","../src/config/CompileConfig.ts","../node_modules/wonder-frp/dist/es2015/core/Main.ts","../src/core/data/MainData.ts","../src/definition/typescript/decorator/contract.ts","../node_modules/wonder-expect.js/index.js","../src/utils/ClassUtils.ts","../src/definition/typescript/decorator/registerClass.ts","../node_modules/wonder-commonlib/dist/es2015/global/Const.ts","../node_modules/wonder-commonlib/dist/es2015/List.ts","../node_modules/wonder-commonlib/dist/es2015/utils/ExtendUtils.ts","../node_modules/wonder-commonlib/dist/es2015/Collection.ts","../src/utils/JudgeUtils.ts","../src/definition/typescript/decorator/clone.ts","../src/math/Vector2.ts","../src/math/Global.ts","../src/math/Matrix3.ts","../src/math/Vector4.ts","../src/math/Vector3.ts","../src/math/Quaternion.ts","../src/math/Matrix4.ts","../src/definition/typescript/decorator/virtual.ts","../src/component/camera/Camera.ts","../node_modules/wonder-frp/dist/es2015/core/Entity.ts","../node_modules/wonder-frp/dist/es2015/JudgeUtils.ts","../node_modules/wonder-frp/dist/es2015/observer/SubjectObserver.ts","../node_modules/wonder-frp/dist/es2015/core/Observer.ts","../node_modules/wonder-frp/dist/es2015/definition/typescript/decorator/contract.ts","../node_modules/wonder-frp/dist/es2015/observer/AutoDetachObserver.ts","../node_modules/wonder-frp/dist/es2015/Disposable/InnerSubscription.ts","../node_modules/wonder-frp/dist/es2015/subject/Subject.ts","../node_modules/wonder-frp/dist/es2015/Disposable/SingleDisposable.ts","../node_modules/wonder-frp/dist/es2015/utils/ClassMapUtils.ts","../node_modules/wonder-commonlib/dist/es2015/utils/FunctionUtils.ts","../node_modules/wonder-frp/dist/es2015/core/Stream.ts","../node_modules/wonder-frp/dist/es2015/stream/BaseStream.ts","../node_modules/wonder-frp/dist/es2015/Disposable/GroupDisposable.ts","../node_modules/wonder-frp/dist/es2015/global/Variable.ts","../node_modules/wonder-frp/dist/es2015/core/Scheduler.ts","../node_modules/wonder-frp/dist/es2015/stream/AnonymousStream.ts","../node_modules/wonder-frp/dist/es2015/stream/FromArrayStream.ts","../node_modules/wonder-frp/dist/es2015/stream/FromPromiseStream.ts","../node_modules/wonder-frp/dist/es2015/stream/FromEventPatternStream.ts","../node_modules/wonder-frp/dist/es2015/stream/IntervalStream.ts","../node_modules/wonder-frp/dist/es2015/stream/IntervalRequestStream.ts","../node_modules/wonder-frp/dist/es2015/stream/TimeoutStream.ts","../node_modules/wonder-frp/dist/es2015/stream/DeferStream.ts","../node_modules/wonder-frp/dist/es2015/definition/typescript/decorator/registerClass.ts","../node_modules/wonder-frp/dist/es2015/global/Operator.ts","../node_modules/wonder-frp/dist/es2015/observer/MergeAllObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/MergeAllStream.ts","../src/core/Entity.ts","../src/core/Component.ts","../src/definition/typescript/decorator/cache.ts","../node_modules/wonder-commonlib/dist/es2015/Hash.ts","../src/component/transform/ETransformState.ts","../src/event/EEngineEvent.ts","../src/component/transform/Transform.ts","../src/component/renderer/RendererComponent.ts","../src/renderer/EDrawMode.ts","../src/definition/typescript/decorator/control.ts","../src/definition/typescript/decorator/singleton.ts","../src/structure/View.ts","../src/structure/RectRegion.ts","../node_modules/wonder-commonlib/dist/es2015/utils/DomQuery.ts","../src/definition/Variable.ts","../src/device/EScreenSize.ts","../src/device/DeviceManager.ts","../src/renderer/buffer/Buffer.ts","../src/renderer/buffer/EBufferUsage.ts","../src/renderer/buffer/CommonBuffer.ts","../src/renderer/buffer/EBufferType.ts","../src/core/entityObject/scene/cache/BufferTable.ts","../src/device/GPUDetector.ts","../src/renderer/buffer/ElementBuffer.ts","../src/renderer/buffer/EBufferDataType.ts","../src/renderer/buffer/ArrayBuffer.ts","../src/renderer/buffer/BufferDataTable.ts","../src/component/geometry/data/BufferContainer.ts","../src/component/geometry/data/CommonBufferContainer.ts","../src/component/geometry/data/BasicBufferContainer.ts","../src/component/geometry/data/GeometryData.ts","../src/component/geometry/data/BasicGeometryData.ts","../src/component/geometry/Geometry.ts","../src/utils/SortUtils.ts","../src/component/data/ComponentInitOrderTable.ts","../src/core/entityObject/manager/ComponentManager.ts","../src/core/entityObject/manager/EntityObjectManager.ts","../src/core/entityObject/EntityObject.ts","../src/event/object/EEventType.ts","../node_modules/bowser/src/bowser.js","../src/event/object/EventNameHandler.ts","../src/event/object/EventTable.ts","../src/event/binder/EventBinder.ts","../src/event/handler/EventHandler.ts","../src/event/binder/EventRegister.ts","../src/event/structure/EventListenerMap.ts","../src/event/structure/DomEventListenerMap.ts","../src/event/binder/DomEventRegister.ts","../node_modules/wonder-commonlib/dist/es2015/utils/EventUtils.ts","../src/event/handler/DomEventHandler.ts","../src/event/handler/PointEventHandler.ts","../src/event/object/Event.ts","../src/event/object/DomEvent.ts","../src/structure/Point.ts","../src/event/object/EMouseButton.ts","../src/event/object/MouseEvent.ts","../src/event/handler/MouseEventHandler.ts","../src/event/object/TouchEvent.ts","../src/event/handler/TouchEventHandler.ts","../src/event/object/KeyboardEvent.ts","../src/event/handler/KeyboardEventHandler.ts","../src/event/structure/CustomEventListenerMap.ts","../src/event/binder/CustomEventRegister.ts","../src/event/handler/CustomEventHandler.ts","../src/event/factory/EventHandlerFactory.ts","../src/event/binder/DomEventBinder.ts","../src/event/binder/CustomEventBinder.ts","../src/event/factory/EventBinderFactory.ts","../src/event/object/CustomEvent.ts","../src/event/dispatcher/EventDispatcher.ts","../src/event/dispatcher/DomEventDispatcher.ts","../src/event/utils/EventUtils.ts","../src/event/object/EEventPhase.ts","../src/event/dispatcher/CustomEventDispatcher.ts","../src/event/factory/EventDispatcherFactory.ts","../src/event/EventManager.ts","../src/component/camera/controller/CameraController.ts","../src/component/camera/controller/basic/BasicCameraController.ts","../src/component/camera/PerspectiveCamera.ts","../src/structure/Face3.ts","../src/component/geometry/GeometryUtils.ts","../src/component/geometry/BoxGeometry.ts","../src/renderer/state/WebGLState.ts","../src/renderer/state/BasicState.ts","../src/renderer/GlUtils.ts","../src/renderer/command/RenderCommand.ts","../src/renderer/command/QuadCommand.ts","../src/renderer/command/SingleDrawCommand.ts","../src/component/renderer/MeshRenderer.ts","../src/component/transform/ThreeDTransform.ts","../src/config/DebugConfig.ts","../node_modules/wonder-frp/dist/es2015/observer/ConcatObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/ConcatStream.ts","../node_modules/wonder-frp/dist/es2015/observer/IgnoreElementsObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/IgnoreElementsStream.ts","../node_modules/wonder-frp/dist/es2015/extend/root.ts","../src/utils/RenderUtils.ts","../src/core/entityObject/gameObject/GameObject.ts","../src/core/entityObject/scene/Scene.ts","../src/core/entityObject/scene/gameObjectScene/GameObjectScene.ts","../src/core/entityObject/scene/SceneDispatcher.ts","../src/utils/time/TimeController.ts","../src/utils/time/DirectorTimeController.ts","../src/renderer/renderer/Renderer.ts","../src/structure/Color.ts","../src/renderer/renderer/WebGLRenderer.ts","../src/core/Director.ts","../src/core/entityObject/scene/cache/ProgramTable.ts","../src/core/Main.ts","../src/event/object/PointEvent.ts","../src/event/object/MousePointEvent.ts","../src/event/object/TouchPointEvent.ts","../src/material/ShaderManager.ts","../src/material/Material.ts","../node_modules/wonder-commonlib/dist/es2015/utils/ArrayUtils.ts","../src/utils/ArrayUtils.ts","../src/renderer/program/GLSLDataSender.ts","../src/renderer/shader/variable/EVariableType.ts","../src/renderer/program/Program.ts","../src/renderer/shader/lib/ShaderLib.ts","../src/renderer/shader/shader/Shader.ts","../src/renderer/shader/variable/EVariableCategory.ts","../src/utils/BufferUtils.ts","../src/renderer/shader/sourceBuilder/ShaderSourceBuilder.ts","../src/renderer/shader/snippet/ShaderSnippet.ts","../src/renderer/shader/chunk/ShaderChunk.ts","../src/renderer/shader/variable/VariableTypeTable.ts","../src/renderer/shader/sourceBuilder/EngineShaderSourceBuilder.ts","../src/renderer/shader/shader/EngineShader.ts","../src/renderer/shader/shader/CommonShader.ts","../src/renderer/shader/variable/VariableLib.ts","../src/renderer/shader/lib/EngineShaderLib.ts","../src/renderer/shader/lib/common/CommonShaderLib.ts","../src/renderer/shader/lib/common/VerticeCommonShaderLib.ts","../src/utils/ShaderLibUtils.ts","../src/renderer/shader/lib/common/EndShaderLib.ts","../src/material/EngineMaterial.ts","../src/renderer/shader/lib/basic/BasicMaterialColorShaderLib.ts","../src/renderer/shader/lib/basic/BasicShaderLib.ts","../src/renderer/shader/lib/basic/EndBasicShaderLib.ts","../src/material/StandardBasicMaterial.ts","../src/material/BasicMaterial.ts","../src/renderer/shader/variable/EVariableSemantic.ts","../src/renderer/shader/variable/VariableNameTable.ts","../src/utils/MathUtils.ts","../src/utils/time/CommonTimeController.ts"],"sourcesContent":["declare var global: any, module: any;\r\n\r\nexport class JudgeUtils {\r\n    public static isArray(arr: any) {\r\n        const MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\r\n        var length = arr && arr.length;\r\n\r\n        return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\r\n    }\r\n\r\n    public static isArrayExactly(arr: any) {\r\n        return Object.prototype.toString.call(arr) === \"[object Array]\";\r\n    }\r\n\r\n    public static isNumber(num: any) {\r\n        return typeof num == \"number\";\r\n    }\r\n\r\n    public static isNumberExactly(num: any) {\r\n        return Object.prototype.toString.call(num) === \"[object Number]\";\r\n    }\r\n\r\n    public static isString(str: any) {\r\n        return typeof str == \"string\";\r\n    }\r\n\r\n    public static isStringExactly(str: any) {\r\n        return Object.prototype.toString.call(str) === \"[object String]\";\r\n    }\r\n\r\n    public static isBoolean(bool: any) {\r\n        return bool === true || bool === false || toString.call(bool) === '[boolect Boolean]';\r\n    }\r\n\r\n    public static isDom(obj: any) {\r\n        return !!(obj && obj.nodeType === 1);\r\n    }\r\n\r\n\r\n    public static isObject(obj: any) {\r\n        var type = typeof obj;\r\n\r\n        return type === 'function' || type === 'object' && !!obj;\r\n    }\r\n\r\n    /**\r\n     * 判断是否为对象字面量（{}）\r\n     */\r\n    public static isDirectObject(obj: any) {\r\n        return Object.prototype.toString.call(obj) === \"[object Object]\";\r\n    }\r\n\r\n    /**\r\n     * 检查宿主对象是否可调用\r\n     *\r\n     * 任何对象，如果其语义在ECMAScript规范中被定义过，那么它被称为原生对象；\r\n     环境所提供的，而在ECMAScript规范中没有被描述的对象，我们称之为宿主对象。\r\n\r\n     该方法用于特性检测，判断对象是否可用。用法如下：\r\n\r\n     MyEngine addEvent():\r\n     if (Tool.judge.isHostMethod(dom, \"addEventListener\")) {    //判断dom是否具有addEventListener方法\r\n        dom.addEventListener(sEventType, fnHandler, false);\r\n        }\r\n     */\r\n    public static isHostMethod(object: any, property: any) {\r\n        var type = typeof object[property];\r\n\r\n        return type === \"function\" ||\r\n            (type === \"object\" && !!object[property]);\r\n        // || type == \"unknown\";\r\n    }\r\n\r\n    public static isNodeJs() {\r\n        return ((typeof global != \"undefined\" && global.module) || (typeof module != \"undefined\")) && typeof module.exports != \"undefined\";\r\n    }\r\n\r\n    //overwrite it in the end of this file\r\n    public static isFunction(func: any): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\n// Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\r\n// IE 11 (#1621), and in Safari 8 (#1929).\r\nif (typeof /./ != 'function' && typeof Int8Array != 'object') {\r\n    JudgeUtils.isFunction = (func: any) => {\r\n        return typeof func == 'function';\r\n    };\r\n}\r\nelse {\r\n    JudgeUtils.isFunction = (func: any) => {\r\n        return Object.prototype.toString.call(func) === \"[object Function]\";\r\n    };\r\n}","import { JudgeUtils } from \"../utils/JudgeUtils\";\r\n\r\ndeclare var global: NodeJS.Global, window: Window;\r\nexport var root: any;\r\n\r\nif (JudgeUtils.isNodeJs() && typeof global != \"undefined\") {\r\n    root = global;\r\n}\r\nelse {\r\n    root = window;\r\n}","import { root } from \"./global/Variable\";\r\n\r\nexport class Log {\r\n    public static info = {\r\n        INVALID_PARAM: \"invalid parameter\",\r\n\r\n        helperFunc: function(...args) {\r\n            var result = \"\";\r\n\r\n            args.forEach(function(val) {\r\n                result += String(val) + \" \";\r\n            });\r\n\r\n            return result.slice(0, -1);\r\n        },\r\n        assertion: function(...args) {\r\n            if (args.length === 2) {\r\n                return this.helperFunc(args[0], args[1]);\r\n            }\r\n            else if (args.length === 3) {\r\n                return this.helperFunc(args[1], args[0], args[2]);\r\n            }\r\n            else {\r\n                throw new Error(\"args.length must <= 3\");\r\n            }\r\n        },\r\n\r\n        FUNC_INVALID: function(...args) {\r\n            args.unshift(\"invalid\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST: function(...args) {\r\n            args.unshift(\"must\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_BE: function(...args) {\r\n            args.unshift(\"must be\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_NOT_BE: function(...args) {\r\n            args.unshift(\"must not be\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SHOULD: function(...args) {\r\n            args.unshift(\"should\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SHOULD_NOT: function(...args) {\r\n            args.unshift(\"should not\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SUPPORT: function(...args) {\r\n            args.unshift(\"support\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_NOT_SUPPORT: function(...args) {\r\n            args.unshift(\"not support\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_DEFINE: function(...args) {\r\n            args.unshift(\"must define\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_NOT_DEFINE: function(...args) {\r\n            args.unshift(\"must not define\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_UNKNOW: function(...args) {\r\n            args.unshift(\"unknow\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_EXPECT: function(...args) {\r\n            args.unshift(\"expect\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_UNEXPECT: function(...args) {\r\n            args.unshift(\"unexpect\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_EXIST: function(...args) {\r\n            args.unshift(\"exist\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_NOT_EXIST: function(...args) {\r\n            args.unshift(\"not exist\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_ONLY: function(...args) {\r\n            args.unshift(\"only\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_CAN_NOT: function(...args) {\r\n            args.unshift(\"can't\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Output Debug message.\r\n     * @function\r\n     * @param {String} message\r\n     */\r\n    public static log(...messages) {\r\n        if (!this._exec(\"log\", messages)) {\r\n            root.alert(messages.join(\",\"));\r\n        }\r\n\r\n        this._exec(\"trace\", messages);\r\n    }\r\n\r\n    /**\r\n     * 断言失败时，会提示错误信息，但程序会继续执行下去\r\n     * 使用断言捕捉不应该发生的非法情况。不要混淆非法情况与错误情况之间的区别，后者是必然存在的并且是一定要作出处理的。\r\n     *\r\n     * 1）对非预期错误使用断言\r\n     断言中的布尔表达式的反面一定要描述一个非预期错误，下面所述的在一定情况下为非预期错误的一些例子：\r\n     （1）空指针。\r\n     （2）输入或者输出参数的值不在预期范围内。\r\n     （3）数组的越界。\r\n     非预期错误对应的就是预期错误，我们通常使用错误处理代码来处理预期错误，而使用断言处理非预期错误。在代码执行过程中，有些错误永远不应该发生，这样的错误是非预期错误。断言可以被看成是一种可执行的注释，你不能依赖它来让代码正常工作（《Code Complete 2》）。例如：\r\n     int nRes = f(); // nRes 由 f 函数控制， f 函数保证返回值一定在 -100 ~ 100\r\n     Assert(-100 <= nRes && nRes <= 100); // 断言，一个可执行的注释\r\n     由于 f 函数保证了返回值处于 -100 ~ 100，那么如果出现了 nRes 不在这个范围的值时，就表明一个非预期错误的出现。后面会讲到“隔栏”，那时会对断言有更加深刻的理解。\r\n     2）不要把需要执行的代码放入断言中\r\n     断言用于软件的开发和维护，而通常不在发行版本中包含断言。\r\n     需要执行的代码放入断言中是不正确的，因为在发行版本中，这些代码通常不会被执行，例如：\r\n     Assert(f()); // f 函数通常在发行版本中不会被执行\r\n     而使用如下方法则比较安全：\r\n     res = f();\r\n     Assert(res); // 安全\r\n     3）对来源于内部系统的可靠的数据使用断言，而不要对外部不可靠的数据使用断言，对于外部不可靠数据，应该使用错误处理代码。\r\n     再次强调，把断言看成可执行的注释。\r\n     * @param cond 如果cond返回false，则断言失败，显示message\r\n     * @param message\r\n     */\r\n    public static assert(cond, ...messages) {\r\n        if (cond) {\r\n            if (!this._exec(\"assert\", arguments, 1)) {\r\n                this.log.apply(this, Array.prototype.slice.call(arguments, 1));\r\n            }\r\n        }\r\n    }\r\n\r\n    public static error(cond, ...message): any {\r\n        if (cond) {\r\n            /*!\r\n            console.error will not interrupt, it will throw error and continue exec the left statements\r\n\r\n            but here need interrupt! so not use it here.\r\n             */\r\n            //if (!this._exec(\"error\", arguments, 1)) {\r\n            throw new Error(Array.prototype.slice.call(arguments, 1).join(\"\\n\"));\r\n            //}\r\n        }\r\n    }\r\n\r\n    public static warn(...message) {\r\n        var result = this._exec(\"warn\", arguments);\r\n\r\n        if (!result) {\r\n            this.log.apply(this, arguments);\r\n        }\r\n        else {\r\n            this._exec(\"trace\", [\"warn trace\"]);\r\n        }\r\n    }\r\n\r\n    private static _exec(consoleMethod, args, sliceBegin = 0) {\r\n        if (root.console && root.console[consoleMethod]) {\r\n            root.console[consoleMethod].apply(root.console, Array.prototype.slice.call(args, sliceBegin));\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}","// import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Log as Log$ } from \"wonder-commonlib/dist/es2015/Log\";\r\n\r\n// @registerClass(\"Log\")\r\nexport class Log extends Log$ {\r\n}","export var CompileConfig = {\r\n    isCompileTest: true,\r\n    closeContractTest: false\r\n}","export class Main {\r\n    public static isTest: boolean = false;\r\n}","import { EScreenSize } from \"../../device/EScreenSize\";\r\nimport { Main } from \"wonder-frp/dist/es2015/core/Main\";\r\nimport { RectRegion } from \"../../structure/RectRegion\";\r\nexport class MainData {\r\n    private static _isTest: boolean = false;\r\n    static get isTest() {\r\n        return this._isTest;\r\n    }\r\n    static set isTest(isTest: boolean) {\r\n        this._isTest = isTest;\r\n\r\n        Main.isTest = MainData.isTest;\r\n    }\r\n\r\n    public static screenSize: EScreenSize & RectRegion = null;\r\n}\r\n\r\nexport type ContextConfigData = {\r\n    options: {\r\n        alpha: boolean;\r\n        depth: boolean;\r\n        stencil: boolean;\r\n        antialias: boolean;\r\n        premultipliedAlpha: boolean;\r\n        preserveDrawingBuffer: boolean;\r\n    }\r\n}\r\n","import { Log } from \"../../../utils/Log\";\r\nimport { CompileConfig } from \"../../../config/CompileConfig\";\r\nimport { MainData } from \"../../../core/data/MainData\";\r\n\r\nvar _describeContext = null;\r\n\r\nexport function assert(cond: boolean, message: string = \"contract error\") {\r\n    Log.error(!cond, message);\r\n}\r\n\r\nexport function describe(message: string, func: Function, preCondition: Function = () => true, context: any = this) {\r\n    if (preCondition.call(context, null)) {\r\n        _describeContext = context;\r\n\r\n        try {\r\n            func.call(context, null);\r\n        }\r\n        catch (e) {\r\n            assert(false, `${message}->${e.message}`);\r\n        }\r\n        finally {\r\n            _describeContext = null;\r\n        }\r\n    }\r\n}\r\n\r\nexport function it(message: string, func: Function, context?: any) {\r\n    try {\r\n        if (arguments.length === 3) {\r\n            func.call(context, null);\r\n        }\r\n        else {\r\n            if (_describeContext) {\r\n                func.call(_describeContext, null);\r\n            }\r\n            else {\r\n                func();\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        assert(false, `${message}->${e.message}`);\r\n    }\r\n}\r\n\r\nexport function requireCheck(inFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let value = descriptor.value;\r\n\r\n            descriptor.value = function(args) {\r\n                if (MainData.isTest) {\r\n                    inFunc.apply(this, arguments);\r\n                }\r\n\r\n                return value.apply(this, arguments);\r\n            };\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensure(outFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let value = descriptor.value;\r\n\r\n            descriptor.value = function(args) {\r\n                var result = value.apply(this, arguments);\r\n\r\n                if (MainData.isTest) {\r\n\r\n                    var params = [result];\r\n\r\n                    for (let i = 0, len = arguments.length; i < len; i++) {\r\n                        params[i + 1] = arguments[i];\r\n                    }\r\n\r\n                    outFunc.apply(this, params);\r\n                }\r\n\r\n                return result;\r\n            }\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireGetterAndSetter(inGetterFunc, inSetterFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let getter = descriptor.get,\r\n                setter = descriptor.set;\r\n\r\n            descriptor.get = function() {\r\n                if (MainData.isTest) {\r\n                    inGetterFunc.call(this);\r\n                }\r\n\r\n                return getter.call(this);\r\n            };\r\n\r\n            descriptor.set = function(val) {\r\n                if (MainData.isTest) {\r\n                    inSetterFunc.call(this, val);\r\n                }\r\n\r\n                setter.call(this, val);\r\n            };\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireGetter(inFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let getter = descriptor.get;\r\n\r\n            descriptor.get = function() {\r\n                if (MainData.isTest) {\r\n                    inFunc.call(this);\r\n                }\r\n\r\n                return getter.call(this);\r\n            };\r\n\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireSetter(inFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let setter = descriptor.set;\r\n\r\n            descriptor.set = function(val) {\r\n                if (MainData.isTest) {\r\n                    inFunc.call(this, val);\r\n                }\r\n\r\n                setter.call(this, val);\r\n            };\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureGetterAndSetter(outGetterFunc, outSetterFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let getter = descriptor.get,\r\n                setter = descriptor.set;\r\n\r\n            descriptor.get = function() {\r\n                var result = getter.call(this);\r\n\r\n                if (MainData.isTest) {\r\n                    outGetterFunc.call(this, result);\r\n                }\r\n\r\n                return result;\r\n            };\r\n\r\n            descriptor.set = function(val) {\r\n                var result = setter.call(this, val);\r\n\r\n                if (MainData.isTest) {\r\n                    let params = [result, val];\r\n                    outSetterFunc.apply(this, params);\r\n                }\r\n            };\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureGetter(outFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let getter = descriptor.get;\r\n\r\n            descriptor.get = function() {\r\n                var result = getter.call(this);\r\n\r\n                if (MainData.isTest) {\r\n                    outFunc.call(this, result);\r\n                }\r\n\r\n                return result;\r\n            };\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureSetter(outFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let setter = descriptor.set;\r\n\r\n            descriptor.set = function(val) {\r\n                var result = setter.call(this, val);\r\n\r\n                if (MainData.isTest) {\r\n                    let params = [result, val];\r\n                    outFunc.apply(this, params);\r\n                }\r\n            };\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function invariant(func) {\r\n    return function(target) {\r\n        if (CompileConfig.isCompileTest) {\r\n            if (MainData.isTest) {\r\n                func(target);\r\n            }\r\n        }\r\n    }\r\n}","(function (global, module) {\n\n  var exports = module.exports;\n\n  /**\n   * Exports.\n   */\n\n  module.exports = expect;\n  expect.Assertion = Assertion;\n\n  /**\n   * Exports version.\n   */\n\n  expect.version = '0.3.1';\n\n  /**\n   * Possible assertion flags.\n   */\n\n  var flags = {\n      not: ['to', 'be', 'have', 'include', 'only']\n    , to: ['be', 'have', 'include', 'only', 'not']\n    , only: ['have']\n    , have: ['own']\n    , be: ['an']\n  };\n\n  function expect (obj) {\n    return new Assertion(obj);\n  }\n\n  /**\n   * Constructor\n   *\n   * @api private\n   */\n\n  function Assertion (obj, flag, parent) {\n    this.obj = obj;\n    this.flags = {};\n\n    if (undefined != parent) {\n      this.flags[flag] = true;\n\n      for (var i in parent.flags) {\n        if (parent.flags.hasOwnProperty(i)) {\n          this.flags[i] = true;\n        }\n      }\n    }\n\n    var $flags = flag ? flags[flag] : keys(flags)\n      , self = this;\n\n    if ($flags) {\n      for (var i = 0, l = $flags.length; i < l; i++) {\n        // avoid recursion\n        if (this.flags[$flags[i]]) continue;\n\n        var name = $flags[i]\n          , assertion = new Assertion(this.obj, name, this)\n\n        if ('function' == typeof Assertion.prototype[name]) {\n          // clone the function, make sure we dont touch the prot reference\n          var old = this[name];\n          this[name] = function () {\n            return old.apply(self, arguments);\n          };\n\n          for (var fn in Assertion.prototype) {\n            if (Assertion.prototype.hasOwnProperty(fn) && fn != name) {\n                /*!\n                modify by wonder\n                 */\n              if(fn !== \"length\"){\n                  this[name][fn] = bind(assertion[fn], assertion);\n              }\n            }\n          }\n        } else {\n          this[name] = assertion;\n        }\n      }\n    }\n  }\n\n  /**\n   * Performs an assertion\n   *\n   * @api private\n   */\n\n  Assertion.prototype.assert = function (truth, msg, error, expected) {\n    var msg = this.flags.not ? error : msg\n      , ok = this.flags.not ? !truth : truth\n      , err;\n\n    if (!ok) {\n      err = new Error(msg.call(this));\n      if (arguments.length > 3) {\n        err.actual = this.obj;\n        err.expected = expected;\n        err.showDiff = true;\n      }\n      throw err;\n    }\n\n    this.and = new Assertion(this.obj);\n  };\n\n  /**\n   * Check if the value is truthy\n   *\n   * @api public\n   */\n\n  Assertion.prototype.ok = function () {\n    this.assert(\n        !!this.obj\n      , function(){ return 'expected ' + i(this.obj) + ' to be truthy' }\n      , function(){ return 'expected ' + i(this.obj) + ' to be falsy' });\n  };\n\n  /**\n   * Creates an anonymous function which calls fn with arguments.\n   *\n   * @api public\n   */\n\n  Assertion.prototype.withArgs = function() {\n    expect(this.obj).to.be.a('function');\n    var fn = this.obj;\n    var args = Array.prototype.slice.call(arguments);\n    return expect(function() { fn.apply(null, args); });\n  };\n\n  /**\n   * Assert that the function throws.\n   *\n   * @param {Function|RegExp} callback, or regexp to match error string against\n   * @api public\n   */\n\n  Assertion.prototype.throwError =\n  Assertion.prototype.throwException = function (fn) {\n    expect(this.obj).to.be.a('function');\n\n    var thrown = false\n      , not = this.flags.not;\n\n    try {\n      this.obj();\n    } catch (e) {\n      if (isRegExp(fn)) {\n        var subject = 'string' == typeof e ? e : e.message;\n        if (not) {\n          expect(subject).to.not.match(fn);\n        } else {\n          expect(subject).to.match(fn);\n        }\n      } else if ('function' == typeof fn) {\n        fn(e);\n      }\n      thrown = true;\n    }\n\n    if (isRegExp(fn) && not) {\n      // in the presence of a matcher, ensure the `not` only applies to\n      // the matching.\n      this.flags.not = false;\n    }\n\n    var name = this.obj.name || 'fn';\n    this.assert(\n        thrown\n      , function(){ return 'expected ' + name + ' to throw an exception' }\n      , function(){ return 'expected ' + name + ' not to throw an exception' });\n  };\n\n  /**\n   * Checks if the array is empty.\n   *\n   * @api public\n   */\n\n  Assertion.prototype.empty = function () {\n    var expectation;\n\n    if ('object' == typeof this.obj && null !== this.obj && !isArray(this.obj)) {\n      if ('number' == typeof this.obj.length) {\n        expectation = !this.obj.length;\n      } else {\n        expectation = !keys(this.obj).length;\n      }\n    } else {\n      if ('string' != typeof this.obj) {\n        expect(this.obj).to.be.an('object');\n      }\n\n      expect(this.obj).to.have.property('length');\n      expectation = !this.obj.length;\n    }\n\n    this.assert(\n        expectation\n      , function(){ return 'expected ' + i(this.obj) + ' to be empty' }\n      , function(){ return 'expected ' + i(this.obj) + ' to not be empty' });\n    return this;\n  };\n\n  /**\n   * Checks if the obj exactly equals another.\n   *\n   * @api public\n   */\n\n  Assertion.prototype.be =\n  Assertion.prototype.equal = function (obj) {\n    this.assert(\n        obj === this.obj\n      , function(){ return 'expected ' + i(this.obj) + ' to equal ' + i(obj) }\n      , function(){ return 'expected ' + i(this.obj) + ' to not equal ' + i(obj) });\n    return this;\n  };\n\n  /**\n   * Checks if the obj sortof equals another.\n   *\n   * @api public\n   */\n\n  Assertion.prototype.eql = function (obj) {\n    this.assert(\n        expect.eql(this.obj, obj)\n      , function(){ return 'expected ' + i(this.obj) + ' to sort of equal ' + i(obj) }\n      , function(){ return 'expected ' + i(this.obj) + ' to sort of not equal ' + i(obj) }\n      , obj);\n    return this;\n  };\n\n  /**\n   * Assert within start to finish (inclusive).\n   *\n   * @param {Number} start\n   * @param {Number} finish\n   * @api public\n   */\n\n  Assertion.prototype.within = function (start, finish) {\n    var range = start + '..' + finish;\n    this.assert(\n        this.obj >= start && this.obj <= finish\n      , function(){ return 'expected ' + i(this.obj) + ' to be within ' + range }\n      , function(){ return 'expected ' + i(this.obj) + ' to not be within ' + range });\n    return this;\n  };\n\n  /**\n   * Assert typeof / instance of\n   *\n   * @api public\n   */\n\n  Assertion.prototype.a =\n  Assertion.prototype.an = function (type) {\n    if ('string' == typeof type) {\n      // proper english in error msg\n      var n = /^[aeiou]/.test(type) ? 'n' : '';\n\n      // typeof with support for 'array'\n      this.assert(\n          'array' == type ? isArray(this.obj) :\n            'regexp' == type ? isRegExp(this.obj) :\n              'object' == type\n                ? 'object' == typeof this.obj && null !== this.obj\n                : type == typeof this.obj\n        , function(){ return 'expected ' + i(this.obj) + ' to be a' + n + ' ' + type }\n        , function(){ return 'expected ' + i(this.obj) + ' not to be a' + n + ' ' + type });\n    } else {\n      // instanceof\n      var name = type.name || 'supplied constructor';\n      this.assert(\n          this.obj instanceof type\n        , function(){ return 'expected ' + i(this.obj) + ' to be an instance of ' + name }\n        , function(){ return 'expected ' + i(this.obj) + ' not to be an instance of ' + name });\n    }\n\n    return this;\n  };\n\n  /**\n   * Assert numeric value above _n_.\n   *\n   * @param {Number} n\n   * @api public\n   */\n\n  Assertion.prototype.greaterThan =\n  Assertion.prototype.above = function (n) {\n    this.assert(\n        this.obj > n\n      , function(){ return 'expected ' + i(this.obj) + ' to be above ' + n }\n      , function(){ return 'expected ' + i(this.obj) + ' to be below ' + n });\n    return this;\n  };\n\n  /**\n   * Assert numeric value below _n_.\n   *\n   * @param {Number} n\n   * @api public\n   */\n\n  Assertion.prototype.lessThan =\n  Assertion.prototype.below = function (n) {\n    this.assert(\n        this.obj < n\n      , function(){ return 'expected ' + i(this.obj) + ' to be below ' + n }\n      , function(){ return 'expected ' + i(this.obj) + ' to be above ' + n });\n    return this;\n  };\n\n  /**\n   * Assert string value matches _regexp_.\n   *\n   * @param {RegExp} regexp\n   * @api public\n   */\n\n  Assertion.prototype.match = function (regexp) {\n    this.assert(\n        regexp.exec(this.obj)\n      , function(){ return 'expected ' + i(this.obj) + ' to match ' + regexp }\n      , function(){ return 'expected ' + i(this.obj) + ' not to match ' + regexp });\n    return this;\n  };\n\n  /**\n   * Assert property \"length\" exists and has value of _n_.\n   *\n   * @param {Number} n\n   * @api public\n   */\n\n  Assertion.prototype.length = function (n) {\n    expect(this.obj).to.have.property('length');\n    var len = this.obj.length;\n    this.assert(\n        n == len\n      , function(){ return 'expected ' + i(this.obj) + ' to have a length of ' + n + ' but got ' + len }\n      , function(){ return 'expected ' + i(this.obj) + ' to not have a length of ' + len });\n    return this;\n  };\n\n  /**\n   * Assert property _name_ exists, with optional _val_.\n   *\n   * @param {String} name\n   * @param {Mixed} val\n   * @api public\n   */\n\n  Assertion.prototype.property = function (name, val) {\n    if (this.flags.own) {\n      this.assert(\n          Object.prototype.hasOwnProperty.call(this.obj, name)\n        , function(){ return 'expected ' + i(this.obj) + ' to have own property ' + i(name) }\n        , function(){ return 'expected ' + i(this.obj) + ' to not have own property ' + i(name) });\n      return this;\n    }\n\n    if (this.flags.not && undefined !== val) {\n      if (undefined === this.obj[name]) {\n        throw new Error(i(this.obj) + ' has no property ' + i(name));\n      }\n    } else {\n      var hasProp;\n      try {\n        hasProp = name in this.obj\n      } catch (e) {\n        hasProp = undefined !== this.obj[name]\n      }\n\n      this.assert(\n          hasProp\n        , function(){ return 'expected ' + i(this.obj) + ' to have a property ' + i(name) }\n        , function(){ return 'expected ' + i(this.obj) + ' to not have a property ' + i(name) });\n    }\n\n    if (undefined !== val) {\n      this.assert(\n          val === this.obj[name]\n        , function(){ return 'expected ' + i(this.obj) + ' to have a property ' + i(name)\n          + ' of ' + i(val) + ', but got ' + i(this.obj[name]) }\n        , function(){ return 'expected ' + i(this.obj) + ' to not have a property ' + i(name)\n          + ' of ' + i(val) });\n    }\n\n    this.obj = this.obj[name];\n    return this;\n  };\n\n  /**\n   * Assert that the array contains _obj_ or string contains _obj_.\n   *\n   * @param {Mixed} obj|string\n   * @api public\n   */\n\n  Assertion.prototype.string =\n  Assertion.prototype.contain = function (obj) {\n    if ('string' == typeof this.obj) {\n      this.assert(\n          ~this.obj.indexOf(obj)\n        , function(){ return 'expected ' + i(this.obj) + ' to contain ' + i(obj) }\n        , function(){ return 'expected ' + i(this.obj) + ' to not contain ' + i(obj) });\n    } else {\n      this.assert(\n          ~indexOf(this.obj, obj)\n        , function(){ return 'expected ' + i(this.obj) + ' to contain ' + i(obj) }\n        , function(){ return 'expected ' + i(this.obj) + ' to not contain ' + i(obj) });\n    }\n    return this;\n  };\n\n  /**\n   * Assert exact keys or inclusion of keys by using\n   * the `.own` modifier.\n   *\n   * @param {Array|String ...} keys\n   * @api public\n   */\n\n  Assertion.prototype.key =\n  Assertion.prototype.keys = function ($keys) {\n    var str\n      , ok = true;\n\n    $keys = isArray($keys)\n      ? $keys\n      : Array.prototype.slice.call(arguments);\n\n    if (!$keys.length) throw new Error('keys required');\n\n    var actual = keys(this.obj)\n      , len = $keys.length;\n\n    // Inclusion\n    ok = every($keys, function (key) {\n      return ~indexOf(actual, key);\n    });\n\n    // Strict\n    if (!this.flags.not && this.flags.only) {\n      ok = ok && $keys.length == actual.length;\n    }\n\n    // Key string\n    if (len > 1) {\n      $keys = map($keys, function (key) {\n        return i(key);\n      });\n      var last = $keys.pop();\n      str = $keys.join(', ') + ', and ' + last;\n    } else {\n      str = i($keys[0]);\n    }\n\n    // Form\n    str = (len > 1 ? 'keys ' : 'key ') + str;\n\n    // Have / include\n    str = (!this.flags.only ? 'include ' : 'only have ') + str;\n\n    // Assertion\n    this.assert(\n        ok\n      , function(){ return 'expected ' + i(this.obj) + ' to ' + str }\n      , function(){ return 'expected ' + i(this.obj) + ' to not ' + str });\n\n    return this;\n  };\n\n  /**\n   * Assert a failure.\n   *\n   * @param {String ...} custom message\n   * @api public\n   */\n  Assertion.prototype.fail = function (msg) {\n    var error = function() { return msg || \"explicit failure\"; }\n    this.assert(false, error, error);\n    return this;\n  };\n\n  /**\n   * Function bind implementation.\n   */\n\n  function bind (fn, scope) {\n    return function () {\n      return fn.apply(scope, arguments);\n    }\n  }\n\n  /**\n   * Array every compatibility\n   *\n   * @see bit.ly/5Fq1N2\n   * @api public\n   */\n\n  function every (arr, fn, thisObj) {\n    var scope = thisObj || global;\n    for (var i = 0, j = arr.length; i < j; ++i) {\n      if (!fn.call(scope, arr[i], i, arr)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Array indexOf compatibility.\n   *\n   * @see bit.ly/a5Dxa2\n   * @api public\n   */\n\n  function indexOf (arr, o, i) {\n    if (Array.prototype.indexOf) {\n      return Array.prototype.indexOf.call(arr, o, i);\n    }\n\n    if (arr.length === undefined) {\n      return -1;\n    }\n\n    for (var j = arr.length, i = i < 0 ? i + j < 0 ? 0 : i + j : i || 0\n        ; i < j && arr[i] !== o; i++);\n\n    return j <= i ? -1 : i;\n  }\n\n  // https://gist.github.com/1044128/\n  var getOuterHTML = function(element) {\n    if ('outerHTML' in element) return element.outerHTML;\n    var ns = \"http://www.w3.org/1999/xhtml\";\n    var container = document.createElementNS(ns, '_');\n    var xmlSerializer = new XMLSerializer();\n    var html;\n    if (document.xmlVersion) {\n      return xmlSerializer.serializeToString(element);\n    } else {\n      container.appendChild(element.cloneNode(false));\n      html = container.innerHTML.replace('><', '>' + element.innerHTML + '<');\n      container.innerHTML = '';\n      return html;\n    }\n  };\n\n  // Returns true if object is a DOM element.\n  var isDOMElement = function (object) {\n    if (typeof HTMLElement === 'object') {\n      return object instanceof HTMLElement;\n    } else {\n      return object &&\n        typeof object === 'object' &&\n        object.nodeType === 1 &&\n        typeof object.nodeName === 'string';\n    }\n  };\n\n  /**\n   * Inspects an object.\n   *\n   * @see taken from node.js `util` module (copyright Joyent, MIT license)\n   * @api private\n   */\n\n  function i (obj, showHidden, depth) {\n    var seen = [];\n\n    function stylize (str) {\n      return str;\n    }\n\n    function format (value, recurseTimes) {\n      // Provide a hook for user-specified inspect functions.\n      // Check that value is an object with an inspect function on it\n      if (value && typeof value.inspect === 'function' &&\n          // Filter out the util module, it's inspect function is special\n          value !== exports &&\n          // Also filter out any prototype objects using the circular check.\n          !(value.constructor && value.constructor.prototype === value)) {\n        return value.inspect(recurseTimes);\n      }\n\n      // Primitive types cannot have properties\n      switch (typeof value) {\n        case 'undefined':\n          return stylize('undefined', 'undefined');\n\n        case 'string':\n          var simple = '\\'' + json.stringify(value).replace(/^\"|\"$/g, '')\n                                                   .replace(/'/g, \"\\\\'\")\n                                                   .replace(/\\\\\"/g, '\"') + '\\'';\n          return stylize(simple, 'string');\n\n        case 'number':\n          return stylize('' + value, 'number');\n\n        case 'boolean':\n          return stylize('' + value, 'boolean');\n      }\n      // For some reason typeof null is \"object\", so special case here.\n      if (value === null) {\n        return stylize('null', 'null');\n      }\n\n      if (isDOMElement(value)) {\n        return getOuterHTML(value);\n      }\n\n      // Look up the keys of the object.\n      var visible_keys = keys(value);\n      var $keys = showHidden ? Object.getOwnPropertyNames(value) : visible_keys;\n\n      // Functions without properties can be shortcutted.\n      if (typeof value === 'function' && $keys.length === 0) {\n        if (isRegExp(value)) {\n          return stylize('' + value, 'regexp');\n        } else {\n          var name = value.name ? ': ' + value.name : '';\n          return stylize('[Function' + name + ']', 'special');\n        }\n      }\n\n      // Dates without properties can be shortcutted\n      if (isDate(value) && $keys.length === 0) {\n        return stylize(value.toUTCString(), 'date');\n      }\n      \n      // Error objects can be shortcutted\n      if (value instanceof Error) {\n        return stylize(\"[\"+value.toString()+\"]\", 'Error');\n      }\n\n      var base, type, braces;\n      // Determine the object type\n      if (isArray(value)) {\n        type = 'Array';\n        braces = ['[', ']'];\n      } else {\n        type = 'Object';\n        braces = ['{', '}'];\n      }\n\n      // Make functions say that they are functions\n      if (typeof value === 'function') {\n        var n = value.name ? ': ' + value.name : '';\n        base = (isRegExp(value)) ? ' ' + value : ' [Function' + n + ']';\n      } else {\n        base = '';\n      }\n\n      // Make dates with properties first say the date\n      if (isDate(value)) {\n        base = ' ' + value.toUTCString();\n      }\n\n      if ($keys.length === 0) {\n        return braces[0] + base + braces[1];\n      }\n\n      if (recurseTimes < 0) {\n        if (isRegExp(value)) {\n          return stylize('' + value, 'regexp');\n        } else {\n          return stylize('[Object]', 'special');\n        }\n      }\n\n      seen.push(value);\n\n      var output = map($keys, function (key) {\n        var name, str;\n        if (value.__lookupGetter__) {\n          if (value.__lookupGetter__(key)) {\n            if (value.__lookupSetter__(key)) {\n              str = stylize('[Getter/Setter]', 'special');\n            } else {\n              str = stylize('[Getter]', 'special');\n            }\n          } else {\n            if (value.__lookupSetter__(key)) {\n              str = stylize('[Setter]', 'special');\n            }\n          }\n        }\n        if (indexOf(visible_keys, key) < 0) {\n          name = '[' + key + ']';\n        }\n        if (!str) {\n          if (indexOf(seen, value[key]) < 0) {\n            if (recurseTimes === null) {\n              str = format(value[key]);\n            } else {\n              str = format(value[key], recurseTimes - 1);\n            }\n            if (str.indexOf('\\n') > -1) {\n              if (isArray(value)) {\n                str = map(str.split('\\n'), function (line) {\n                  return '  ' + line;\n                }).join('\\n').substr(2);\n              } else {\n                str = '\\n' + map(str.split('\\n'), function (line) {\n                  return '   ' + line;\n                }).join('\\n');\n              }\n            }\n          } else {\n            str = stylize('[Circular]', 'special');\n          }\n        }\n        if (typeof name === 'undefined') {\n          if (type === 'Array' && key.match(/^\\d+$/)) {\n            return str;\n          }\n          name = json.stringify('' + key);\n          if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n            name = name.substr(1, name.length - 2);\n            name = stylize(name, 'name');\n          } else {\n            name = name.replace(/'/g, \"\\\\'\")\n                       .replace(/\\\\\"/g, '\"')\n                       .replace(/(^\"|\"$)/g, \"'\");\n            name = stylize(name, 'string');\n          }\n        }\n\n        return name + ': ' + str;\n      });\n\n      seen.pop();\n\n      var numLinesEst = 0;\n      var length = reduce(output, function (prev, cur) {\n        numLinesEst++;\n        if (indexOf(cur, '\\n') >= 0) numLinesEst++;\n        return prev + cur.length + 1;\n      }, 0);\n\n      if (length > 50) {\n        output = braces[0] +\n                 (base === '' ? '' : base + '\\n ') +\n                 ' ' +\n                 output.join(',\\n  ') +\n                 ' ' +\n                 braces[1];\n\n      } else {\n        output = braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n      }\n\n      return output;\n    }\n    return format(obj, (typeof depth === 'undefined' ? 2 : depth));\n  }\n\n  expect.stringify = i;\n\n  function isArray (ar) {\n    return Object.prototype.toString.call(ar) === '[object Array]';\n  }\n\n  function isRegExp(re) {\n    var s;\n    try {\n      s = '' + re;\n    } catch (e) {\n      return false;\n    }\n\n    return re instanceof RegExp || // easy case\n           // duck-type for context-switching evalcx case\n           typeof(re) === 'function' &&\n           re.constructor.name === 'RegExp' &&\n           re.compile &&\n           re.test &&\n           re.exec &&\n           s.match(/^\\/.*\\/[gim]{0,3}$/);\n  }\n\n  function isDate(d) {\n    return d instanceof Date;\n  }\n\n  function keys (obj) {\n    if (Object.keys) {\n      return Object.keys(obj);\n    }\n\n    var keys = [];\n\n    for (var i in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, i)) {\n        keys.push(i);\n      }\n    }\n\n    return keys;\n  }\n\n  function map (arr, mapper, that) {\n    if (Array.prototype.map) {\n      return Array.prototype.map.call(arr, mapper, that);\n    }\n\n    var other= new Array(arr.length);\n\n    for (var i= 0, n = arr.length; i<n; i++)\n      if (i in arr)\n        other[i] = mapper.call(that, arr[i], i, arr);\n\n    return other;\n  }\n\n  function reduce (arr, fun) {\n    if (Array.prototype.reduce) {\n      return Array.prototype.reduce.apply(\n          arr\n        , Array.prototype.slice.call(arguments, 1)\n      );\n    }\n\n    var len = +this.length;\n\n    if (typeof fun !== \"function\")\n      throw new TypeError();\n\n    // no value to return if no initial value and an empty array\n    if (len === 0 && arguments.length === 1)\n      throw new TypeError();\n\n    var i = 0;\n    if (arguments.length >= 2) {\n      var rv = arguments[1];\n    } else {\n      do {\n        if (i in this) {\n          rv = this[i++];\n          break;\n        }\n\n        // if array contains no values, no initial value to return\n        if (++i >= len)\n          throw new TypeError();\n      } while (true);\n    }\n\n    for (; i < len; i++) {\n      if (i in this)\n        rv = fun.call(null, rv, this[i], i, this);\n    }\n\n    return rv;\n  }\n\n  /**\n   * Asserts deep equality\n   *\n   * @see taken from node.js `assert` module (copyright Joyent, MIT license)\n   * @api private\n   */\n\n  expect.eql = function eql(actual, expected) {\n    // 7.1. All identical values are equivalent, as determined by ===.\n    if (actual === expected) {\n      return true;\n    } else if ('undefined' != typeof Buffer\n      && Buffer.isBuffer(actual) && Buffer.isBuffer(expected)) {\n      if (actual.length != expected.length) return false;\n\n      for (var i = 0; i < actual.length; i++) {\n        if (actual[i] !== expected[i]) return false;\n      }\n\n      return true;\n\n      // 7.2. If the expected value is a Date object, the actual value is\n      // equivalent if it is also a Date object that refers to the same time.\n    } else if (actual instanceof Date && expected instanceof Date) {\n      return actual.getTime() === expected.getTime();\n\n      // 7.3. Other pairs that do not both pass typeof value == \"object\",\n      // equivalence is determined by ==.\n    } else if (typeof actual != 'object' && typeof expected != 'object') {\n      return actual == expected;\n    // If both are regular expression use the special `regExpEquiv` method\n    // to determine equivalence.\n    } else if (isRegExp(actual) && isRegExp(expected)) {\n      return regExpEquiv(actual, expected);\n    // 7.4. For all other Object pairs, including Array objects, equivalence is\n    // determined by having the same number of owned properties (as verified\n    // with Object.prototype.hasOwnProperty.call), the same set of keys\n    // (although not necessarily the same order), equivalent values for every\n    // corresponding key, and an identical \"prototype\" property. Note: this\n    // accounts for both named and indexed properties on Arrays.\n    } else {\n      return objEquiv(actual, expected);\n    }\n  };\n\n  function isUndefinedOrNull (value) {\n    return value === null || value === undefined;\n  }\n\n  function isArguments (object) {\n    return Object.prototype.toString.call(object) == '[object Arguments]';\n  }\n\n  function regExpEquiv (a, b) {\n    return a.source === b.source && a.global === b.global &&\n           a.ignoreCase === b.ignoreCase && a.multiline === b.multiline;\n  }\n\n  function objEquiv (a, b) {\n    if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n      return false;\n    // an identical \"prototype\" property.\n    if (a.prototype !== b.prototype) return false;\n    //~~~I've managed to break Object.keys through screwy arguments passing.\n    //   Converting to array solves the problem.\n    if (isArguments(a)) {\n      if (!isArguments(b)) {\n        return false;\n      }\n      a = pSlice.call(a);\n      b = pSlice.call(b);\n      return expect.eql(a, b);\n    }\n    try{\n      var ka = keys(a),\n        kb = keys(b),\n        key, i;\n    } catch (e) {//happens when one is a string literal and the other isn't\n      return false;\n    }\n    // having the same number of owned properties (keys incorporates hasOwnProperty)\n    if (ka.length != kb.length)\n      return false;\n    //the same set of keys (although not necessarily the same order),\n    ka.sort();\n    kb.sort();\n    //~~~cheap key test\n    for (i = ka.length - 1; i >= 0; i--) {\n      if (ka[i] != kb[i])\n        return false;\n    }\n    //equivalent values for every corresponding key, and\n    //~~~possibly expensive deep test\n    for (i = ka.length - 1; i >= 0; i--) {\n      key = ka[i];\n      if (!expect.eql(a[key], b[key]))\n         return false;\n    }\n    return true;\n  }\n\n  var json = (function () {\n    \"use strict\";\n\n    if ('object' == typeof JSON && JSON.parse && JSON.stringify) {\n      return {\n          parse: nativeJSON.parse\n        , stringify: nativeJSON.stringify\n      }\n    }\n\n    var JSON = {};\n\n    function f(n) {\n        // Format integers to have at least two digits.\n        return n < 10 ? '0' + n : n;\n    }\n\n    function date(d, key) {\n      return isFinite(d.valueOf()) ?\n          d.getUTCFullYear()     + '-' +\n          f(d.getUTCMonth() + 1) + '-' +\n          f(d.getUTCDate())      + 'T' +\n          f(d.getUTCHours())     + ':' +\n          f(d.getUTCMinutes())   + ':' +\n          f(d.getUTCSeconds())   + 'Z' : null;\n    }\n\n    var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        gap,\n        indent,\n        meta = {    // table of character substitutions\n            '\\b': '\\\\b',\n            '\\t': '\\\\t',\n            '\\n': '\\\\n',\n            '\\f': '\\\\f',\n            '\\r': '\\\\r',\n            '\"' : '\\\\\"',\n            '\\\\': '\\\\\\\\'\n        },\n        rep;\n\n\n    function quote(string) {\n\n  // If the string contains no control characters, no quote characters, and no\n  // backslash characters, then we can safely slap some quotes around it.\n  // Otherwise we must also replace the offending characters with safe escape\n  // sequences.\n\n        escapable.lastIndex = 0;\n        return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n            var c = meta[a];\n            return typeof c === 'string' ? c :\n                '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n        }) + '\"' : '\"' + string + '\"';\n    }\n\n\n    function str(key, holder) {\n\n  // Produce a string from holder[key].\n\n        var i,          // The loop counter.\n            k,          // The member key.\n            v,          // The member value.\n            length,\n            mind = gap,\n            partial,\n            value = holder[key];\n\n  // If the value has a toJSON method, call it to obtain a replacement value.\n\n        if (value instanceof Date) {\n            value = date(key);\n        }\n\n  // If we were called with a replacer function, then call the replacer to\n  // obtain a replacement value.\n\n        if (typeof rep === 'function') {\n            value = rep.call(holder, key, value);\n        }\n\n  // What happens next depends on the value's type.\n\n        switch (typeof value) {\n        case 'string':\n            return quote(value);\n\n        case 'number':\n\n  // JSON numbers must be finite. Encode non-finite numbers as null.\n\n            return isFinite(value) ? String(value) : 'null';\n\n        case 'boolean':\n        case 'null':\n\n  // If the value is a boolean or null, convert it to a string. Note:\n  // typeof null does not produce 'null'. The case is included here in\n  // the remote chance that this gets fixed someday.\n\n            return String(value);\n\n  // If the type is 'object', we might be dealing with an object or an array or\n  // null.\n\n        case 'object':\n\n  // Due to a specification blunder in ECMAScript, typeof null is 'object',\n  // so watch out for that case.\n\n            if (!value) {\n                return 'null';\n            }\n\n  // Make an array to hold the partial results of stringifying this object value.\n\n            gap += indent;\n            partial = [];\n\n  // Is the value an array?\n\n            if (Object.prototype.toString.apply(value) === '[object Array]') {\n\n  // The value is an array. Stringify every element. Use null as a placeholder\n  // for non-JSON values.\n\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || 'null';\n                }\n\n  // Join all of the elements together, separated with commas, and wrap them in\n  // brackets.\n\n                v = partial.length === 0 ? '[]' : gap ?\n                    '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' :\n                    '[' + partial.join(',') + ']';\n                gap = mind;\n                return v;\n            }\n\n  // If the replacer is an array, use it to select the members to be stringified.\n\n            if (rep && typeof rep === 'object') {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    if (typeof rep[i] === 'string') {\n                        k = rep[i];\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            } else {\n\n  // Otherwise, iterate through all of the keys in the object.\n\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            }\n\n  // Join all of the member texts together, separated with commas,\n  // and wrap them in braces.\n\n            v = partial.length === 0 ? '{}' : gap ?\n                '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}' :\n                '{' + partial.join(',') + '}';\n            gap = mind;\n            return v;\n        }\n    }\n\n  // If the JSON object does not yet have a stringify method, give it one.\n\n    JSON.stringify = function (value, replacer, space) {\n\n  // The stringify method takes a value and an optional replacer, and an optional\n  // space parameter, and returns a JSON text. The replacer can be a function\n  // that can replace values, or an array of strings that will select the keys.\n  // A default replacer method can be provided. Use of the space parameter can\n  // produce text that is more easily readable.\n\n        var i;\n        gap = '';\n        indent = '';\n\n  // If the space parameter is a number, make an indent string containing that\n  // many spaces.\n\n        if (typeof space === 'number') {\n            for (i = 0; i < space; i += 1) {\n                indent += ' ';\n            }\n\n  // If the space parameter is a string, it will be used as the indent string.\n\n        } else if (typeof space === 'string') {\n            indent = space;\n        }\n\n  // If there is a replacer, it must be a function or an array.\n  // Otherwise, throw an error.\n\n        rep = replacer;\n        if (replacer && typeof replacer !== 'function' &&\n                (typeof replacer !== 'object' ||\n                typeof replacer.length !== 'number')) {\n            throw new Error('JSON.stringify');\n        }\n\n  // Make a fake root object containing our value under the key of ''.\n  // Return the result of stringifying the value.\n\n        return str('', {'': value});\n    };\n\n  // If the JSON object does not yet have a parse method, give it one.\n\n    JSON.parse = function (text, reviver) {\n    // The parse method takes a text and an optional reviver function, and returns\n    // a JavaScript value if the text is a valid JSON text.\n\n        var j;\n\n        function walk(holder, key) {\n\n    // The walk method is used to recursively walk the resulting structure so\n    // that modifications can be made.\n\n            var k, v, value = holder[key];\n            if (value && typeof value === 'object') {\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = walk(value, k);\n                        if (v !== undefined) {\n                            value[k] = v;\n                        } else {\n                            delete value[k];\n                        }\n                    }\n                }\n            }\n            return reviver.call(holder, key, value);\n        }\n\n\n    // Parsing happens in four stages. In the first stage, we replace certain\n    // Unicode characters with escape sequences. JavaScript handles many characters\n    // incorrectly, either silently deleting them, or treating them as line endings.\n\n        text = String(text);\n        cx.lastIndex = 0;\n        if (cx.test(text)) {\n            text = text.replace(cx, function (a) {\n                return '\\\\u' +\n                    ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n            });\n        }\n\n    // In the second stage, we run the text against regular expressions that look\n    // for non-JSON patterns. We are especially concerned with '()' and 'new'\n    // because they can cause invocation, and '=' because it can cause mutation.\n    // But just to be safe, we want to reject all unexpected forms.\n\n    // We split the second stage into 4 regexp operations in order to work around\n    // crippling inefficiencies in IE's and Safari's regexp engines. First we\n    // replace the JSON backslash pairs with '@' (a non-JSON character). Second, we\n    // replace all simple value tokens with ']' characters. Third, we delete all\n    // open brackets that follow a colon or comma or that begin the text. Finally,\n    // we look to see that the remaining characters are only whitespace or ']' or\n    // ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.\n\n        if (/^[\\],:{}\\s]*$/\n                .test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')\n                    .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']')\n                    .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\n\n    // In the third stage we use the eval function to compile the text into a\n    // JavaScript structure. The '{' operator is subject to a syntactic ambiguity\n    // in JavaScript: it can begin a block or an object literal. We wrap the text\n    // in parens to eliminate the ambiguity.\n\n            j = eval('(' + text + ')');\n\n    // In the optional fourth stage, we recursively walk the new structure, passing\n    // each name/value pair to a reviver function for possible transformation.\n\n            return typeof reviver === 'function' ?\n                walk({'': j}, '') : j;\n        }\n\n    // If the text is not JSON parseable, then a SyntaxError is thrown.\n\n        throw new SyntaxError('JSON.parse');\n    };\n\n    return JSON;\n  })();\n\n  if ('undefined' != typeof window) {\n    window.expect = module.exports;\n  }\n\n})(\n    this\n  , 'undefined' != typeof module ? module : {exports: {}}\n);\n","import { ensure, it } from \"../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\n\r\nexport class ClassUtils {\r\n    private static _classMap: ClassMapData = {};\r\n\r\n    @ensure(function(className: string) {\r\n        it(\"should get class name from objInstance\", () => {\r\n            expect(className).exist;\r\n            expect(className !== \"\").true\r\n        });\r\n    })\r\n    public static getClassNameByInstance(obj: any) {\r\n        return obj.constructor[\"className\"];\r\n    }\r\n\r\n    public static addClass(className: string, _class: any) {\r\n        this._classMap[className] = _class;\r\n    }\r\n\r\n    public static addClassNameAttributeToClass(className: string, _class: any) {\r\n        _class[\"className\"] = className;\r\n    }\r\n\r\n    public static getClass(className: string) {\r\n        return this._classMap[className];\r\n    }\r\n}\r\n\r\ntype ClassMapData = {\r\n    [className: string]: any;\r\n}\r\n","import { ClassUtils } from \"../../../utils/ClassUtils\";\r\n\r\nexport function registerClass(className: string) {\r\n    return function(_class) {\r\n        ClassUtils.addClassNameAttributeToClass(className, _class);\r\n        ClassUtils.addClass(className, _class);\r\n    }\r\n}","export const $BREAK = {\r\n    break: true\r\n};\r\nexport const $REMOVE = void 0;","import { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { $BREAK } from \"./global/Const\";\r\n\r\nexport class List<T> {\r\n    protected children: Array<T> = null;\r\n\r\n    public getCount(): number {\r\n        return this.children.length;\r\n    }\r\n\r\n    public hasChild(child: any): boolean {\r\n        var c: any = null,\r\n            children = this.children;\r\n\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            c = children[i];\r\n\r\n            if (child.uid && c.uid && child.uid == c.uid) {\r\n                return true;\r\n            }\r\n            else if (child === c) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public hasChildWithFunc(func: Function): boolean {\r\n        for (let i = 0, len = this.children.length; i < len; i++) {\r\n            if (func(this.children[i], i)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n\r\n    public getChildren() {\r\n        return this.children;\r\n    }\r\n\r\n    public getChild(index: number) {\r\n        return this.children[index];\r\n    }\r\n\r\n    public addChild(child: T) {\r\n        this.children.push(child);\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChildren(arg: Array<T> | List<T> | any) {\r\n        if (JudgeUtils.isArray(arg)) {\r\n            let children: Array<T> = arg;\r\n\r\n            this.children = this.children.concat(children);\r\n        }\r\n        else if (arg instanceof List) {\r\n            let children: List<T> = arg;\r\n\r\n            this.children = this.children.concat(children.getChildren());\r\n        }\r\n        else {\r\n            let child: any = arg;\r\n\r\n            this.addChild(child);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    //todo test\r\n    public setChildren(children: Array<T>) {\r\n        this.children = children;\r\n\r\n        return this;\r\n    }\r\n\r\n    public unShiftChild(child: T) {\r\n        this.children.unshift(child);\r\n    }\r\n\r\n    public removeAllChildren() {\r\n        this.children = [];\r\n\r\n        return this;\r\n    }\r\n\r\n    public forEach(func: Function, context?: any) {\r\n        this._forEach(this.children, func, context);\r\n\r\n        return this;\r\n    }\r\n\r\n    //public removeChildAt (index) {\r\n    //    Log.error(index < 0, \"序号必须大于等于0\");\r\n    //\r\n    //    this.children.splice(index, 1);\r\n    //}\r\n    //\r\n\r\n    public toArray() {\r\n        return this.children;\r\n    }\r\n\r\n    protected copyChildren() {\r\n        return this.children.slice(0);\r\n    }\r\n\r\n    protected removeChildHelper(arg: any): Array<T> {\r\n        var result = null;\r\n\r\n        if (JudgeUtils.isFunction(arg)) {\r\n            let func = <Function>arg;\r\n\r\n            result = this._removeChild(this.children, func);\r\n        }\r\n        else if (arg.uid) {\r\n            result = this._removeChild(this.children, (e) => {\r\n                if (!e.uid) {\r\n                    return false;\r\n                }\r\n                return e.uid === arg.uid;\r\n            });\r\n        }\r\n        else {\r\n            result = this._removeChild(this.children, (e) => {\r\n                return e === arg;\r\n            });\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private _forEach(arr: T[], func: Function, context?: any) {\r\n        var scope = context,\r\n            i = 0,\r\n            len = arr.length;\r\n\r\n\r\n        for (i = 0; i < len; i++) {\r\n            if (func.call(scope, arr[i], i) === $BREAK) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _removeChild(arr: T[], func: Function) {\r\n        var self = this,\r\n            removedElementArr = [],\r\n            remainElementArr = [];\r\n\r\n        this._forEach(arr, (e, index) => {\r\n            if (!!func.call(self, e)) {\r\n                removedElementArr.push(e);\r\n            }\r\n            else {\r\n                remainElementArr.push(e);\r\n            }\r\n        });\r\n\r\n        this.children = remainElementArr;\r\n\r\n        return removedElementArr;\r\n    }\r\n}","import { JudgeUtils } from \"./JudgeUtils\";\r\n\r\nexport class ExtendUtils {\r\n    /**\r\n     * 深拷贝\r\n     *\r\n     * 示例：\r\n     * 如果拷贝对象为数组，能够成功拷贝（不拷贝Array原型链上的成员）\r\n     * expect(extend.extendDeep([1, { x: 1, y: 1 }, \"a\", { x: 2 }, [2]])).toEqual([1, { x: 1, y: 1 }, \"a\", { x: 2 }, [2]]);\r\n     *\r\n     * 如果拷贝对象为对象，能够成功拷贝（能拷贝原型链上的成员）\r\n     * var result = null;\r\n     function A() {\r\n            };\r\n     A.prototype.a = 1;\r\n\r\n     function B() {\r\n            };\r\n     B.prototype = new A();\r\n     B.prototype.b = { x: 1, y: 1 };\r\n     B.prototype.c = [{ x: 1 }, [2]];\r\n\r\n     var t = new B();\r\n\r\n     result = extend.extendDeep(t);\r\n\r\n     expect(result).toEqual(\r\n     {\r\n         a: 1,\r\n         b: { x: 1, y: 1 },\r\n         c: [{ x: 1 }, [2]]\r\n     });\r\n     * @param parent\r\n     * @param child\r\n     * @returns\r\n     */\r\n    public static extendDeep(parent, child?, filter = function(val, i) { return true; }) {\r\n        var i = null,\r\n            len = 0,\r\n            toStr = Object.prototype.toString,\r\n            sArr = \"[object Array]\",\r\n            sOb = \"[object Object]\",\r\n            type = \"\",\r\n            _child = null;\r\n\r\n        //数组的话，不获得Array原型上的成员。\r\n        if (toStr.call(parent) === sArr) {\r\n            _child = child || [];\r\n\r\n            for (i = 0, len = parent.length; i < len; i++) {\r\n                let member = parent[i];\r\n\r\n                if (!filter(member, i)) {\r\n                    continue;\r\n                }\r\n\r\n                if (member.clone) {\r\n                    _child[i] = member.clone();\r\n                    continue;\r\n                }\r\n\r\n                type = toStr.call(member);\r\n                if (type === sArr || type === sOb) {    //如果为数组或object对象\r\n                    _child[i] = type === sArr ? [] : {};\r\n                    ExtendUtils.extendDeep(member, _child[i]);\r\n                } else {\r\n                    _child[i] = member;\r\n                }\r\n            }\r\n        }\r\n        //对象的话，要获得原型链上的成员。因为考虑以下情景：\r\n        //类A继承于类B，现在想要拷贝类A的实例a的成员（包括从类B继承来的成员），那么就需要获得原型链上的成员。\r\n        else if (toStr.call(parent) === sOb) {\r\n            _child = child || {};\r\n\r\n            for (i in parent) {\r\n                let member = parent[i];\r\n\r\n                if (!filter(member, i)) {\r\n                    continue;\r\n                }\r\n\r\n                if (member.clone) {\r\n                    _child[i] = member.clone();\r\n                    continue;\r\n                }\r\n\r\n                type = toStr.call(member);\r\n                if (type === sArr || type === sOb) {    //如果为数组或object对象\r\n                    _child[i] = type === sArr ? [] : {};\r\n                    ExtendUtils.extendDeep(member, _child[i]);\r\n                } else {\r\n                    _child[i] = member;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            _child = parent;\r\n        }\r\n\r\n        return _child;\r\n    }\r\n\r\n    /**\r\n     * 浅拷贝\r\n     */\r\n    public static extend(destination: any, source: any) {\r\n        var property = \"\";\r\n\r\n        for (property in source) {\r\n            destination[property] = source[property];\r\n        }\r\n        return destination;\r\n    }\r\n\r\n    public static copyPublicAttri(source: any) {\r\n        var property = null,\r\n            destination = {};\r\n\r\n        this.extendDeep(source, destination, function(item, property) {\r\n            return property.slice(0, 1) !== \"_\"\r\n                && !JudgeUtils.isFunction(item);\r\n        });\r\n\r\n        return destination;\r\n    }\r\n}","import { List } from \"./List\";\r\nimport { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { ExtendUtils } from \"./utils/ExtendUtils\";\r\nimport { $BREAK, $REMOVE } from \"./global/Const\";\r\n\r\nexport class Collection<T> extends List<T>{\r\n    public static create<T>(children = []) {\r\n        var obj = new this(<Array<T>>children);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(children: Array<T> = []) {\r\n        super();\r\n\r\n        this.children = children;\r\n    }\r\n\r\n    public clone();\r\n    public clone(isDeep: boolean);\r\n    public clone(target: Collection<T>);\r\n    public clone(target: Collection<T>, isDeep: boolean);\r\n\r\n    public clone(...args) {\r\n        var target: Collection<T> = null,\r\n            isDeep: boolean = null;\r\n\r\n        if (args.length === 0) {\r\n            isDeep = false;\r\n            target = Collection.create<T>();\r\n        }\r\n        else if (args.length === 1) {\r\n            if (JudgeUtils.isBoolean(args[0])) {\r\n                target = Collection.create<T>();\r\n                isDeep = args[0];\r\n            }\r\n            else {\r\n                target = args[0];\r\n                isDeep = false;\r\n            }\r\n        }\r\n        else {\r\n            target = args[0];\r\n            isDeep = args[1];\r\n        }\r\n\r\n        if (isDeep === true) {\r\n            target.setChildren(ExtendUtils.extendDeep(this.children));\r\n        }\r\n        else {\r\n            target.setChildren(ExtendUtils.extend([], this.children));\r\n        }\r\n\r\n        return target;\r\n    }\r\n\r\n    public filter(func: (value: T, index: number) => boolean): Collection<T> {\r\n        var children = this.children,\r\n            result = [],\r\n            value = null;\r\n\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            value = children[i];\r\n\r\n            if (func.call(children, value, i)) {\r\n                result.push(value);\r\n            }\r\n        }\r\n\r\n        return Collection.create<T>(result);\r\n    }\r\n\r\n    public findOne(func: (value: T, index: number) => boolean) {\r\n        var scope = this.children,\r\n            result: T = null;\r\n\r\n        this.forEach((value: T, index) => {\r\n            if (!func.call(scope, value, index)) {\r\n                return;\r\n            }\r\n\r\n            result = value;\r\n            return $BREAK;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public reverse() {\r\n        return Collection.create<T>(this.copyChildren().reverse());\r\n    }\r\n\r\n    public removeChild(arg: any) {\r\n        return Collection.create<T>(this.removeChildHelper(arg));\r\n    }\r\n\r\n    public sort(func: (a: T, b: T) => any, isSortSelf = false): Collection<T> {\r\n        if (isSortSelf) {\r\n            this.children.sort(func);\r\n\r\n            return this;\r\n        }\r\n\r\n        return Collection.create<T>(this.copyChildren().sort(func));\r\n    }\r\n\r\n    public map(func: (value: T, index: number) => any) {\r\n        var resultArr = [];\r\n\r\n        this.forEach((e, index) => {\r\n            var result = func(e, index);\r\n\r\n            if (result !== $REMOVE) {\r\n                resultArr.push(result);\r\n            }\r\n            //e && e[handlerName] && e[handlerName].apply(context || e, valueArr);\r\n        });\r\n\r\n        return Collection.create<any>(resultArr);\r\n    }\r\n\r\n    public removeRepeatItems() {\r\n        var noRepeatList = Collection.create<T>();\r\n\r\n        this.forEach((item: T) => {\r\n            if (noRepeatList.hasChild(item)) {\r\n                return;\r\n            }\r\n\r\n            noRepeatList.addChild(item);\r\n        });\r\n\r\n        return noRepeatList;\r\n    }\r\n\r\n    public hasRepeatItems() {\r\n        var noRepeatList = Collection.create<T>(),\r\n            hasRepeat: boolean = false;\r\n\r\n        this.forEach((item: T) => {\r\n            if (noRepeatList.hasChild(item)) {\r\n                hasRepeat = true;\r\n\r\n                return $BREAK;\r\n            }\r\n\r\n            noRepeatList.addChild(item);\r\n        });\r\n\r\n        return hasRepeat;\r\n    }\r\n}\r\n","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { JudgeUtils as JudgeUtils$ } from \"wonder-commonlib/dist/es2015/utils/JudgeUtils\";\r\nimport { Entity } from \"../core/Entity\";\r\nimport { Component } from \"../core/Component\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\n@registerClass(\"JudgeUtils\")\r\nexport class JudgeUtils extends JudgeUtils$ {\r\n    public static isView(obj) {\r\n        return !!obj && obj.offset && obj.width && obj.height && this.isFunction(obj.getContext);\r\n    }\r\n\r\n    public static isEqual(target1: any, target2: any) {\r\n        if ((!target1 && target2) || (target1 && !target2)) {\r\n            return false;\r\n        }\r\n\r\n        if (target1.uid && target2.uid) {\r\n            return target1.uid === target2.uid;\r\n        }\r\n\r\n        return target1 === target2;\r\n    }\r\n\r\n    public static isPowerOfTwo(value: number) {\r\n        return (value & (value - 1)) === 0 && value !== 0;\r\n    }\r\n\r\n    public static isFloatArray(data: any) {\r\n        return Object.prototype.toString.call(data) === \"[object Float32Array]\" || Object.prototype.toString.call(data) === \"[object Float16Array]\";\r\n    }\r\n\r\n    /*!\r\n    can't use \"target instanceof interface\"!\r\n\r\n    refer to:\r\n    http://stackoverflow.com/questions/14425568/interface-type-check-with-typescript\r\n     https://typescript.codeplex.com/discussions/401501\r\n     */\r\n    public static isInterface(target: any, memberOfInterface: string) {\r\n        return !!target[memberOfInterface];\r\n    }\r\n\r\n    // public static isSpacePartitionObject(entityObject:EntityObject){\r\n    //     return ClassUtils.hasComponent(entityObject, \"SpacePartition\");\r\n    // }\r\n\r\n    public static isSelf(self: Entity, entityObject: Entity) {\r\n        return self.uid === entityObject.uid;\r\n    }\r\n\r\n    public static isComponenet(component: Component) {\r\n        return component.entityObject !== void 0;\r\n    }\r\n\r\n    public static isDom(obj) {\r\n        return Object.prototype.toString.call(obj).match(/\\[object HTML\\w+/) !== null;\r\n    }\r\n\r\n    public static isCollection(list: Collection<any>) {\r\n        return list instanceof Collection;\r\n    }\r\n\r\n    public static isClass(objInstance: any, className: string) {\r\n        return objInstance.constructor.name === className;\r\n    }\r\n}","import { ClassUtils } from \"../../../utils/ClassUtils\";\r\nimport { assert, requireCheck } from \"./contract\";\r\nimport { Log } from \"../../../utils/Log\";\r\nimport { registerClass } from \"./registerClass\";\r\nimport { JudgeUtils } from \"../../../utils/JudgeUtils\";\r\nimport { EntityObject } from \"../../../core/entityObject/EntityObject\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\n\r\nconst NOT_CLONE_TAG = \"not_clone\";\r\n\r\nvar getCloneAttributeMembers = (obj: any) => {\r\n    return obj[buildMemberContainerAttributeName(obj)];\r\n};\r\n\r\nvar setCloneAttributeMembers = (obj: any, members: Collection<CloneMemberData>) => {\r\n    obj[buildMemberContainerAttributeName(obj)] = members;\r\n};\r\n\r\nvar searchCloneAttributeMembers = (obj: any) => {\r\n    const CLONE_MEMBER_PREFIX = \"__decorator_clone\";\r\n    var result = null;\r\n\r\n    for (let memberName in obj) {\r\n        if (obj.hasOwnProperty(memberName)) {\r\n            if (memberName.indexOf(CLONE_MEMBER_PREFIX) > -1) {\r\n                result = obj[memberName];\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\nvar getAllCloneAttributeMembers = (obj: any) => {\r\n    const IS_GATHERED_ATTRIBUTE_NAME = `__decorator_clone_isGathered_${ClassUtils.getClassNameByInstance(obj)}_cloneAttributeMembers`;\r\n    var result = Collection.create<CloneMemberData>();\r\n    var gather = (obj: any) => {\r\n        if (!obj) {\r\n            return;\r\n        }\r\n\r\n        if (obj[IS_GATHERED_ATTRIBUTE_NAME]) {\r\n            let members = getCloneAttributeMembers(obj);\r\n\r\n            assert(members, Log.info.FUNC_NOT_EXIST(`${buildMemberContainerAttributeName(obj)}`));\r\n\r\n            result.addChildren(members);\r\n            return;\r\n        }\r\n\r\n        gather(obj.__proto__);\r\n\r\n        /*! it should ensure the order is: parent members->child members\r\n         so here go to the top parent, then add the members to result down side\r\n         */\r\n\r\n        let members = searchCloneAttributeMembers(obj);\r\n        if (members) {\r\n            result.addChildren(members);\r\n        }\r\n    },\r\n        setGatheredResult = () => {\r\n            setCloneAttributeMembers(obj.__proto__, result);\r\n            obj.__proto__[IS_GATHERED_ATTRIBUTE_NAME] = true;\r\n        };\r\n\r\n    gather(obj.__proto__);\r\n    setGatheredResult();\r\n\r\n    return getCloneAttributeMembers(obj);\r\n};\r\n\r\nvar initCloneAttributeMembers = (obj: any) => {\r\n    setCloneAttributeMembers(obj, Collection.create<CloneMemberData>());\r\n};\r\n\r\nvar buildMemberContainerAttributeName = (obj: any) => {\r\n    return `__decorator_clone_${ClassUtils.getClassNameByInstance(obj)}_cloneAttributeMembers`;\r\n};\r\n\r\nvar generateCloneableMember = (cloneType: CloneType, ...cloneDataArr) => {\r\n    return (target: any, memberName: string | symbol) => {\r\n        if (!getCloneAttributeMembers(target)) {\r\n            initCloneAttributeMembers(target);\r\n        }\r\n\r\n        if (cloneDataArr.length === 1) {\r\n            getCloneAttributeMembers(target).addChild({\r\n                memberName: memberName,\r\n                cloneType: cloneType,\r\n                configData: cloneDataArr[0]\r\n            });\r\n        }\r\n        else if (cloneDataArr.length === 2) {\r\n\r\n            getCloneAttributeMembers(target).addChild({\r\n                memberName: memberName,\r\n                cloneType: cloneType,\r\n                cloneFunc: cloneDataArr[0],\r\n                configData: cloneDataArr[1]\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport function cloneAttributeAsBasicType(configData?: CloneAttributeAsBasicTypeConfigData) {\r\n    return generateCloneableMember(CloneType.BASIC, ExtendUtils.extend({\r\n        order: 0\r\n    }, configData));\r\n}\r\n\r\nexport function cloneAttributeAsCloneable(configData?: CloneAttributeAsCloneableConfigData) {\r\n    return generateCloneableMember(CloneType.CLONEABLE, ExtendUtils.extend({\r\n        order: 0\r\n    }, configData));\r\n}\r\n\r\nexport function cloneAttributeAsCustomType(cloneFunc: (source: any, target: any, memberName: string, cloneData: any) => void, configData?: CloneAttributeAsCustomTypeConfigData) {\r\n    return generateCloneableMember(CloneType.CUSTOM, cloneFunc, ExtendUtils.extend({\r\n        order: 0\r\n    }, configData));\r\n}\r\n\r\n@registerClass(\"CloneUtils\")\r\nexport class CloneUtils {\r\n    @requireCheck(function(source: any, cloneData: any = null, createDataArr: Array<any> = null) {\r\n        if (createDataArr) {\r\n            assert(JudgeUtils.isArrayExactly(createDataArr), Log.info.FUNC_MUST_BE(\"param:createDataArr\", \"be arr\"));\r\n        }\r\n    })\r\n    public static clone<T>(sourceInstance: T, cloneData: any = null, createDataArr: Array<any> = null, target: any = null): T {\r\n        var cloneAttributeMembers: Collection<CloneMemberData> = getAllCloneAttributeMembers(sourceInstance)\r\n            .sort((memberDataA: any, memberDataB: any) => {\r\n                return memberDataA.configData.order - memberDataB.configData.order;\r\n            }),\r\n            className = ClassUtils.getClassNameByInstance(sourceInstance);\r\n\r\n        if (target === null) {\r\n            if (createDataArr) {\r\n                let _class = ClassUtils.getClass(className);\r\n\r\n                target = _class.create.apply(_class, createDataArr);\r\n            }\r\n            else {\r\n                target = ClassUtils.getClass(className).create();\r\n            }\r\n        }\r\n\r\n        if (!cloneAttributeMembers) {\r\n            return target;\r\n        }\r\n\r\n        cloneAttributeMembers.forEach((memberData: any) => {\r\n            var cloneType = memberData.cloneType,\r\n                memberName = memberData.memberName;\r\n\r\n            switch (cloneType) {\r\n                case CloneType.CLONEABLE:\r\n                    if (sourceInstance[memberName] !== null && sourceInstance[memberName] !== void 0) {\r\n                        if (target[memberName] !== null) {\r\n                            target[memberName] = sourceInstance[memberName].clone(target[memberName]);\r\n                        }\r\n                        else {\r\n                            target[memberName] = sourceInstance[memberName].clone();\r\n                        }\r\n                    }\r\n                    break;\r\n                case CloneType.BASIC:\r\n                    target[memberName] = sourceInstance[memberName];\r\n                    break;\r\n                case CloneType.CUSTOM:\r\n                    let cloneFunc = memberData.cloneFunc;\r\n\r\n                    cloneFunc.call(target, sourceInstance, target, memberName, cloneData);\r\n                    break;\r\n            }\r\n        });\r\n\r\n        return target;\r\n    }\r\n\r\n    public static cloneArray(arr: Array<any> | null, isDeep: boolean = false) {\r\n        if (arr === null) {\r\n            return null;\r\n        }\r\n\r\n        if (isDeep) {\r\n            return ExtendUtils.extendDeep(arr);\r\n        }\r\n\r\n        return [].concat(arr);\r\n    }\r\n\r\n    public static markNotClone(entityObject: EntityObject) {\r\n        if (!entityObject.hasTag(NOT_CLONE_TAG)) {\r\n            entityObject.addTag(NOT_CLONE_TAG);\r\n        }\r\n    }\r\n\r\n    public static isNotClone(entityObject: EntityObject) {\r\n        return entityObject.hasTag(NOT_CLONE_TAG);\r\n    }\r\n}\r\n\r\ntype CloneMemberData = {\r\n    memberName: string,\r\n    cloneType: CloneType,\r\n    cloneDataArr: Array<any>\r\n}\r\n\r\nexport type CloneAttributeAsBasicTypeConfigData = {\r\n    order?: number;\r\n}\r\n\r\nexport type CloneAttributeAsCloneableConfigData = {\r\n    order?: number;\r\n}\r\n\r\nexport type CloneAttributeAsCustomTypeConfigData = {\r\n    order?: number;\r\n}\r\n\r\nexport enum CloneType {\r\n    CLONEABLE,\r\n    BASIC,\r\n    CUSTOM\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n@registerClass(\"Vector2\")\r\nexport class Vector2 {\r\n    public static create(x, y): Vector2;\r\n    public static create(): Vector2;\r\n\r\n    public static create(...args): Vector2 {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0], args[1]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(x, y);\r\n    constructor();\r\n    constructor(...args) {\r\n        this.values = new Float32Array(2);\r\n\r\n        if (args.length > 0) {\r\n            this.values[0] = args[0];\r\n            this.values[1] = args[1];\r\n        }\r\n    }\r\n\r\n    get x() {\r\n        return this.values[0];\r\n    }\r\n    set x(x: number) {\r\n        this.values[0] = x;\r\n    }\r\n\r\n    get y() {\r\n        return this.values[1];\r\n    }\r\n    set y(y: number) {\r\n        this.values[1] = y;\r\n    }\r\n\r\n    public values: Float32Array;\r\n\r\n    public set(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    public add(v: Vector2) {\r\n        this.values[0] = this.values[0] + v.values[0];\r\n        this.values[1] = this.values[1] + v.values[1];\r\n\r\n        return this;\r\n    }\r\n\r\n    public mul(v: Vector2) {\r\n        this.values[0] = this.values[0] * v.values[0];\r\n        this.values[1] = this.values[1] * v.values[1];\r\n\r\n        return this;\r\n    }\r\n\r\n    public isEqual(v: Vector2) {\r\n        return this.x === v.x && this.y === v.y;\r\n    }\r\n\r\n    public clone() {\r\n        return Vector2.create(this.x, this.y);\r\n    }\r\n}","declare var Math: any;\r\n\r\n/**\r\n * @name DEG_TO_RAD\r\n * @description Conversion factor between degrees and radians\r\n * @type Number\r\n * @example\r\n * // Convert 180 degrees to pi radians\r\n * var rad = 180 * DEG_TO_RAD;\r\n */\r\nexport const DEG_TO_RAD = Math.PI / 180;\r\n\r\n/**\r\n * @name RAD_TO_DEG\r\n * @description Conversion factor between degrees and radians\r\n * @type Number\r\n * @example\r\n * // Convert pi radians to 180 degrees\r\n * var deg = Math.PI * RAD_TO_DEG;\r\n */\r\nexport const RAD_TO_DEG = 180 / Math.PI;","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector2 } from \"./Vector2\";\r\nimport { DEG_TO_RAD } from \"./Global\";\r\n\r\n@registerClass(\"Matrix3\")\r\nexport class Matrix3 {\r\n    public static create(mat: Float32Array): Matrix3;\r\n    public static create(): Matrix3;\r\n\r\n    public static create(...args): Matrix3 {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(mat: Float32Array);\r\n    constructor();\r\n\r\n    constructor(...args) {\r\n        if (args.length === 1) {\r\n            this.values = args[0];\r\n        }\r\n        else {\r\n            this.values = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);\r\n        }\r\n    }\r\n\r\n    get a(): number {\r\n        return this.values[0];\r\n    }\r\n    set a(a: number) {\r\n        this.values[0] = a;\r\n    }\r\n\r\n    get c(): number {\r\n        return this.values[1];\r\n    }\r\n    set c(c: number) {\r\n        this.values[1] = c;\r\n    }\r\n\r\n    get b(): number {\r\n        return this.values[3];\r\n    }\r\n    set b(b: number) {\r\n        this.values[3] = b;\r\n    }\r\n\r\n    get d(): number {\r\n        return this.values[4];\r\n    }\r\n    set d(d: number) {\r\n        this.values[4] = d;\r\n    }\r\n\r\n    get tx(): number {\r\n        return this.values[6];\r\n    }\r\n    set tx(tx: number) {\r\n        this.values[6] = tx;\r\n    }\r\n\r\n    get ty(): number {\r\n        return this.values[7];\r\n    }\r\n    set ty(ty: number) {\r\n        this.values[7] = ty;\r\n    }\r\n\r\n    public values: Float32Array = null;\r\n\r\n    public setIdentity(): Matrix3 {\r\n        var e = this.values;\r\n\r\n        e[0] = 1;\r\n        e[3] = 0;\r\n        e[6] = 0;\r\n        e[1] = 0;\r\n        e[4] = 1;\r\n        e[7] = 0;\r\n        e[2] = 0;\r\n        e[5] = 0;\r\n        e[8] = 1;\r\n\r\n        return this;\r\n    }\r\n\r\n    public invert(): Matrix3 {\r\n        var a1 = this.values[0];\r\n        var b1 = this.values[1];\r\n        var c1 = this.values[3];\r\n        var d1 = this.values[4];\r\n        var tx1 = this.values[6];\r\n        var ty1 = this.values[7];\r\n        var n = a1 * d1 - b1 * c1;\r\n\r\n        this.values[0] = d1 / n;\r\n        this.values[1] = -b1 / n;\r\n        this.values[3] = -c1 / n;\r\n        this.values[4] = a1 / n;\r\n        this.values[6] = (c1 * ty1 - d1 * tx1) / n;\r\n        this.values[7] = -(a1 * ty1 - b1 * tx1) / n;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiplyScalar(s: number) {\r\n        var te = this.values;\r\n\r\n        te[0] *= s;\r\n        te[3] *= s;\r\n        te[6] *= s;\r\n        te[1] *= s;\r\n        te[4] *= s;\r\n        te[7] *= s;\r\n        te[2] *= s;\r\n        te[5] *= s;\r\n        te[8] *= s;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiplyVector2(vector: Vector2) {\r\n        var x = vector.x,\r\n            y = vector.y,\r\n            result = Vector2.create(),\r\n            e = this.values;\r\n\r\n        result.x = e[0] * x + e[3] * y;\r\n        result.y = e[1] * x + e[4] * y;\r\n\r\n        return result;\r\n    }\r\n\r\n    public multiplyPoint(vector: Vector2) {\r\n        var x = vector.x,\r\n            y = vector.y,\r\n            result = Vector2.create(),\r\n            e = this.values;\r\n\r\n        result.x = e[0] * x + e[3] * y + this.tx;\r\n        result.y = e[1] * x + e[4] * y + this.ty;\r\n\r\n        return result;\r\n    }\r\n\r\n    public multiply(matrix: Matrix3) {\r\n        var m11 = this.a * matrix.a + this.c * matrix.b;\r\n        var m12 = this.b * matrix.a + this.d * matrix.b;\r\n\r\n        var m21 = this.a * matrix.c + this.c * matrix.d;\r\n        var m22 = this.b * matrix.c + this.d * matrix.d;\r\n\r\n        var dx = this.a * matrix.tx + this.c * matrix.ty + this.tx;\r\n        var dy = this.b * matrix.tx + this.d * matrix.ty + this.ty;\r\n\r\n        this.a = m11;\r\n        this.b = m12;\r\n        this.c = m21;\r\n        this.d = m22;\r\n        this.tx = dx;\r\n        this.ty = dy;\r\n\r\n        return this;\r\n    }\r\n\r\n    public transpose(): Matrix3 {\r\n        var tmp, m = this.values;\r\n\r\n        tmp = m[1];\r\n        m[1] = m[3];\r\n        m[3] = tmp;\r\n        tmp = m[2];\r\n        m[2] = m[6];\r\n        m[6] = tmp;\r\n        tmp = m[5];\r\n        m[5] = m[7];\r\n        m[7] = tmp;\r\n\r\n        return this;\r\n    }\r\n\r\n    public clone() {\r\n        return Matrix3.create().set(this);\r\n    }\r\n\r\n    public cloneToArray(array: Float32Array, offset: number = 0): Matrix3 {\r\n        var values = this.values;\r\n\r\n        for (let index = 0; index < 9; index++) {\r\n            array[offset + index] = values[index];\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public set(matrix: Matrix3) {\r\n        var te = this.values,\r\n            values = matrix.values;\r\n\r\n        te[0] = values[0]; te[3] = values[3]; te[6] = values[6];\r\n        te[1] = values[1]; te[4] = values[4]; te[7] = values[7];\r\n        te[2] = values[2]; te[5] = values[5]; te[8] = values[8];\r\n\r\n        return this;\r\n    }\r\n\r\n    public setTS(t: Vector2, s: Vector2) {\r\n        this.setPosition(t.x, t.y);\r\n        this.setScale(s.x, s.y);\r\n    }\r\n\r\n    public rotate(angle: number) {\r\n        var rad = angle * DEG_TO_RAD;\r\n        var c = Math.cos(rad);\r\n        var s = Math.sin(rad);\r\n        var m11 = this.a * c + this.c * s;\r\n        var m12 = this.b * c + this.d * s;\r\n        var m21 = this.a * -s + this.c * c;\r\n        var m22 = this.b * -s + this.d * c;\r\n        this.a = m11;\r\n        this.b = m12;\r\n        this.c = m21;\r\n        this.d = m22;\r\n\r\n        //var rad = angle * DEG_TO_RAD;\r\n        //\r\n        //var cos_a = Math.cos(rad);\r\n        //var sin_a = Math.sin(rad);\r\n        //\r\n        //var values = this.values;\r\n        //\r\n        //\r\n        //var m00 = values[0];\r\n        //var m10 = values[1];\r\n        //var m20 = values[2];\r\n        //\r\n        //var m01 = values[3];\r\n        //var m11 = values[4];\r\n        //var m21 = values[5];\r\n        //\r\n        //var m02 = values[6];\r\n        //var m12 = values[7];\r\n        //var m22 = values[8];\r\n        //\r\n        //values[0] = cos_a * m00 - sin_a * m10;\r\n        //values[1] = sin_a * m00 + cos_a * m10;\r\n        //\r\n        //values[3] = cos_a * m01 - sin_a * m11;\r\n        //values[4] = sin_a * m01 + cos_a * m11;\r\n        //\r\n        //values[6] = cos_a * m02 - sin_a * m12;\r\n        //values[7] = sin_a * m02 + cos_a * m12;\r\n\r\n        return this;\r\n    }\r\n\r\n    public setRotation(angle: number) {\r\n        var rad = angle * DEG_TO_RAD;\r\n\r\n        var cos_a = Math.cos(rad);\r\n        var sin_a = Math.sin(rad);\r\n        var values = this.values;\r\n\r\n        //values[0] = cos_a;\r\n        //values[1] = sin_a;\r\n        //\r\n        //values[3] = -sin_a;\r\n        //values[4] = cos_a;\r\n        values[0] = cos_a;\r\n        values[1] = -sin_a;\r\n\r\n        values[3] = sin_a;\r\n        values[4] = cos_a;\r\n\r\n        return this;\r\n    }\r\n\r\n    public translate(x: number, y: number) {\r\n        this.tx += this.a * x + this.c * y;\r\n        this.ty += this.b * x + this.d * y;\r\n    }\r\n\r\n    public setPosition(x: number, y: number) {\r\n        this.tx = x;\r\n        this.ty = y;\r\n    }\r\n\r\n    public scale(x: number, y: number) {\r\n        this.a *= x;\r\n        this.b *= x;\r\n        this.c *= y;\r\n        this.d *= y;\r\n\r\n        //var values = this.values;\r\n        //\r\n        //values[0] *= x;\r\n        //values[1] *= x;\r\n        //values[2] *= x;\r\n        //\r\n        //values[3] *= y;\r\n        //values[4] *= y;\r\n        //values[5] *= y;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public setScale(x: number, y: number) {\r\n        var values = this.values;\r\n\r\n        values[0] = x;\r\n        values[4] = y;\r\n\r\n        return this;\r\n    }\r\n\r\n    public getTranslation() {\r\n        return Vector2.create(this.tx, this.ty);\r\n    }\r\n\r\n    public getScale() {\r\n        return Vector2.create(\r\n            Math.sqrt(this.a * this.a + this.b * this.b),\r\n            Math.sqrt(this.c * this.c + this.d * this.d)\r\n        );\r\n    }\r\n\r\n    public getRotation() {\r\n        return this._getSkewX();\r\n    }\r\n\r\n    public getSkew() {\r\n        return Vector2.create(\r\n            this._getSkewX(),\r\n            this._getSkewY()\r\n        );\r\n    }\r\n\r\n    private _getDeltaTransformPoint(matrix: Matrix3, point: { x: number, y: number }) {\r\n        return {\r\n            x: point.x * matrix.a + point.y * matrix.c + 0,\r\n            y: point.x * matrix.b + point.y * matrix.d + 0\r\n        };\r\n    }\r\n\r\n    private _getSkewX() {\r\n        var px = this._getDeltaTransformPoint(this, { x: 0, y: 1 });\r\n\r\n        return ((180 / Math.PI) * Math.atan2(px.y, px.x) - 90);\r\n    }\r\n\r\n    private _getSkewY() {\r\n        var py = this._getDeltaTransformPoint(this, { x: 1, y: 0 });\r\n\r\n        return ((180 / Math.PI) * Math.atan2(py.y, py.x));\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector3 } from \"./Vector3\";\r\n\r\ndeclare var Math: any;\r\n\r\n@registerClass(\"Vector4\")\r\nexport class Vector4 {\r\n    public static create(x, y, z, w);\r\n    public static create();\r\n\r\n    public static create(...args) {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0], args[1], args[2], args[3]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(x, y, z, w);\r\n    constructor();\r\n\r\n    constructor(...args) {\r\n        this.values = new Float32Array(4);\r\n\r\n        if (args.length > 0) {\r\n            this.values[0] = args[0];\r\n            this.values[1] = args[1];\r\n            this.values[2] = args[2];\r\n            this.values[3] = args[3];\r\n        }\r\n    }\r\n\r\n    get x() {\r\n        return this.values[0];\r\n    }\r\n    set x(x: number) {\r\n        this.values[0] = x;\r\n    }\r\n\r\n    get y() {\r\n        return this.values[1];\r\n    }\r\n    set y(y: number) {\r\n        this.values[1] = y;\r\n    }\r\n\r\n    get z() {\r\n        return this.values[2];\r\n    }\r\n    set z(z: number) {\r\n        this.values[2] = z;\r\n    }\r\n\r\n    get w() {\r\n        return this.values[3];\r\n    }\r\n    set w(w: number) {\r\n        this.values[3] = w;\r\n    }\r\n\r\n    public values: Float32Array;\r\n\r\n    public normalize(): Vector4 {\r\n        var v = this.values;\r\n        var d = Math.sqrt(\r\n            v[0] * v[0] + v[1] * v[1] + v[2] * v[2] + v[3] * v[3]\r\n        );\r\n\r\n        if (d === 0) {\r\n            return Vector4.create(0, 0, 0, 0);\r\n        }\r\n\r\n        v[0] = v[0] / d;\r\n        v[1] = v[1] / d;\r\n        v[2] = v[2] / d;\r\n        v[3] = v[3] / d;\r\n\r\n        return this;\r\n    }\r\n\r\n    public isEqual(v: Vector4) {\r\n        return this.x === v.x && this.y === v.y && this.z === v.z && this.w === v.w;\r\n    }\r\n\r\n    public clone(): Vector4 {\r\n        return this.copyHelper(Vector4.create());\r\n    }\r\n\r\n    public toVector3(): Vector3 {\r\n        return Vector3.create(this.values[0], this.values[1], this.values[2]);\r\n    }\r\n\r\n    public lengthManhattan() {\r\n        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);\r\n    }\r\n\r\n    public multiplyScalar(scalar: number) {\r\n        this.x *= scalar;\r\n        this.y *= scalar;\r\n        this.z *= scalar;\r\n        this.w *= scalar;\r\n\r\n        return this;\r\n    }\r\n\r\n    public dot(v: Vector4) {\r\n        return this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n    }\r\n\r\n    public set(x: number, y: number, z: number, w: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n    }\r\n\r\n\r\n\r\n    protected copyHelper(vector4: Vector4): any {\r\n        var result = vector4,\r\n            i = 0,\r\n            len = this.values.length;\r\n\r\n        for (i = 0; i < len; i++) {\r\n            result.values[i] = this.values[i];\r\n        }\r\n\r\n        return result;\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector4 } from \"./Vector4\";\r\nimport { Matrix3 } from \"./Matrix3\";\r\nimport { Matrix4 } from \"./Matrix4\";\r\n\r\ndeclare var Math: any;\r\n\r\n@registerClass(\"Vector3\")\r\nexport class Vector3 {\r\n    public static up = null;\r\n    public static forward = null;\r\n    public static right = null;\r\n\r\n    public static create(x: number, y: number, z: number): Vector3;\r\n    public static create(): Vector3;\r\n\r\n    public static create(...args): Vector3 {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0], args[1], args[2]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(x: number, y: number, z: number);\r\n    constructor();\r\n\r\n    constructor(...args) {\r\n        this.values = new Float32Array(3);\r\n\r\n        if (args.length > 0) {\r\n            this.values[0] = args[0];\r\n            this.values[1] = args[1];\r\n            this.values[2] = args[2];\r\n        }\r\n    }\r\n\r\n    get x() {\r\n        return this.values[0];\r\n    }\r\n    set x(x: number) {\r\n        this.values[0] = x;\r\n    }\r\n\r\n    get y() {\r\n        return this.values[1];\r\n    }\r\n    set y(y: number) {\r\n        this.values[1] = y;\r\n    }\r\n\r\n    get z() {\r\n        return this.values[2];\r\n    }\r\n    set z(z: number) {\r\n        this.values[2] = z;\r\n    }\r\n\r\n    public values: Float32Array = null;\r\n\r\n    public normalize(): Vector3 {\r\n        var v = this.values;\r\n        var d = Math.sqrt(\r\n            v[0] * v[0] + v[1] * v[1] + v[2] * v[2]\r\n        );\r\n\r\n        if (d === 0) {\r\n            v[0] = 0;\r\n            v[1] = 0;\r\n            v[2] = 0;\r\n            return this;\r\n        }\r\n\r\n        v[0] = v[0] / d;\r\n        v[1] = v[1] / d;\r\n        v[2] = v[2] / d;\r\n\r\n        // for jasmine test:\r\n        // -0.isEqual(0);//not pass, so here change -0 to 0\r\n        if (v[0] === -0) {\r\n            v[0] = 0;\r\n        }\r\n        if (v[1] === -0) {\r\n            v[1] = 0;\r\n        }\r\n        if (v[2] === -0) {\r\n            v[2] = 0;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public isZero() {\r\n        var v = this.values;\r\n\r\n        return v[0] === 0 && v[1] === 0 && v[2] === 0;\r\n    }\r\n\r\n    public scale(scalar: number);\r\n    public scale(x: number, y: number, z: number);\r\n\r\n    public scale(...args) {\r\n        var v = this.values;\r\n\r\n        if (args.length === 1) {\r\n            let scalar = args[0];\r\n\r\n            v[0] *= scalar;\r\n            v[1] *= scalar;\r\n            v[2] *= scalar;\r\n        }\r\n        else if (args.length === 3) {\r\n            let x = args[0],\r\n                y = args[1],\r\n                z = args[2];\r\n\r\n            v[0] *= x;\r\n            v[1] *= y;\r\n            v[2] *= z;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public set(v: Vector3);\r\n    public set(x: number, y: number, z: number);\r\n\r\n    public set(...args) {\r\n        if (args.length === 3) {\r\n            this.x = args[0];\r\n            this.y = args[1];\r\n            this.z = args[2];\r\n        }\r\n        else {\r\n            let v: Vector3 = args[0];\r\n\r\n            this.x = v.x;\r\n            this.y = v.y;\r\n            this.z = v.z;\r\n        }\r\n    }\r\n\r\n    public sub(v: Vector3): Vector3 {\r\n        this.values[0] = this.values[0] - v.values[0];\r\n        this.values[1] = this.values[1] - v.values[1];\r\n        this.values[2] = this.values[2] - v.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public sub2(v1: Vector3, v2: Vector3) {\r\n        this.values[0] = v1.values[0] - v2.values[0];\r\n        this.values[1] = v1.values[1] - v2.values[1];\r\n        this.values[2] = v1.values[2] - v2.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public add(v: Vector3) {\r\n        this.values[0] = this.values[0] + v.values[0];\r\n        this.values[1] = this.values[1] + v.values[1];\r\n        this.values[2] = this.values[2] + v.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public add2(v1: Vector3, v2: Vector3) {\r\n        this.values[0] = v1.values[0] + v2.values[0];\r\n        this.values[1] = v1.values[1] + v2.values[1];\r\n        this.values[2] = v1.values[2] + v2.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public mul(v: Vector3) {\r\n        this.values[0] = this.values[0] * v.values[0];\r\n        this.values[1] = this.values[1] * v.values[1];\r\n        this.values[2] = this.values[2] * v.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public mul2(v1: Vector3, v2: Vector3) {\r\n        this.values[0] = v1.values[0] * v2.values[0];\r\n        this.values[1] = v1.values[1] * v2.values[1];\r\n        this.values[2] = v1.values[2] * v2.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public reverse(): Vector3 {\r\n        this.values[0] = -this.values[0];\r\n        this.values[1] = -this.values[1];\r\n        this.values[2] = -this.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public clone(): Vector3 {\r\n        var result = Vector3.create(),\r\n            i = 0,\r\n            len = this.values.length;\r\n\r\n        for (i = 0; i < len; i++) {\r\n            result.values[i] = this.values[i];\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public toVector4(): Vector4 {\r\n        return Vector4.create(this.values[0], this.values[1], this.values[2], 1.0);\r\n    }\r\n\r\n    public length() {\r\n        var v = this.values;\r\n\r\n        return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name cross\r\n     * @description Returns the result of a cross product operation performed on the two specified 3-dimensional vectors.\r\n     * @param {Vec3} lhs The first 3-dimensional vector operand of the cross product.\r\n     * @param {Vec3} rhs The second 3-dimensional vector operand of the cross product.\r\n     * @returns {Vec3} Self for chaining.\r\n     * @example\r\n     * var back = new Vec3().cross(Vec3.RIGHT, Vec3.UP);\r\n     *\r\n     * // Should print the Z axis (i.e. [0, 0, 1])\r\n     * console.log(\"The result of the cross product is: \" + back.toString());\r\n     */\r\n    public cross(lhs: Vector3, rhs: Vector3) {\r\n        var a, b, r, ax, ay, az, bx, by, bz;\r\n\r\n        a = lhs.values;\r\n        b = rhs.values;\r\n        r = this.values;\r\n\r\n        ax = a[0];\r\n        ay = a[1];\r\n        az = a[2];\r\n        bx = b[0];\r\n        by = b[1];\r\n        bz = b[2];\r\n\r\n        r[0] = ay * bz - by * az;\r\n        r[1] = az * bx - bz * ax;\r\n        r[2] = ax * by - bx * ay;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name lerp\r\n     * @description Returns the result of a linear interpolation between two specified 3-dimensional vectors.\r\n     * @param {Vec3} lhs The 3-dimensional to interpolate from.\r\n     * @param {Vec3} rhs The 3-dimensional to interpolate to.\r\n     * @param {Number} alpha The value controlling the point of interpolation. Between 0 and 1, the linear interpolant\r\n     * will occur on a straight line between lhs and rhs. Outside of this range, the linear interpolant will occur on\r\n     * a ray extrapolated from this line.\r\n     * @returns {Vec3} Self for chaining.\r\n     * @example\r\n     * var a = new Vec3(0, 0, 0);\r\n     * var b = new Vec3(10, 10, 10);\r\n     * var r = new Vec3();\r\n     *\r\n     * r.lerp(a, b, 0);   // r is equal to a\r\n     * r.lerp(a, b, 0.5); // r is 5, 5, 5\r\n     * r.lerp(a, b, 1);   // r is equal to b\r\n     */\r\n    public lerp(lhs: Vector3, rhs: Vector3, alpha: number) {\r\n        var a = lhs.values,\r\n            b = rhs.values,\r\n            r = this.values;\r\n\r\n        r[0] = a[0] + alpha * (b[0] - a[0]);\r\n        r[1] = a[1] + alpha * (b[1] - a[1]);\r\n        r[2] = a[2] + alpha * (b[2] - a[2]);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name dot\r\n     * @description Returns the result of a dot product operation performed on the two specified 3-dimensional vectors.\r\n     * @param {Vec3} rhs The second 3-dimensional vector operand of the dot product.\r\n     * @returns {Number} The result of the dot product operation.\r\n     * @example\r\n     * var v1 = new Vec3(5, 10, 20);\r\n     * var v2 = new Vec3(10, 20, 40);\r\n     * var v1dotv2 = v1.dot(v2);\r\n     * console.log(\"The result of the dot product is: \" + v1dotv2);\r\n     */\r\n    public dot(rhs) {\r\n        var a = this.values,\r\n            b = rhs.values;\r\n\r\n        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\r\n    }\r\n\r\n    public calAngleCos(v1: Vector3) {\r\n        var l = this.length() * v1.length();\r\n\r\n        if (l === 0) {\r\n            return NaN;\r\n        }\r\n\r\n        return this.dot(v1) / l;\r\n    }\r\n\r\n    public min(v: Vector3) {\r\n        if (this.x > v.x) {\r\n            this.x = v.x;\r\n        }\r\n        if (this.y > v.y) {\r\n            this.y = v.y;\r\n        }\r\n        if (this.z > v.z) {\r\n            this.z = v.z;\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public max(v: Vector3) {\r\n        if (this.x < v.x) {\r\n            this.x = v.x;\r\n        }\r\n        if (this.y < v.y) {\r\n            this.y = v.y;\r\n        }\r\n        if (this.z < v.z) {\r\n            this.z = v.z;\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public isEqual(v: Vector3) {\r\n        return this.x === v.x && this.y === v.y && this.z === v.z;\r\n    }\r\n\r\n    public toArray() {\r\n        return [this.x, this.y, this.z];\r\n    }\r\n\r\n    public applyMatrix3(m: Matrix3) {\r\n        var x = this.x,\r\n            y = this.y,\r\n            z = this.z,\r\n            e = m.values;\r\n\r\n        this.x = e[0] * x + e[3] * y + e[6] * z;\r\n        this.y = e[1] * x + e[4] * y + e[7] * z;\r\n        this.z = e[2] * x + e[5] * y + e[8] * z;\r\n\r\n        return this;\r\n    }\r\n\r\n    public applyMatrix4(m: Matrix4) {\r\n        var x = this.x,\r\n            y = this.y,\r\n            z = this.z,\r\n            e = m.values;\r\n\r\n        this.x = e[0] * x + e[4] * y + e[8] * z + e[12];\r\n        this.y = e[1] * x + e[5] * y + e[9] * z + e[13];\r\n        this.z = e[2] * x + e[6] * y + e[10] * z + e[14];\r\n\r\n        return this;\r\n    }\r\n\r\n    public distanceTo(v: Vector3) {\r\n        return Math.sqrt(this.distanceToSquared(v));\r\n    }\r\n\r\n    public distanceToSquared(v: Vector3) {\r\n        var dx = this.x - v.x,\r\n            dy = this.y - v.y,\r\n            dz = this.z - v.z;\r\n\r\n        return dx ** 2 + dy ** 2 + dz ** 2;\r\n    }\r\n}\r\n\r\n\r\nVector3.up = Vector3.create(0, 1, 0);\r\nVector3.forward = Vector3.create(0, 0, 1);\r\nVector3.right = Vector3.create(1, 0, 0);","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector3 } from \"./Vector3\";\r\nimport { DEG_TO_RAD, RAD_TO_DEG } from \"./Global\";\r\nimport { Matrix4 } from \"./Matrix4\";\r\n\r\ndeclare var Math: any;\r\n\r\n@registerClass(\"Quaternion\")\r\nexport class Quaternion {\r\n    public static create(x?: number, y?: number, z?: number, w?: number) {\r\n        var obj = new this(x, y, z, w);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(x: number = 0, y: number = 0, z: number = 0, w: number = 1) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n    }\r\n\r\n    public x: number = null;\r\n    public y: number = null;\r\n    public z: number = null;\r\n    public w: number = null;\r\n\r\n    /**\r\n     * @function\r\n     * @name setFromEulerAngles\r\n     * @description Sets a quaternion from Euler angles specified in XYZ order.\r\n     * @param {Number} ex Angle to rotate around X axis in degrees.\r\n     * @param {Number} ey Angle to rotate around Y axis in degrees.\r\n     * @param {Number} ez Angle to rotate around Z axis in degrees.\r\n     * @returns {Quat} Self for chaining.\r\n     * @example\r\n     * var q = new Quat();\r\n     * q.setFromEulerAngles(45, 90, 180);\r\n     */\r\n    public setFromEulerAngles(eulerAngles: Vector3) {\r\n        var sx, cx, sy, cy, sz, cz, halfToRad,\r\n            ex = eulerAngles.x,\r\n            ey = eulerAngles.y,\r\n            ez = eulerAngles.z;\r\n\r\n        halfToRad = 0.5 * DEG_TO_RAD;\r\n        ex *= halfToRad;\r\n        ey *= halfToRad;\r\n        ez *= halfToRad;\r\n\r\n        sx = Math.sin(ex);\r\n        cx = Math.cos(ex);\r\n        sy = Math.sin(ey);\r\n        cy = Math.cos(ey);\r\n        sz = Math.sin(ez);\r\n        cz = Math.cos(ez);\r\n\r\n        this.x = sx * cy * cz - cx * sy * sz;\r\n        this.y = cx * sy * cz + sx * cy * sz;\r\n        this.z = cx * cy * sz - sx * sy * cz;\r\n        this.w = cx * cy * cz + sx * sy * sz;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiply(rhs: Quaternion);\r\n    public multiply(rhs1: Quaternion, rhs2: Quaternion);\r\n\r\n    public multiply(...args) {\r\n        var q1x, q1y, q1z, q1w, q2x, q2y, q2z, q2w,\r\n            rhs1, rhs2,\r\n            result = this;\r\n\r\n        if (args.length === 1) {\r\n            rhs1 = this;\r\n            rhs2 = args[0];\r\n        }\r\n        else if (args.length === 2) {\r\n            rhs1 = args[0];\r\n            rhs2 = args[1];\r\n        }\r\n\r\n        q1x = rhs1.x;\r\n        q1y = rhs1.y;\r\n        q1z = rhs1.z;\r\n        q1w = rhs1.w;\r\n\r\n        q2x = rhs2.x;\r\n        q2y = rhs2.y;\r\n        q2z = rhs2.z;\r\n        q2w = rhs2.w;\r\n\r\n        result.x = q1w * q2x + q1x * q2w + q1y * q2z - q1z * q2y;\r\n        result.y = q1w * q2y + q1y * q2w + q1z * q2x - q1x * q2z;\r\n        result.z = q1w * q2z + q1z * q2w + q1x * q2y - q1y * q2x;\r\n        result.w = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name setFromMat4\r\n     * @description Converts the specified 4x4 matrix to a quaternion. Note that since\r\n     * a quaternion is purely a representation for orientation, only the translational part\r\n     * of the matrix is lost.\r\n     * @param {Mat4} m The 4x4 matrix to convert.\r\n     * @returns {Quat} Self for chaining.\r\n     * @example\r\n     * // Create a 4x4 rotation matrix of 180 degrees around the y-axis\r\n     * var rot = new Mat4().setFromAxisAngle(Vec3.UP, 180);\r\n     *\r\n     * // Convert to a quaternion\r\n     * var q = new Quat().setFromMat4(rot);\r\n     */\r\n    public setFromMatrix(matrix: Matrix4) {\r\n        var m00, m01, m02, m10, m11, m12, m20, m21, m22,\r\n            tr, s, rs, lx, ly, lz, m;\r\n\r\n        m = matrix.values;\r\n\r\n        // Cache matrix values for super-speed\r\n        m00 = m[0];\r\n        m01 = m[1];\r\n        m02 = m[2];\r\n        m10 = m[4];\r\n        m11 = m[5];\r\n        m12 = m[6];\r\n        m20 = m[8];\r\n        m21 = m[9];\r\n        m22 = m[10];\r\n\r\n        // Remove the scale from the matrix\r\n        lx = 1 / Math.sqrt(m00 * m00 + m01 * m01 + m02 * m02);\r\n        ly = 1 / Math.sqrt(m10 * m10 + m11 * m11 + m12 * m12);\r\n        lz = 1 / Math.sqrt(m20 * m20 + m21 * m21 + m22 * m22);\r\n\r\n        m00 *= lx;\r\n        m01 *= lx;\r\n        m02 *= lx;\r\n        m10 *= ly;\r\n        m11 *= ly;\r\n        m12 *= ly;\r\n        m20 *= lz;\r\n        m21 *= lz;\r\n        m22 *= lz;\r\n\r\n        // http://www.cs.ucr.edu/~vbz/resources/quatut.pdf\r\n\r\n        tr = m00 + m11 + m22;\r\n        if (tr >= 0) {\r\n            s = Math.sqrt(tr + 1);\r\n            this.w = s * 0.5;\r\n            s = 0.5 / s;\r\n            this.x = (m12 - m21) * s;\r\n            this.y = (m20 - m02) * s;\r\n            this.z = (m01 - m10) * s;\r\n        } else {\r\n            if (m00 > m11) {\r\n                if (m00 > m22) {\r\n                    // XDiagDomMatrix\r\n                    rs = (m00 - (m11 + m22)) + 1;\r\n                    rs = Math.sqrt(rs);\r\n\r\n                    this.x = rs * 0.5;\r\n                    rs = 0.5 / rs;\r\n                    this.w = (m12 - m21) * rs;\r\n                    this.y = (m01 + m10) * rs;\r\n                    this.z = (m02 + m20) * rs;\r\n                } else {\r\n                    // ZDiagDomMatrix\r\n                    rs = (m22 - (m00 + m11)) + 1;\r\n                    rs = Math.sqrt(rs);\r\n\r\n                    this.z = rs * 0.5;\r\n                    rs = 0.5 / rs;\r\n                    this.w = (m01 - m10) * rs;\r\n                    this.x = (m20 + m02) * rs;\r\n                    this.y = (m21 + m12) * rs;\r\n                }\r\n            } else if (m11 > m22) {\r\n                // YDiagDomMatrix\r\n                rs = (m11 - (m22 + m00)) + 1;\r\n                rs = Math.sqrt(rs);\r\n\r\n                this.y = rs * 0.5;\r\n                rs = 0.5 / rs;\r\n                this.w = (m20 - m02) * rs;\r\n                this.z = (m12 + m21) * rs;\r\n                this.x = (m10 + m01) * rs;\r\n            } else {\r\n                // ZDiagDomMatrix\r\n                rs = (m22 - (m00 + m11)) + 1;\r\n                rs = Math.sqrt(rs);\r\n\r\n                this.z = rs * 0.5;\r\n                rs = 0.5 / rs;\r\n                this.w = (m01 - m10) * rs;\r\n                this.x = (m20 + m02) * rs;\r\n                this.y = (m21 + m12) * rs;\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name setFromAxisAngle\r\n     * @description Sets a quaternion from an angular rotation around an axis.\r\n     * @param {Vec3} axis World space axis around which to rotate.\r\n     * @param {Number} angle Angle to rotate around the given axis in degrees.\r\n     * @returns {Quat} Self for chaining.\r\n     * @example\r\n     * var q = new Quat();\r\n     * q.setFromAxisAngle(Vec3.UP, 90);\r\n     */\r\n    public setFromAxisAngle(angle: number, axis: Vector3) {\r\n        var sa, ca;\r\n\r\n        axis = axis.normalize();\r\n\r\n        angle *= 0.5 * DEG_TO_RAD;\r\n\r\n        sa = Math.sin(angle);\r\n        ca = Math.cos(angle);\r\n\r\n        this.x = sa * axis.x;\r\n        this.y = sa * axis.y;\r\n        this.z = sa * axis.z;\r\n        this.w = ca;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name invert\r\n     * @description Generates the inverse of the specified quaternion.\r\n     * @returns {Quat} Self for chaining.\r\n     * @example\r\n     * // Create a quaternion rotated 180 degrees around the y-axis\r\n     * var rot = new Quat().setFromEulerAngles(0, 180, 0);\r\n     *\r\n     * // Invert in place\r\n     * rot.invert();\r\n     */\r\n    public invert() {\r\n        return this.conjugate().normalize();\r\n    }\r\n\r\n    public conjugate() {\r\n        this.x *= -1;\r\n        this.y *= -1;\r\n        this.z *= -1;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name clone\r\n     * @description Returns an identical clone of the specified quaternion.\r\n     * @returns {Quat} A quaternion containing the result of the cloning.\r\n     * @example\r\n     * var q = new Quat(-0.11, -0.15, -0.46, 0.87);\r\n     * var qclone = q.clone();\r\n     *\r\n     * console.log(\"The result of the cloning is: \" + q.toString());\r\n     */\r\n    public clone() {\r\n        return Quaternion.create(this.x, this.y, this.z, this.w);\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name normalize\r\n     * @description Returns the specified quaternion converted in place to a unit quaternion.\r\n     * @returns {Quat} The result of the normalization.\r\n     * @example\r\n     * var v = new Quat(0, 0, 0, 5);\r\n     *\r\n     * v.normalize();\r\n     *\r\n     * // Should output 0, 0, 0, 1\r\n     * console.log(\"The result of the vector normalization is: \" + v.toString());\r\n     */\r\n    public normalize() {\r\n        var len = this.length();\r\n        if (len === 0) {\r\n            this.x = this.y = this.z = 0;\r\n            this.w = 1;\r\n        } else {\r\n            len = 1 / len;\r\n            this.x *= len;\r\n            this.y *= len;\r\n            this.z *= len;\r\n            this.w *= len;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name length\r\n     * @description Returns the magnitude of the specified quaternion.\r\n     * @returns {Number} The magnitude of the specified quaternion.\r\n     * @example\r\n     * var q = new Quat(0, 0, 0, 5);\r\n     * var len = q.length();\r\n     * // Should output 5\r\n     * console.log(\"The length of the quaternion is: \" + len);\r\n     */\r\n    public length() {\r\n        var x, y, z, w;\r\n\r\n        x = this.x;\r\n        y = this.y;\r\n        z = this.z;\r\n        w = this.w;\r\n\r\n        return Math.sqrt(x * x + y * y + z * z + w * w);\r\n    }\r\n\r\n\r\n    public multiplyVector3(vector: Vector3) {\r\n        var q = this;\r\n        var x = vector.x;\r\n        var y = vector.y;\r\n        var z = vector.z;\r\n\r\n        var qx = q.x;\r\n        var qy = q.y;\r\n        var qz = q.z;\r\n        var qw = q.w;\r\n\r\n        // calculate quat * vector\r\n\r\n        var ix = qw * x + qy * z - qz * y;\r\n        var iy = qw * y + qz * x - qx * z;\r\n        var iz = qw * z + qx * y - qy * x;\r\n        var iw = - qx * x - qy * y - qz * z;\r\n\r\n        // calculate result * inverse quat\r\n\r\n        return Vector3.create(\r\n            ix * qw + iw * - qx + iy * - qz - iz * - qy,\r\n            iy * qw + iw * - qy + iz * - qx - ix * - qz,\r\n            iz * qw + iw * - qz + ix * - qy - iy * - qx\r\n        );\r\n    }\r\n\r\n    public set(x: number, y: number, z: number, w: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n    }\r\n\r\n    public sub(quat: Quaternion) {\r\n        var result = quat.clone().invert().multiply(this);\r\n\r\n        this.set(result.x, result.y, result.z, result.w);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name getEulerAngles\r\n     * @description Converts the supplied quaternion to Euler angles.\r\n     * @param {Vec3} [eulers] The 3-dimensional vector to receive the Euler angles.\r\n     * @returns {Vec3} The 3-dimensional vector holding the Euler angles that\r\n     * correspond to the supplied quaternion.\r\n     */\r\n    public getEulerAngles() {\r\n        var x, y, z, qx, qy, qz, qw, a2;\r\n\r\n        qx = this.x;\r\n        qy = this.y;\r\n        qz = this.z;\r\n        qw = this.w;\r\n\r\n        a2 = 2 * (qw * qy - qx * qz);\r\n        if (a2 <= -0.99999) {\r\n            x = 2 * Math.atan2(qx, qw);\r\n            y = -Math.PI / 2;\r\n            z = 0;\r\n        } else if (a2 >= 0.99999) {\r\n            x = 2 * Math.atan2(qx, qw);\r\n            y = Math.PI / 2;\r\n            z = 0;\r\n        } else {\r\n            x = Math.atan2(2 * (qw * qx + qy * qz), 1 - 2 * (qx * qx + qy * qy));\r\n            y = Math.asin(a2);\r\n            z = Math.atan2(2 * (qw * qz + qx * qy), 1 - 2 * (qy * qy + qz * qz));\r\n        }\r\n\r\n        return Vector3.create(x, y, z).scale(RAD_TO_DEG);\r\n    }\r\n\r\n    public slerp(left: Quaternion, right: Quaternion, amount: number): Quaternion {\r\n        if (amount === 0) {\r\n            this.set(left.x, left.y, left.z, left.w);\r\n\r\n            return this;\r\n        }\r\n        else if (amount === 1) {\r\n            this.set(right.x, right.y, right.z, right.w);\r\n\r\n            return this;\r\n        }\r\n\r\n        var num2;\r\n        var num3;\r\n        var num = amount;\r\n        var num4 = (((left.x * right.x) + (left.y * right.y)) + (left.z * right.z)) + (left.w * right.w);\r\n        var flag = false;\r\n\r\n        if (num4 < 0) {\r\n            flag = true;\r\n            num4 = -num4;\r\n        }\r\n\r\n        if (num4 > 0.999999) {\r\n            num3 = 1 - num;\r\n            num2 = flag ? -num : num;\r\n        }\r\n        else {\r\n            var num5 = Math.acos(num4);\r\n            var num6 = (1.0 / Math.sin(num5));\r\n            num3 = (Math.sin((1.0 - num) * num5)) * num6;\r\n            num2 = flag ? ((-Math.sin(num * num5)) * num6) : ((Math.sin(num * num5)) * num6);\r\n        }\r\n\r\n        this.set((num3 * left.x) + (num2 * right.x), (num3 * left.y) + (num2 * right.y), (num3 * left.z) + (num2 * right.z), (num3 * left.w) + (num2 * right.w));\r\n\r\n        return this;\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Matrix3 } from \"./Matrix3\";\r\nimport { Log } from \"../utils/Log\";\r\nimport { requireCheck, it, assert } from \"../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { Vector3 } from \"./Vector3\";\r\nimport { Vector4 } from \"./Vector4\";\r\nimport { Quaternion } from \"./Quaternion\";\r\nimport { RAD_TO_DEG } from \"./Global\";\r\n\r\ndeclare var Math: any;\r\n\r\n/*!\r\n 注意：矩阵元素是按列主序存储在数组中的。\r\n */\r\n@registerClass(\"Matrix4\")\r\nexport class Matrix4 {\r\n    public static create(mat: Float32Array): Matrix4;\r\n    public static create(): Matrix4;\r\n\r\n    public static create(...args): Matrix4 {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(mat: Float32Array);\r\n    constructor();\r\n\r\n    constructor(...args) {\r\n        if (args.length === 1) {\r\n            this.values = args[0];\r\n        }\r\n        else {\r\n            this.values = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\r\n        }\r\n\r\n        this._matrixArr = [];\r\n    }\r\n\r\n    public values: Float32Array = null;\r\n\r\n    private _matrixArr: Array<Float32Array> = null;\r\n\r\n    public push() {\r\n        this._matrixArr.push(this.values);\r\n    }\r\n\r\n    public pop() {\r\n        this.values = this._matrixArr.pop();\r\n    }\r\n\r\n    public set(initialM11: number, initialM12: number, initialM13: number, initialM14: number,\r\n        initialM21: number, initialM22: number, initialM23: number, initialM24: number,\r\n        initialM31: number, initialM32: number, initialM33: number, initialM34: number,\r\n        initialM41: number, initialM42: number, initialM43: number, initialM44: number);\r\n    public set(matrix: Matrix4);\r\n\r\n    public set(...args) {\r\n        var te = this.values,\r\n            values: any = null;\r\n\r\n        if (args.length === 1) {\r\n            let matrix: Matrix4 = args[0];\r\n\r\n            values = matrix.values;\r\n        }\r\n        else {\r\n            values = [\r\n                args[0], args[1], args[2], args[3], args[4], args[5], args[6], args[7], args[8], args[9], args[10], args[11], args[12], args[13], args[14], args[15]\r\n            ];\r\n        }\r\n\r\n        te[0] = values[0];\r\n        te[1] = values[1];\r\n        te[2] = values[2];\r\n        te[3] = values[3];\r\n        te[4] = values[4];\r\n        te[5] = values[5];\r\n        te[6] = values[6];\r\n        te[7] = values[7];\r\n        te[8] = values[8];\r\n        te[9] = values[9];\r\n        te[10] = values[10];\r\n        te[11] = values[11];\r\n        te[12] = values[12];\r\n        te[13] = values[13];\r\n        te[14] = values[14];\r\n        te[15] = values[15];\r\n\r\n        return this;\r\n    }\r\n\r\n    public setIdentity(): Matrix4 {\r\n        var e = this.values;\r\n        e[0] = 1; e[4] = 0; e[8] = 0; e[12] = 0;\r\n        e[1] = 0; e[5] = 1; e[9] = 0; e[13] = 0;\r\n        e[2] = 0; e[6] = 0; e[10] = 1; e[14] = 0;\r\n        e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Calculate the inverse matrix of specified matrix, and set to this.\r\n     * @param other The source matrix\r\n     * @return this\r\n     */\r\n    public invert(): Matrix4 {\r\n        var a00, a01, a02, a03,\r\n            a10, a11, a12, a13,\r\n            a20, a21, a22, a23,\r\n            a30, a31, a32, a33,\r\n            b00, b01, b02, b03,\r\n            b04, b05, b06, b07,\r\n            b08, b09, b10, b11,\r\n            invDet, m;\r\n\r\n        m = this.values;\r\n        a00 = m[0];\r\n        a01 = m[1];\r\n        a02 = m[2];\r\n        a03 = m[3];\r\n        a10 = m[4];\r\n        a11 = m[5];\r\n        a12 = m[6];\r\n        a13 = m[7];\r\n        a20 = m[8];\r\n        a21 = m[9];\r\n        a22 = m[10];\r\n        a23 = m[11];\r\n        a30 = m[12];\r\n        a31 = m[13];\r\n        a32 = m[14];\r\n        a33 = m[15];\r\n\r\n        b00 = a00 * a11 - a01 * a10;\r\n        b01 = a00 * a12 - a02 * a10;\r\n        b02 = a00 * a13 - a03 * a10;\r\n        b03 = a01 * a12 - a02 * a11;\r\n        b04 = a01 * a13 - a03 * a11;\r\n        b05 = a02 * a13 - a03 * a12;\r\n        b06 = a20 * a31 - a21 * a30;\r\n        b07 = a20 * a32 - a22 * a30;\r\n        b08 = a20 * a33 - a23 * a30;\r\n        b09 = a21 * a32 - a22 * a31;\r\n        b10 = a21 * a33 - a23 * a31;\r\n        b11 = a22 * a33 - a23 * a32;\r\n\r\n        invDet = 1 / (b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06);\r\n\r\n        m[0] = (a11 * b11 - a12 * b10 + a13 * b09) * invDet;\r\n        m[1] = (-a01 * b11 + a02 * b10 - a03 * b09) * invDet;\r\n        m[2] = (a31 * b05 - a32 * b04 + a33 * b03) * invDet;\r\n        m[3] = (-a21 * b05 + a22 * b04 - a23 * b03) * invDet;\r\n        m[4] = (-a10 * b11 + a12 * b08 - a13 * b07) * invDet;\r\n        m[5] = (a00 * b11 - a02 * b08 + a03 * b07) * invDet;\r\n        m[6] = (-a30 * b05 + a32 * b02 - a33 * b01) * invDet;\r\n        m[7] = (a20 * b05 - a22 * b02 + a23 * b01) * invDet;\r\n        m[8] = (a10 * b10 - a11 * b08 + a13 * b06) * invDet;\r\n        m[9] = (-a00 * b10 + a01 * b08 - a03 * b06) * invDet;\r\n        m[10] = (a30 * b04 - a31 * b02 + a33 * b00) * invDet;\r\n        m[11] = (-a20 * b04 + a21 * b02 - a23 * b00) * invDet;\r\n        m[12] = (-a10 * b09 + a11 * b07 - a12 * b06) * invDet;\r\n        m[13] = (a00 * b09 - a01 * b07 + a02 * b06) * invDet;\r\n        m[14] = (-a30 * b03 + a31 * b01 - a32 * b00) * invDet;\r\n        m[15] = (a20 * b03 - a21 * b01 + a22 * b00) * invDet;\r\n\r\n        return this;\r\n    }\r\n\r\n    public invertTo3x3(): Matrix3 {\r\n        var a11, a21, a31, a12, a22, a32, a13, a23, a33,\r\n            m, r, det, idet;\r\n        var mat3 = Matrix3.create();\r\n\r\n        m = this.values;\r\n\r\n        r = mat3.values;\r\n\r\n        a11 = m[10] * m[5] - m[6] * m[9];\r\n        a21 = -m[10] * m[1] + m[2] * m[9];\r\n        a31 = m[6] * m[1] - m[2] * m[5];\r\n        a12 = -m[10] * m[4] + m[6] * m[8];\r\n        a22 = m[10] * m[0] - m[2] * m[8];\r\n        a32 = -m[6] * m[0] + m[2] * m[4];\r\n        a13 = m[9] * m[4] - m[5] * m[8];\r\n        a23 = -m[9] * m[0] + m[1] * m[8];\r\n        a33 = m[5] * m[0] - m[1] * m[4];\r\n\r\n        det = m[0] * a11 + m[1] * a12 + m[2] * a13;\r\n        if (det === 0) { // no inverse\r\n            Log.warn(\"can't invert matrix, determinant is 0\");\r\n\r\n            return mat3;\r\n        }\r\n\r\n        idet = 1 / det;\r\n\r\n        r[0] = idet * a11;\r\n        r[1] = idet * a21;\r\n        r[2] = idet * a31;\r\n        r[3] = idet * a12;\r\n        r[4] = idet * a22;\r\n        r[5] = idet * a32;\r\n        r[6] = idet * a13;\r\n        r[7] = idet * a23;\r\n        r[8] = idet * a33;\r\n\r\n        return mat3;\r\n    }\r\n\r\n    /**\r\n     * Transpose the matrix.\r\n     * @return this\r\n     */\r\n    public transpose(): Matrix4 {\r\n        var te = this.values;\r\n        var tmp;\r\n\r\n        tmp = te[1]; te[1] = te[4]; te[4] = tmp;\r\n        tmp = te[2]; te[2] = te[8]; te[8] = tmp;\r\n        tmp = te[6]; te[6] = te[9]; te[9] = tmp;\r\n\r\n        tmp = te[3]; te[3] = te[12]; te[12] = tmp;\r\n        tmp = te[7]; te[7] = te[13]; te[13] = tmp;\r\n        tmp = te[11]; te[11] = te[14]; te[14] = tmp;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Set the matrix for translation.\r\n     * @param x The X value of a translation.\r\n     * @param y The Y value of a translation.\r\n     * @param z The Z value of a translation.\r\n     * @return this\r\n     */\r\n    public setTranslate(x, y, z): Matrix4 {\r\n        var e = this.values;\r\n        e[0] = 1; e[4] = 0; e[8] = 0; e[12] = x;\r\n        e[1] = 0; e[5] = 1; e[9] = 0; e[13] = y;\r\n        e[2] = 0; e[6] = 0; e[10] = 1; e[14] = z;\r\n        e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiply the matrix for translation from the right.\r\n     * @param x The X value of a translation.\r\n     * @param y The Y value of a translation.\r\n     * @param z The Z value of a translation.\r\n     * @return this\r\n     */\r\n    public translate(x, y, z): Matrix4 {\r\n        this.applyMatrix(Matrix4.create().setTranslate(x, y, z));\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Set the matrix for rotation.\r\n     * The vector of rotation axis may not be normalized.\r\n     * @param angle The angle of rotation (degrees)\r\n     * @param x The X coordinate of vector of rotation axis.\r\n     * @param y The Y coordinate of vector of rotation axis.\r\n     * @param z The Z coordinate of vector of rotation axis.\r\n     * @return this\r\n     */\r\n    @requireCheck(function(angle: number, x: number, y: number, z: number) {\r\n        it(\"axis's component shouldn't all be zero\", () => {\r\n            expect(x === 0 && y === 0 && z === 0).false;\r\n        });\r\n    })\r\n    public setRotate(angle: number, x: number, y: number, z: number): Matrix4 {\r\n        var e, s, c, len, rlen, nc, xy, yz, zx, xs, ys, zs;\r\n\r\n        var angle = Math.PI * angle / 180;\r\n        e = this.values;\r\n\r\n        s = Math.sin(angle);\r\n        c = Math.cos(angle);\r\n\r\n        if (0 !== x && 0 === y && 0 === z) {\r\n            // Rotation around X axis\r\n            if (x < 0) {\r\n                s = -s;\r\n            }\r\n            e[0] = 1; e[4] = 0; e[8] = 0; e[12] = 0;\r\n            e[1] = 0; e[5] = c; e[9] = -s; e[13] = 0;\r\n            e[2] = 0; e[6] = s; e[10] = c; e[14] = 0;\r\n            e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        } else if (0 === x && 0 !== y && 0 === z) {\r\n            // Rotation around Y axis\r\n            if (y < 0) {\r\n                s = -s;\r\n            }\r\n            e[0] = c; e[4] = 0; e[8] = s; e[12] = 0;\r\n            e[1] = 0; e[5] = 1; e[9] = 0; e[13] = 0;\r\n            e[2] = -s; e[6] = 0; e[10] = c; e[14] = 0;\r\n            e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        } else if (0 === x && 0 === y && 0 !== z) {\r\n            // Rotation around Z axis\r\n            if (z < 0) {\r\n                s = -s;\r\n            }\r\n            e[0] = c; e[4] = -s; e[8] = 0; e[12] = 0;\r\n            e[1] = s; e[5] = c; e[9] = 0; e[13] = 0;\r\n            e[2] = 0; e[6] = 0; e[10] = 1; e[14] = 0;\r\n            e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        } else {\r\n            // Rotation around another axis\r\n            len = Math.sqrt(x * x + y * y + z * z);\r\n            if (len !== 1) {\r\n                //转换为单位向量\r\n                rlen = 1 / len;\r\n                x *= rlen;\r\n                y *= rlen;\r\n                z *= rlen;\r\n            }\r\n\r\n            nc = 1 - c;\r\n            xy = x * y;\r\n            yz = y * z;\r\n            zx = z * x;\r\n            xs = x * s;\r\n            ys = y * s;\r\n            zs = z * s;\r\n\r\n            e[0] = x * x * nc + c;\r\n            e[1] = xy * nc + zs;\r\n            e[2] = zx * nc - ys;\r\n            e[3] = 0;\r\n\r\n            e[4] = xy * nc - zs;\r\n            e[5] = y * y * nc + c;\r\n            e[6] = yz * nc + xs;\r\n            e[7] = 0;\r\n\r\n            e[8] = zx * nc + ys;\r\n            e[9] = yz * nc - xs;\r\n            e[10] = z * z * nc + c;\r\n            e[11] = 0;\r\n\r\n            e[12] = 0;\r\n            e[13] = 0;\r\n            e[14] = 0;\r\n            e[15] = 1;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiply the matrix for rotation from the right.\r\n     * The vector of rotation axis may not be normalized.\r\n     * @param angle The angle of rotation (degrees)\r\n     * @param x The X coordinate of vector of rotation axis.\r\n     * @param y The Y coordinate of vector of rotation axis.\r\n     * @param z The Z coordinate of vector of rotation axis.\r\n     * @return this\r\n     */\r\n    public rotate(angle, vector3: Vector3): Matrix4;\r\n    public rotate(angle, x, y, z): Matrix4;\r\n\r\n    public rotate(...args): Matrix4 {\r\n        var angle = args[0];\r\n\r\n        if (args.length === 2) {\r\n            let vector3 = args[1];\r\n\r\n            this.applyMatrix(Matrix4.create().setRotate(angle, vector3.values[0], vector3.values[1], vector3.values[2]));\r\n        }\r\n        else if (args.length === 4) {\r\n            let x = args[1],\r\n                y = args[2],\r\n                z = args[3];\r\n\r\n            this.applyMatrix(Matrix4.create().setRotate(angle, x, y, z));\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Set the matrix for scaling.\r\n     * @param x The scale factor along the X axis\r\n     * @param y The scale factor along the Y axis\r\n     * @param z The scale factor along the Z axis\r\n     * @return this\r\n     */\r\n    public setScale(x, y, z): Matrix4 {\r\n        var e = this.values;\r\n        e[0] = x; e[4] = 0; e[8] = 0; e[12] = 0;\r\n        e[1] = 0; e[5] = y; e[9] = 0; e[13] = 0;\r\n        e[2] = 0; e[6] = 0; e[10] = z; e[14] = 0;\r\n        e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiply the matrix for scaling from the right.\r\n     * @param x The scale factor along the X axis\r\n     * @param y The scale factor along the Y axis\r\n     * @param z The scale factor along the Z axis\r\n     * @return this\r\n     */\r\n    public scale(x, y, z): Matrix4 {\r\n        this.applyMatrix(Matrix4.create().setScale(x, y, z));\r\n\r\n        return this;\r\n    }\r\n\r\n    public setLookAt(eye: Vector3, center: Vector3, up: Vector3): Matrix4;\r\n    public setLookAt(eyeX: number, eyeY: number, eyeZ: number, centerX: number, centerY: number, centerZ: number, upX: number, upY: number, upZ: number): Matrix4;\r\n\r\n    /**\r\n     * @function\r\n     * @name setLookAt\r\n     * @description Sets the specified matrix to a viewing matrix derived from an eye point, a target point\r\n     * and an up vector. The matrix maps the target point to the negative z-axis and the eye point to the\r\n     * origin, so that when you use a typical projection matrix, the center of the scene maps to the center\r\n     * of the viewport. Similarly, the direction described by the up vector projected onto the viewing plane\r\n     * is mapped to the positive y-axis so that it points upward in the viewport. The up vector must not be\r\n     * parallel to the line of sight from the eye to the reference point.\r\n     * @param {Vec3} position 3-d vector holding view position.\r\n     * @param {Vec3} target 3-d vector holding reference point.\r\n     * @param {Vec3} up 3-d vector holding the up direction.\r\n     * @returns {Mat4} Self for chaining.\r\n     */\r\n    public setLookAt(...args) {\r\n        var x, y, z,\r\n            eye, center, up;\r\n\r\n        if (args.length === 3) {\r\n            eye = args[0];\r\n            center = args[1];\r\n            up = args[2]\r\n        }\r\n        else if (args.length === 9) {\r\n            eye = Vector3.create(args[0], args[1], args[2]);\r\n            center = Vector3.create(args[3], args[4], args[5]);\r\n            up = Vector3.create(args[6], args[7], args[8]);\r\n        }\r\n        x = Vector3.create();\r\n\r\n        z = eye.clone().sub(center).normalize();\r\n\r\n        y = up.clone().normalize();\r\n        x.cross(y, z).normalize();\r\n        y.cross(z, x);\r\n\r\n        var r = this.values;\r\n\r\n        r[0] = x.x;\r\n        r[1] = x.y;\r\n        r[2] = x.z;\r\n        r[3] = 0;\r\n        r[4] = y.x;\r\n        r[5] = y.y;\r\n        r[6] = y.z;\r\n        r[7] = 0;\r\n        r[8] = z.x;\r\n        r[9] = z.y;\r\n        r[10] = z.z;\r\n        r[11] = 0;\r\n        r[12] = eye.x;\r\n        r[13] = eye.y;\r\n        r[14] = eye.z;\r\n        r[15] = 1;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiply the viewing matrix from the right.\r\n     * @param eyeX, eyeY, eyeZ The position of the eye point.\r\n     * @param centerX, centerY, centerZ The position of the reference point.\r\n     * @param upX, upY, upZ The direction of the up vector.\r\n     * @return this\r\n     */\r\n    public lookAt(eye: Vector3, center: Vector3, up: Vector3): Matrix4;\r\n    public lookAt(eyeX: number, eyeY: number, eyeZ: number, centerX: number, centerY: number, centerZ: number, upX: number, upY: number, upZ: number): Matrix4;\r\n\r\n    public lookAt(...args): Matrix4 {\r\n        var matrix = Matrix4.create();\r\n\r\n        this.applyMatrix(matrix.setLookAt.apply(matrix, args));\r\n\r\n        return this;\r\n    }\r\n\r\n    @requireCheck(function(left: number, right: number, bottom: number, top: number, near: number, far: number) {\r\n        assert(left !== right && bottom !== top && near !== far, Log.info.FUNC_MUST_NOT_BE(\"frustum\", \"null\"));\r\n    })\r\n    public setOrtho(left: number, right: number, bottom: number, top: number, near: number, far: number): Matrix4 {\r\n        var e = this.values,\r\n            rw,\r\n            rh,\r\n            rd;\r\n\r\n        rw = 1 / (right - left);\r\n        rh = 1 / (top - bottom);\r\n        rd = 1 / (far - near);\r\n\r\n        e[0] = 2 * rw;\r\n        e[1] = 0;\r\n        e[2] = 0;\r\n        e[3] = 0;\r\n\r\n        e[4] = 0;\r\n        e[5] = 2 * rh;\r\n        e[6] = 0;\r\n        e[7] = 0;\r\n\r\n        e[8] = 0;\r\n        e[9] = 0;\r\n        e[10] = -2 * rd;\r\n        e[11] = 0;\r\n\r\n        e[12] = -(right + left) * rw;\r\n        e[13] = -(top + bottom) * rh;\r\n        e[14] = -(far + near) * rd;\r\n        e[15] = 1;\r\n\r\n        return this;\r\n    }\r\n\r\n    public ortho(left: number, right: number, bottom: number, top: number, near: number, far: number): Matrix4 {\r\n        this.applyMatrix(Matrix4.create().setOrtho(left, right, bottom, top, near, far));\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Set the perspective projection matrix by fovy and aspect.\r\n     * @param fovy The angle between the upper and lower sides of the frustum.\r\n     * @param aspect The aspect ratio of the frustum. (width/height)\r\n     * @param near The distances to the nearer depth clipping plane. This value must be plus value.\r\n     * @param far The distances to the farther depth clipping plane. This value must be plus value.\r\n     * @return this\r\n     */\r\n    @requireCheck(function(fovy: number, aspect: number, near: number, far: number) {\r\n        assert(near !== far && aspect !== 0, Log.info.FUNC_MUST_NOT_BE(\"frustum\", \"null\"));\r\n        assert(near > 0, Log.info.FUNC_MUST(\"near\", \"> 0\"));\r\n        assert(far > 0, Log.info.FUNC_MUST(\"far\", \"> 0\"));\r\n\r\n    })\r\n    public setPerspective(fovy: number, aspect: number, near: number, far: number): Matrix4 {\r\n        var e = null,\r\n            rd = null,\r\n            s = null,\r\n            ct = null,\r\n            fovy = Math.PI * fovy / 180 / 2;\r\n\r\n        s = Math.sin(fovy);\r\n        Log.error(s === 0, Log.info.FUNC_MUST_NOT_BE(\"frustum\", \"null\"));\r\n\r\n        rd = 1 / (far - near);\r\n        ct = Math.cos(fovy) / s;\r\n\r\n        e = this.values;\r\n\r\n        e[0] = ct / aspect;\r\n        e[1] = 0;\r\n        e[2] = 0;\r\n        e[3] = 0;\r\n\r\n        e[4] = 0;\r\n        e[5] = ct;\r\n        e[6] = 0;\r\n        e[7] = 0;\r\n\r\n        e[8] = 0;\r\n        e[9] = 0;\r\n        e[10] = -(far + near) * rd;\r\n        e[11] = -1;\r\n\r\n        e[12] = 0;\r\n        e[13] = 0;\r\n        e[14] = -2 * near * far * rd;\r\n        e[15] = 0;\r\n\r\n        return this;\r\n    }\r\n\r\n    public perspective(fovy: number, aspect: number, near: number, far: number): Matrix4 {\r\n        this.applyMatrix(Matrix4.create().setPerspective(fovy, aspect, near, far));\r\n\r\n        return this;\r\n    }\r\n\r\n    public applyMatrix(other: Matrix4, notChangeSelf: boolean = false): Matrix4 {\r\n        var a = this,\r\n            //todo optimize:use temp matrix4\r\n            b = other.clone();\r\n\r\n        /*!\r\n         b*a，而不是a*b\r\n         这是因为在webgl中，向量是右乘的，\r\n         此处希望坐标向量先进行this.values的变换，然后进行other.values的变换，因此要b*a，从而在右乘向量时为b*a*vec\r\n         */\r\n\r\n        if (notChangeSelf) {\r\n            return b.multiply(a);\r\n        }\r\n\r\n        this.values = b.multiply(a).values;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiply(matrix: Matrix4): Matrix4;\r\n    public multiply(matrix1: Matrix4, matrix2: Matrix4): Matrix4;\r\n\r\n    public multiply(...args): Matrix4 {\r\n        var mat1 = null,\r\n            mat2 = null,\r\n            result = null;\r\n\r\n        result = this.values;\r\n\r\n        if (args.length === 1) {\r\n            mat1 = this.values;\r\n            mat2 = args[0].values;\r\n        }\r\n        else if (args.length === 2) {\r\n            mat1 = args[0].values;\r\n            mat2 = args[1].values;\r\n\r\n        }\r\n\r\n        var a = mat1[0], b = mat1[1], c = mat1[2], d = mat1[3],\r\n            e = mat1[4], f = mat1[5], g = mat1[6], h = mat1[7],\r\n            i = mat1[8], j = mat1[9], k = mat1[10], l = mat1[11],\r\n            m = mat1[12], n = mat1[13], o = mat1[14], p = mat1[15],\r\n            A = mat2[0], B = mat2[1], C = mat2[2], D = mat2[3],\r\n            E = mat2[4], F = mat2[5], G = mat2[6], H = mat2[7],\r\n            I = mat2[8], J = mat2[9], K = mat2[10], L = mat2[11],\r\n            M = mat2[12], N = mat2[13], O = mat2[14], P = mat2[15];\r\n\r\n        result[0] = A * a + B * e + C * i + D * m;\r\n        result[1] = A * b + B * f + C * j + D * n;\r\n        result[2] = A * c + B * g + C * k + D * o;\r\n        result[3] = A * d + B * h + C * l + D * p;\r\n        result[4] = E * a + F * e + G * i + H * m;\r\n        result[5] = E * b + F * f + G * j + H * n;\r\n        result[6] = E * c + F * g + G * k + H * o;\r\n        result[7] = E * d + F * h + G * l + H * p;\r\n        result[8] = I * a + J * e + K * i + L * m;\r\n        result[9] = I * b + J * f + K * j + L * n;\r\n        result[10] = I * c + J * g + K * k + L * o;\r\n        result[11] = I * d + J * h + K * l + L * p;\r\n        result[12] = M * a + N * e + O * i + P * m;\r\n        result[13] = M * b + N * f + O * j + P * n;\r\n        result[14] = M * c + N * g + O * k + P * o;\r\n        result[15] = M * d + N * h + O * l + P * p;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiplyVector4(vector: Vector4): Vector4 {\r\n        var mat1 = this.values,\r\n            vec4 = vector.values;\r\n        var result = [];\r\n\r\n        result[0] = vec4[0] * mat1[0] + vec4[1] * mat1[4] + vec4[2] * mat1[8] + vec4[3] * mat1[12];\r\n        result[1] = vec4[0] * mat1[1] + vec4[1] * mat1[5] + vec4[2] * mat1[9] + vec4[3] * mat1[13];\r\n        result[2] = vec4[0] * mat1[2] + vec4[1] * mat1[6] + vec4[2] * mat1[10] + vec4[3] * mat1[14];\r\n        result[3] = vec4[0] * mat1[3] + vec4[1] * mat1[7] + vec4[2] * mat1[11] + vec4[3] * mat1[15];\r\n\r\n        return Vector4.create(result[0], result[1], result[2], result[3]);\r\n    }\r\n\r\n    public multiplyVector3(vector: Vector3): Vector3 {\r\n        var mat1 = this.values,\r\n            vec3 = vector.values;\r\n        var result = [];\r\n\r\n        result[0] = vec3[0] * mat1[0] + vec3[1] * mat1[4] + vec3[2] * mat1[8];\r\n        result[1] = vec3[0] * mat1[1] + vec3[1] * mat1[5] + vec3[2] * mat1[9];\r\n        result[2] = vec3[0] * mat1[2] + vec3[1] * mat1[6] + vec3[2] * mat1[10];\r\n\r\n        return Vector3.create(result[0], result[1], result[2]);\r\n    }\r\n\r\n    public multiplyPoint(vector: Vector3): Vector3 {\r\n        var mat1 = this.values,\r\n            vec3 = vector.values;\r\n        var result = [];\r\n\r\n        result[0] = vec3[0] * mat1[0] + vec3[1] * mat1[4] + vec3[2] * mat1[8] + mat1[12];\r\n        result[1] = vec3[0] * mat1[1] + vec3[1] * mat1[5] + vec3[2] * mat1[9] + mat1[13];\r\n        result[2] = vec3[0] * mat1[2] + vec3[1] * mat1[6] + vec3[2] * mat1[10] + mat1[14];\r\n\r\n        return Vector3.create(result[0], result[1], result[2]);\r\n    }\r\n\r\n    public clone(): Matrix4 {\r\n        var result = Matrix4.create(),\r\n            i = 0,\r\n            len = this.values.length;\r\n\r\n        for (i = 0; i < len; i++) {\r\n            result.values[i] = this.values[i];\r\n        }\r\n\r\n\r\n        return result;\r\n    }\r\n\r\n    public cloneToArray(array: Float32Array, offset: number = 0): Matrix4 {\r\n        var values = this.values;\r\n\r\n        for (let index = 0; index < 16; index++) {\r\n            array[offset + index] = values[index];\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public getX() {\r\n        return Vector3.create(this.values[0], this.values[1], this.values[2]);\r\n    }\r\n\r\n    public getY() {\r\n        return Vector3.create(this.values[4], this.values[5], this.values[6]);\r\n    }\r\n\r\n    public getZ() {\r\n        return Vector3.create(this.values[8], this.values[9], this.values[10]);\r\n    }\r\n\r\n    public getTranslation() {\r\n        return Vector3.create(this.values[12], this.values[13], this.values[14]);\r\n    }\r\n\r\n    public getScale() {\r\n        return Vector3.create(this.getX().length(), this.getY().length(), this.getZ().length());\r\n    }\r\n\r\n    public getRotation() {\r\n        //return Quaternion.create().setFromEulerAngles(this.getEulerAngles());\r\n        return Quaternion.create().setFromMatrix(this);\r\n    }\r\n\r\n    public getEulerAngles() {\r\n        var x, y, z, sx, sy, sz, m, halfPi;\r\n        var scale = this.getScale();\r\n\r\n        sx = scale.x;\r\n        sy = scale.y;\r\n        sz = scale.z;\r\n\r\n        m = this.values;\r\n\r\n        y = Math.asin(-m[2] / sx);\r\n        halfPi = Math.PI * 0.5;\r\n\r\n        if (y < halfPi) {\r\n            if (y > -halfPi) {\r\n                x = Math.atan2(m[6] / sy, m[10] / sz);\r\n                z = Math.atan2(m[1] / sx, m[0] / sx);\r\n            } else {\r\n                // Not a unique solution\r\n                z = 0;\r\n                x = -Math.atan2(m[4] / sy, m[5] / sy);\r\n            }\r\n        } else {\r\n            // Not a unique solution\r\n            z = 0;\r\n            x = Math.atan2(m[4] / sy, m[5] / sy);\r\n        }\r\n\r\n        return Vector3.create(x, y, z).scale(RAD_TO_DEG);\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name setTRS\r\n     * @description Sets the specified matrix to the concatenation of a translation, a\r\n     * quaternion rotation and a scale.\r\n     * @param {Vec3} t A 3-d vector translation.\r\n     * @param {Quat} r A quaternion rotation.\r\n     * @param {Vec3} s A 3-d vector scale.\r\n     * @returns {Mat4} Self for chaining.\r\n     * @example\r\n     * var t = new Vec3(10, 20, 30);\r\n     * var r = new Quat();\r\n     * var s = new Vec3(2, 2, 2);\r\n     *\r\n     * var m = new Mat4();\r\n     * m.setTRS(t, r, s);\r\n     */\r\n    public setTRS(t: Vector3, r: Quaternion, s: Vector3) {\r\n        var tx, ty, tz, qx, qy, qz, qw, sx, sy, sz,\r\n            x2, y2, z2, xx, xy, xz, yy, yz, zz, wx, wy, wz, m;\r\n\r\n        tx = t.x;\r\n        ty = t.y;\r\n        tz = t.z;\r\n\r\n        qx = r.x;\r\n        qy = r.y;\r\n        qz = r.z;\r\n        qw = r.w;\r\n\r\n        sx = s.x;\r\n        sy = s.y;\r\n        sz = s.z;\r\n\r\n        x2 = qx + qx;\r\n        y2 = qy + qy;\r\n        z2 = qz + qz;\r\n        xx = qx * x2;\r\n        xy = qx * y2;\r\n        xz = qx * z2;\r\n        yy = qy * y2;\r\n        yz = qy * z2;\r\n        zz = qz * z2;\r\n        wx = qw * x2;\r\n        wy = qw * y2;\r\n        wz = qw * z2;\r\n\r\n        m = this.values;\r\n\r\n        m[0] = (1 - (yy + zz)) * sx;\r\n        m[1] = (xy + wz) * sx;\r\n        m[2] = (xz - wy) * sx;\r\n        m[3] = 0;\r\n\r\n        m[4] = (xy - wz) * sy;\r\n        m[5] = (1 - (xx + zz)) * sy;\r\n        m[6] = (yz + wx) * sy;\r\n        m[7] = 0;\r\n\r\n        m[8] = (xz + wy) * sz;\r\n        m[9] = (yz - wx) * sz;\r\n        m[10] = (1 - (xx + yy)) * sz;\r\n        m[11] = 0;\r\n\r\n        m[12] = tx;\r\n        m[13] = ty;\r\n        m[14] = tz;\r\n        m[15] = 1;\r\n\r\n        return this;\r\n    }\r\n}","export function virtual(target, name, descriptor) {\r\n    return descriptor;\r\n}","import { requireGetter, assert } from \"../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { cloneAttributeAsCloneable, cloneAttributeAsBasicType, CloneUtils } from \"../../definition/typescript/decorator/clone\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { virtual } from \"../../definition/typescript/decorator/virtual\";\r\n\r\n//todo add backgroundColor\r\n//todo add Frustum?\r\nexport abstract class Camera {\r\n    @requireGetter(function() {\r\n        assert(this.entityObject, Log.info.FUNC_MUST_DEFINE(\"entityObject\"));\r\n    })\r\n    get cameraToWorldMatrix() {\r\n        return this.entityObject.transform.localToWorldMatrix;\r\n    }\r\n\r\n    @cloneAttributeAsCloneable()\r\n    private _worldToCameraMatrix = null;\r\n    get worldToCameraMatrix() {\r\n        if (this._worldToCameraMatrix) {\r\n            return this._worldToCameraMatrix;\r\n        }\r\n\r\n        return this.cameraToWorldMatrix.clone().invert();\r\n    }\r\n    set worldToCameraMatrix(matrix: Matrix4) {\r\n        this._worldToCameraMatrix = matrix;\r\n    }\r\n\r\n    private _near: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    get near() {\r\n        return this._near;\r\n    }\r\n    set near(near: number) {\r\n        this._near = near;\r\n        this.pMatrixDirty = true;\r\n    }\r\n\r\n    private _far: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    get far() {\r\n        return this._far;\r\n    }\r\n    set far(far: number) {\r\n        this._far = far;\r\n        this.pMatrixDirty = true;\r\n    }\r\n\r\n    private _pMatrix: Matrix4 = Matrix4.create();\r\n    @cloneAttributeAsCloneable()\r\n    get pMatrix() {\r\n        return this._pMatrix;\r\n    }\r\n    set pMatrix(pMatrix: Matrix4) {\r\n        this._isUserSpecifyThePMatrix = true;\r\n\r\n        this._pMatrix = pMatrix;\r\n    }\r\n\r\n    public entityObject: GameObject = null;\r\n\r\n    protected pMatrixDirty: boolean = false;\r\n\r\n    @cloneAttributeAsBasicType()\r\n    private _isUserSpecifyThePMatrix: boolean = false;\r\n\r\n    // /**\r\n    //  * @name convertScreenToWorld\r\n    //  * @description Convert a point from 2D canvas pixel space to 3D world space.\r\n    //  * @param {Number} screenX x coordinate on canvas element.\r\n    //  * @param {Number} screenY y coordinate on canvas element.\r\n    //  * @param {Number} distanceFromCamera The distance from the camera in world space to create the new point.\r\n    //  * @returns {Vector3} The world space coordinate.\r\n    //  */\r\n    // public abstract convertScreenToWorld(screenX:number, screenY:number, distanceFromCamera:number):Vector3;\r\n    // public abstract convertWorldToScreen(worldX:number, worldY:number, worldZ:number, screenWidth:number, screenHeight:number):Vector2;\r\n\r\n    @virtual\r\n    public init() {\r\n        if (this.pMatrixDirty) {\r\n            this._updateProjectionMatrix();\r\n            this.pMatrixDirty = false;\r\n        }\r\n    }\r\n\r\n    @virtual\r\n    public dispose() {\r\n    }\r\n\r\n    public clone() {\r\n        return CloneUtils.clone(this);\r\n    }\r\n\r\n    public update(elapsed: number) {\r\n        if (this.pMatrixDirty) {\r\n            this._updateProjectionMatrix();\r\n\r\n            this.pMatrixDirty = false;\r\n        }\r\n    }\r\n\r\n    protected abstract updateProjectionMatrix();\r\n\r\n    protected getInvViewProjMat() {\r\n        return this.pMatrix.clone().multiply(this.worldToCameraMatrix).invert();\r\n    }\r\n\r\n    private _updateProjectionMatrix() {\r\n        if (this._isUserSpecifyThePMatrix) {\r\n            return;\r\n        }\r\n\r\n        this.updateProjectionMatrix();\r\n    }\r\n}","export abstract class Entity {\r\n    public static UID: number = 1;\r\n\r\n    private _uid: string = null;\r\n    get uid() {\r\n        return this._uid;\r\n    }\r\n    set uid(uid: string) {\r\n        this._uid = uid;\r\n    }\r\n\r\n    constructor(uidPre: string) {\r\n        this._uid = uidPre + String(Entity.UID++);\r\n    }\r\n}","import { JudgeUtils as JudgeUtils$ } from \"wonder-commonlib/dist/es2015/utils/JudgeUtils\";\r\nimport { Entity } from \"./core/Entity\";\r\nimport { IObserver } from \"./observer/IObserver\";\r\n\r\nexport class JudgeUtils extends JudgeUtils$ {\r\n    public static isPromise(obj) {\r\n        return !!obj\r\n            && !super.isFunction(obj.subscribe)\r\n            && super.isFunction(obj.then);\r\n    }\r\n\r\n    public static isEqual(ob1: Entity, ob2: Entity) {\r\n        return ob1.uid === ob2.uid;\r\n    }\r\n\r\n    public static isIObserver(i: IObserver) {\r\n        return i.next && i.error && i.completed;\r\n    }\r\n}","import { IObserver } from \"./IObserver\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\n\r\nexport class SubjectObserver implements IObserver {\r\n    public observers: Collection<IObserver> = Collection.create<IObserver>();\r\n\r\n    private _disposable: IDisposable = null;\r\n\r\n    public isEmpty() {\r\n        return this.observers.getCount() === 0;\r\n    }\r\n\r\n    public next(value: any) {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.next(value);\r\n        });\r\n    }\r\n\r\n    public error(error: any) {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.error(error);\r\n        });\r\n    }\r\n\r\n    public completed() {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.completed();\r\n        });\r\n    }\r\n\r\n    public addChild(observer: Observer) {\r\n        this.observers.addChild(observer);\r\n\r\n        observer.setDisposable(this._disposable);\r\n    }\r\n\r\n    public removeChild(observer: Observer) {\r\n        this.observers.removeChild((ob: Observer) => {\r\n            return JudgeUtils.isEqual(ob, observer);\r\n        });\r\n    }\r\n\r\n    public dispose() {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.dispose();\r\n        });\r\n\r\n        this.observers.removeAllChildren();\r\n    }\r\n\r\n    public setDisposable(disposable: IDisposable) {\r\n        this.observers.forEach((observer: Observer) => {\r\n            observer.setDisposable(disposable);\r\n        });\r\n\r\n        this._disposable = disposable;\r\n    }\r\n}\r\n","import { Entity } from \"./Entity\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\n\r\nexport abstract class Observer extends Entity implements IObserver {\r\n    private _isDisposed: boolean = null;\r\n    get isDisposed() {\r\n        return this._isDisposed;\r\n    }\r\n    set isDisposed(isDisposed: boolean) {\r\n        this._isDisposed = isDisposed;\r\n    }\r\n\r\n    protected onUserNext: Function = null;\r\n    protected onUserError: Function = null;\r\n    protected onUserCompleted: Function = null;\r\n\r\n    private _isStop: boolean = false;\r\n    //private _disposeHandler:wdCb.Collection<Function> = wdCb.Collection.create<Function>();\r\n    private _disposable: IDisposable = null;\r\n\r\n\r\n    constructor(observer: IObserver);\r\n    constructor(onNext: Function, onError: Function, onCompleted: Function);\r\n\r\n    constructor(...args) {\r\n        super(\"Observer\");\r\n\r\n        if (args.length === 1) {\r\n            let observer: IObserver = args[0];\r\n\r\n            this.onUserNext = function(v) {\r\n                observer.next(v);\r\n            };\r\n            this.onUserError = function(e) {\r\n                observer.error(e);\r\n            };\r\n            this.onUserCompleted = function() {\r\n                observer.completed();\r\n            };\r\n        }\r\n        else {\r\n            let onNext = args[0],\r\n                onError = args[1],\r\n                onCompleted = args[2];\r\n\r\n            this.onUserNext = onNext || function(v) { };\r\n            this.onUserError = onError || function(e) {\r\n                throw e;\r\n            };\r\n            this.onUserCompleted = onCompleted || function() { };\r\n        }\r\n    }\r\n\r\n    public next(value: any) {\r\n        if (!this._isStop) {\r\n            return this.onNext(value);\r\n        }\r\n    }\r\n\r\n    public error(error: any) {\r\n        if (!this._isStop) {\r\n            this._isStop = true;\r\n            this.onError(error);\r\n        }\r\n    }\r\n\r\n    public completed() {\r\n        if (!this._isStop) {\r\n            this._isStop = true;\r\n            this.onCompleted();\r\n        }\r\n    }\r\n\r\n    public dispose() {\r\n        this._isStop = true;\r\n        this._isDisposed = true;\r\n\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n        }\r\n\r\n        //this._disposeHandler.forEach((handler) => {\r\n        //    handler();\r\n        //});\r\n    }\r\n\r\n    //public fail(e) {\r\n    //    if (!this._isStop) {\r\n    //        this._isStop = true;\r\n    //        this.error(e);\r\n    //        return true;\r\n    //    }\r\n    //\r\n    //    return false;\r\n    //}\r\n\r\n    public setDisposable(disposable: IDisposable) {\r\n        this._disposable = disposable;\r\n    }\r\n\r\n    protected abstract onNext(value: any);\r\n\r\n    protected abstract onError(error: any);\r\n\r\n    protected abstract onCompleted();\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Main } from \"../../../core/Main\";\r\n\r\nexport function assert(cond: boolean, message: string = \"contract error\") {\r\n    Log.error(!cond, message);\r\n}\r\n\r\nexport function requireCheck(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(...args) {\r\n            if (Main.isTest) {\r\n                InFunc.apply(this, args);\r\n            }\r\n\r\n            return value.apply(this, args);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensure(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(...args) {\r\n            var result = value.apply(this, args),\r\n                params = [result].concat(args);\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.apply(this, params);\r\n            }\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireGetter(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var getter = descriptor.get;\r\n\r\n        descriptor.get = function() {\r\n            if (Main.isTest) {\r\n                InFunc.call(this);\r\n            }\r\n\r\n            return getter.call(this);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireSetter(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var setter = descriptor.set;\r\n\r\n        descriptor.set = function(val) {\r\n            if (Main.isTest) {\r\n                InFunc.call(this, val);\r\n            }\r\n\r\n            setter.call(this, val);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureGetter(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var getter = descriptor.get;\r\n\r\n        descriptor.get = function() {\r\n            var result = getter.call(this);\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.call(this, result);\r\n            }\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureSetter(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var setter = descriptor.set;\r\n\r\n        descriptor.set = function(val) {\r\n            var result = setter.call(this, val),\r\n                params = [result, val];\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.apply(this, params);\r\n            }\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function invariant(func) {\r\n    return function(target) {\r\n        if (Main.isTest) {\r\n            func(target);\r\n        }\r\n    }\r\n}","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { requireCheck } from \"../definition/typescript/decorator/contract\";\r\nimport { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\n\r\nexport class AutoDetachObserver extends Observer {\r\n    public static create(observer: IObserver);\r\n    public static create(onNext: Function, onError: Function, onCompleted: Function);\r\n\r\n    public static create(...args) {\r\n        if (args.length === 1) {\r\n            return new this(args[0]);\r\n        }\r\n        else {\r\n            return new this(args[0], args[1], args[2]);\r\n        }\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        if (this.isDisposed) {\r\n            Log.warn(\"only can dispose once\");\r\n        }\r\n    })\r\n    public dispose() {\r\n        if (this.isDisposed) {\r\n            return;\r\n        }\r\n\r\n        super.dispose();\r\n    }\r\n\r\n    protected onNext(value: any) {\r\n        try {\r\n            this.onUserNext(value);\r\n        }\r\n        catch (e) {\r\n            this.onError(e);\r\n        }\r\n    }\r\n\r\n    protected onError(error: any) {\r\n        try {\r\n            this.onUserError(error);\r\n        }\r\n        catch (e) {\r\n            throw e;\r\n        }\r\n        finally {\r\n            this.dispose();\r\n        }\r\n    }\r\n\r\n    protected onCompleted() {\r\n        try {\r\n            this.onUserCompleted();\r\n            this.dispose();\r\n        }\r\n        catch (e) {\r\n            throw e;\r\n        }\r\n    }\r\n}","import { IDisposable } from \"./IDisposable\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { GeneratorSubject } from \"../subject/GeneratorSubject\";\r\nimport { Observer } from \"../core/Observer\";\r\n\r\nexport class InnerSubscription implements IDisposable {\r\n    public static create(subject: Subject | GeneratorSubject, observer: Observer) {\r\n        var obj = new this(subject, observer);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _subject: Subject | GeneratorSubject = null;\r\n    private _observer: Observer = null;\r\n\r\n    constructor(subject: Subject | GeneratorSubject, observer: Observer) {\r\n        this._subject = subject;\r\n        this._observer = observer;\r\n    }\r\n\r\n    public dispose() {\r\n        this._subject.remove(this._observer);\r\n\r\n        this._observer.dispose();\r\n    }\r\n}","import { IObserver } from \"../observer/IObserver\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { SubjectObserver } from \"../observer/SubjectObserver\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\nimport { InnerSubscription } from \"../Disposable/InnerSubscription\";\r\n\r\nexport class Subject implements IObserver {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    get source() {\r\n        return this._source;\r\n    }\r\n    set source(source: Stream) {\r\n        this._source = source;\r\n    }\r\n\r\n    private _observer: any = new SubjectObserver();\r\n\r\n    public subscribe(arg1?: Function | Observer, onError?: Function, onCompleted?: Function): IDisposable {\r\n        var observer: Observer = arg1 instanceof Observer\r\n            ? <AutoDetachObserver>arg1\r\n            : AutoDetachObserver.create(<Function>arg1, onError, onCompleted);\r\n\r\n        //this._source && observer.setDisposeHandler(this._source.disposeHandler);\r\n\r\n        this._observer.addChild(observer);\r\n\r\n        return InnerSubscription.create(this, observer);\r\n    }\r\n\r\n    public next(value: any) {\r\n        this._observer.next(value);\r\n    }\r\n\r\n    public error(error: any) {\r\n        this._observer.error(error);\r\n    }\r\n\r\n    public completed() {\r\n        this._observer.completed();\r\n    }\r\n\r\n    public start() {\r\n        if (!this._source) {\r\n            return;\r\n        }\r\n\r\n        this._observer.setDisposable(this._source.buildStream(this));\r\n    }\r\n\r\n    public remove(observer: Observer) {\r\n        this._observer.removeChild(observer);\r\n    }\r\n\r\n    public dispose() {\r\n        this._observer.dispose();\r\n    }\r\n}","import { Entity } from \"../core/Entity\";\r\nimport { IDisposable } from \"./IDisposable\";\r\n\r\nexport class SingleDisposable extends Entity implements IDisposable {\r\n    public static create(disposeHandler: Function = function() { }) {\r\n        var obj = new this(disposeHandler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _disposeHandler: Function = null;\r\n    private _isDisposed: boolean = false;\r\n\r\n    constructor(disposeHandler: Function) {\r\n        super(\"SingleDisposable\");\r\n\r\n        this._disposeHandler = disposeHandler;\r\n    }\r\n\r\n    public setDisposeHandler(handler: Function) {\r\n        this._disposeHandler = handler;\r\n    }\r\n\r\n    public dispose() {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n\r\n        this._isDisposed = true;\r\n\r\n        this._disposeHandler();\r\n    }\r\n}","export class ClassMapUtils {\r\n    private static _classMap: ClassMapData = {};\r\n\r\n    public static addClassMap(className: string, _class: any) {\r\n        this._classMap[className] = _class;\r\n    }\r\n\r\n    public static getClass(className: string) {\r\n        return this._classMap[className];\r\n    }\r\n}\r\n\r\ntype ClassMapData = {\r\n    [className: string]: any;\r\n}\r\n","export class FunctionUtils {\r\n    public static bind(object: any, func: Function) {\r\n        return function() {\r\n            return func.apply(object, arguments);\r\n        };\r\n    }\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Entity } from \"./Entity\";\r\nimport { Scheduler } from \"./Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { Observer } from \"./Observer\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { ClassMapUtils } from \"../utils/ClassMapUtils\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { FunctionUtils } from \"wonder-commonlib/dist/es2015/utils/FunctionUtils\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\n\r\nexport abstract class Stream extends Entity {\r\n    public scheduler: Scheduler = null;\r\n    public subscribeFunc: (observer: IObserver) => Function | void = null;\r\n\r\n    constructor(subscribeFunc) {\r\n        super(\"Stream\");\r\n\r\n        this.subscribeFunc = subscribeFunc || function() { };\r\n    }\r\n\r\n    public abstract subscribe(arg1: Function | Observer | Subject, onError?: Function, onCompleted?: Function): IDisposable;\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        return SingleDisposable.create(<Function>(this.subscribeFunc(observer) || function() { }));\r\n    }\r\n\r\n    public do(onNext?: Function, onError?: Function, onCompleted?: Function) {\r\n        return ClassMapUtils.getClass(\"DoStream\").create(this, onNext, onError, onCompleted);\r\n    }\r\n\r\n    public map(selector: Function) {\r\n        return ClassMapUtils.getClass(\"MapStream\").create(this, selector);\r\n    }\r\n\r\n    public flatMap(selector: Function) {\r\n        return this.map(selector).mergeAll();\r\n    }\r\n\r\n    public concatMap(selector: Function) {\r\n        return this.map(selector).concatAll();\r\n    }\r\n\r\n    public mergeAll() {\r\n        return ClassMapUtils.getClass(\"MergeAllStream\").create(this);\r\n    }\r\n\r\n    public concatAll() {\r\n        return this.merge(1);\r\n    }\r\n\r\n    public skipUntil(otherStream: Stream) {\r\n        return ClassMapUtils.getClass(\"SkipUntilStream\").create(this, otherStream);\r\n    }\r\n\r\n    public takeUntil(otherStream: Stream) {\r\n        return ClassMapUtils.getClass(\"TakeUntilStream\").create(this, otherStream);\r\n    }\r\n\r\n    @requireCheck(function(count: number = 1) {\r\n        assert(count >= 0, Log.info.FUNC_SHOULD(\"count\", \">= 0\"));\r\n    })\r\n    public take(count: number = 1) {\r\n        var self = this;\r\n\r\n        if (count === 0) {\r\n            return ClassMapUtils.getClass(\"Operator\").empty();\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            self.subscribe((value: any) => {\r\n                if (count > 0) {\r\n                    observer.next(value);\r\n                }\r\n\r\n                count--;\r\n\r\n                if (count <= 0) {\r\n                    observer.completed();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    @requireCheck(function(count: number = 1) {\r\n        assert(count >= 0, Log.info.FUNC_SHOULD(\"count\", \">= 0\"));\r\n    })\r\n    public takeLast(count: number = 1) {\r\n        var self = this;\r\n\r\n        if (count === 0) {\r\n            return ClassMapUtils.getClass(\"Operator\").empty();\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var queue = [];\r\n\r\n            self.subscribe((value: any) => {\r\n                queue.push(value);\r\n\r\n                if (queue.length > count) {\r\n                    queue.shift();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                while (queue.length > 0) {\r\n                    observer.next(queue.shift());\r\n                }\r\n\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public takeWhile(predicate: (value: any, index: number, source: Stream) => boolean, thisArg = this) {\r\n        var self = this,\r\n            bindPredicate = null;\r\n\r\n        bindPredicate = FunctionUtils.bind(thisArg, predicate);\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var i = 0,\r\n                isStart = false;\r\n\r\n            self.subscribe((value: any) => {\r\n                if (bindPredicate(value, i++, self)) {\r\n                    try {\r\n                        observer.next(value);\r\n                        isStart = true;\r\n                    }\r\n                    catch (e) {\r\n                        observer.error(e);\r\n                        return;\r\n                    }\r\n                }\r\n                else {\r\n                    if (isStart) {\r\n                        observer.completed();\r\n                    }\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public lastOrDefault(defaultValue: any = null) {\r\n        var self = this;\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var queue = [];\r\n\r\n            self.subscribe((value: any) => {\r\n                queue.push(value);\r\n\r\n                if (queue.length > 1) {\r\n                    queue.shift();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                if (queue.length === 0) {\r\n                    observer.next(defaultValue);\r\n                }\r\n                else {\r\n                    while (queue.length > 0) {\r\n                        observer.next(queue.shift());\r\n                    }\r\n                }\r\n\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public filter(predicate: (value: any) => boolean, thisArg = this) {\r\n        if (this instanceof ClassMapUtils.getClass(\"FilterStream\")) {\r\n            let self: any = this;\r\n\r\n            return self.internalFilter(predicate, thisArg);\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"FilterStream\").create(this, predicate, thisArg);\r\n    }\r\n\r\n    public filterWithState(predicate: (value: any) => boolean, thisArg = this) {\r\n        if (this instanceof ClassMapUtils.getClass(\"FilterStream\")) {\r\n            let self: any = this;\r\n\r\n            return self.internalFilter(predicate, thisArg);\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"FilterWithStateStream\").create(this, predicate, thisArg);\r\n    }\r\n\r\n    public concat(streamArr: Array<Stream>);\r\n    public concat(...otherStream);\r\n\r\n    public concat() {\r\n        var args: Array<Stream> = null;\r\n\r\n        if (JudgeUtils.isArray(arguments[0])) {\r\n            args = arguments[0];\r\n        }\r\n        else {\r\n            args = Array.prototype.slice.call(arguments, 0);\r\n        }\r\n\r\n        args.unshift(this);\r\n\r\n        return ClassMapUtils.getClass(\"ConcatStream\").create(args);\r\n    }\r\n\r\n    public merge(maxConcurrent: number);\r\n    public merge(streamArr: Array<Stream>);\r\n    public merge(...otherStreams);\r\n\r\n    public merge(...args) {\r\n        if (JudgeUtils.isNumber(args[0])) {\r\n            var maxConcurrent: number = args[0];\r\n\r\n            return ClassMapUtils.getClass(\"MergeStream\").create(this, maxConcurrent);\r\n        }\r\n\r\n        if (JudgeUtils.isArray(args[0])) {\r\n            args = arguments[0];\r\n        }\r\n        else {\r\n        }\r\n\r\n        let stream: Stream = null;\r\n\r\n        args.unshift(this);\r\n\r\n        stream = ClassMapUtils.getClass(\"Operator\").fromArray(args).mergeAll();\r\n\r\n        return stream;\r\n    }\r\n\r\n    public repeat(count: number = -1) {\r\n        return ClassMapUtils.getClass(\"RepeatStream\").create(this, count);\r\n    }\r\n\r\n    public ignoreElements() {\r\n        return ClassMapUtils.getClass(\"IgnoreElementsStream\").create(this);\r\n    }\r\n\r\n    protected handleSubject(subject: any) {\r\n        if (this._isSubject(subject)) {\r\n            this._setSubject(subject);\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private _isSubject(subject: Subject) {\r\n        return subject instanceof Subject;\r\n    }\r\n\r\n    private _setSubject(subject: Subject) {\r\n        subject.source = this;\r\n    }\r\n}","import { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\n\r\nexport abstract class BaseStream extends Stream {\r\n    public abstract subscribeCore(observer: IObserver): IDisposable;\r\n\r\n    public subscribe(arg1: Function | Observer | Subject, onError?, onCompleted?): IDisposable {\r\n        var observer: Observer = null;\r\n\r\n        if (this.handleSubject(arg1)) {\r\n            return;\r\n        }\r\n\r\n        observer = arg1 instanceof Observer\r\n            ? AutoDetachObserver.create(<IObserver>arg1)\r\n            : AutoDetachObserver.create(<Function>arg1, onError, onCompleted);\r\n\r\n        //observer.setDisposeHandler(this.disposeHandler);\r\n\r\n\r\n        observer.setDisposable(this.buildStream(observer));\r\n\r\n        return observer;\r\n    }\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        super.buildStream(observer);\r\n\r\n        return this.subscribeCore(observer);\r\n    }\r\n\r\n    //private _hasMultiObservers(){\r\n    //    return this.scheduler.getObservers() > 1;\r\n    //}\r\n}","import { Entity } from \"../core/Entity\";\r\nimport { IDisposable } from \"./IDisposable\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\nexport class GroupDisposable extends Entity implements IDisposable {\r\n    public static create(disposable?: IDisposable) {\r\n        var obj = new this(disposable);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _group: Collection<IDisposable> = Collection.create<IDisposable>();\r\n    private _isDisposed: boolean = false;\r\n\r\n    constructor(disposable?: IDisposable) {\r\n        super(\"GroupDisposable\");\r\n\r\n        if (disposable) {\r\n            this._group.addChild(disposable);\r\n        }\r\n    }\r\n\r\n    public add(disposable: IDisposable) {\r\n        this._group.addChild(disposable);\r\n\r\n        return this;\r\n    }\r\n\r\n    public remove(disposable: IDisposable) {\r\n        this._group.removeChild(disposable);\r\n\r\n        return this;\r\n    }\r\n\r\n    public dispose() {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n\r\n        this._isDisposed = true;\r\n\r\n        this._group.forEach((disposable: IDisposable) => {\r\n            disposable.dispose();\r\n        });\r\n    }\r\n}","import { JudgeUtils } from \"../JudgeUtils\";\r\n\r\ndeclare var global: NodeJS.Global, window: Window;\r\n\r\nexport var root: any;\r\n\r\nif (JudgeUtils.isNodeJs() && typeof global != \"undefined\") {\r\n    root = global;\r\n}\r\nelse {\r\n    root = window;\r\n}\r\n","import { IObserver } from \"../observer/IObserver\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class Scheduler {\r\n    //todo remove \"...args\"\r\n    public static create(...args) {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _requestLoopId: any = null;\r\n    get requestLoopId() {\r\n        return this._requestLoopId;\r\n    }\r\n    set requestLoopId(requestLoopId: any) {\r\n        this._requestLoopId = requestLoopId;\r\n    }\r\n\r\n    //param observer is used by TestScheduler to rewrite\r\n\r\n    public publishRecursive(observer: IObserver, initial: any, action: Function) {\r\n        action(initial);\r\n    }\r\n\r\n    public publishInterval(observer: IObserver, initial: any, interval: number, action: Function): number {\r\n        return root.setInterval(() => {\r\n            initial = action(initial);\r\n        }, interval);\r\n    }\r\n\r\n    public publishIntervalRequest(observer: IObserver, action: Function) {\r\n        var self = this,\r\n            loop = (time) => {\r\n                var isEnd = action(time);\r\n\r\n                if (isEnd) {\r\n                    return;\r\n                }\r\n\r\n                self._requestLoopId = root.requestNextAnimationFrame(loop);\r\n            };\r\n\r\n        this._requestLoopId = root.requestNextAnimationFrame(loop);\r\n    }\r\n\r\n    public publishTimeout(observer: IObserver, time: number, action: Function): number {\r\n        return root.setTimeout(() => {\r\n            action(time);\r\n            observer.completed();\r\n        }, time);\r\n    }\r\n}","import { Stream } from \"../core/Stream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class AnonymousStream extends Stream {\r\n    public static create(subscribeFunc: Function) {\r\n        var obj = new this(subscribeFunc);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(subscribeFunc: Function) {\r\n        super(subscribeFunc);\r\n\r\n        this.scheduler = Scheduler.create();\r\n    }\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        return SingleDisposable.create(<Function>(this.subscribeFunc(observer) || function() { }));\r\n    }\r\n\r\n    public subscribe(subject: Subject): IDisposable;\r\n    public subscribe(observer: IObserver): IDisposable;\r\n\r\n    public subscribe(onNext: (value: any) => void): IDisposable;\r\n    public subscribe(onNext: (value: any) => void, onError: (e: any) => void): IDisposable;\r\n    public subscribe(onNext: (value: any) => void, onError: (e: any) => void, onComplete: () => void): IDisposable;\r\n\r\n    public subscribe(...args): IDisposable {\r\n        var observer: AutoDetachObserver = null;\r\n\r\n        if (args[0] instanceof Subject) {\r\n            let subject: Subject = <Subject>args[0];\r\n\r\n            this.handleSubject(subject);\r\n\r\n            return;\r\n        }\r\n        else if (JudgeUtils.isIObserver(<IObserver>args[0])) {\r\n            observer = AutoDetachObserver.create(<IObserver>args[0]);\r\n        }\r\n        else {\r\n            let onNext: Function = <Function>args[0],\r\n                onError: Function = <Function>args[1] || null,\r\n                onCompleted: Function = <Function>args[2] || null;\r\n\r\n            observer = AutoDetachObserver.create(onNext, onError, onCompleted);\r\n        }\r\n\r\n        observer.setDisposable(this.buildStream(observer));\r\n\r\n        return observer;\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromArrayStream extends BaseStream {\r\n    public static create(array: Array<any>, scheduler: Scheduler) {\r\n        var obj = new this(array, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _array: Array<any> = null;\r\n\r\n    constructor(array: Array<any>, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._array = array;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var array = this._array,\r\n            len = array.length;\r\n\r\n        function loopRecursive(i) {\r\n            if (i < len) {\r\n                observer.next(array[i]);\r\n\r\n                loopRecursive(i + 1);\r\n            } else {\r\n                observer.completed();\r\n            }\r\n        }\r\n\r\n        this.scheduler.publishRecursive(observer, 0, loopRecursive);\r\n\r\n        return SingleDisposable.create();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromPromiseStream extends BaseStream {\r\n    public static create(promise: any, scheduler: Scheduler) {\r\n        var obj = new this(promise, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _promise: any = null;\r\n\r\n    constructor(promise: any, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._promise = promise;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        this._promise.then((data) => {\r\n            observer.next(data);\r\n            observer.completed();\r\n        }, (err) => {\r\n            observer.error(err);\r\n        }, observer);\r\n\r\n        return SingleDisposable.create();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromEventPatternStream extends BaseStream {\r\n    public static create(addHandler: Function, removeHandler: Function) {\r\n        var obj = new this(addHandler, removeHandler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _addHandler: Function = null;\r\n    private _removeHandler: Function = null;\r\n\r\n    constructor(addHandler: Function, removeHandler: Function) {\r\n        super(null);\r\n\r\n        this._addHandler = addHandler;\r\n        this._removeHandler = removeHandler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this;\r\n\r\n        function innerHandler(event) {\r\n            observer.next(event);\r\n        }\r\n\r\n        this._addHandler(innerHandler);\r\n\r\n        return SingleDisposable.create(() => {\r\n            self._removeHandler(innerHandler);\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class IntervalStream extends BaseStream {\r\n    public static create(interval: number, scheduler: Scheduler) {\r\n        var obj = new this(interval, scheduler);\r\n\r\n        obj.initWhenCreate();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _interval: number = null;\r\n\r\n    constructor(interval: number, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._interval = interval;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public initWhenCreate() {\r\n        this._interval = this._interval <= 0 ? 1 : this._interval;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this,\r\n            id = null;\r\n\r\n        id = this.scheduler.publishInterval(observer, 0, this._interval, (count) => {\r\n            //self.scheduler.next(count);\r\n            observer.next(count);\r\n\r\n            return count + 1;\r\n        });\r\n\r\n        //Disposer.addDisposeHandler(() => {\r\n        //});\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.clearInterval(id);\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class IntervalRequestStream extends BaseStream {\r\n    public static create(scheduler: Scheduler) {\r\n        var obj = new this(scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _isEnd: boolean = false;\r\n\r\n    constructor(scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this;\r\n\r\n        this.scheduler.publishIntervalRequest(observer, (time) => {\r\n            observer.next(time);\r\n\r\n            return self._isEnd;\r\n        });\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.cancelNextRequestAnimationFrame(self.scheduler.requestLoopId);\r\n            self._isEnd = true;\r\n        });\r\n    }\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { BaseStream } from \"./BaseStream\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class TimeoutStream extends BaseStream {\r\n    @requireCheck(function(time: number, scheduler: Scheduler) {\r\n        assert(time > 0, Log.info.FUNC_SHOULD(\"time\", \"> 0\"));\r\n    })\r\n    public static create(time: number, scheduler: Scheduler) {\r\n        var obj = new this(time, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _time: number = null;\r\n\r\n    constructor(time: number, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._time = time;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var id = null;\r\n\r\n        id = this.scheduler.publishTimeout(observer, this._time, (time) => {\r\n            observer.next(time);\r\n        });\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.clearTimeout(id);\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\n\r\nexport class DeferStream extends BaseStream {\r\n    public static create(buildStreamFunc: Function) {\r\n        var obj = new this(buildStreamFunc);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _buildStreamFunc: Function = null;\r\n\r\n    constructor(buildStreamFunc: Function) {\r\n        super(null);\r\n\r\n        this._buildStreamFunc = buildStreamFunc;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var group = GroupDisposable.create();\r\n\r\n        group.add(this._buildStreamFunc().buildStream(observer));\r\n\r\n        return group;\r\n    }\r\n}","import { ClassMapUtils } from \"../../../utils/ClassMapUtils\";\r\n\r\nexport function registerClass(className: string) {\r\n    return function(target) {\r\n        ClassMapUtils.addClassMap(className, target);\r\n    }\r\n}\r\n\r\n","import { AnonymousStream } from \"../stream/AnonymousStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { FromArrayStream } from \"../stream/FromArrayStream\";\r\nimport { FromPromiseStream } from \"../stream/FromPromiseStream\";\r\nimport { FromEventPatternStream } from \"../stream/FromEventPatternStream\";\r\nimport { IntervalStream } from \"../stream/IntervalStream\";\r\nimport { IntervalRequestStream } from \"../stream/IntervalRequestStream\";\r\nimport { TimeoutStream } from \"../stream/TimeoutStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { root } from \"./Variable\";\r\nimport { DeferStream } from \"../stream/DeferStream\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"Operator\")\r\nexport class Operator {\r\n    public static empty() {\r\n        return this.createStream((observer: IObserver) => {\r\n            observer.completed();\r\n        });\r\n    }\r\n\r\n    public static createStream(subscribeFunc) {\r\n        return AnonymousStream.create(subscribeFunc);\r\n    }\r\n\r\n    public static fromArray(array: Array<any>, scheduler = Scheduler.create()) {\r\n        return FromArrayStream.create(array, scheduler);\r\n    }\r\n}\r\n\r\nexport var createStream = Operator.createStream;\r\n\r\nexport var empty = Operator.empty;\r\n\r\nexport var fromArray = Operator.fromArray;\r\n\r\nexport var fromPromise = (promise: any, scheduler = Scheduler.create()) => {\r\n    return FromPromiseStream.create(promise, scheduler);\r\n};\r\n\r\nexport var fromEventPattern = (addHandler: Function, removeHandler: Function) => {\r\n    return FromEventPatternStream.create(addHandler, removeHandler);\r\n};\r\n\r\nexport var interval = (interval, scheduler = Scheduler.create()) => {\r\n    return IntervalStream.create(interval, scheduler);\r\n};\r\n\r\nexport var intervalRequest = (scheduler = Scheduler.create()) => {\r\n    return IntervalRequestStream.create(scheduler);\r\n};\r\n\r\nexport var timeout = (time, scheduler = Scheduler.create()) => {\r\n    return TimeoutStream.create(time, scheduler);\r\n};\r\nexport var callFunc = (func: Function, context = root) => {\r\n    return createStream((observer: IObserver) => {\r\n        try {\r\n            observer.next(func.call(context, null));\r\n        }\r\n        catch (e) {\r\n            observer.error(e);\r\n        }\r\n\r\n        observer.completed();\r\n    });\r\n};\r\n\r\nexport var judge = (condition: Function, thenSource: Function, elseSource: Function) => {\r\n    return condition() ? thenSource() : elseSource();\r\n};\r\n\r\nexport var defer = (buildStreamFunc: Function) => {\r\n    return DeferStream.create(buildStreamFunc);\r\n};\r\n\r\nexport var just = (returnValue: any) => {\r\n    return createStream((observer: IObserver) => {\r\n        observer.next(returnValue);\r\n        observer.completed();\r\n    });\r\n}\r\n","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { fromPromise } from \"../global/Operator\";\r\n\r\nexport class MergeAllObserver extends Observer {\r\n    public static create(currentObserver: IObserver, streamGroup: Collection<Stream>, groupDisposable: GroupDisposable) {\r\n        return new this(currentObserver, streamGroup, groupDisposable);\r\n    }\r\n\r\n    constructor(currentObserver: IObserver, streamGroup: Collection<Stream>, groupDisposable: GroupDisposable) {\r\n        super(null, null, null);\r\n\r\n        this.currentObserver = currentObserver;\r\n        this._streamGroup = streamGroup;\r\n        this._groupDisposable = groupDisposable;\r\n    }\r\n\r\n    public done: boolean = false;\r\n    public currentObserver: IObserver = null;\r\n\r\n    private _streamGroup: Collection<Stream> = null;\r\n    private _groupDisposable: GroupDisposable = null;\r\n\r\n    @requireCheck(function(innerSource: any) {\r\n        assert(innerSource instanceof Stream || JudgeUtils.isPromise(innerSource), Log.info.FUNC_MUST_BE(\"innerSource\", \"Stream or Promise\"));\r\n\r\n    })\r\n    protected onNext(innerSource: any) {\r\n        if (JudgeUtils.isPromise(innerSource)) {\r\n            innerSource = fromPromise(innerSource);\r\n        }\r\n\r\n        this._streamGroup.addChild(innerSource);\r\n\r\n        this._groupDisposable.add(innerSource.buildStream(InnerObserver.create(this, this._streamGroup, innerSource)));\r\n    }\r\n\r\n    protected onError(error) {\r\n        this.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this.done = true;\r\n\r\n        if (this._streamGroup.getCount() === 0) {\r\n            this.currentObserver.completed();\r\n        }\r\n    }\r\n}\r\n\r\nclass InnerObserver extends Observer {\r\n    public static create(parent: MergeAllObserver, streamGroup: Collection<Stream>, currentStream: Stream) {\r\n        var obj = new this(parent, streamGroup, currentStream);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(parent: MergeAllObserver, streamGroup: Collection<Stream>, currentStream: Stream) {\r\n        super(null, null, null);\r\n\r\n        this._parent = parent;\r\n        this._streamGroup = streamGroup;\r\n        this._currentStream = currentStream;\r\n    }\r\n\r\n    private _parent: MergeAllObserver = null;\r\n    private _streamGroup: Collection<Stream> = null;\r\n    private _currentStream: Stream = null;\r\n\r\n    protected onNext(value) {\r\n        this._parent.currentObserver.next(value);\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._parent.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        var currentStream = this._currentStream,\r\n            parent = this._parent;\r\n\r\n        this._streamGroup.removeChild((stream: Stream) => {\r\n            return JudgeUtils.isEqual(stream, currentStream);\r\n        });\r\n\r\n        //parent.currentObserver.completed();\r\n        //this.dispose();\r\n\r\n        /*!\r\n        if this innerSource is async stream(as promise stream),\r\n        it will first exec all parent.next and one parent.completed,\r\n        then exec all this.next and all this.completed\r\n        so in this case, it should invoke parent.currentObserver.completed after the last invokcation of this.completed(have invoked all the innerSource)\r\n        */\r\n        if (this._isAsync() && this._streamGroup.getCount() === 0) {\r\n            parent.currentObserver.completed();\r\n        }\r\n    }\r\n\r\n    private _isAsync() {\r\n        return this._parent.done;\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { MergeAllObserver } from \"../observer/MergeAllObserver\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"MergeAllStream\")\r\nexport class MergeAllStream extends BaseStream {\r\n    public static create(source: Stream) {\r\n        var obj = new this(source);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(source: Stream) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n        //this._observer = AnonymousObserver.create(onNext, onError,onCompleted);\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    private _observer: Observer = null;\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var streamGroup = Collection.create<Stream>(),\r\n            groupDisposable = GroupDisposable.create();\r\n\r\n        this._source.buildStream(MergeAllObserver.create(observer, streamGroup, groupDisposable));\r\n\r\n        return groupDisposable;\r\n    }\r\n}\r\n","import { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\nexport abstract class Entity {\r\n    private static _count: number = 1;\r\n\r\n    constructor() {\r\n        this.uid = Entity._count;\r\n        Entity._count += 1;\r\n    }\r\n\r\n    public uid: number = null;\r\n    public data: any = null;\r\n\r\n    private _tagList: Collection<string> = Collection.create<string>();\r\n\r\n\r\n    public addTag(tag: string) {\r\n        this._tagList.addChild(tag);\r\n    }\r\n\r\n    public removeTag(tag: string) {\r\n        this._tagList.removeChild(tag);\r\n    }\r\n\r\n    public getTagList() {\r\n        return this._tagList;\r\n    }\r\n\r\n    public hasTag(tag: string) {\r\n        return this._tagList.hasChild(tag);\r\n    }\r\n\r\n    public containTag(tag: string) {\r\n        return this._tagList.hasChildWithFunc((t: string) => {\r\n            return t.indexOf(tag) > -1;\r\n        })\r\n    }\r\n}","import { Entity } from \"./Entity\";\r\nimport { Transform } from \"../component/transform/Transform\";\r\nimport { EntityObject } from \"./entityObject/EntityObject\";\r\nimport { virtual } from \"../definition/typescript/decorator/virtual\";\r\nimport { CloneUtils } from \"../definition/typescript/decorator/clone\";\r\n\r\nexport abstract class Component extends Entity {\r\n    get transform(): Transform {\r\n        if (!this.entityObject) {\r\n            return null;\r\n        }\r\n\r\n        return this.entityObject.transform;\r\n    }\r\n\r\n    public entityObject: EntityObject = null;\r\n\r\n    @virtual\r\n    public init() {\r\n    }\r\n\r\n    @virtual\r\n    public dispose() {\r\n    }\r\n\r\n    @virtual\r\n    public clone(): any {\r\n        return CloneUtils.clone(this);\r\n    }\r\n\r\n    @virtual\r\n    public addToObject(entityObject: EntityObject, isShareComponent: boolean = false) {\r\n        if (isShareComponent) {\r\n            return;\r\n        }\r\n\r\n        if (this.entityObject) {\r\n            this.entityObject.removeComponent(this);\r\n        }\r\n        this.entityObject = entityObject;\r\n\r\n        this.addToComponentContainer();\r\n    }\r\n\r\n    @virtual\r\n    public addToComponentContainer() {\r\n    }\r\n\r\n    @virtual\r\n    public removeFromObject(entityObject: EntityObject) {\r\n        this.removeFromComponentContainer();\r\n    }\r\n\r\n    @virtual\r\n    public removeFromComponentContainer() {\r\n    }\r\n}","export function cacheGetter(judgeFunc: () => boolean, returnCacheValueFunc: () => any, setCacheFunc: (returnVal:any) => void) {\r\n    return function(target, name, descriptor) {\r\n        var getter = descriptor.get;\r\n\r\n        descriptor.get = function() {\r\n            var result = null;\r\n\r\n            if (judgeFunc.call(this)) {\r\n                return returnCacheValueFunc.call(this);\r\n            }\r\n\r\n            result = getter.call(this);\r\n\r\n            setCacheFunc.call(this, result);\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function cache(judgeFunc: any, returnCacheValueFunc: any, setCacheFunc: any) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(args) {\r\n            var result = null,\r\n                setArgs = null;\r\n\r\n            if (judgeFunc.apply(this, arguments)) {\r\n                return returnCacheValueFunc.apply(this, arguments);\r\n            }\r\n\r\n            result = value.apply(this, arguments);\r\n\r\n            setArgs = [result];\r\n\r\n            for (let i = 0, len = arguments.length; i < len; i++) {\r\n                setArgs[i + 1] = arguments[i];\r\n            }\r\n\r\n            setCacheFunc.apply(this, setArgs);\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function cacheBufferForBufferContainer() {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(dataName: string) {\r\n            var result = null;\r\n\r\n            if (this.container.hasChild(dataName)) {\r\n                return this.container.getChild(dataName)\r\n            }\r\n\r\n            result = value.call(this, dataName);\r\n\r\n            this.container.addChild(dataName, result);\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function cacheBufferForBufferContainerWithFuncParam(setDataNameFuncName: string) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(dataName: string) {\r\n            var result = null,\r\n                settedDataName = this[setDataNameFuncName](dataName);\r\n\r\n            if (this.container.hasChild(settedDataName)) {\r\n                return this.container.getChild(settedDataName)\r\n            }\r\n\r\n            result = value.call(this, dataName);\r\n\r\n            this.container.addChild(settedDataName, result);\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}","import { Collection } from \"./Collection\";\r\nimport { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { $BREAK, $REMOVE } from \"./global/Const\";\r\nimport { Log } from \"./Log\";\r\nimport { ExtendUtils } from \"./utils/ExtendUtils\";\r\n\r\nexport class Hash<T> {\r\n    public static create<T>(children = {}) {\r\n        var obj = new this(<{ [s: string]: T }>children);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(children: { [s: string]: T } = {}) {\r\n        this._children = children;\r\n    }\r\n\r\n    private _children: {\r\n        [s: string]: T\r\n    } = null;\r\n\r\n    public getChildren() {\r\n        return this._children;\r\n    }\r\n\r\n    public getCount() {\r\n        var result = 0,\r\n            children = this._children,\r\n            key = null;\r\n\r\n        for (key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                result++;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getKeys() {\r\n        var result = Collection.create<string>(),\r\n            children = this._children,\r\n            key = null;\r\n\r\n        for (key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                result.addChild(key);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getValues() {\r\n        var result = Collection.create<T>(),\r\n            children = this._children,\r\n            key = null;\r\n\r\n        for (key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                result.addChild(children[key]);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getChild(key: string) {\r\n        return this._children[key];\r\n    }\r\n\r\n    public setValue(key: string, value: any) {\r\n        this._children[key] = value;\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChild(key: string, value: any) {\r\n        this._children[key] = value;\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChildren(arg: {} | Hash<T>) {\r\n        var i = null,\r\n            children = null;\r\n\r\n        if (arg instanceof Hash) {\r\n            children = arg.getChildren();\r\n        }\r\n        else {\r\n            children = arg;\r\n        }\r\n\r\n        for (i in children) {\r\n            if (children.hasOwnProperty(i)) {\r\n                this.addChild(i, children[i]);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public appendChild(key: string, value: any) {\r\n        if (this._children[key] instanceof Collection) {\r\n            let c = <any>(this._children[key]);\r\n\r\n            c.addChild(<T>value);\r\n        }\r\n        else {\r\n            this._children[key] = <any>(Collection.create<any>().addChild(value));\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public setChildren(children: { [s: string]: T }) {\r\n        this._children = children;\r\n    }\r\n\r\n    public removeChild(arg: any): Collection<T> {\r\n        var result = [];\r\n\r\n        if (JudgeUtils.isString(arg)) {\r\n            let key = <string>arg;\r\n\r\n            result.push(this._children[key]);\r\n\r\n            this._children[key] = void 0;\r\n            delete this._children[key];\r\n        }\r\n        else if (JudgeUtils.isFunction(arg)) {\r\n            let func = <Function>arg,\r\n                self = this;\r\n\r\n            this.forEach((val: any, key: string) => {\r\n                if (func(val, key)) {\r\n                    result.push(self._children[key]);\r\n\r\n                    self._children[key] = void 0;\r\n                    delete self._children[key];\r\n                }\r\n            });\r\n        }\r\n\r\n        return Collection.create<T>(result);\r\n    }\r\n\r\n    public removeAllChildren() {\r\n        this._children = {};\r\n    }\r\n\r\n    public hasChild(key: string): boolean {\r\n        return this._children[key] !== void 0;\r\n    }\r\n\r\n    public hasChildWithFunc(func: Function): boolean {\r\n        var result = false;\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (func(val, key)) {\r\n                result = true;\r\n                return $BREAK;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public forEach(func: Function, context?: any) {\r\n        var children = this._children;\r\n\r\n        for (let i in children) {\r\n            if (children.hasOwnProperty(i)) {\r\n                if (func.call(context, children[i], i) === $BREAK) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public filter(func: Function): Hash<T> {\r\n        var result = {},\r\n            children = this._children,\r\n            value = null;\r\n\r\n        for (let key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                value = children[key];\r\n\r\n                if (func.call(children, value, key)) {\r\n                    result[key] = value;\r\n                }\r\n            }\r\n        }\r\n\r\n        return Hash.create<T>(result);\r\n    }\r\n\r\n    public findOne(func: Function) {\r\n        var result = [],\r\n            self = this,\r\n            scope = this._children;\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (!func.call(scope, val, key)) {\r\n                return;\r\n            }\r\n\r\n            result = [key, self.getChild(key)];\r\n            return $BREAK;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public map(func: Function): Hash<T> {\r\n        var resultMap = {};\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            var result = func(val, key);\r\n\r\n            if (result !== $REMOVE) {\r\n                Log.error(!JudgeUtils.isArray(result) || result.length !== 2, Log.info.FUNC_MUST_BE(\"iterator\", \"[key, value]\"));\r\n\r\n                resultMap[result[0]] = result[1];\r\n            }\r\n        });\r\n\r\n        return Hash.create<T>(resultMap);\r\n    }\r\n\r\n    public toCollection(): Collection<any> {\r\n        var result = Collection.create<any>();\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (val instanceof Collection) {\r\n                result.addChildren(val);\r\n            }\r\n            //else if(val instanceof Hash){\r\n            //    Log.error(true, Log.info.FUNC_NOT_SUPPORT(\"toCollection\", \"value is Hash\"));\r\n            //}\r\n            else {\r\n                result.addChild(val);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public toArray(): Array<T> {\r\n        var result = [];\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (val instanceof Collection) {\r\n                result = result.concat(val.getChildren());\r\n            }\r\n            else {\r\n                result.push(val);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public clone();\r\n    public clone(isDeep: boolean);\r\n    public clone(target: Hash<T>);\r\n    public clone(target: Hash<T>, isDeep: boolean);\r\n\r\n    public clone(...args) {\r\n        var target: Hash<T> = null,\r\n            isDeep: boolean = null;\r\n\r\n        if (args.length === 0) {\r\n            isDeep = false;\r\n            target = Hash.create<T>();\r\n        }\r\n        else if (args.length === 1) {\r\n            if (JudgeUtils.isBoolean(args[0])) {\r\n                target = Hash.create<T>();\r\n                isDeep = args[0];\r\n            }\r\n            else {\r\n                target = args[0];\r\n                isDeep = false;\r\n            }\r\n        }\r\n        else {\r\n            target = args[0];\r\n            isDeep = args[1];\r\n        }\r\n\r\n        if (isDeep === true) {\r\n            target.setChildren(ExtendUtils.extendDeep(this._children));\r\n        }\r\n        else {\r\n            target.setChildren(ExtendUtils.extend({}, this._children));\r\n        }\r\n\r\n        return target;\r\n    }\r\n}","export enum ETransformState {\r\n    ISTRANSLATE = <any>\"isTranslate\",\r\n    ISROTATE = <any>\"isRotate\",\r\n    ISSCALE = <any>\"isScale\",\r\n\r\n    ISLOCALTRANSLATE = <any>\"isLocalTranslate\",\r\n    ISLOCALROTATE = <any>\"isLocalRotate\",\r\n    ISLOCALSCALE = <any>\"isLocalScale\"\r\n}","export enum EEngineEvent {\r\n    STARTLOOP = <any>\"wd_startLoop\",\r\n    ENDLOOP = <any>\"wd_endLoop\",\r\n\r\n    POINT_TAP = <any>\"wd_pointtap\",\r\n    POINT_DOWN = <any>\"wd_pointdown\",\r\n    POINT_UP = <any>\"wd_pointup\",\r\n    POINT_MOVE = <any>\"wd_pointmove\",\r\n    POINT_OVER = <any>\"wd_pointover\",\r\n    POINT_OUT = <any>\"wd_pointout\",\r\n    POINT_SCALE = <any>\"wd_pointscale\",\r\n    POINT_DRAG = <any>\"wd_pointdrag\",\r\n\r\n    // MATERIAL_CHANGE = <any>\"wd_material_change\",\r\n\r\n    // UI_WIDTH_CHANGE = <any>\"wd_ui_width_change\",\r\n    // UI_HEIGHT_CHANGE = <any>\"wd_ui_height_change\",\r\n\r\n    TRANSFORM_TRANSLATE = <any>\"wd_transform_translate\",\r\n    TRANSFORM_ROTATE = <any>\"wd_transform_rotate\",\r\n    TRANSFORM_SCALE = <any>\"wd_transform_scale\"\r\n\r\n    // SHADOWMAP_SOFTTYPE_CHANGE = <any>\"wd_shadowMap_softType_change\",\r\n    //\r\n    // SHADOWMAP_LAYER_CHANGE = <any>\"wd_shadowMap_layer_change\",\r\n\r\n    // COMPONENT_CHANGE = <any>\"wd_component_change\",\r\n\r\n    // AFTER_SCENEGRAPH_BUILD = <any>\"wd_after_sceneGraph_build\",\r\n\r\n    // ANIMATION_STOP = <any>\"wd_animation_stop\",\r\n\r\n\r\n    // EXIT = <any>\"wd_exit\",\r\n    // ENTER = <any>\"wd_enter\"\r\n}","import { Component } from \"../../core/Component\";\r\nimport { cloneAttributeAsBasicType } from \"../../definition/typescript/decorator/clone\";\r\nimport { ETransformState } from \"./ETransformState\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { IDisposable } from \"wonder-frp/dist/es2015/Disposable/IDisposable\";\r\nimport { EventManager } from \"../../event/EventManager\";\r\nimport { EEngineEvent } from \"../../event/EEngineEvent\";\r\nimport { virtual } from \"../../definition/typescript/decorator/virtual\";\r\n\r\nexport abstract class Transform extends Component {\r\n    protected p_parent: Transform = null;\r\n    @cloneAttributeAsBasicType()\r\n    get parent() {\r\n        return this.p_parent;\r\n    }\r\n    set parent(parent: Transform) {\r\n        this.setParent(parent);\r\n    }\r\n\r\n    get isTransform() {\r\n        return this.isTranslate || this.isRotate || this.isScale;\r\n    }\r\n    set isTransform(isTransform: boolean) {\r\n        if (isTransform) {\r\n            this._setGlobalTransformState(true);\r\n        }\r\n    }\r\n\r\n    private _isTranslate: boolean = false;\r\n    get isTranslate() {\r\n        return this._isTranslate;\r\n    }\r\n    set isTranslate(isTranslate: boolean) {\r\n        this._setGlobalTransformState(ETransformState.ISTRANSLATE, isTranslate);\r\n    }\r\n\r\n    private _isRotate: boolean = false;\r\n    get isRotate() {\r\n        return this._isRotate;\r\n    }\r\n    set isRotate(isRotate: boolean) {\r\n        this._setGlobalTransformState(ETransformState.ISROTATE, isRotate);\r\n    }\r\n\r\n    private _isScale: boolean = false;\r\n    get isScale() {\r\n        return this._isScale;\r\n    }\r\n    set isScale(isScale: boolean) {\r\n        this._setGlobalTransformState(ETransformState.ISSCALE, isScale);\r\n    }\r\n\r\n    set isLocalTranslate(isTranslate: boolean) {\r\n        this._setLocalTransformState(ETransformState.ISLOCALTRANSLATE, isTranslate);\r\n    }\r\n\r\n    set isLocalRotate(isRotate: boolean) {\r\n        this._setLocalTransformState(ETransformState.ISLOCALROTATE, isRotate);\r\n    }\r\n\r\n    set isLocalScale(isScale: boolean) {\r\n        this._setLocalTransformState(ETransformState.ISLOCALSCALE, isScale);\r\n    }\r\n\r\n    public dirtyLocal: boolean = true;\r\n\r\n    protected children: Collection<Transform> = Collection.create<Transform>();\r\n\r\n    private _endLoopSubscription: IDisposable = null;\r\n\r\n    public init() {\r\n        var self = this;\r\n\r\n        this.clearCache();\r\n\r\n        this._endLoopSubscription = EventManager.fromEvent(<any>EEngineEvent.ENDLOOP)\r\n            .subscribe(() => {\r\n                self._resetTransformFlag();\r\n            });\r\n    }\r\n\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        this._endLoopSubscription && this._endLoopSubscription.dispose();\r\n    }\r\n\r\n    public addChild(child: Transform) {\r\n        this.children.addChild(child);\r\n    }\r\n\r\n    public removeChild(child: Transform) {\r\n        this.children.removeChild(child);\r\n    }\r\n\r\n\r\n    public setChildrenTransformState(state: boolean);\r\n    public setChildrenTransformState(transformState: ETransformState, state: boolean);\r\n\r\n    public setChildrenTransformState(...args) {\r\n        if (args.length === 1) {\r\n            let state: boolean = args[0];\r\n\r\n            if (state) {\r\n                this.children.forEach((child: Transform) => {\r\n                    child.isTransform = true;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            let transformState: ETransformState = args[0],\r\n                state: boolean = args[1];\r\n\r\n            if (state) {\r\n                this.children.forEach((child: Transform) => {\r\n                    child[transformState] = true;\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    protected abstract clearCache(): void;\r\n\r\n    @virtual\r\n    protected handleWhenSetTransformState(transformState?: ETransformState): void {\r\n    }\r\n\r\n    protected setParent(parent: Transform) {\r\n        if (this.p_parent) {\r\n            this.p_parent.removeChild(this);\r\n        }\r\n\r\n        if (!parent) {\r\n            this.p_parent = null;\r\n\r\n            return;\r\n        }\r\n\r\n        this.p_parent = parent;\r\n        this.p_parent.addChild(this);\r\n\r\n        //todo can has multi parent?\r\n    }\r\n\r\n    protected getMatrix<T>(syncMethod: string, matrixAttriName: string): T {\r\n        var syncList = Collection.create<Transform>(),\r\n            current = this.p_parent;\r\n\r\n        syncList.addChild(this);\r\n\r\n        while (current !== null) {\r\n            syncList.addChild(current);\r\n            current = current.parent;\r\n        }\r\n\r\n        syncList.reverse().forEach((transform: Transform) => {\r\n            transform[syncMethod]();\r\n        });\r\n\r\n        return this[matrixAttriName];\r\n    }\r\n\r\n\r\n    private _setGlobalTransformState(state: boolean);\r\n    private _setGlobalTransformState(transformState: ETransformState, state: boolean);\r\n\r\n    private _setGlobalTransformState(...args) {\r\n        if (args.length === 1) {\r\n            let state: boolean = args[0];\r\n\r\n            if (!state) {\r\n                return;\r\n            }\r\n\r\n            this._isTranslate = true;\r\n            this._isRotate = true;\r\n            this._isScale = true;\r\n\r\n            this.dirtyLocal = true;\r\n            this.clearCache();\r\n            this.handleWhenSetTransformState();\r\n\r\n            this.setChildrenTransformState(state);\r\n        }\r\n        else {\r\n            let transformState: ETransformState = args[0],\r\n                state: boolean = args[1];\r\n\r\n            this[`_${transformState}`] = state;\r\n\r\n            if (state) {\r\n                this.dirtyLocal = true;\r\n                this.clearCache();\r\n                this.handleWhenSetTransformState(transformState);\r\n            }\r\n\r\n            if (state) {\r\n                this.setChildrenTransformState(transformState, state);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _setLocalTransformState(transformState: ETransformState, state: boolean) {\r\n        if (state) {\r\n            this.dirtyLocal = true;\r\n            this.clearCache();\r\n        }\r\n\r\n        if (state) {\r\n            this.setChildrenTransformState(transformState, state);\r\n        }\r\n    }\r\n\r\n    private _resetTransformFlag() {\r\n        this.isTranslate = false;\r\n        this.isScale = false;\r\n        this.isRotate = false;\r\n    }\r\n}","import { Component } from \"../../core/Component\";\r\nimport { Renderer } from \"../../renderer/renderer/Renderer\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\n\r\nexport abstract class RendererComponent extends Component {\r\n    public abstract render(renderer: Renderer, target: EntityObject, camera: GameObject);\r\n}","export enum EDrawMode {\r\n    POINTS = <any>\"POINTS\",\r\n    LINES = <any>\"LINES\",\r\n    LINE_LOOP = <any>\"LINE_LOOP\",\r\n    LINE_STRIP = <any>\"LINE_STRIP\",\r\n    TRIANGLES = <any>\"TRIANGLES\",\r\n    TRIANGLE_STRIP = <any>\"TRIANGLE_STRIP\",\r\n    TRANGLE_FAN = <any>\"TRIANGLE_FAN\"\r\n}","export function execOnlyOnce(flagName: string) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(...args) {\r\n            var result = null;\r\n\r\n            if (this[flagName]) {\r\n                return;\r\n            }\r\n\r\n            this[flagName] = true;\r\n\r\n            return value.apply(this, args);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}","export function singleton(isInitWhenCreate: boolean = false) {\r\n    return (target: any) => {\r\n        target._instance = null;\r\n\r\n        if (isInitWhenCreate) {\r\n            target.getInstance = () => {\r\n                if (target._instance === null) {\r\n                    let instance = new target();\r\n\r\n                    target._instance = instance;\r\n\r\n                    instance.initWhenCreate();\r\n                }\r\n\r\n                return target._instance;\r\n            };\r\n        }\r\n        else {\r\n            target.getInstance = () => {\r\n                if (target._instance === null) {\r\n                    target._instance = new target();\r\n                }\r\n\r\n                return target._instance;\r\n            };\r\n        }\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { ContextConfigData } from \"../core/data/MainData\";\r\n\r\n@registerClass(\"ViewWebGL\")\r\nexport class ViewWebGL implements IView {\r\n    public static create(view: any) {\r\n        var obj = new this(view);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(dom: any) {\r\n        this._dom = dom;\r\n    }\r\n\r\n    get offset() {\r\n        var view = this._dom,\r\n            offset = { x: view.offsetLeft, y: view.offsetTop };\r\n\r\n        while (view = view.offsetParent) {\r\n            offset.x += view.offsetLeft;\r\n            offset.y += view.offsetTop;\r\n        }\r\n\r\n        return offset;\r\n    }\r\n\r\n    private _dom: any = null;\r\n    get dom() {\r\n        return this._dom;\r\n    }\r\n\r\n    get width() {\r\n        return this._dom.clientWidth;\r\n    }\r\n    set width(width: number) {\r\n        this._dom.width = width;\r\n    }\r\n\r\n    get height() {\r\n        return this._dom.clientHeight;\r\n    }\r\n    set height(height: number) {\r\n        this._dom.height = height;\r\n    }\r\n\r\n    get styleWidth() {\r\n        return this._dom.style.width;\r\n    }\r\n    set styleWidth(styleWidth: string) {\r\n        this._dom.style.width = styleWidth;\r\n    }\r\n\r\n    get styleHeight() {\r\n        return this._dom.style.height;\r\n    }\r\n    set styleHeight(styleHeight: string) {\r\n        this._dom.style.height = styleHeight;\r\n    }\r\n\r\n    get x() {\r\n        return Number(this._dom.style.left.slice(0, -2));\r\n    }\r\n    set x(x: number) {\r\n        this._dom.style.left = `${x}px`;\r\n    }\r\n\r\n    get y() {\r\n        return Number(this._dom.style.top.slice(0, -2));\r\n    }\r\n    set y(y: number) {\r\n        this._dom.style.top = `${y}px`;\r\n    }\r\n\r\n    public initCanvas() {\r\n        this._dom.style.cssText = \"position:absolute;left:0;top:0;\";\r\n    }\r\n\r\n    public getContext(contextConfig: ContextConfigData): WebGLRenderingContext {\r\n        return this._dom.getContext(\"webgl\", contextConfig.options) || this._dom.getContext(\"experimental-webgl\", contextConfig.options);\r\n    }\r\n}\r\n\r\nexport interface IView {\r\n    offset: { x: number, y: number };\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n    styleWidth: string;\r\n    styleHeight: string;\r\n    dom: any;\r\n    getContext(contextConfig: ContextConfigData): WebGLRenderingContext;\r\n    initCanvas(): void;\r\n}\r\n","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector4 } from \"../math/Vector4\";\r\n\r\n@registerClass(\"RectRegion\")\r\nexport class RectRegion extends Vector4 {\r\n    get width() {\r\n        return this.z;\r\n    }\r\n    set width(width: number) {\r\n        this.z = width;\r\n    }\r\n\r\n    get height() {\r\n        return this.w;\r\n    }\r\n    set height(height: number) {\r\n        this.w = height;\r\n    }\r\n\r\n    public clone(): RectRegion {\r\n        return this.copyHelper(RectRegion.create());\r\n    }\r\n\r\n    public isNotEmpty() {\r\n        return this.x !== 0\r\n            || this.y !== 0\r\n            || this.width !== 0\r\n            || this.height !== 0;\r\n    }\r\n}","import { JudgeUtils } from \"./JudgeUtils\";\r\n\r\ndeclare var document: any;\r\n\r\nexport class DomQuery {\r\n    public static create(eleStr: string);\r\n    public static create(dom: HTMLElement);\r\n\r\n    public static create(...args) {\r\n        var obj = new this(args[0]);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _doms: Array<HTMLElement> = null;\r\n\r\n    constructor(eleStr: string);\r\n    constructor(dom: HTMLElement);\r\n\r\n    constructor(...args) {\r\n        if (JudgeUtils.isDom(args[0])) {\r\n            this._doms = [args[0]];\r\n        }\r\n        else if (this._isDomEleStr(args[0])) {\r\n            this._doms = [this._buildDom(args[0])];\r\n        }\r\n        else {\r\n            this._doms = document.querySelectorAll(args[0]);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public get(index) {\r\n        return this._doms[index];\r\n    }\r\n\r\n\r\n    public prepend(eleStr: string);\r\n    public prepend(dom: HTMLElement);\r\n\r\n    public prepend(...args) {\r\n        var targetDom: HTMLElement = null;\r\n\r\n        targetDom = this._buildDom(args[0]);\r\n\r\n        for (let dom of this._doms) {\r\n            if (dom.nodeType === 1) {\r\n                dom.insertBefore(targetDom, dom.firstChild);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public prependTo(eleStr: string) {\r\n        var targetDom: DomQuery = null;\r\n\r\n        targetDom = DomQuery.create(eleStr);\r\n\r\n        for (let dom of this._doms) {\r\n            if (dom.nodeType === 1) {\r\n                targetDom.prepend(dom);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public remove() {\r\n        for (let dom of this._doms) {\r\n            if (dom && dom.parentNode && dom.tagName != 'BODY') {\r\n                dom.parentNode.removeChild(dom);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public css(property: string, value: string) {\r\n        for (let dom of this._doms) {\r\n            dom.style[property] = value;\r\n        }\r\n    }\r\n\r\n    public attr(name: string);\r\n    public attr(name: string, value: string);\r\n\r\n    public attr(...args) {\r\n        if (args.length === 1) {\r\n            let name = args[0];\r\n\r\n            return this.get(0).getAttribute(name);\r\n        }\r\n        else {\r\n            let name = args[0],\r\n                value = args[1];\r\n\r\n            for (let dom of this._doms) {\r\n                dom.setAttribute(name, value);\r\n            }\r\n        }\r\n    }\r\n\r\n    public text(str?: string) {\r\n        var dom = this.get(0);\r\n\r\n        if (str !== void 0) {\r\n            if (dom.textContent !== void 0) {\r\n                dom.textContent = str;\r\n            }\r\n            else {\r\n                dom.innerText = str;\r\n            }\r\n        }\r\n        else {\r\n            return dom.textContent !== void 0 ? dom.textContent : dom.innerText;\r\n        }\r\n    }\r\n\r\n    private _isDomEleStr(eleStr: string) {\r\n        return eleStr.match(/<(\\w+)[^>]*><\\/\\1>/) !== null;\r\n    }\r\n\r\n    private _buildDom(eleStr: string): HTMLElement;\r\n    private _buildDom(dom: HTMLHtmlElement): HTMLElement;\r\n\r\n    private _buildDom(...args): HTMLElement {\r\n        if (JudgeUtils.isString(args[0])) {\r\n            let div = this._createElement(\"div\"),\r\n                eleStr: string = args[0];\r\n\r\n            div.innerHTML = eleStr;\r\n\r\n            return div.firstChild;\r\n        }\r\n\r\n        return args[0];\r\n    }\r\n\r\n    private _createElement(eleStr) {\r\n        return document.createElement(eleStr);\r\n    }\r\n}","import { JudgeUtils } from \"../utils/JudgeUtils\";\r\n\r\ndeclare var global: NodeJS.Global, window: Window;\r\nexport var root: any;\r\n\r\nif (JudgeUtils.isNodeJs() && typeof global != \"undefined\") {\r\n    root = global;\r\n}\r\nelse {\r\n    root = window;\r\n}","export enum EScreenSize {\r\n    FULL\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../definition/typescript/decorator/singleton\";\r\nimport { Log } from \"../utils/Log\";\r\nimport { Vector2 } from \"../math/Vector2\";\r\nimport { IView, ViewWebGL } from \"../structure/View\";\r\nimport { ContextConfigData, MainData } from \"../core/data/MainData\";\r\nimport { RectRegion } from \"../structure/RectRegion\";\r\nimport { Color } from \"../structure/Color\";\r\nimport { DomQuery } from \"wonder-commonlib/dist/es2015/utils/DomQuery\";\r\nimport { root } from \"../definition/Variable\";\r\nimport { requireCheck, it, ensure } from \"../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { EScreenSize } from \"./EScreenSize\";\r\n\r\n/*!\r\n DeviceManager is responsible for global setting of gl\r\n */\r\n@singleton()\r\n@registerClass(\"DeviceManager\")\r\nexport class DeviceManager {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { }\r\n\r\n    /*!\r\n     test order:\r\n     scissor test -> depth test -> stencil test -> specular add -> fog -> alpha blend -> write mask\r\n     */\r\n\r\n    /*!\r\n     The scissor test culls pixels that are outside of the scissor rectangle, a user-defined rectangular sub-section of the render target.\r\n     The scissor rectangle could be used to indicate the area of the render target where the game world is drawn. The area outside the rectangle is culled and could be devoted to a game's GUI. The scissor test cannot cull non-rectangular areas.\r\n     Scissor rectangles cannot be set larger than the render target, but they can be set larger than the viewport.\r\n     The scissor rectangle is managed by a device render state. A scissor test is enabled or disabled by setting the renderstate to TRUE or FALSE. This test is performed after the fragment color is computed but before alpha testing. IDirect3DDevice9\r\n     */\r\n    private _scissorTest: boolean = false;\r\n    get scissorTest() {\r\n        return this._scissorTest;\r\n    }\r\n    set scissorTest(scissorTest: boolean) {\r\n        var gl = this.gl;\r\n\r\n        if (this._scissorTest === scissorTest) {\r\n            return;\r\n        }\r\n\r\n        if (scissorTest) {\r\n            gl.enable(gl.SCISSOR_TEST);\r\n        }\r\n        else {\r\n            gl.disable(gl.SCISSOR_TEST);\r\n        }\r\n\r\n        this._scissorTest = scissorTest;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name setScissor\r\n     * @description Set the active scissor rectangle on the specified device.\r\n     * @param {Number} x The pixel space x-coordinate of the bottom left corner of the scissor rectangle.\r\n     * @param {Number} y The pixel space y-coordinate of the bottom left corner of the scissor rectangle.\r\n     * @param {Number} w The width of the scissor rectangle in pixels.\r\n     * @param {Number} h The height of the scissor rectangle in pixels.\r\n     */\r\n    public setScissor(x: number, y: number, width: number, height: number) {\r\n        if (this._scissorRegion.y === y && this._scissorRegion.width === width && this._scissorRegion.height === height) {\r\n            return;\r\n        }\r\n\r\n        this.gl.scissor(x, y, width, height);\r\n\r\n        this._scissorRegion.set(x, y, width, height);\r\n\r\n        this.scissorTest = true;\r\n    }\r\n\r\n    /*! Difference between viewports and scissor rectangles\r\n\r\n     Viewports are basically scaled views, the left side is 0 and the right side is 1. The entire view will be scaled down into that viewport after everything is projected.\r\n\r\n     Scissor tests clip to a rectangle inside that viewport. Instead of rendering from 0 to 1, you render from .2 to .8, with black bars on the outside. This actually cuts off a portion of what would normally be visible (if you used a viewport of the same size, you'd see the same amount but shrunk slightly).\r\n\r\n     Viewports are used for full views (consider 3D Studio Max, each viewport is the full view from that angle, but fit into a single square). Scissor tests are used to cut out extra pixels that you don't want/need to be affected (lights in deferred rendering, for instance, everything outside the range is not affected, so why bother calculating that if you already know it's not lit, just scissor around the projected sphere and forget about everything beyond that).\r\n     */\r\n\r\n    /**\r\n     * @function\r\n     * @name setViewport\r\n     * @description Set the active rectangle for rendering on the specified device.\r\n     * @param {Number} x The pixel space x-coordinate of the bottom left corner of the viewport.\r\n     * @param {Number} y The pixel space y-coordinate of the bottom left corner of the viewport.\r\n     * @param {Number} w The width of the viewport in pixels.\r\n     * @param {Number} h The height of the viewport in pixels.\r\n     */\r\n    public setViewport(x: number, y: number, width: number, height: number) {\r\n        if (this._viewport.x === x && this._viewport.y === y && this._viewport.width === width && this._viewport.height === height) {\r\n            return;\r\n        }\r\n\r\n        this._viewport.set(x, y, width, height);\r\n        this.gl.viewport(x, y, width, height);\r\n    }\r\n\r\n    public getViewport() {\r\n        return this._viewport;\r\n    }\r\n\r\n\r\n    //todo set depth func?\r\n    /*! 默认情况是将需要绘制的新像素的z值与深度缓冲区中对应位置的z值进行比较，如果比深度缓存中的值小，那么用新像素的颜色值更新帧缓存中对应像素的颜色值。\r\n     但是可以使用glDepthFunc(func)来对这种默认测试方式进行修改。\r\n     其中参数func的值可以为GL_NEVER（没有处理）、GL_ALWAYS（处理所有）、GL_LESS（小于）、GL_LEQUAL（小于等于）、GL_EQUAL（等于）、GL_GEQUAL（大于等于）、GL_GREATER（大于）或GL_NOTEQUAL（不等于），其中默认值是GL_LESS。\r\n\r\n     gl.depthFunc(gl.LEQUAL);\r\n     */\r\n\r\n    private _depthTest: boolean = null;\r\n    get depthTest() {\r\n        return this._depthTest;\r\n    }\r\n\r\n    set depthTest(depthTest: boolean) {\r\n        var gl = this.gl;\r\n\r\n        if (this._depthTest !== depthTest) {\r\n            if (depthTest) {\r\n                gl.enable(gl.DEPTH_TEST);\r\n            }\r\n            else {\r\n                gl.disable(gl.DEPTH_TEST);\r\n            }\r\n\r\n            this._depthTest = depthTest;\r\n        }\r\n    }\r\n\r\n    private _depthFunc: EDepthFunction = null;\r\n    get depthFunc() {\r\n        return this._depthFunc;\r\n    }\r\n    set depthFunc(depthFunc: EDepthFunction) {\r\n        var gl = this.gl;\r\n\r\n        if (this._depthFunc !== depthFunc) {\r\n            gl.depthFunc(gl[depthFunc]);\r\n\r\n            this._depthFunc = depthFunc;\r\n        }\r\n    }\r\n\r\n\r\n    private _side: ESide = null;\r\n    get side() {\r\n        return this._side;\r\n    }\r\n\r\n    set side(side: ESide) {\r\n        var gl = this.gl;\r\n\r\n        if (this._side !== side) {\r\n            switch (side) {\r\n                case ESide.NONE:\r\n                    gl.enable(gl.CULL_FACE);\r\n                    gl.cullFace(gl.FRONT_AND_BACK);\r\n                    break;\r\n                case ESide.BOTH:\r\n                    gl.disable(gl.CULL_FACE);\r\n                    break;\r\n                case ESide.FRONT:\r\n                    gl.enable(gl.CULL_FACE);\r\n                    gl.cullFace(gl.BACK);\r\n                    break;\r\n                case ESide.BACK:\r\n                    gl.enable(gl.CULL_FACE);\r\n                    gl.cullFace(gl.FRONT);\r\n                    break;\r\n                default:\r\n                    Log.error(true, Log.info.FUNC_UNEXPECT(\"side\", side));\r\n                    break;\r\n            }\r\n\r\n            this._side = side;\r\n        }\r\n    }\r\n\r\n    /*!\r\n     偏移值是在z值计算后、深度检测之前加上的，此时坐标已经被映射到Normalized Device Coordinates中了，\r\n     而此时的z轴是向内的（opengl的z轴是向外的），因此多边形偏移量为正值的话，意味着往远处移动，否则往近处移动。\r\n     可参考下面的说明：\r\n     The results are summed to produce the depth offset. This offset is applied in screen space, typically with positive Z pointing into the screen.\r\n     the offset is calculated after the normal Z calculations, but applied before the depth test and before being written to the depth buffer.\r\n     */\r\n    public polygonOffset: Vector2 = null;\r\n\r\n    private _polygonOffsetMode: EPolygonOffsetMode = null;\r\n    get polygonOffsetMode() {\r\n        return this._polygonOffsetMode;\r\n    }\r\n    set polygonOffsetMode(polygonOffsetMode: EPolygonOffsetMode) {\r\n        var gl = this.gl;\r\n\r\n        if (this._polygonOffsetMode !== polygonOffsetMode) {\r\n            switch (polygonOffsetMode) {\r\n                case EPolygonOffsetMode.NONE:\r\n                    gl.polygonOffset(0.0, 0.0);\r\n                    gl.disable(gl.POLYGON_OFFSET_FILL);\r\n                    break;\r\n                case EPolygonOffsetMode.IN:\r\n                    gl.enable(gl.POLYGON_OFFSET_FILL);\r\n                    gl.polygonOffset(1.0, 1.0);\r\n                    break;\r\n                case EPolygonOffsetMode.OUT:\r\n                    gl.enable(gl.POLYGON_OFFSET_FILL);\r\n                    gl.polygonOffset(-1.0, -1.0);\r\n                    break;\r\n                case EPolygonOffsetMode.CUSTOM:\r\n                    gl.enable(gl.POLYGON_OFFSET_FILL);\r\n                    Log.error(!this.polygonOffset, Log.info.FUNC_MUST_DEFINE(\"polygonOffset\"));\r\n                    gl.polygonOffset(this.polygonOffset.x, this.polygonOffset.y);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            this._polygonOffsetMode = polygonOffsetMode;\r\n        }\r\n    }\r\n\r\n    private _depthWrite: boolean = null;\r\n    get depthWrite() {\r\n        return this._depthWrite;\r\n    }\r\n    set depthWrite(depthWrite: boolean) {\r\n        if (this._depthWrite !== depthWrite) {\r\n            this.gl.depthMask(depthWrite);\r\n\r\n            this._depthWrite = depthWrite;\r\n        }\r\n    }\r\n\r\n    /*! blend record\r\n     所谓源颜色和目标颜色，是跟绘制的顺序有关的。假如先绘制了一个红色的物体，再在其上绘制绿色的物体。则绿色是源颜色，红色是目标颜色。如果顺序反过来，则 红色就是源颜色，绿色才是目标颜色。在绘制时，应该注意顺序，使得绘制的源颜色与设置的源因子对应，目标颜色与设置的目标因子对应。不要被混乱的顺序搞晕 了。\r\n\r\n\r\n     也许你迫不及待的想要绘制一个三维的带有半透明物体的场景了。但是现在恐怕还不行，还有一点是在进行三维场景的混合时必须注意的，那就是深度缓冲。\r\n     总结起来，绘制顺序就是：首先绘制所有不透明的物体。如果两个物体都是不透明的，则谁先谁后 都没有关系。然后，将深度缓冲区设置为只读。接下来，绘制所有半透明的物体。如果两个物体都是半透明的，则谁先谁后只需要根据自己的意愿（注意了，先绘制 的将成为“目标颜色”，后绘制的将成为“源颜色”，所以绘制的顺序将会对结果造成一些影响）。最后，将深度缓冲区设置为可读可写形式。\r\n\r\n     在进行混合时，绘制的顺序十分重要。因为在绘制时，正要绘制上去的是源颜色，原来存在的是目标颜色，因此先绘制的物体就成为目标颜色，后来绘制的则成为源颜色。绘制的顺序要考虑清楚，将目标颜色和设置的目标因子相对应，源颜色和设置的源因子相对应。\r\n     在进行三维混合时，不仅要考虑源因子和目标因子，还应该考虑深度缓冲区。必须先绘制所有不透明的物体，再绘制半透明的物体。在绘制半透明物体时前，还需要将深度缓冲区设置为只读形式，否则可能出现画面错误。\r\n     */\r\n\r\n    private _blend: boolean = null;\r\n    get blend() {\r\n        return this._blend;\r\n    }\r\n    set blend(blend: boolean) {\r\n        var gl = this.gl;\r\n\r\n        if (this._blend !== blend) {\r\n            if (blend) {\r\n                gl.enable(gl.BLEND);\r\n            }\r\n            else {\r\n                gl.disable(gl.BLEND);\r\n            }\r\n\r\n            this._blend = blend;\r\n        }\r\n    }\r\n\r\n    private _alphaToCoverage: boolean = null;\r\n    get alphaToCoverage() {\r\n        return this._alphaToCoverage;\r\n    }\r\n    set alphaToCoverage(alphaToCoverage: boolean) {\r\n        var gl = this.gl;\r\n\r\n        if (this._alphaToCoverage !== alphaToCoverage) {\r\n            if (alphaToCoverage) {\r\n                gl.enable(gl.SAMPLE_ALPHA_TO_COVERAGE);\r\n            }\r\n            else {\r\n                gl.disable(gl.SAMPLE_ALPHA_TO_COVERAGE);\r\n            }\r\n\r\n            this._alphaToCoverage = alphaToCoverage;\r\n        }\r\n    }\r\n\r\n    public view: IView = null;\r\n    public gl: WebGLRenderingContext = null;\r\n    public contextConfig: ContextConfigData = null;\r\n\r\n    private _writeRed: boolean = null;\r\n    private _writeGreen: boolean = null;\r\n    private _writeBlue: boolean = null;\r\n    private _writeAlpha: boolean = null;\r\n    private _blendSrc: EBlendFunc = null;\r\n    private _blendDst: EBlendFunc = null;\r\n    private _blendEquation: EBlendEquation = null;\r\n    private _blendFuncSeparate: Array<EBlendFunc> = null;\r\n    private _blendEquationSeparate: Array<EBlendEquation> = null;\r\n    private _scissorRegion: RectRegion = RectRegion.create();\r\n    private _viewport: RectRegion = RectRegion.create();\r\n    private _clearColor: Color = null;\r\n    private _pixelRatio: number = null;\r\n\r\n    /**\r\n     * @function\r\n     * @name setBlendFunction\r\n     * @description Configures blending operations.\r\n     * @param {pc.BLENDMODE} blendSrc The source blend function.\r\n     * @param {pc.BLENDMODE} blendDst The destination blend function.\r\n     */\r\n    public setBlendFunc(blendSrc: EBlendFunc, blendDst: EBlendFunc) {\r\n        if ((this._blendSrc !== blendSrc) || (this._blendDst !== blendDst)) {\r\n            this._blend && this.gl.blendFunc(this.gl[blendSrc], this.gl[blendDst]);\r\n            this._blendSrc = blendSrc;\r\n            this._blendDst = blendDst;\r\n        }\r\n    }\r\n    /*!\r\n     OpenGL gives us even more flexibility by allowing us to change the operator between the source and destination part of the equation. Right now, the source and destination components are added together, but we could also subtract them if we want. glBlendEquation(GLenum mode) allows us to set this operation and has 3 possible options:\r\n\r\n     GL_FUNC_ADD: the default, adds both components to each other: C¯result=Src+Dst.\r\n     GL_FUNC_SUBTRACT: subtracts both components from each other: C¯result=Src−Dst.\r\n     GL_FUNC_REVERSE_SUBTRAThe default blend equation is\r\n\r\n     default is FUNC_ADD\r\n     */\r\n\r\n    /**\r\n     * @function\r\n     * @name setBlendEquation\r\n     * @description Configures the blending equation. .\r\n     * @param blendEquation The blend equation.\r\n     */\r\n    public setBlendEquation(blendEquation: EBlendEquation) {\r\n        if (this._blendEquation !== blendEquation) {\r\n            this._blend && this.gl.blendEquation(this.gl[blendEquation]);\r\n            this._blendEquation = blendEquation;\r\n        }\r\n    }\r\n\r\n    public setBlendFuncSeparate(blendFuncSeparate: Array<EBlendFunc>) {\r\n        var gl = this.gl;\r\n\r\n        if (!this._blendFuncSeparate || this._blendFuncSeparate[0] !== blendFuncSeparate[0] || this._blendFuncSeparate[1] !== blendFuncSeparate[1]) {\r\n            this._blend && gl.blendFuncSeparate(gl[blendFuncSeparate[0]], gl[blendFuncSeparate[1]], gl[blendFuncSeparate[2]], gl[blendFuncSeparate[3]]);\r\n            this._blendFuncSeparate = blendFuncSeparate;\r\n        }\r\n    }\r\n\r\n    public setBlendEquationSeparate(blendEquationSeparate: Array<EBlendEquation>) {\r\n        var gl = this.gl;\r\n\r\n        if (!this._blendEquationSeparate || this._blendEquationSeparate[0] !== blendEquationSeparate[0] || this._blendEquationSeparate[1] !== blendEquationSeparate[1]) {\r\n            this._blend && gl.blendEquationSeparate(gl[blendEquationSeparate[0]], gl[blendEquationSeparate[1]]);\r\n            this._blendEquationSeparate = blendEquationSeparate;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * @function\r\n     * @name setColorWrite\r\n     * @description Enables or disables writes to the color buffer. Once this state\r\n     * is set, it persists until it is changed. By default, color writes are enabled\r\n     * for all color channels.\r\n     * @param {Boolean} writeRed true to enable writing  of the red channel and false otherwise.\r\n     * @param {Boolean} writeGreen true to enable writing  of the green channel and false otherwise.\r\n     * @param {Boolean} writeBlue true to enable writing  of the blue channel and false otherwise.\r\n     * @param {Boolean} writeAlpha true to enable writing  of the alpha channel and false otherwise.\r\n     * @example\r\n     * // Just write alpha into the frame buffer\r\n     * device.setColorWrite(false, false, false, true);\r\n     */\r\n    public setColorWrite(writeRed, writeGreen, writeBlue, writeAlpha) {\r\n        if (this._writeRed !== writeRed\r\n            || this._writeGreen !== writeGreen\r\n            || this._writeBlue !== writeBlue\r\n            || this._writeAlpha !== writeAlpha) {\r\n            this.gl.colorMask(writeRed, writeGreen, writeBlue, writeAlpha);\r\n\r\n            this._writeRed = writeRed;\r\n            this._writeGreen = writeGreen;\r\n            this._writeBlue = writeBlue;\r\n            this._writeAlpha = writeAlpha;\r\n        }\r\n    }\r\n\r\n    public clear(options: any) {\r\n        var gl = this.gl,\r\n            color = options.color;\r\n\r\n        this._setClearColor(color);\r\n\r\n        this.setColorWrite(true, true, true, true);\r\n\r\n        /*! optimize in ANGLE:\r\n         (need more verify:set color mask all false before clear?\r\n         so here not do the recommendation)\r\n\r\n\r\n         Recommendation: Do Not Perform Clears with Scissors or Masks Enabled\r\n         (<<WebGL Insights>> -> chapter 1)\r\n\r\n         One of the subtle differences between the Direct3D APIs and the GL APIs is that in the former, clear calls ignore scissors and masks, while the latter applies both to clears [Koch 12]. This means that if a clear is performed with the scissors test enabled, or with a color or stencil mask in use, ANGLE must draw a quad with the requested clear values, rather than using clear. This introduces some state management overhead, as ANGLE must switch out all the cached state such as shaders, sampler and texture bindings, and vertex data related to the draw call stream. It then must set up all the appropriate state for the clear, perform the clear itself, and then reset all of the affected state back to its prior settings once the clear is complete. If multiple draw buffers are currently in use, using WEBGL_draw_ buffers, then the performance implications of this emulated clear are com- pounded, as the draw must be performed once for each target. Clearing buffers without scissors or masks enabled avoids this overhead.\r\n         */\r\n\r\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT | gl.STENCIL_BUFFER_BIT);\r\n    }\r\n\r\n    public createGL(canvasId: string, contextConfig: ContextConfigData, useDevicePixelRatio: boolean) {\r\n        var canvas = null;\r\n\r\n        this.contextConfig = contextConfig;\r\n\r\n        if (!!canvasId) {\r\n            canvas = DomQuery.create(this._getCanvasId(canvasId)).get(0);\r\n        }\r\n        else {\r\n            canvas = DomQuery.create(\"<canvas></canvas>\").prependTo(\"body\").get(0);\r\n        }\r\n\r\n        this.view = ViewWebGL.create(canvas);\r\n\r\n        if (useDevicePixelRatio) {\r\n            this.setPixelRatio(root.devicePixelRatio);\r\n        }\r\n\r\n        this.gl = this.view.getContext(contextConfig);\r\n\r\n        if (!this.gl) {\r\n            DomQuery.create(\"<p class='not-support-webgl'></p>\").prependTo(\"body\").text(\"Your device doesn't support WebGL\");\r\n        }\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        it(\"should exist MainData.screenSize\", () => {\r\n            expect(MainData.screenSize).exist;\r\n        });\r\n    })\r\n    public setScreen() {\r\n        var screenSize = MainData.screenSize,\r\n            x = null,\r\n            y = null,\r\n            width = null,\r\n            height = null,\r\n            styleWidth = null,\r\n            styleHeight = null;\r\n\r\n        if (screenSize === EScreenSize.FULL) {\r\n            x = 0;\r\n            y = 0;\r\n            width = root.innerWidth;\r\n            height = root.innerHeight;\r\n            styleWidth = \"100%\";\r\n            styleHeight = \"100%\";\r\n\r\n            DomQuery.create(\"body\").css(\"margin\", \"0\");\r\n        }\r\n        else {\r\n            x = screenSize.x || 0;\r\n            y = screenSize.y || 0;\r\n            width = screenSize.width || root.innerWidth;\r\n            height = screenSize.height || root.innerHeight;\r\n            styleWidth = `${width}px`;\r\n            styleHeight = `${height}px`;\r\n        }\r\n\r\n        this.view.initCanvas();\r\n\r\n        this.view.x = x;\r\n        this.view.y = y;\r\n        this.view.width = width;\r\n        this.view.height = height;\r\n        this.view.styleWidth = styleWidth;\r\n        this.view.styleHeight = styleHeight;\r\n\r\n        this.setViewport(0, 0, width, height);\r\n    }\r\n\r\n    @requireCheck(function(level: number) {\r\n        it(`level should > 0, but actual is ${level}`, () => {\r\n            expect(level).greaterThan(0);\r\n        });\r\n    })\r\n    public setHardwareScaling(level: number) {\r\n        var width = this.view.width / level,\r\n            height = this.view.height / level;\r\n\r\n        this.view.width = width;\r\n        this.view.height = height;\r\n\r\n        this.setViewport(0, 0, width, height);\r\n    }\r\n\r\n    public setPixelRatio(pixelRatio: number) {\r\n        this.view.width = Math.round(this.view.width * pixelRatio);\r\n        this.view.height = Math.round(this.view.height * pixelRatio);\r\n\r\n        this._pixelRatio = pixelRatio;\r\n    }\r\n\r\n    public getPixelRatio() {\r\n        return this._pixelRatio;\r\n    }\r\n\r\n    private _setClearColor(color: Color) {\r\n        if (this._clearColor && this._clearColor.isEqual(color)) {\r\n            return;\r\n        }\r\n\r\n        this.gl.clearColor(color.r, color.g, color.b, color.a);\r\n\r\n        this._clearColor = color;\r\n    }\r\n\r\n    @ensure(function(id: string) {\r\n        it(\"canvas id should be #xxx\", () => {\r\n            expect(/#[^#]+/.test(id)).true;\r\n        });\r\n    })\r\n    private _getCanvasId(canvasId: string) {\r\n        if (canvasId.indexOf('#') > -1) {\r\n            return canvasId;\r\n        }\r\n\r\n        return `#${canvasId}`;\r\n    }\r\n}\r\n\r\nexport enum EDepthFunction {\r\n    NEVER = <any>\"NEVER\",\r\n    ALWAYS = <any>\"ALWAYS\",\r\n    LESS = <any>\"LESS\",\r\n    LEQUAL = <any>\"LEQUAL\",\r\n    EQUAL = <any>\"EQUAL\",\r\n    GEQUAL = <any>\"GEQUAL\",\r\n    GREATER = <any>\"GREATER\",\r\n    NOTEQUAL = <any>\"NOTEQUAL\"\r\n}\r\n\r\nexport enum ESide {\r\n    NONE,\r\n    BOTH,\r\n    //CCW\r\n    BACK,\r\n    //CW\r\n    FRONT\r\n}\r\n\r\nexport enum EPolygonOffsetMode {\r\n    NONE,\r\n    IN,\r\n    OUT,\r\n    CUSTOM\r\n}\r\n\r\nexport enum EBlendFunc {\r\n    ZERO = <any>\"ZEOR\",\r\n    ONE = <any>\"ONE\",\r\n    SRC_COLOR = <any>\"SRC_COLOR\",\r\n    ONE_MINUS_SRC_COLOR = <any>\"ONE_MINUS_SRC_COLOR\",\r\n    DST_COLOR = <any>\"DST_COLOR\",\r\n    ONE_MINUS_DST_COLOR = <any>\"ONE_MINUS_DST_COLOR\",\r\n    SRC_ALPHA = <any>\"SRC_ALPHA\",\r\n    SRC_ALPHA_SATURATE = <any>\"SRC_ALPHA_SATURATE\",\r\n    ONE_MINUS_SRC_ALPHA = <any>\"ONE_MINUS_SRC_ALPHA\",\r\n    DST_ALPHA = <any>\"DST_ALPHA\",\r\n    ONE_MINUS_DST_ALPH = <any>\"ONE_MINUS_DST_ALPHA\"\r\n}\r\n\r\nexport enum EBlendEquation {\r\n    ADD = <any>\"FUNC_ADD\",\r\n    SUBTRACT = <any>\"FUNC_SUBTRACT\",\r\n    REVERSE_SUBTRAC = <any>\"FUNC_REVERSE_SUBTRACT\"\r\n}\r\n\r\nexport enum EBlendType {\r\n    NONE,\r\n    NORMAL,\r\n    ADDITIVE,\r\n    ADDITIVEALPHA,\r\n    MULTIPLICATIVE,\r\n    PREMULTIPLIED\r\n}\r\n\r\nexport enum ECanvasType {\r\n    TwoDUI = <any>\"TwoDUI\"\r\n}\r\n\r\nexport type CanvasMapData = {\r\n    canvas: HTMLCanvasElement,\r\n    context: CanvasRenderingContext2D\r\n}","import { Entity } from \"../../core/Entity\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\n\r\nexport abstract class Buffer extends Entity {\r\n    public buffer: any = null;\r\n\r\n    public abstract resetData(data: any, ...args): void;\r\n\r\n    public dispose() {\r\n        DeviceManager.getInstance().gl.deleteBuffer(this.buffer);\r\n        delete this.buffer;\r\n    }\r\n}","export enum EBufferUsage {\r\n    STREAM_DRAW = <any>\"STREAM_DRAW\",\r\n    STATIC_DRAW = <any>\"STATIC_DRAW\",\r\n    DYNAMIC_DRAW = <any>\"DYNAMIC_DRAW\"\r\n}","import { Buffer } from \"./Buffer\";\r\nimport { EBufferType } from \"./EBufferType\";\r\nimport { EBufferUsage } from \"./EBufferUsage\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\n\r\nexport abstract class CommonBuffer extends Buffer {\r\n    public type: EBufferType = null;\r\n    public count: number = null;\r\n    public usage: EBufferUsage = null;\r\n\r\n    protected resetBufferData(glBufferTargetStr: string, typedData: any, offset: number = 0) {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        if (this.usage === EBufferUsage.STATIC_DRAW && offset === 0) {\r\n            /*!\r\n             change to DYNAMIC_DRAW\r\n             */\r\n            gl.bufferData(gl[glBufferTargetStr], typedData, gl.DYNAMIC_DRAW);\r\n\r\n            return;\r\n        }\r\n\r\n        gl.bufferSubData(gl[glBufferTargetStr], offset, typedData);\r\n    }\r\n}","export enum EBufferType {\r\n    BYTE = <any>\"BYTE\",\r\n    UNSIGNED_BYTE = <any>\"UNSIGNED_BYTE\",\r\n    SHORT = <any>\"SHORT\",\r\n    UNSIGNED_SHORT = <any>\"UNSIGNED_SHORT\",\r\n    INT = <any>\"INT\",\r\n    UNSIGNED_INT = <any>\"UNSIGNED_INT\",\r\n    FLOAT = <any>\"FLOAT\"\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { ElementBuffer } from \"../../../../renderer/buffer/ElementBuffer\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { Buffer } from \"../../../../renderer/buffer/Buffer\";\r\nimport { DeviceManager } from \"../../../../device/DeviceManager\";\r\n\r\n@registerClass(\"BufferTable\")\r\nexport class BufferTable {\r\n    public static lastBindedArrayBufferListUidStr: string = null;\r\n    public static lastBindedElementBuffer: ElementBuffer = null;\r\n\r\n    private static _table: Hash<Buffer> = Hash.create<Buffer>();\r\n\r\n    public static bindIndexBuffer(indexBuffer: ElementBuffer) {\r\n        var gl: any = null;\r\n\r\n        if (this.lastBindedElementBuffer === indexBuffer) {\r\n            return;\r\n        }\r\n\r\n        this.lastBindedElementBuffer = indexBuffer;\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer.buffer);\r\n    }\r\n\r\n    public static hasBuffer(key: string) {\r\n        return this._table.hasChild(key);\r\n    }\r\n\r\n    public static addBuffer(key: string, buffer: Buffer) {\r\n        this._table.addChild(key, buffer);\r\n    }\r\n\r\n    public static getBuffer<T>(key: string): T {\r\n        return <any>this._table.getChild(key);\r\n    }\r\n\r\n    public static dispose() {\r\n        this._table.forEach((buffer: Buffer) => {\r\n            buffer.dispose();\r\n        });\r\n\r\n        this.lastBindedArrayBufferListUidStr = null;\r\n        this.lastBindedElementBuffer = null;\r\n    }\r\n\r\n    public static clearAll() {\r\n        this._table.removeAllChildren();\r\n\r\n        this.lastBindedArrayBufferListUidStr = null;\r\n        this.lastBindedElementBuffer = null;\r\n    }\r\n\r\n    public static resetBindedArrayBuffer() {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\r\n        this.lastBindedArrayBufferListUidStr = null;\r\n    }\r\n\r\n    public static resetBindedElementBuffer() {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\r\n\r\n        this.lastBindedElementBuffer = null;\r\n    }\r\n}\r\n\r\nexport enum BufferTableKey {\r\n    PROCEDURAL_VERTEX = <any>\"PROCEDURAL_VERTEX\",\r\n    PROCEDURAL_INDEX = <any>\"PROCEDURAL_INDEX\"\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../definition/typescript/decorator/singleton\";\r\nimport { DeviceManager } from \"./DeviceManager\";\r\nimport { Log } from \"../utils/Log\";\r\n\r\n@singleton()\r\n@registerClass(\"GPUDetector\")\r\nexport class GPUDetector {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { }\r\n\r\n    get gl() {\r\n        return DeviceManager.getInstance().gl;\r\n    }\r\n\r\n    public maxTextureUnit: number = null;\r\n    public maxTextureSize: number = null;\r\n    public maxCubemapTextureSize: number = null;\r\n    public maxAnisotropy: number = null;\r\n    public maxBoneCount: number = null;\r\n    public extensionCompressedTextureS3TC: any = null;\r\n    public extensionTextureFilterAnisotropic: any = null;\r\n    public extensionInstancedArrays: any = null;\r\n    public extensionUintIndices: boolean = null;\r\n    public extensionDepthTexture: boolean = null;\r\n    public extensionVAO: any = null;\r\n    public extensionStandardDerivatives: boolean = null;\r\n    public precision: number = null;\r\n\r\n    private _isDetected: boolean = false;\r\n\r\n    //todo test\r\n    public detect() {\r\n        this._isDetected = true;\r\n\r\n        this._detectExtension();\r\n        this._detectCapabilty();\r\n    }\r\n\r\n    private _detectExtension() {\r\n        this.extensionCompressedTextureS3TC = this._getExtension(\"WEBGL_compressed_texture_s3tc\");\r\n        this.extensionTextureFilterAnisotropic = this._getExtension(\"EXT_texture_filter_anisotropic\");\r\n        this.extensionInstancedArrays = this._getExtension(\"ANGLE_instanced_arrays\");\r\n        this.extensionUintIndices = this._getExtension(\"element_index_uint\");\r\n        this.extensionDepthTexture = this._getExtension(\"depth_texture\");\r\n        this.extensionVAO = this._getExtension(\"vao\");\r\n        this.extensionStandardDerivatives = this._getExtension(\"standard_derivatives\");\r\n    }\r\n\r\n    private _detectCapabilty() {\r\n        var gl = this.gl;\r\n\r\n        this.maxTextureUnit = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\r\n        this.maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\r\n        this.maxCubemapTextureSize = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\r\n        this.maxAnisotropy = this._getMaxAnisotropy();\r\n\r\n        this.maxBoneCount = this._getMaxBoneCount();\r\n\r\n        //todo use map instead\r\n        // alert(\"maxBoneCount:\" + this.maxBoneCount);\r\n\r\n        this._detectPrecision();\r\n    }\r\n\r\n    private _getExtension(name: string) {\r\n        var extension,\r\n            gl = this.gl;\r\n\r\n        switch (name) {\r\n            case \"EXT_texture_filter_anisotropic\":\r\n                extension = gl.getExtension(\"EXT_texture_filter_anisotropic\") || gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") || gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");\r\n                break;\r\n            case \"WEBGL_compressed_texture_s3tc\":\r\n                extension = gl.getExtension(\"WEBGL_compressed_texture_s3tc\") || gl.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\") || gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");\r\n                break;\r\n            case \"WEBGL_compressed_texture_pvrtc\":\r\n                extension = gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") || gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");\r\n                break;\r\n            case \"ANGLE_instanced_arrays\":\r\n                extension = gl.getExtension(\"ANGLE_instanced_arrays\");\r\n                break;\r\n            case \"element_index_uint\":\r\n                extension = gl.getExtension(\"OES_element_index_uint\") !== null;\r\n                break;\r\n            case \"depth_texture\":\r\n                extension = gl.getExtension(\"WEBKIT_WEBGL_depth_texture\") !== null || gl.getExtension(\"WEBGL_depth_texture\") !== null;\r\n                break;\r\n            case \"vao\":\r\n                extension = gl.getExtension(\"OES_vertex_array_object\");\r\n                break;\r\n            case \"standard_derivatives\":\r\n                extension = gl.getExtension(\"OES_standard_derivatives\");\r\n                break;\r\n            default:\r\n                extension = gl.getExtension(name);\r\n                break;\r\n        }\r\n\r\n        return extension;\r\n    }\r\n\r\n    private _getMaxBoneCount() {\r\n        var gl = this.gl,\r\n            numUniforms: number = null,\r\n            maxBoneCount: number = null;\r\n\r\n        // Calculate a estimate of the maximum number of bones that can be uploaded to the GPU\r\n        // based on the number of available uniforms and the number of uniforms required for non-\r\n        // bone data.  This is based off of the Standard shader.  A user defined shader may have\r\n        // even less space available for bones so this calculated value can be overridden via\r\n        numUniforms = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);\r\n        numUniforms -= 4 * 4; // Model, view, projection and shadow matrices\r\n        // numUniforms -= 8;     // 8 lights max, each specifying a position vector\r\n        numUniforms -= 1;     // Eye position\r\n        numUniforms -= 4 * 4; // Up to 4 texture transforms\r\n\r\n        maxBoneCount = Math.floor(numUniforms / 4);\r\n\r\n        // Put a limit on the number of supported bones before skin partitioning must be performed\r\n        // Some GPUs have demonstrated performance issues if the number of vectors allocated to the\r\n        // skin matrix palette is left unbounded\r\n        return Math.min(maxBoneCount, 128);\r\n    }\r\n\r\n    private _getMaxAnisotropy() {\r\n        var extension = this.extensionTextureFilterAnisotropic,\r\n            gl = this.gl;\r\n\r\n        return extension !== null ? gl.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0;\r\n    }\r\n\r\n    private _detectPrecision() {\r\n        var gl = this.gl;\r\n\r\n        if (!gl.getShaderPrecisionFormat) {\r\n            this.precision = EGPUPrecision.HIGHP;\r\n\r\n            return;\r\n        }\r\n\r\n        let vertexShaderPrecisionHighpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT),\r\n            vertexShaderPrecisionMediumpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT),\r\n            //vertexShaderPrecisionLowpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_FLOAT),\r\n            fragmentShaderPrecisionHighpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT),\r\n            fragmentShaderPrecisionMediumpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT),\r\n            //fragmentShaderPrecisionLowpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_FLOAT),\r\n            highpAvailable = vertexShaderPrecisionHighpFloat.precision > 0 && fragmentShaderPrecisionHighpFloat.precision > 0,\r\n            mediumpAvailable = vertexShaderPrecisionMediumpFloat.precision > 0 && fragmentShaderPrecisionMediumpFloat.precision > 0;\r\n\r\n        if (!highpAvailable) {\r\n            if (mediumpAvailable) {\r\n                this.precision = EGPUPrecision.MEDIUMP;\r\n                Log.warn(Log.info.FUNC_NOT_SUPPORT(\"gpu\", \"highp, using mediump\"));\r\n            }\r\n            else {\r\n                this.precision = EGPUPrecision.LOWP;\r\n                Log.warn(Log.info.FUNC_NOT_SUPPORT(\"gpu\", \"highp and mediump, using lowp\"));\r\n            }\r\n        }\r\n        else {\r\n            this.precision = EGPUPrecision.HIGHP;\r\n        }\r\n    }\r\n}\r\n\r\nexport enum EGPUPrecision {\r\n    HIGHP,\r\n    MEDIUMP,\r\n    LOWP\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { CommonBuffer } from \"./CommonBuffer\";\r\nimport { EBufferType } from \"./EBufferType\";\r\nimport { EBufferUsage } from \"./EBufferUsage\";\r\nimport { ensureGetter, assert, requireCheck } from \"../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\nimport { BufferTable } from \"../../core/entityObject/scene/cache/BufferTable\";\r\nimport { GPUDetector } from \"../../device/GPUDetector\";\r\n\r\n@registerClass(\"ElementBuffer\")\r\nexport class ElementBuffer extends CommonBuffer {\r\n    public static create(data: Array<number>, type: EBufferType = null, usage: EBufferUsage = EBufferUsage.STATIC_DRAW): ElementBuffer {\r\n        var obj = new this();\r\n\r\n        obj.initWhenCreate(data, type, usage);\r\n\r\n        return obj;\r\n    }\r\n\r\n    @ensureGetter(function(typeSize: number) {\r\n        assert(typeSize > 0, Log.info.FUNC_SHOULD(\"typeSize\", `> 0, but actual is ${typeSize}`));\r\n    })\r\n    get typeSize() {\r\n        return this.data.BYTES_PER_ELEMENT;\r\n    }\r\n\r\n    public data: Uint16Array | Uint32Array = null;\r\n\r\n\r\n    public initWhenCreate(data: Array<number>, type: EBufferType, usage: EBufferUsage) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            isNeed32Bits: boolean = null,\r\n            typedData: Uint16Array | Uint32Array = null;\r\n\r\n        this.buffer = gl.createBuffer();\r\n\r\n        if (!this.buffer) {\r\n            Log.warn('Failed to create the this.buffer object');\r\n            return null;\r\n        }\r\n\r\n        if (!data) {\r\n            return null;\r\n        }\r\n\r\n        isNeed32Bits = this._checkIsNeed32Bits(data, type);\r\n        typedData = this._convertToTypedArray(isNeed32Bits, data);\r\n\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\r\n\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, typedData, gl[usage]);\r\n\r\n        BufferTable.resetBindedElementBuffer();\r\n\r\n        this._saveData(typedData, this._getType(isNeed32Bits, type), usage);\r\n\r\n        return this.buffer;\r\n    }\r\n\r\n    @requireCheck(function(data: Array<number>, type: EBufferType = null, offset: number = 0) {\r\n        assert(this.buffer, Log.info.FUNC_MUST(\"create gl buffer\"));\r\n    })\r\n    public resetData(data: Array<number>, type: EBufferType = null, offset: number = 0) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            isNeed32Bits = this._checkIsNeed32Bits(data, type),\r\n            typedData: Uint16Array | Uint32Array = this._convertToTypedArray(isNeed32Bits, data);\r\n\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\r\n\r\n        this.resetBufferData(\"ELEMENT_ARRAY_BUFFER\", typedData, offset);\r\n\r\n        //BufferTable.resetBindedElementBuffer();\r\n\r\n        this._saveData(typedData, this._getType(isNeed32Bits, type), EBufferUsage.DYNAMIC_DRAW);\r\n\r\n        return this;\r\n    }\r\n\r\n    private _convertToTypedArray(isNeed32Bits: boolean, data: Array<number>) {\r\n        return isNeed32Bits ? new Uint32Array(data) : new Uint16Array(data);\r\n    }\r\n\r\n    private _checkIsNeed32Bits(indices: Array<number>, type: EBufferType) {\r\n        var isNeed32Bits = false;\r\n\r\n        if (type !== null) {\r\n            if (type === EBufferType.UNSIGNED_INT) {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        //todo optimize?\r\n        if (GPUDetector.getInstance().extensionUintIndices) {\r\n            for (let indice of indices) {\r\n                if (indice > 65535) {\r\n                    isNeed32Bits = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            isNeed32Bits = false;\r\n        }\r\n\r\n        return isNeed32Bits;\r\n    }\r\n\r\n    @requireCheck(function(isNeed32Bits: boolean, type: EBufferType) {\r\n        if (type !== null) {\r\n            if (isNeed32Bits) {\r\n                assert(type === EBufferType.UNSIGNED_INT, Log.info.FUNC_MUST_BE(\"type\", `UNSIGNED_SHORT, but actual is ${type}`));\r\n            }\r\n            else {\r\n                assert(type === EBufferType.UNSIGNED_SHORT || type === EBufferType.UNSIGNED_INT, Log.info.FUNC_MUST_BE(\"type\", `UNSIGNED_SHORT or UNSIGNED_INT, but actual is ${type}`));\r\n            }\r\n        }\r\n    })\r\n    private _getType(isNeed32Bits: boolean, type: EBufferType) {\r\n        return type === null ? (isNeed32Bits ? EBufferType.UNSIGNED_INT : EBufferType.UNSIGNED_SHORT) : type;\r\n    }\r\n\r\n    private _saveData(data: Uint16Array | Uint32Array, type: EBufferType, usage: EBufferUsage) {\r\n        this.type = type;\r\n        this.count = data.length;\r\n        this.data = data;\r\n        this.usage = usage;\r\n    }\r\n}","export enum EBufferDataType {\r\n    VERTICE = <any>\"VERTICE\",\r\n    INDICE = <any>\"INDICE\"\r\n    // NORMAL = <any>\"NORMAL\",\r\n    // TEXCOORD = <any>\"TEXCOORD\",\r\n    // TANGENT = <any>\"TANGENT\",\r\n    // COLOR = <any>\"COLOR\",\r\n    //\r\n    // JOINT_INDICE = <any>\"JOINT_INDICE\",\r\n    // JOINT_WEIGHT = <any>\"JOINT_WEIGHT\",\r\n    //\r\n    // CUSTOM = <any>\"CUSTOM\"\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { CommonBuffer } from \"./CommonBuffer\";\r\nimport { EBufferType } from \"./EBufferType\";\r\nimport { EBufferUsage } from \"./EBufferUsage\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { BufferTable } from \"../../core/entityObject/scene/cache/BufferTable\";\r\nimport { requireCheck, assert } from \"../../definition/typescript/decorator/contract\";\r\n\r\n@registerClass(\"ArrayBuffer\")\r\nexport class ArrayBuffer extends CommonBuffer {\r\n    public static create(data: Array<number>, size: number, type: EBufferType = EBufferType.FLOAT, usage: EBufferUsage = EBufferUsage.STATIC_DRAW): ArrayBuffer {\r\n        var obj = new this();\r\n\r\n        obj.initWhenCreate(data, size, type, usage);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public size: number = null;\r\n    public data: Float32Array = null;\r\n\r\n\r\n    public initWhenCreate(data: Array<number>, size: number, type: EBufferType, usage: EBufferUsage) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            typedData: Float32Array = null;\r\n\r\n        this.buffer = gl.createBuffer();\r\n\r\n        if (!this.buffer) {\r\n            Log.warn('Failed to create the this.buffer object');\r\n            return null;\r\n        }\r\n\r\n        if (!data) {\r\n            return null;\r\n        }\r\n\r\n        typedData = this._convertToTypedArray(data, type);\r\n\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\r\n\r\n        gl.bufferData(gl.ARRAY_BUFFER, typedData, gl[usage]);\r\n\r\n        BufferTable.resetBindedArrayBuffer();\r\n\r\n        this._saveData(typedData, size, type, usage);\r\n\r\n        return this.buffer;\r\n    }\r\n\r\n    @requireCheck(function(data: Array<number>, size: number = this.size, type: EBufferType = this.type, offset: number = 0) {\r\n        assert(this.buffer, Log.info.FUNC_MUST(\"create gl buffer\"));\r\n    })\r\n    public resetData(data: Array<number>, size: number = this.size, type: EBufferType = this.type, offset: number = 0) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            typedData: Float32Array = this._convertToTypedArray(data, type);\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\r\n\r\n        this.resetBufferData(\"ARRAY_BUFFER\", typedData, offset);\r\n\r\n        //BufferTable.resetBindedArrayBuffer();\r\n\r\n        this._saveData(typedData, size, type, EBufferUsage.DYNAMIC_DRAW);\r\n\r\n        return this;\r\n    }\r\n\r\n    private _convertToTypedArray(data: Array<number>, type: EBufferType) {\r\n        return new Float32Array(data);\r\n    }\r\n\r\n    private _saveData(data: Float32Array, size: number, type: EBufferType, usage: EBufferUsage) {\r\n        this.size = size;\r\n        this.type = type;\r\n        this.count = data.length / size;\r\n        this.usage = usage;\r\n\r\n        this.data = data;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { EBufferDataType } from \"./EBufferDataType\";\r\nimport { ensure } from \"../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../../utils/Log\";\r\n\r\nconst _table = Hash.create<string>();\r\n\r\n//todo remove <any>\r\n_table.addChild(<any>EBufferDataType.VERTICE, \"vertices\");\r\n_table.addChild(<any>EBufferDataType.INDICE, \"indices\");\r\n// _table.addChild(<any>EBufferDataType.NORMAL, \"normals\");\r\n// _table.addChild(<any>EBufferDataType.TEXCOORD, \"texCoords\");\r\n// _table.addChild(<any>EBufferDataType.COLOR, \"colors\");\r\n// _table.addChild(<any>EBufferDataType.TANGENT, \"tangents\");\r\n// _table.addChild(<any>EBufferDataType.JOINT_INDICE, \"jointIndices\");\r\n// _table.addChild(<any>EBufferDataType.JOINT_WEIGHT, \"jointWeights\");\r\n\r\n@registerClass(\"BufferDataTable\")\r\nexport class BufferDataTable {\r\n    @ensure(function(result, type: EBufferDataType) {\r\n        Log.error(result === void 0, Log.info.FUNC_NOT_EXIST(type, \"in BufferDataTable\"));\r\n    })\r\n    public static getGeometryDataName(type: EBufferDataType) {\r\n        //todo remove <any>\r\n        var result = _table.getChild(<any>type);\r\n\r\n        return result;\r\n    }\r\n}","import { GameObject } from \"../../../core/entityObject/gameObject/GameObject\";\r\nimport { GeometryData } from \"./GeometryData\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { Buffer } from \"../../../renderer/buffer/Buffer\";\r\nimport { ElementBuffer } from \"../../../renderer/buffer/ElementBuffer\";\r\nimport { virtual } from \"../../../definition/typescript/decorator/virtual\";\r\nimport { EBufferDataType } from \"../../../renderer/buffer/EBufferDataType\";\r\nimport { requireCheck, it } from \"../../../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { EBufferType } from \"../../../renderer/buffer/EBufferType\";\r\nimport { EBufferUsage } from \"../../../renderer/buffer/EBufferUsage\";\r\nimport { ArrayBuffer } from \"../../../renderer/buffer/ArrayBuffer\";\r\nimport { cache } from \"../../../definition/typescript/decorator/cache\";\r\nimport { BufferDataTable } from \"../../../renderer/buffer/BufferDataTable\";\r\n\r\nexport abstract class BufferContainer {\r\n    constructor(entityObject: GameObject) {\r\n        this.entityObject = entityObject;\r\n    }\r\n\r\n    public geometryData: GeometryData = null;\r\n\r\n    protected entityObject: GameObject = null;\r\n    protected container: Hash<Buffer> = Hash.create<Buffer>();\r\n\r\n    // private _colorBuffer:ArrayBuffer = null;\r\n    // private _texCoordBuffer:ArrayBuffer = null;\r\n    // private _tangentBuffer:ArrayBuffer = null;\r\n    private _indiceBuffer: ElementBuffer = null;\r\n\r\n    // public abstract getBufferForRenderSort():Buffer;\r\n\r\n    @virtual\r\n    public createBuffersFromGeometryData() {\r\n        this.getChild(EBufferDataType.VERTICE);\r\n        // this.getChild(EBufferDataType.NORMAL);\r\n        // this.getChild(EBufferDataType.TANGENT);\r\n        // this.getChild(EBufferDataType.COLOR);\r\n        this.getChild(EBufferDataType.INDICE);\r\n        // this.getChild(EBufferDataType.TEXCOORD);\r\n    }\r\n\r\n    public removeCache(type: EBufferDataType);\r\n    public removeCache(name: string);\r\n\r\n    public removeCache(...args) {\r\n        this.container.removeChild(args[0]);\r\n    }\r\n\r\n\r\n    public getChild(type: EBufferDataType);\r\n    public getChild(type: EBufferDataType, dataName: string);\r\n\r\n    @requireCheck(function(...args) {\r\n        it(\"test arguments\", function() {\r\n            if (args.length === 2) {\r\n                let dataName = args[1];\r\n\r\n                expect(dataName).exist;\r\n                expect(dataName).be.a(\"string\");\r\n            }\r\n        });\r\n    })\r\n    public getChild(...args) {\r\n        var type = args[0],\r\n            result: any = null;\r\n\r\n        switch (type) {\r\n            case EBufferDataType.VERTICE:\r\n                result = this.getVertice(type);\r\n                break;\r\n            // case EBufferDataType.NORMAL:\r\n            //     result = this.getNormal(type);\r\n            //     break;\r\n            // case EBufferDataType.TANGENT:\r\n            //     result = this._getTangent(type);\r\n            //     break;\r\n            // case EBufferDataType.COLOR:\r\n            //     result = this._getColor(type);\r\n            //     break;\r\n            case EBufferDataType.INDICE:\r\n                result = this._getIndice(type);\r\n                break;\r\n            // case EBufferDataType.TEXCOORD:\r\n            //     result = this._getTexCoord(type);\r\n            //     break;\r\n            // case EBufferDataType.CUSTOM:\r\n            //     result = this.getCustomData(args[1]);\r\n            //     break;\r\n            default:\r\n                // result = this.getBuffer(type);\r\n                break;\r\n        }\r\n\r\n        return result;\r\n\r\n    }\r\n\r\n    public init() {\r\n    }\r\n\r\n    public dispose() {\r\n        this.container.forEach((buffer: Buffer) => {\r\n            buffer.dispose();\r\n        });\r\n\r\n        this.geometryData.dispose();\r\n    }\r\n\r\n    protected abstract getVertice(type: EBufferDataType);\r\n    // protected abstract getNormal(type:EBufferDataType);\r\n\r\n    // @virtual\r\n    // protected getCustomData(dataName:string){\r\n    //     return null;\r\n    // }\r\n\r\n    // @virtual\r\n    // protected getBuffer(type:EBufferDataType){\r\n    //     Log.error(true, wdCb.Log.info.FUNC_UNKNOW(`EBufferDataType: ${type}`));\r\n    //\r\n    //     return null;\r\n    // }\r\n\r\n    protected createOnlyOnceAndUpdateArrayBuffer(bufferAttriName: string, data: Array<number>, size: number, type: EBufferType = EBufferType.FLOAT, offset: number = 0, usage: EBufferUsage = EBufferUsage.STATIC_DRAW) {\r\n        var buffer: ArrayBuffer = this[bufferAttriName];\r\n\r\n        if (buffer) {\r\n            buffer.resetData(data, size, type, offset);\r\n\r\n            return;\r\n        }\r\n\r\n        this[bufferAttriName] = ArrayBuffer.create(data, size, type, usage);\r\n    }\r\n\r\n    protected createOnlyOnceAndUpdateElememntBuffer(bufferAttriName: string, data: Array<number>, type: EBufferType = null, offset: number = 0, usage: EBufferUsage = EBufferUsage.STATIC_DRAW) {\r\n        var buffer: ElementBuffer = this[bufferAttriName];\r\n\r\n        if (buffer) {\r\n            buffer.resetData(data, type, offset);\r\n\r\n            return;\r\n        }\r\n\r\n        this[bufferAttriName] = ElementBuffer.create(data, type, usage);\r\n    }\r\n\r\n    //protected createBufferOnlyOnce(bufferAttriName:string, bufferClass:any, data:Float32Array, size:number, type:EBufferType, usage:EBufferUsage = EBufferUsage.STATIC_DRAW):boolean{\r\n    //    if(this[bufferAttriName]){\r\n    //        return false;\r\n    //    }\r\n    //\r\n    //    this[bufferAttriName] = bufferClass.create(data, size, type,usage);\r\n    //\r\n    //    return true;\r\n    //}\r\n\r\n    protected hasData(data: Array<number> | null) {\r\n        return !!data && data.length > 0;\r\n    }\r\n\r\n    // @cache(function(type:EBufferDataType){\r\n    //     return this.container.hasChild(<any>type) && !this._needReCalcuteTangent(type);\r\n    // }, function(type){\r\n    //     return this.container.getChild(<any>type)\r\n    // }, function(result, type){\r\n    //     this.container.addChild(<any>type, result);\r\n    // })\r\n    // private _getTangent(type){\r\n    //     var geometryData = null;\r\n    //\r\n    //     geometryData = this.geometryData[BufferDataTable.getGeometryDataName(type)];\r\n    //\r\n    //     if(!this.hasData(geometryData)){\r\n    //         return null;\r\n    //     }\r\n    //\r\n    //     this.createOnlyOnceAndUpdateArrayBuffer(\"_tangentBuffer\", geometryData, 3);\r\n    //\r\n    //     return this._tangentBuffer;\r\n    // }\r\n    //\r\n    // @cache(function(type:EBufferDataType){\r\n    //     return this.container.hasChild(<any>type);\r\n    // }, function(type){\r\n    //     return this.container.getChild(<any>type)\r\n    // }, function(result, type){\r\n    //     this.container.addChild(<any>type, result);\r\n    // })\r\n    // private _getColor(type) {\r\n    //     var geometryData = null;\r\n    //\r\n    //     geometryData = this.geometryData[BufferDataTable.getGeometryDataName(type)];\r\n    //\r\n    //     if(!this.hasData(geometryData)){\r\n    //         return null;\r\n    //     }\r\n    //\r\n    //     this.createOnlyOnceAndUpdateArrayBuffer(\"_colorBuffer\", geometryData, 3);\r\n    //\r\n    //     return this._colorBuffer;\r\n    // }\r\n\r\n    @cache(function(type: EBufferDataType) {\r\n        return this.container.hasChild(<any>type);\r\n    }, function(type) {\r\n        return this.container.getChild(<any>type)\r\n    }, function(result, type) {\r\n        this.container.addChild(<any>type, result);\r\n    })\r\n    private _getIndice(type) {\r\n        var geometryData = null;\r\n\r\n        geometryData = this.geometryData[BufferDataTable.getGeometryDataName(type)];\r\n\r\n        if (!this.hasData(geometryData)) {\r\n            return null;\r\n        }\r\n\r\n        this.createOnlyOnceAndUpdateElememntBuffer(\"_indiceBuffer\", geometryData);\r\n\r\n        return this._indiceBuffer;\r\n    }\r\n\r\n    // @cache(function(type:EBufferDataType){\r\n    //     return this.container.hasChild(<any>type);\r\n    // }, function(type){\r\n    //     return this.container.getChild(<any>type)\r\n    // }, function(result, type){\r\n    //     this.container.addChild(<any>type, result);\r\n    // })\r\n    // private _getTexCoord(type){\r\n    //     var geometryData = null,\r\n    //         isCreatBuffer:boolean = null;\r\n    //\r\n    //     geometryData = this.geometryData[BufferDataTable.getGeometryDataName(type)];\r\n    //\r\n    //     if(!this.hasData(geometryData)){\r\n    //         return null;\r\n    //     }\r\n    //\r\n    //     this.createOnlyOnceAndUpdateArrayBuffer(\"_texCoordBuffer\", geometryData, 2);\r\n    //\r\n    //     return this._texCoordBuffer;\r\n    // }\r\n    //\r\n    // private _needReCalcuteTangent(type:EBufferDataType){\r\n    //     return this.geometryData.tangentDirty && type === EBufferDataType.TANGENT;\r\n    // }\r\n}","import { BufferContainer } from \"./BufferContainer\";\r\nimport { BasicGeometryData } from \"./BasicGeometryData\";\r\nimport { ArrayBuffer } from \"../../../renderer/buffer/ArrayBuffer\";\r\nimport { cacheBufferForBufferContainer } from \"../../../definition/typescript/decorator/cache\";\r\nimport { EBufferDataType } from \"../../../renderer/buffer/EBufferDataType\";\r\nimport { BufferDataTable } from \"../../../renderer/buffer/BufferDataTable\";\r\n\r\nexport abstract class CommonBufferContainer extends BufferContainer {\r\n    public geometryData: BasicGeometryData;\r\n\r\n    private _verticeBuffer: ArrayBuffer = null;\r\n    // private _normalBuffer:ArrayBuffer = null;\r\n\r\n\r\n    // public getBufferForRenderSort():Buffer{\r\n    //     var buffer = this.getChild(EBufferDataType.VERTICE);\r\n    //\r\n    //     if(!buffer){\r\n    //         return null;\r\n    //     }\r\n    //\r\n    //     return buffer;\r\n    // }\r\n\r\n    @cacheBufferForBufferContainer()\r\n    protected getVertice(type: EBufferDataType) {\r\n        var geometryData = this.geometryData[BufferDataTable.getGeometryDataName(type)];\r\n\r\n        if (!this.hasData(geometryData)) {\r\n            return null;\r\n        }\r\n\r\n        this.createOnlyOnceAndUpdateArrayBuffer(\"_verticeBuffer\", geometryData, 3);\r\n\r\n        return this._verticeBuffer;\r\n    }\r\n\r\n    // @cacheBufferForBufferContainer()\r\n    // protected getNormal(type:EBufferDataType) {\r\n    //     var geometryData= this.geometryData[BufferDataTable.getGeometryDataName(type)];\r\n    //\r\n    //     if(!this.hasData(geometryData)){\r\n    //         return null;\r\n    //     }\r\n    //\r\n    //     this.createOnlyOnceAndUpdateArrayBuffer(\"_normalBuffer\", geometryData, 3);\r\n    //\r\n    //     return this._normalBuffer;\r\n    // }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { CommonBufferContainer } from \"./CommonBufferContainer\";\r\nimport { GameObject } from \"../../../core/entityObject/gameObject/GameObject\";\r\n\r\n@registerClass(\"BasicBufferContainer\")\r\nexport class BasicBufferContainer extends CommonBufferContainer {\r\n    public static create(entityObject: GameObject) {\r\n        var obj = new this(entityObject);\r\n\r\n        return obj;\r\n    }\r\n}","import { Geometry } from \"../Geometry\";\r\nimport { EBufferDataType } from \"../../../renderer/buffer/EBufferDataType\";\r\nimport { cacheGetter } from \"../../../definition/typescript/decorator/cache\";\r\nimport { Face3 } from \"../../../structure/Face3\";\r\nimport { virtual } from \"../../../definition/typescript/decorator/virtual\";\r\n\r\nexport abstract class GeometryData {\r\n    constructor(geometry: Geometry) {\r\n        this.geometry = geometry;\r\n    }\r\n\r\n    private _vertices: Array<number> = null;\r\n    get vertices() {\r\n        return this._vertices;\r\n    }\r\n    set vertices(vertices: Array<number>) {\r\n        this._vertices = vertices;\r\n        // this.tangentDirty = true;\r\n\r\n        this.geometry.buffers.removeCache(EBufferDataType.VERTICE);\r\n    }\r\n\r\n    @cacheGetter(function() {\r\n        return !this._indiceDirty && this._indiceCache;\r\n    }, function() {\r\n        return this._indiceCache;\r\n    }, function(result) {\r\n        this._indiceCache = result;\r\n        this._indiceDirty = false;\r\n    })\r\n    get indices(): Array<number> {\r\n        var indices = [];\r\n\r\n        for (let face of this._faces) {\r\n            indices.push(face.aIndex, face.bIndex, face.cIndex);\r\n        }\r\n\r\n        return indices;\r\n    }\r\n\r\n    private _faces: Array<Face3> = null;\r\n    get faces() {\r\n        return this._faces;\r\n    }\r\n    set faces(faces: Array<Face3>) {\r\n        this._faces = faces;\r\n\r\n        // this.geometry.buffers.removeCache(EBufferDataType.NORMAL);\r\n        this.geometry.buffers.removeCache(EBufferDataType.INDICE);\r\n\r\n        this.onChangeFace();\r\n    }\r\n\r\n    protected geometry: Geometry = null;\r\n\r\n    private _indiceCache: Array<number> = null;\r\n    private _indiceDirty: boolean = true;\r\n\r\n    public dispose() {\r\n    }\r\n\r\n    @virtual\r\n    protected onChangeFace() {\r\n        // this.tangentDirty = true;\r\n        // this._normalDirty = true;\r\n        this._indiceDirty = true;\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { GeometryData } from \"./GeometryData\";\r\nimport { Geometry } from \"../Geometry\";\r\n\r\n@registerClass(\"BasicGeometryData\")\r\nexport class BasicGeometryData extends GeometryData {\r\n    public static create(geometry: Geometry) {\r\n        var obj = new this(geometry);\r\n\r\n        return obj;\r\n    }\r\n}","import { Component } from \"../../core/Component\";\r\nimport { Material } from \"../../material/Material\";\r\nimport { cloneAttributeAsCloneable, cloneAttributeAsBasicType } from \"../../definition/typescript/decorator/clone\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { BufferContainer } from \"./data/BufferContainer\";\r\nimport { EDrawMode } from \"../../renderer/EDrawMode\";\r\nimport { ensure, it, requireCheck } from \"../../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { execOnlyOnce } from \"../../definition/typescript/decorator/control\";\r\nimport { virtual } from \"../../definition/typescript/decorator/virtual\";\r\nimport { BasicBufferContainer } from \"./data/BasicBufferContainer\";\r\nimport { GeometryData } from \"./data/GeometryData\";\r\nimport { BasicGeometryData } from \"./data/BasicGeometryData\";\r\nimport { Face3 } from \"../../structure/Face3\";\r\n\r\nexport abstract class Geometry extends Component {\r\n    private _material: Material = null;\r\n    @cloneAttributeAsCloneable()\r\n    get material() {\r\n        return this._material;\r\n    }\r\n    set material(material: Material) {\r\n        if (!JudgeUtils.isEqual(material, this._material)) {\r\n            this._material = material;\r\n            this._material.geometry = this;\r\n\r\n            // if(this.entityObject){\r\n            // EventManager.trigger(this.entityObject, CustomEvent.create(<any>EEngineEvent.MATERIAL_CHANGE));\r\n            // }\r\n        }\r\n    }\r\n\r\n    get geometryData() {\r\n        if (this.buffers === null) {\r\n            return null;\r\n        }\r\n\r\n        return this.buffers.geometryData;\r\n    }\r\n\r\n    public entityObject: GameObject;\r\n    public buffers: BufferContainer = null;\r\n    // public vaoManager:VAOManager = !!GPUDetector.getInstance().extensionVAO ? VAOManager.create() : null;\r\n    @cloneAttributeAsBasicType()\r\n    public drawMode: EDrawMode = EDrawMode.TRIANGLES;\r\n\r\n    public abstract computeData(): GeometryDataType;\r\n\r\n    @ensure(function() {\r\n        var geometryData = this.buffers.geometryData;\r\n\r\n        it(`faces.count should be be ${geometryData.indices.length / 3}, but actual is ${geometryData.faces.length}`, () => {\r\n            expect(geometryData.faces.length * 3).equal(geometryData.indices.length);\r\n        });\r\n    })\r\n    @execOnlyOnce(\"_isInit\")\r\n    public init() {\r\n        var geometryData = null,\r\n            // {\r\n            //     vertices,\r\n            //     faces = [],\r\n            //     texCoords,\r\n            //     colors,\r\n            //     morphVertices\r\n            //     } = this.computeData();\r\n            computedData = this.computeData();\r\n\r\n        this.buffers = this.createBufferContainer();\r\n\r\n        geometryData = this.createGeometryData(computedData);\r\n\r\n        this.buffers.geometryData = geometryData;\r\n\r\n        this.buffers.init();\r\n\r\n        this._material.init();\r\n\r\n        // this.computeNormals();\r\n\r\n        // this.vaoManager && this.vaoManager.init();\r\n    }\r\n\r\n    // @requireCheck(function(){\r\n    //     it(\"must define buffers->geometryData\", () => {\r\n    //         expect(this.buffers).exist;\r\n    //         expect(this.buffers.geometryData).exist;\r\n    //     });\r\n    // })\r\n    // public hasFaceNormals(){\r\n    //     return this.buffers.geometryData.hasFaceNormals();\r\n    // }\r\n\r\n    // @requireCheck(function(){\r\n    //     it(\"must define buffers->geometryData\", () => {\r\n    //         expect(this.buffers).exist;\r\n    //         expect(this.buffers.geometryData).exist;\r\n    //     });\r\n    // })\r\n    // public hasVertexNormals(){\r\n    //     return this.buffers.geometryData.hasVertexNormals();\r\n    // }\r\n    //\r\n    // public hasColors(){\r\n    //     return this.buffers.geometryData.hasColors();\r\n    // }\r\n    //\r\n    // public isSmoothShading(){\r\n    //     return (<StandardLightMaterial>this._material).shading === EShading.SMOOTH;\r\n    // }\r\n\r\n    public dispose() {\r\n        this.buffers.dispose();\r\n\r\n        this._material.dispose();\r\n\r\n        // this.vaoManager && this.vaoManager.dispose();\r\n    }\r\n\r\n    // @requireCheck(function(){\r\n    //     it(\"must define buffers->geometryData\", () => {\r\n    //         expect(this.buffers).exist;\r\n    //         expect(this.buffers.geometryData).exist;\r\n    //     });\r\n    // })\r\n    // public computeFaceNormals() {\r\n    //     this.buffers.geometryData.computeFaceNormals();\r\n    // }\r\n    //\r\n    // public computeVertexNormals(){\r\n    //     this.buffers.geometryData.computeVertexNormals();\r\n    // }\r\n\r\n    @requireCheck(function() {\r\n        it(\"not exist buffers\", () => {\r\n            expect(this.buffers).exist;\r\n        });\r\n    })\r\n    public createBuffersFromGeometryData() {\r\n        this.buffers.createBuffersFromGeometryData();\r\n    }\r\n\r\n    // @virtual\r\n    // protected computeNormals(){\r\n    //     if(this.isSmoothShading()){\r\n    //         if(!this.hasVertexNormals()){\r\n    //             this.computeVertexNormals();\r\n    //         }\r\n    //     }\r\n    //     else{\r\n    //         if(!this.hasFaceNormals()){\r\n    //             this.computeFaceNormals();\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    @virtual\r\n    protected createBufferContainer(): BufferContainer {\r\n        return BasicBufferContainer.create(this.entityObject);\r\n    }\r\n\r\n    @virtual\r\n    protected createGeometryData(computedData: GeometryDataType): GeometryData {\r\n        return this.createBasicGeometryData(computedData);\r\n    }\r\n\r\n    protected createBasicGeometryData(computedData: GeometryDataType) {\r\n        var {\r\n                    vertices,\r\n            faces = []\r\n            // texCoords,\r\n            // colors\r\n        } = computedData,\r\n            geometryData = BasicGeometryData.create(this);\r\n\r\n        geometryData.vertices = vertices;\r\n        geometryData.faces = faces;\r\n        // geometryData.texCoords = texCoords;\r\n        // geometryData.colors = colors;\r\n\r\n        return geometryData;\r\n    }\r\n}\r\n\r\nexport type GeometryDataType = {\r\n    vertices: Array<number>;\r\n    faces?: Array<Face3>;\r\n    // texCoords?:Array<number>;\r\n    // colors?:Array<number>;\r\n};","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\n\r\n@registerClass(\"SortUtils\")\r\nexport class SortUtils {\r\n    public static insertSort(targetArr: Array<any>, compareFunc: (a: any, b: any) => boolean, isChangeSelf = false): Array<any> {\r\n        var resultArr: Array<any> = isChangeSelf ? targetArr : ExtendUtils.extend([], targetArr);\r\n\r\n        for (let i = 1, len = resultArr.length; i < len; i++) {\r\n            for (let j = i; j > 0 && compareFunc(resultArr[j], resultArr[j - 1]); j--) {\r\n                this._swap(resultArr, j - 1, j);\r\n            }\r\n        }\r\n\r\n        return resultArr;\r\n    }\r\n\r\n    public static quickSort(targetArr: Array<any>, compareFunc: (a: any, b: any) => boolean, isChangeSelf = false): Array<any> {\r\n        var resultArr: Array<any> = isChangeSelf ? targetArr : ExtendUtils.extend([], targetArr);\r\n        var sort = (l: number, r: number) => {\r\n            if (l >= r) {\r\n                return;\r\n            }\r\n\r\n            let i = l, j = r, x = resultArr[l];\r\n\r\n            while (i < j) {\r\n                while (i < j && compareFunc(x, resultArr[j])) {\r\n                    j--;\r\n                }\r\n\r\n                if (i < j) {\r\n                    resultArr[i++] = resultArr[j];\r\n                }\r\n\r\n                while (i < j && compareFunc(resultArr[i], x)) {\r\n                    i++;\r\n                }\r\n\r\n                if (i < j) {\r\n                    resultArr[j--] = resultArr[i];\r\n                }\r\n            }\r\n\r\n            resultArr[i] = x;\r\n\r\n            sort(l, i - 1);\r\n            sort(i + 1, r);\r\n        };\r\n\r\n        sort(0, resultArr.length - 1);\r\n\r\n        return resultArr;\r\n    }\r\n\r\n\r\n    private static _swap(children: Array<any>, i: number, j: number) {\r\n        var t: any = null;\r\n\r\n        t = children[i];\r\n        children[i] = children[j];\r\n        children[j] = t;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Component } from \"../../core/Component\";\r\nimport { Geometry } from \"../geometry/Geometry\";\r\n\r\n//todo optimize:Component add \"initOrder\" attri\r\n@registerClass(\"ComponentInitOrderTable\")\r\nexport class ComponentInitOrderTable {\r\n    public static getOrder(component: Component) {\r\n        // if(component instanceof SourceInstance){\r\n        //     return 1;\r\n        // }\r\n        // if(JudgeUtils.isClass(component, \"Shadow\")){\r\n        //     return 2;\r\n        // }\r\n        // if(JudgeUtils.isClass(component, \"ThreeDBitmapFont\")){\r\n        //     return 3;\r\n        // }\r\n        if (component instanceof Geometry) {\r\n            return 4;\r\n        }\r\n\r\n        return 5;\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { EntityObject } from \"../EntityObject\";\r\nimport { Transform } from \"../../../component/transform/Transform\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { RendererComponent } from \"../../../component/renderer/RendererComponent\";\r\nimport { Geometry } from \"../../../component/geometry/Geometry\";\r\nimport { SortUtils } from \"../../../utils/SortUtils\";\r\nimport { Component } from \"../../Component\";\r\nimport { ComponentInitOrderTable } from \"../../../component/data/ComponentInitOrderTable\";\r\nimport { JudgeUtils } from \"../../../utils/JudgeUtils\";\r\nimport { requireCheck, it } from \"../../../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\n\r\n@registerClass(\"ComponentManager\")\r\nexport class ComponentManager {\r\n    public static create(entityObject: EntityObject) {\r\n        var obj = new this(entityObject);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(entityObject: EntityObject) {\r\n        this._entityObject = entityObject;\r\n    }\r\n\r\n    public transform: Transform = null;\r\n\r\n    private _entityObject: EntityObject = null;\r\n    private _components: Collection<any> = Collection.create<any>();\r\n    private _rendererComponent: RendererComponent = null;\r\n    private _geometry: Geometry = null;\r\n\r\n    public init() {\r\n        for (let component of SortUtils.insertSort(this._components.getChildren(), (a: Component, b: Component) => {\r\n            return ComponentInitOrderTable.getOrder(a) < ComponentInitOrderTable.getOrder(b);\r\n        })) {\r\n            component.init();\r\n        }\r\n    }\r\n\r\n    public dispose() {\r\n        var components = this.removeAllComponent();\r\n\r\n        components.forEach((component: Component) => {\r\n            component.dispose();\r\n        });\r\n\r\n        this._components.removeAllChildren();\r\n    }\r\n\r\n    public removeAllComponent() {\r\n        var result = Collection.create<Component>();\r\n\r\n        this._components.forEach((component: Component) => {\r\n            this._removeComponentHandler(component);\r\n\r\n            result.addChild(component)\r\n        }, this);\r\n\r\n        //this._componentDirty = true;\r\n\r\n        return result;\r\n    }\r\n\r\n    public getComponent<T>(_class: any): T {\r\n        return this._components.findOne((component: Component) => {\r\n            return component instanceof _class;\r\n        });\r\n    }\r\n\r\n    public getComponents() {\r\n        return this._components;\r\n    }\r\n\r\n    public findComponentByUid(uid: number) {\r\n        return this._components.findOne((component: Component) => {\r\n            return component.uid === uid;\r\n        });\r\n    }\r\n\r\n    public forEachComponent(func: (component: Component) => void) {\r\n        this._components.forEach(func);\r\n\r\n        return this;\r\n    }\r\n\r\n    public hasComponent(component: Component): boolean;\r\n    public hasComponent(_class: Function): boolean;\r\n\r\n    public hasComponent(...args) {\r\n        var result: boolean = null;\r\n\r\n        if (JudgeUtils.isComponenet(args[0])) {\r\n            let component = args[0];\r\n\r\n            result = this._components.hasChild(component);\r\n        }\r\n        else {\r\n            let _class = args[0];\r\n\r\n            result = this._components.hasChildWithFunc((component) => {\r\n                return component instanceof _class;\r\n            });\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    @requireCheck(function(component: Component, isShareComponent: boolean = false) {\r\n        if (!component) {\r\n            return;\r\n        }\r\n\r\n        it(\"should not add the component which is already added\", () => {\r\n            expect(this.hasComponent(component)).false;\r\n        });\r\n    })\r\n    public addComponent(component: Component, isShareComponent: boolean = false) {\r\n        if (!component) {\r\n            return;\r\n        }\r\n\r\n        if (component instanceof RendererComponent) {\r\n            this._rendererComponent = component;\r\n        }\r\n        else if (component instanceof Geometry) {\r\n            this._geometry = component;\r\n        }\r\n        else if (component instanceof Transform) {\r\n            if (this.transform) {\r\n                this.removeComponent(this.transform);\r\n            }\r\n\r\n            this.transform = component;\r\n        }\r\n\r\n        component.addToObject(this._entityObject, isShareComponent);\r\n\r\n        this._components.addChild(component);\r\n\r\n        return this;\r\n    }\r\n\r\n    public removeComponent(component: Component);\r\n    public removeComponent(_class: Function);\r\n\r\n    public removeComponent(...args) {\r\n        var component: Component = null;\r\n\r\n        if (args[0] instanceof Component) {\r\n            component = <Component>args[0];\r\n        }\r\n        else {\r\n            component = this.getComponent<any>(<Function>args[0]);\r\n        }\r\n\r\n        if (component) {\r\n            this._components.removeChild(component);\r\n\r\n            this._removeComponentHandler(component);\r\n        }\r\n\r\n        //this._componentDirty = true;\r\n\r\n        return this;\r\n    }\r\n\r\n    // public addAllComponentToComponentContainer(){\r\n    //     this._components.forEach((component:Component) => component.addToComponentContainer());\r\n    // }\r\n    //\r\n    // public removeAllComponentFromComponentContainer(){\r\n    //     this._components.forEach((component:Component) => component.removeFromComponentContainer());\r\n    // }\r\n\r\n    public getComponentCount(_class: Function) {\r\n        return this._components.filter((component: Component) => {\r\n            return component instanceof _class;\r\n        }).getCount();\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        it(\"entityObject shouldn't contain more than 1 geometry component\", () => {\r\n            expect(this.getComponentCount(Geometry)).lessThan(2);\r\n        });\r\n    })\r\n    public getGeometry(): Geometry {\r\n        return this._geometry;\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        it(\"entityObject shouldn't contain more than 1 rendererComponent\", () => {\r\n            expect(this.getComponentCount(RendererComponent)).lessThan(2);\r\n        });\r\n    })\r\n    public getRendererComponent(): RendererComponent {\r\n        return this._rendererComponent;\r\n    }\r\n\r\n    private _removeComponentHandler(component: Component) {\r\n        component.removeFromObject(this._entityObject);\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { EntityObject } from \"../EntityObject\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { JudgeUtils } from \"../../../utils/JudgeUtils\";\r\n\r\n@registerClass(\"EntityObjectManager\")\r\nexport class EntityObjectManager {\r\n    public static create(entityObject: EntityObject) {\r\n        var obj = new this(entityObject);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(entityObject: EntityObject) {\r\n        this._entityObject = entityObject;\r\n    }\r\n\r\n    private _entityObject: EntityObject = null;\r\n    private _children: Collection<any> = Collection.create<any>();\r\n\r\n    public init() {\r\n        this.forEach((child: EntityObject) => {\r\n            child.init();\r\n        });\r\n    }\r\n\r\n    public dispose() {\r\n        this.forEach((child: EntityObject) => {\r\n            child.dispose();\r\n        });\r\n    }\r\n\r\n    public hasChild(child: EntityObject): boolean {\r\n        return this._children.hasChild(child);\r\n    }\r\n\r\n    public addChild(child: EntityObject) {\r\n        if (child.parent) {\r\n            child.parent.removeChild(child);\r\n        }\r\n\r\n        child.parent = this._entityObject;\r\n\r\n        child.transform.parent = this._entityObject.transform;\r\n\r\n        this._children.addChild(child);\r\n\r\n        /*!\r\n         no need to sort!\r\n         because WebGLRenderer enable depth test, it will sort when needed(just as WebGLRenderer->renderSortedTransparentCommands sort the commands)\r\n         */\r\n\r\n        // child.onEnter();\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChildren(children: EntityObject);\r\n    public addChildren(children: Array<EntityObject>);\r\n    public addChildren(children: Collection<EntityObject>);\r\n\r\n    public addChildren(...args) {\r\n        if (JudgeUtils.isArray(args[0])) {\r\n            let children: Array<EntityObject> = args[0];\r\n\r\n            for (let child of children) {\r\n                this.addChild(child);\r\n            }\r\n        }\r\n        else if (JudgeUtils.isCollection(args[0])) {\r\n            let children: Collection<EntityObject> = args[0];\r\n\r\n            children.forEach((child: EntityObject) => {\r\n                this.addChild(child);\r\n            });\r\n        }\r\n        else {\r\n            this.addChild(args[0]);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public forEach(func: (entityObject: EntityObject, index: number) => void) {\r\n        this._children.forEach(func);\r\n\r\n        return this;\r\n    }\r\n\r\n    public filter(func: (entityObject: EntityObject) => boolean) {\r\n        return this._children.filter(func);\r\n    }\r\n\r\n    public sort(func: (a: EntityObject, b: EntityObject) => any, isSortSelf = false) {\r\n        return this._children.sort(func, isSortSelf);\r\n    }\r\n\r\n    public getChildren() {\r\n        return this._children;\r\n    }\r\n\r\n    public getAllChildren() {\r\n        var result = Collection.create<EntityObject>();\r\n        var getChildren = (entityObject: EntityObject) => {\r\n            result.addChildren(entityObject.getChildren());\r\n\r\n            entityObject.forEach((child: EntityObject) => {\r\n                getChildren(child);\r\n            });\r\n        }\r\n\r\n        getChildren(this._entityObject);\r\n\r\n        return result;\r\n    }\r\n\r\n    public getChild(index: number) {\r\n        return this._children.getChild(index);\r\n    }\r\n\r\n    public findChildByUid(uid: number) {\r\n        return this._children.findOne((child: EntityObject) => {\r\n            return child.uid === uid;\r\n        });\r\n    }\r\n\r\n    public findChildByTag(tag: string) {\r\n        return this._children.findOne((child: EntityObject) => {\r\n            return child.hasTag(tag);\r\n        });\r\n    }\r\n\r\n    public findChildByName(name: string) {\r\n        return this._children.findOne((child: EntityObject) => {\r\n            return child.name.search(name) > -1;\r\n        });\r\n    }\r\n\r\n    public findChildrenByName(name: string): Collection<EntityObject> {\r\n        return this._children.filter((child: EntityObject) => {\r\n            return child.name.search(name) > -1;\r\n        });\r\n    }\r\n\r\n    public removeChild(child: EntityObject) {\r\n        // child.onExit();\r\n\r\n        this._children.removeChild(child);\r\n\r\n        child.parent = null;\r\n\r\n        return this;\r\n    }\r\n\r\n    public removeAllChildren() {\r\n        this._children.forEach((child: EntityObject) => {\r\n            this.removeChild(child);\r\n        }, this);\r\n    }\r\n}","import { Entity } from \"../Entity\";\r\nimport { cloneAttributeAsBasicType, CloneUtils } from \"../../definition/typescript/decorator/clone\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { CustomEventRegisterData } from \"../../event/binder/CustomEventRegister\";\r\nimport { ComponentManager } from \"./manager/ComponentManager\";\r\nimport { IDisposable } from \"wonder-frp/dist/es2015/Disposable/IDisposable\";\r\nimport { EntityObjectManager } from \"./manager/EntityObjectManager\";\r\nimport { virtual } from \"../../definition/typescript/decorator/virtual\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\nimport { Component } from \"../Component\";\r\nimport { Geometry } from \"../../component/geometry/Geometry\";\r\nimport { EventManager } from \"../../event/EventManager\";\r\nimport { cache } from \"../../definition/typescript/decorator/cache\";\r\nimport { Renderer } from \"../../renderer/renderer/Renderer\";\r\nimport { GameObject } from \"./gameObject/GameObject\";\r\nimport { Transform } from \"../../component/transform/Transform\";\r\nimport { ensure, it } from \"../../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\n\r\nexport abstract class EntityObject extends Entity {\r\n    private _bubbleParent: EntityObject = null;\r\n    @cloneAttributeAsBasicType()\r\n    get bubbleParent() {\r\n        return this._bubbleParent ? this._bubbleParent : this.parent;\r\n    }\r\n    set bubbleParent(bubbleParent: EntityObject) {\r\n        this._bubbleParent = bubbleParent;\r\n    }\r\n\r\n    set componentDirty(componentDirty: boolean) {\r\n        if (componentDirty === true) {\r\n            this.clearCache();\r\n        }\r\n    }\r\n\r\n    get transform() {\r\n        return this.componentManager.transform;\r\n    }\r\n\r\n    @cloneAttributeAsBasicType()\r\n    public name: string = null;\r\n    @cloneAttributeAsBasicType()\r\n    public parent: EntityObject = null;\r\n\r\n    public customEventMap: Hash<Collection<CustomEventRegisterData>> = Hash.create<Collection<CustomEventRegisterData>>();\r\n\r\n    protected componentManager: ComponentManager = ComponentManager.create(this);\r\n\r\n    private _hasComponentCache: Hash<boolean> = Hash.create<boolean>();\r\n    private _getComponentCache: Hash<boolean> = Hash.create<boolean>();\r\n    private _componentChangeSubscription: IDisposable = null;\r\n    private _entityObjectManager: EntityObjectManager = EntityObjectManager.create(this);\r\n\r\n    @virtual\r\n    public initWhenCreate() {\r\n        this.addComponent(this.createTransform());\r\n    }\r\n\r\n    // @requireCheck(function(config:CloneEntityObjectConfigData = <any>{}){\r\n    //     it(\"if has OneToManySourceInstance component, not support share geometry\", () => {\r\n    //         if(config.shareGeometry){\r\n    //             expect(this.hasComponent(OneToManySourceInstance)).false;\r\n    //         }\r\n    //     });\r\n    // })\r\n    public clone(config: CloneEntityObjectConfigData = <any>{}) {\r\n        var result = null;\r\n\r\n        if (CloneUtils.isNotClone((this))) {\r\n            return null;\r\n        }\r\n\r\n        config = ExtendUtils.extend({\r\n            cloneChildren: true,\r\n            shareGeometry: false,\r\n            cloneGeometry: true\r\n        }, config);\r\n\r\n        result = CloneUtils.clone<EntityObject>(this);\r\n\r\n        this.forEachComponent((component: Component) => {\r\n            if (!config.cloneGeometry && component instanceof Geometry) {\r\n                return;\r\n            }\r\n\r\n            if (config.shareGeometry && component instanceof Geometry) {\r\n                result.addComponent(component, true);\r\n                return;\r\n            }\r\n\r\n            result.addComponent(component.clone());\r\n        });\r\n\r\n        if (config.cloneChildren) {\r\n            this._cloneChildren(result);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public init() {\r\n        var self = this;\r\n\r\n        // this._componentChangeSubscription = EventManager.fromEvent(this, <any>EEngineEvent.COMPONENT_CHANGE)\r\n        //     .subscribe(() => {\r\n        //         self._onComponentChange();\r\n        //     });\r\n\r\n        this.componentManager.init();\r\n        this._entityObjectManager.init();\r\n\r\n        this.afterInitChildren();\r\n\r\n        // ScriptComponentContainer.getInstance().execEntityObjectScriptOnlyOnce(this, \"init\");\r\n\r\n        return this;\r\n    }\r\n\r\n    public dispose() {\r\n        // this.onDispose();\r\n\r\n        if (this.parent) {\r\n            this.parent.removeChild(this);\r\n            this.parent = null;\r\n        }\r\n\r\n        // EventManager.off(this);\r\n\r\n        // this._componentChangeSubscription && this._componentChangeSubscription.dispose();\r\n\r\n        this.componentManager.dispose();\r\n        this._entityObjectManager.dispose();\r\n\r\n        EventManager.off(this);\r\n    }\r\n\r\n    public hasChild(child: EntityObject): boolean {\r\n        return this._entityObjectManager.hasChild(child);\r\n    }\r\n\r\n    public addChild(child: EntityObject): EntityObject {\r\n        this._entityObjectManager.addChild(child);\r\n\r\n        return this;\r\n    }\r\n\r\n    public getChildren() {\r\n        return this._entityObjectManager.getChildren();\r\n    }\r\n\r\n    public removeChild(child: EntityObject): EntityObject {\r\n        this._entityObjectManager.removeChild(child);\r\n\r\n        return this;\r\n    }\r\n\r\n    public forEach(func: (entityObject: EntityObject, index: number) => void) {\r\n        this._entityObjectManager.forEach(func);\r\n\r\n        return this;\r\n    }\r\n\r\n    @cache(function(_class: any) {\r\n        return this._getComponentCache.hasChild(_class.name);\r\n    }, function(_class: any) {\r\n        return this._getComponentCache.getChild(_class.name);\r\n    }, function(result, _class: any) {\r\n        this._getComponentCache.addChild(_class.name, result);\r\n    })\r\n    public getComponent<T>(_class: any): T {\r\n        return this.componentManager.getComponent<T>(_class);\r\n    }\r\n\r\n    public hasComponent(component: Component): boolean;\r\n    public hasComponent(_class: Function): boolean;\r\n\r\n    /*!\r\n     not use @cache,\r\n     here judge return data of \"getChild\", so it don't need to invoke \"hasChild\"\r\n     */\r\n    public hasComponent(...args) {\r\n        var key = this._getHasComponentCacheKey(args[0]),\r\n            result = this._hasComponentCache.getChild(key);\r\n\r\n        if (result !== void 0) {\r\n            return result;\r\n        }\r\n\r\n        result = this.componentManager.hasComponent(args[0]);\r\n\r\n        this._hasComponentCache.addChild(key, result);\r\n\r\n        return result;\r\n    }\r\n\r\n    public addComponent(component: Component, isShareComponent: boolean = false) {\r\n        this.componentManager.addComponent(component, isShareComponent);\r\n\r\n        this.componentDirty = true;\r\n\r\n        return this;\r\n    }\r\n\r\n    public removeComponent(component: Component);\r\n    public removeComponent(_class: Function);\r\n\r\n    public removeComponent(...args) {\r\n        this.componentManager.removeComponent(args[0]);\r\n\r\n        this.componentDirty = true;\r\n\r\n        return this;\r\n    }\r\n\r\n    public forEachComponent(func: (component: Component) => void) {\r\n        this.componentManager.forEachComponent(func);\r\n\r\n        return this;\r\n    }\r\n\r\n    @virtual\r\n    public render(renderer: Renderer, camera: GameObject): void {\r\n        var rendererComponent = null;\r\n\r\n        rendererComponent = this.componentManager.getRendererComponent();\r\n\r\n        if (rendererComponent) {\r\n            rendererComponent.render(renderer, this, camera);\r\n        }\r\n\r\n        this.getRenderList().forEach((child: EntityObject) => {\r\n            child.render(renderer, camera);\r\n        });\r\n    }\r\n\r\n    public update(elapsed: number): void {\r\n        this.forEach((child: EntityObject) => {\r\n            child.update(elapsed);\r\n        });\r\n    }\r\n\r\n    public clearCache() {\r\n        this._hasComponentCache.removeAllChildren();\r\n        this._getComponentCache.removeAllChildren();\r\n    }\r\n\r\n    @virtual\r\n    public getGeometry() {\r\n        return this.componentManager.getGeometry();\r\n    }\r\n\r\n    protected abstract createTransform(): Transform;\r\n\r\n    @virtual\r\n    protected afterInitChildren() {\r\n    }\r\n\r\n    @virtual\r\n    protected getRenderList() {\r\n        return this.getChildren();\r\n    }\r\n\r\n    @ensure(function(key: string) {\r\n        it(`key:${key} be string`, () => {\r\n            expect(JudgeUtils.isString(key)).true;\r\n        });\r\n    })\r\n    private _getHasComponentCacheKey(...args) {\r\n        if (JudgeUtils.isComponenet(args[0])) {\r\n            let component: Component = args[0];\r\n\r\n            return String(component.uid);\r\n        }\r\n        else {\r\n            let _class: any = args[0];\r\n\r\n            return _class.name;\r\n        }\r\n    }\r\n\r\n    private _cloneChildren(result: EntityObject) {\r\n        this.forEach((child: EntityObject) => {\r\n            var resultChild = child.clone();\r\n\r\n            if (resultChild !== null) {\r\n                result.addChild(resultChild);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport type CloneEntityObjectConfigData = {\r\n    cloneChildren?: boolean;\r\n    shareGeometry?: boolean;\r\n    cloneGeometry?: boolean;\r\n}","export enum EEventType {\r\n    MOUSE,\r\n    TOUCH,\r\n    POINT,\r\n    KEYBOARD,\r\n    CUSTOM\r\n}","/*!\n * Bowser - a browser detector\n * https://github.com/ded/bowser\n * MIT License | (c) Dustin Diaz 2015\n */\n\n!function (root, name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(name, definition)\n  else root[name] = definition()\n}(this, 'bowser', function () {\n  /**\n    * See useragents.js for examples of navigator.userAgent\n    */\n\n  var t = true\n\n  function detect(ua) {\n\n    function getFirstMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[1]) || '';\n    }\n\n    function getSecondMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[2]) || '';\n    }\n\n    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n      , likeAndroid = /like android/i.test(ua)\n      , android = !likeAndroid && /android/i.test(ua)\n      , nexusMobile = /nexus\\s*[0-6]\\s*/i.test(ua)\n      , nexusTablet = !nexusMobile && /nexus\\s*[0-9]+/i.test(ua)\n      , chromeos = /CrOS/.test(ua)\n      , silk = /silk/i.test(ua)\n      , sailfish = /sailfish/i.test(ua)\n      , tizen = /tizen/i.test(ua)\n      , webos = /(web|hpw)os/i.test(ua)\n      , windowsphone = /windows phone/i.test(ua)\n      , samsungBrowser = /SamsungBrowser/i.test(ua)\n      , windows = !windowsphone && /windows/i.test(ua)\n      , mac = !iosdevice && !silk && /macintosh/i.test(ua)\n      , linux = !android && !sailfish && !tizen && !webos && /linux/i.test(ua)\n      , edgeVersion = getFirstMatch(/edge\\/(\\d+(\\.\\d+)?)/i)\n      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n      , tablet = /tablet/i.test(ua)\n      , mobile = !tablet && /[^-]mobi/i.test(ua)\n      , xbox = /xbox/i.test(ua)\n      , result\n\n    if (/opera/i.test(ua)) {\n      //  an old Opera\n      result = {\n        name: 'Opera'\n      , opera: t\n      , version: versionIdentifier || getFirstMatch(/(?:opera|opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/opr|opios/i.test(ua)) {\n      // a new Opera\n      result = {\n        name: 'Opera'\n        , opera: t\n        , version: getFirstMatch(/(?:opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/SamsungBrowser/i.test(ua)) {\n      result = {\n        name: 'Samsung Internet for Android'\n        , samsungBrowser: t\n        , version: versionIdentifier || getFirstMatch(/(?:SamsungBrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/coast/i.test(ua)) {\n      result = {\n        name: 'Opera Coast'\n        , coast: t\n        , version: versionIdentifier || getFirstMatch(/(?:coast)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/yabrowser/i.test(ua)) {\n      result = {\n        name: 'Yandex Browser'\n      , yandexbrowser: t\n      , version: versionIdentifier || getFirstMatch(/(?:yabrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/ucbrowser/i.test(ua)) {\n      result = {\n          name: 'UC Browser'\n        , ucbrowser: t\n        , version: getFirstMatch(/(?:ucbrowser)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/mxios/i.test(ua)) {\n      result = {\n        name: 'Maxthon'\n        , maxthon: t\n        , version: getFirstMatch(/(?:mxios)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/epiphany/i.test(ua)) {\n      result = {\n        name: 'Epiphany'\n        , epiphany: t\n        , version: getFirstMatch(/(?:epiphany)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/puffin/i.test(ua)) {\n      result = {\n        name: 'Puffin'\n        , puffin: t\n        , version: getFirstMatch(/(?:puffin)[\\s\\/](\\d+(?:\\.\\d+)?)/i)\n      }\n    }\n    else if (/sleipnir/i.test(ua)) {\n      result = {\n        name: 'Sleipnir'\n        , sleipnir: t\n        , version: getFirstMatch(/(?:sleipnir)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/k-meleon/i.test(ua)) {\n      result = {\n        name: 'K-Meleon'\n        , kMeleon: t\n        , version: getFirstMatch(/(?:k-meleon)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (windowsphone) {\n      result = {\n        name: 'Windows Phone'\n      , windowsphone: t\n      }\n      if (edgeVersion) {\n        result.msedge = t\n        result.version = edgeVersion\n      }\n      else {\n        result.msie = t\n        result.version = getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/msie|trident/i.test(ua)) {\n      result = {\n        name: 'Internet Explorer'\n      , msie: t\n      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (chromeos) {\n      result = {\n        name: 'Chrome'\n      , chromeos: t\n      , chromeBook: t\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/chrome.+? edge/i.test(ua)) {\n      result = {\n        name: 'Microsoft Edge'\n      , msedge: t\n      , version: edgeVersion\n      }\n    }\n    else if (/vivaldi/i.test(ua)) {\n      result = {\n        name: 'Vivaldi'\n        , vivaldi: t\n        , version: getFirstMatch(/vivaldi\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (sailfish) {\n      result = {\n        name: 'Sailfish'\n      , sailfish: t\n      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/seamonkey\\//i.test(ua)) {\n      result = {\n        name: 'SeaMonkey'\n      , seamonkey: t\n      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/firefox|iceweasel|fxios/i.test(ua)) {\n      result = {\n        name: 'Firefox'\n      , firefox: t\n      , version: getFirstMatch(/(?:firefox|iceweasel|fxios)[ \\/](\\d+(\\.\\d+)?)/i)\n      }\n      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n        result.firefoxos = t\n      }\n    }\n    else if (silk) {\n      result =  {\n        name: 'Amazon Silk'\n      , silk: t\n      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/phantom/i.test(ua)) {\n      result = {\n        name: 'PhantomJS'\n      , phantom: t\n      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/slimerjs/i.test(ua)) {\n      result = {\n        name: 'SlimerJS'\n        , slimer: t\n        , version: getFirstMatch(/slimerjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n      result = {\n        name: 'BlackBerry'\n      , blackberry: t\n      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (webos) {\n      result = {\n        name: 'WebOS'\n      , webos: t\n      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n      };\n      /touchpad\\//i.test(ua) && (result.touchpad = t)\n    }\n    else if (/bada/i.test(ua)) {\n      result = {\n        name: 'Bada'\n      , bada: t\n      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n      };\n    }\n    else if (tizen) {\n      result = {\n        name: 'Tizen'\n      , tizen: t\n      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      };\n    }\n    else if (/qupzilla/i.test(ua)) {\n      result = {\n        name: 'QupZilla'\n        , qupzilla: t\n        , version: getFirstMatch(/(?:qupzilla)[\\s\\/](\\d+(?:\\.\\d+)+)/i) || versionIdentifier\n      }\n    }\n    else if (/chromium/i.test(ua)) {\n      result = {\n        name: 'Chromium'\n        , chromium: t\n        , version: getFirstMatch(/(?:chromium)[\\s\\/](\\d+(?:\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/chrome|crios|crmo/i.test(ua)) {\n      result = {\n        name: 'Chrome'\n        , chrome: t\n        , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (android) {\n      result = {\n        name: 'Android'\n        , version: versionIdentifier\n      }\n    }\n    else if (/safari|applewebkit/i.test(ua)) {\n      result = {\n        name: 'Safari'\n      , safari: t\n      }\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if (iosdevice) {\n      result = {\n        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n      }\n      // WTF: version is not part of user agent in web apps\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if(/googlebot/i.test(ua)) {\n      result = {\n        name: 'Googlebot'\n      , googlebot: t\n      , version: getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i) || versionIdentifier\n      }\n    }\n    else {\n      result = {\n        name: getFirstMatch(/^(.*)\\/(.*) /),\n        version: getSecondMatch(/^(.*)\\/(.*) /)\n     };\n   }\n\n    // set webkit or gecko flag for browsers based on these engines\n    if (!result.msedge && /(apple)?webkit/i.test(ua)) {\n      if (/(apple)?webkit\\/537\\.36/i.test(ua)) {\n        result.name = result.name || \"Blink\"\n        result.blink = t\n      } else {\n        result.name = result.name || \"Webkit\"\n        result.webkit = t\n      }\n      if (!result.version && versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    } else if (!result.opera && /gecko\\//i.test(ua)) {\n      result.name = result.name || \"Gecko\"\n      result.gecko = t\n      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n    }\n\n    // set OS flags for platforms that have multiple browsers\n    if (!result.windowsphone && !result.msedge && (android || result.silk)) {\n      result.android = t\n    } else if (!result.windowsphone && !result.msedge && iosdevice) {\n      result[iosdevice] = t\n      result.ios = t\n    } else if (mac) {\n      result.mac = t\n    } else if (xbox) {\n      result.xbox = t\n    } else if (windows) {\n      result.windows = t\n    } else if (linux) {\n      result.linux = t\n    }\n\n    // OS version extraction\n    var osVersion = '';\n    if (result.windowsphone) {\n      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n    } else if (iosdevice) {\n      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (android) {\n      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n    } else if (result.webos) {\n      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.blackberry) {\n      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n    } else if (result.bada) {\n      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.tizen) {\n      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n    }\n    if (osVersion) {\n      result.osversion = osVersion;\n    }\n\n    // device type extraction\n    var osMajorVersion = osVersion.split('.')[0];\n    if (\n         tablet\n      || nexusTablet\n      || iosdevice == 'ipad'\n      || (android && (osMajorVersion == 3 || (osMajorVersion >= 4 && !mobile)))\n      || result.silk\n    ) {\n      result.tablet = t\n    } else if (\n         mobile\n      || iosdevice == 'iphone'\n      || iosdevice == 'ipod'\n      || android\n      || nexusMobile\n      || result.blackberry\n      || result.webos\n      || result.bada\n    ) {\n      result.mobile = t\n    }\n\n    // Graded Browser Support\n    // http://developer.yahoo.com/yui/articles/gbs\n    if (result.msedge ||\n        (result.msie && result.version >= 10) ||\n        (result.yandexbrowser && result.version >= 15) ||\n\t\t    (result.vivaldi && result.version >= 1.0) ||\n        (result.chrome && result.version >= 20) ||\n        (result.samsungBrowser && result.version >= 4) ||\n        (result.firefox && result.version >= 20.0) ||\n        (result.safari && result.version >= 6) ||\n        (result.opera && result.version >= 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n        (result.blackberry && result.version >= 10.1)\n        || (result.chromium && result.version >= 20)\n        ) {\n      result.a = t;\n    }\n    else if ((result.msie && result.version < 10) ||\n        (result.chrome && result.version < 20) ||\n        (result.firefox && result.version < 20.0) ||\n        (result.safari && result.version < 6) ||\n        (result.opera && result.version < 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n        || (result.chromium && result.version < 20)\n        ) {\n      result.c = t\n    } else result.x = t\n\n    return result\n  }\n\n  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent || '' : '')\n\n  bowser.test = function (browserList) {\n    for (var i = 0; i < browserList.length; ++i) {\n      var browserItem = browserList[i];\n      if (typeof browserItem=== 'string') {\n        if (browserItem in bowser) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Get version precisions count\n   *\n   * @example\n   *   getVersionPrecision(\"1.10.3\") // 3\n   *\n   * @param  {string} version\n   * @return {number}\n   */\n  function getVersionPrecision(version) {\n    return version.split(\".\").length;\n  }\n\n  /**\n   * Array::map polyfill\n   *\n   * @param  {Array} arr\n   * @param  {Function} iterator\n   * @return {Array}\n   */\n  function map(arr, iterator) {\n    var result = [], i;\n    if (Array.prototype.map) {\n      return Array.prototype.map.call(arr, iterator);\n    }\n    for (i = 0; i < arr.length; i++) {\n      result.push(iterator(arr[i]));\n    }\n    return result;\n  }\n\n  /**\n   * Calculate browser version weight\n   *\n   * @example\n   *   compareVersions(['1.10.2.1',  '1.8.2.1.90'])    // 1\n   *   compareVersions(['1.010.2.1', '1.09.2.1.90']);  // 1\n   *   compareVersions(['1.10.2.1',  '1.10.2.1']);     // 0\n   *   compareVersions(['1.10.2.1',  '1.0800.2']);     // -1\n   *\n   * @param  {Array<String>} versions versions to compare\n   * @return {Number} comparison result\n   */\n  function compareVersions(versions) {\n    // 1) get common precision for both versions, for example for \"10.0\" and \"9\" it should be 2\n    var precision = Math.max(getVersionPrecision(versions[0]), getVersionPrecision(versions[1]));\n    var chunks = map(versions, function (version) {\n      var delta = precision - getVersionPrecision(version);\n\n      // 2) \"9\" -> \"9.0\" (for precision = 2)\n      version = version + new Array(delta + 1).join(\".0\");\n\n      // 3) \"9.0\" -> [\"000000000\"\", \"000000009\"]\n      return map(version.split(\".\"), function (chunk) {\n        return new Array(20 - chunk.length).join(\"0\") + chunk;\n      }).reverse();\n    });\n\n    // iterate in reverse order by reversed chunks array\n    while (--precision >= 0) {\n      // 4) compare: \"000000009\" > \"000000010\" = false (but \"9\" > \"10\" = true)\n      if (chunks[0][precision] > chunks[1][precision]) {\n        return 1;\n      }\n      else if (chunks[0][precision] === chunks[1][precision]) {\n        if (precision === 0) {\n          // all version chunks are same\n          return 0;\n        }\n      }\n      else {\n        return -1;\n      }\n    }\n  }\n\n  /**\n   * Check if browser is unsupported\n   *\n   * @example\n   *   bowser.isUnsupportedBrowser({\n   *     msie: \"10\",\n   *     firefox: \"23\",\n   *     chrome: \"29\",\n   *     safari: \"5.1\",\n   *     opera: \"16\",\n   *     phantom: \"534\"\n   *   });\n   *\n   * @param  {Object}  minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function isUnsupportedBrowser(minVersions, strictMode, ua) {\n    var _bowser = bowser;\n\n    // make strictMode param optional with ua param usage\n    if (typeof strictMode === 'string') {\n      ua = strictMode;\n      strictMode = void(0);\n    }\n\n    if (strictMode === void(0)) {\n      strictMode = false;\n    }\n    if (ua) {\n      _bowser = detect(ua);\n    }\n\n    var version = \"\" + _bowser.version;\n    for (var browser in minVersions) {\n      if (minVersions.hasOwnProperty(browser)) {\n        if (_bowser[browser]) {\n          if (typeof minVersions[browser] !== 'string') {\n            throw new Error('Browser version in the minVersion map should be a string: ' + browser + ': ' + String(minVersions));\n          }\n\n          // browser version and min supported version.\n          return compareVersions([version, minVersions[browser]]) < 0;\n        }\n      }\n    }\n\n    return strictMode; // not found\n  }\n\n  /**\n   * Check if browser is supported\n   *\n   * @param  {Object} minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function check(minVersions, strictMode, ua) {\n    return !isUnsupportedBrowser(minVersions, strictMode, ua);\n  }\n\n  bowser.isUnsupportedBrowser = isUnsupportedBrowser;\n  bowser.compareVersions = compareVersions;\n  bowser.check = check;\n\n  /*\n   * Set our detect method to the main bowser object so we can\n   * reuse it to test other user agents.\n   * This is needed to implement future tests.\n   */\n  bowser._detect = detect;\n\n  return bowser\n});\n// module.exports.chrome = \"a\";\n// module.exports.firefox = \"a\";\n// module.exports.msie = \"a\";\n// module.exports.version = \"a\";\n// module.exports.mobile = \"a\";\n","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { chrome, firefox } from \"bowser\";\r\n\r\nenum EBrowserIdentifier {\r\n    FALLBACK = <any>\"fallback\",\r\n    FIREFOX = <any>\"firefox\",\r\n    CHROME = <any>\"chrome\"\r\n}\r\n\r\nexport enum EEventName {\r\n    CLICK = <any>\"click\",\r\n    MOUSEOVER = <any>\"mouseover\",\r\n    MOUSEUP = <any>\"mouseup\",\r\n    MOUSEOUT = <any>\"mouseout\",\r\n    MOUSEMOVE = <any>\"mousemove\",\r\n    MOUSEDOWN = <any>\"mousedown\",\r\n    MOUSEWHEEL = <any>`mousewheel|DOMMouseScroll*${EBrowserIdentifier.FIREFOX}`,\r\n    MOUSEDRAG = <any>\"mousedrag\",\r\n\r\n    TOUCHUP = <any>\"touchend\",\r\n    TOUCHMOVE = <any>\"touchmove\",\r\n    TOUCHDOWN = <any>\"touchstart\",\r\n\r\n\r\n    KEYDOWN = <any>\"keydown\",\r\n    KEYUP = <any>\"keyup\",\r\n    KEYPRESS = <any>\"keypress\"\r\n}\r\n\r\nconst EVENTNAME_SPLITTER = '|',\r\n    BROWSER_IDENTIFIER = '*';\r\n\r\n@registerClass(\"EventNameHandler\")\r\nexport class EventNameHandler {\r\n    public static handleEventName(domEventName: EEventName) {\r\n        var eventName: string = <any>domEventName,\r\n            fallbackEventName = null,\r\n            specifyBrowserEventNameArr = [],\r\n            result: string = null;\r\n\r\n        for (let name of eventName.split(EVENTNAME_SPLITTER)) {\r\n\r\n            if (this._isFallbackEventName(name)) {\r\n                fallbackEventName = name;\r\n            }\r\n            else {\r\n                specifyBrowserEventNameArr.push(name);\r\n            }\r\n        }\r\n\r\n        result = this._getSpecifyBrowserEventName(specifyBrowserEventNameArr);\r\n\r\n        return result !== null ? result : fallbackEventName;\r\n    }\r\n\r\n    private static _isFallbackEventName(eventName: string) {\r\n        return eventName.split(BROWSER_IDENTIFIER).length === 1;\r\n    }\r\n\r\n    private static _getSpecifyBrowserEventName(specifyBrowserEventNameArr: Array<string>) {\r\n        var result = null;\r\n\r\n        for (let eventName of specifyBrowserEventNameArr) {\r\n            let [domEventName, browserIdentifier] = eventName.split(BROWSER_IDENTIFIER);\r\n\r\n            switch (<any>browserIdentifier) {\r\n                case EBrowserIdentifier.CHROME:\r\n                    if (chrome) {\r\n                        result = domEventName;\r\n                    }\r\n                    break;\r\n                case EBrowserIdentifier.FIREFOX:\r\n                    if (firefox) {\r\n                        result = domEventName;\r\n                    }\r\n                    break;\r\n                default:\r\n                    //todo judge IE\r\n                    break;\r\n            }\r\n\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { EEventType } from \"./EEventType\";\r\nimport { EEventName } from \"./EventNameHandler\";\r\nimport { EEngineEvent } from \"../EEngineEvent\";\r\n\r\nconst _table = Hash.create<EEventType>();\r\n\r\n//todo not declare \"<any>\"!\r\n_table.addChild(<any>EEventName.CLICK, EEventType.MOUSE);\r\n_table.addChild(<any>EEventName.MOUSEMOVE, EEventType.MOUSE);\r\n_table.addChild(<any>EEventName.MOUSEDOWN, EEventType.MOUSE);\r\n_table.addChild(<any>EEventName.MOUSEDRAG, EEventType.MOUSE);\r\n_table.addChild(<any>EEventName.MOUSEOUT, EEventType.MOUSE);\r\n_table.addChild(<any>EEventName.MOUSEOVER, EEventType.MOUSE);\r\n_table.addChild(<any>EEventName.MOUSEUP, EEventType.MOUSE);\r\n_table.addChild(<any>EEventName.MOUSEWHEEL, EEventType.MOUSE);\r\n\r\n_table.addChild(<any>EEventName.TOUCHMOVE, EEventType.TOUCH);\r\n_table.addChild(<any>EEventName.TOUCHDOWN, EEventType.TOUCH);\r\n_table.addChild(<any>EEventName.TOUCHUP, EEventType.TOUCH);\r\n\r\n_table.addChild(<any>EEngineEvent.POINT_TAP, EEventType.POINT);\r\n_table.addChild(<any>EEngineEvent.POINT_OVER, EEventType.POINT);\r\n_table.addChild(<any>EEngineEvent.POINT_OUT, EEventType.POINT);\r\n_table.addChild(<any>EEngineEvent.POINT_MOVE, EEventType.POINT);\r\n_table.addChild(<any>EEngineEvent.POINT_DOWN, EEventType.POINT);\r\n_table.addChild(<any>EEngineEvent.POINT_UP, EEventType.POINT);\r\n_table.addChild(<any>EEngineEvent.POINT_SCALE, EEventType.POINT);\r\n_table.addChild(<any>EEngineEvent.POINT_DRAG, EEventType.POINT);\r\n\r\n\r\n_table.addChild(<any>EEventName.KEYDOWN, EEventType.KEYBOARD);\r\n_table.addChild(<any>EEventName.KEYPRESS, EEventType.KEYBOARD);\r\n_table.addChild(<any>EEventName.KEYUP, EEventType.KEYBOARD);\r\n\r\n@registerClass(\"EventTable\")\r\nexport class EventTable {\r\n    public static getEventType(eventName: EEventName): EEventType {\r\n        var result = _table.getChild(<any>eventName);\r\n\r\n        if (result === void 0) {\r\n            result = EEventType.CUSTOM;\r\n        }\r\n\r\n        return result;\r\n    }\r\n}","export abstract class EventBinder {\r\n    public abstract on(...args): void;\r\n    public abstract off(...args): void;\r\n}","export abstract class EventHandler {\r\n    public abstract on(...args);\r\n    public abstract off(...args);\r\n    public abstract trigger(...args);\r\n}","import { EventListenerMap } from \"../structure/EventListenerMap\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\nexport abstract class EventRegister {\r\n    protected abstract listenerMap: EventListenerMap;\r\n\r\n    public abstract register(...args): void;\r\n    public abstract remove(...args): any;\r\n\r\n    public getEventRegisterDataList(eventName: EEventName): any;\r\n\r\n    public getEventRegisterDataList(currentTarget: EntityObject, eventName: EEventName): any;\r\n    public getEventRegisterDataList(dom: HTMLElement, eventName: EEventName): any;\r\n\r\n    public getEventRegisterDataList(...args) {\r\n        var result: Collection<EventRegisterData> = this.listenerMap.getChild.apply(this.listenerMap, args);\r\n\r\n        if (!result) {\r\n            return null;\r\n        }\r\n\r\n        return result.sort(function(dataA, dataB) {\r\n            return dataB.priority - dataA.priority;\r\n        }, true);\r\n    }\r\n\r\n    public forEachAll(func: (list: Collection<any>, eventName: EEventName) => void) {\r\n        return this.listenerMap.forEachAll(func);\r\n    }\r\n\r\n    public forEachEventName(func: (list: Collection<EventRegisterData>, eventName: EEventName) => void) {\r\n        this.listenerMap.forEachEventName(func);\r\n    }\r\n\r\n    public clear() {\r\n        return this.listenerMap.clear();\r\n    }\r\n\r\n    public getChild(target: EntityObject);\r\n    public getChild(dom: HTMLElement);\r\n\r\n    public getChild(target: EntityObject, eventName: EEventName);\r\n    public getChild(dom: HTMLElement, eventName: EEventName);\r\n\r\n    public getChild(...args) {\r\n        return this.listenerMap.getChild.apply(\r\n            this.listenerMap,\r\n            Array.prototype.slice.call(arguments, 0)\r\n        );\r\n    }\r\n}\r\n\r\nexport type EventRegisterData = {\r\n    //user's event handler\r\n    originHandler: Function,\r\n    //wraped user's event handler\r\n    handler: Function,\r\n    //dom event handler\r\n    domHandler: Function,\r\n    priority: number\r\n};","import { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\n\r\nexport abstract class EventListenerMap {\r\n    public abstract getChild(...args): Collection<any>;\r\n    public abstract removeChild(...args): any;\r\n    public abstract hasChild(...args): boolean;\r\n    public abstract appendChild(...args): void;\r\n\r\n    public abstract forEachAll(func: (list: Collection<any>, eventName: EEventName) => void): void;\r\n    public abstract forEachEventName(func: (list: Collection<any>, eventName: EEventName) => void): void;\r\n    public abstract clear(): void;\r\n\r\n    protected abstract buildFirstLevelKey(target: EntityObject | HTMLElement): string;\r\n\r\n    protected buildSecondLevelKey(eventName: EEventName): string {\r\n        return <any>eventName;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { EventListenerMap } from \"./EventListenerMap\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { DomEventRegisterData } from \"../binder/DomEventRegister\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { EventRegisterData } from \"../binder/EventRegister\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\n\r\n@registerClass(\"DomEventListenerMap\")\r\nexport class DomEventListenerMap extends EventListenerMap {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _targetListenerMap: Hash<Hash<Collection<DomEventRegisterData>>> = Hash.create<Hash<Collection<DomEventRegisterData>>>();\r\n\r\n    public hasChild(dom: HTMLElement, eventName: EEventName): boolean {\r\n        var list: any = this._targetListenerMap.getChild(this.buildFirstLevelKey(dom));\r\n\r\n        if (!list) {\r\n            return false;\r\n        }\r\n\r\n        list = list.getChild(eventName);\r\n\r\n        return list && list.getCount() > 0;\r\n    }\r\n\r\n    public appendChild(dom: HTMLElement, eventName: EEventName, data: any) {\r\n        var firstLevelKey = this.buildFirstLevelKey(dom);\r\n\r\n        if (!this._targetListenerMap.hasChild(firstLevelKey)) {\r\n            let secondMap = Hash.create<Collection<EventRegisterData>>();\r\n\r\n            secondMap.addChild(this.buildSecondLevelKey(eventName), Collection.create<EventRegisterData>([data]));\r\n\r\n            this._targetListenerMap.addChild(firstLevelKey, secondMap);\r\n\r\n            return;\r\n        }\r\n\r\n        this._targetListenerMap.getChild(firstLevelKey).appendChild(this.buildSecondLevelKey(eventName), data);\r\n    }\r\n\r\n    public forEachAll(func: (list: Collection<DomEventRegisterData>, eventName: EEventName) => void) {\r\n        this._targetListenerMap.forEach((secondMap: Collection<EventRegisterData>) => {\r\n            secondMap.forEach(func);\r\n        });\r\n    }\r\n\r\n    public forEachEventName(func: (list: Collection<DomEventRegisterData>, eventName: EEventName) => void) {\r\n        this.forEachAll(func);\r\n    }\r\n\r\n    public clear() {\r\n        this._targetListenerMap.removeAllChildren();\r\n    }\r\n\r\n    public getChild(dom: HTMLElement): Collection<DomEventRegisterData>;\r\n    public getChild(dom: HTMLElement, eventName: EEventName): Collection<DomEventRegisterData>;\r\n\r\n    public getChild(...args): any {\r\n        if (args.length === 1) {\r\n            let dom = args[0];\r\n\r\n            return this._targetListenerMap.getChild(this.buildFirstLevelKey(dom));\r\n        }\r\n        else if (args.length === 2) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                secondMap = null;\r\n\r\n            secondMap = this._targetListenerMap.getChild(this.buildFirstLevelKey(dom));\r\n\r\n            if (!secondMap) {\r\n                return null;\r\n            }\r\n\r\n            return secondMap.getChild(this.buildSecondLevelKey(eventName));\r\n        }\r\n    }\r\n\r\n    public removeChild(eventName: EEventName): Collection<DomEventOffData>;\r\n    public removeChild(eventName: EEventName, handler: Function): Collection<DomEventOffData>;\r\n    public removeChild(dom: HTMLElement, eventName: EEventName): Collection<DomEventOffData>;\r\n    public removeChild(dom: HTMLElement, eventName: EEventName, handler: Function): Collection<DomEventOffData>;\r\n\r\n    public removeChild(...args) {\r\n        var result: any = null;\r\n\r\n        if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                arr: Array<Collection<DomEventRegisterData>> = [];\r\n\r\n            this._targetListenerMap.forEach((secondMap: Hash<Collection<DomEventRegisterData>>, firstLevelKey: string) => {\r\n                var secondLevelKey = this.buildSecondLevelKey(eventName);\r\n\r\n                if (secondMap.hasChild(secondLevelKey)) {\r\n                    arr.push(secondMap.removeChild(secondLevelKey).getChild(0));\r\n                }\r\n            });\r\n\r\n            let l = Collection.create<DomEventRegisterData>();\r\n\r\n            for (let list of arr) {\r\n                l.addChildren(list);\r\n            }\r\n\r\n            result = this._getEventDataOffDataList(eventName, l);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                arr: Array<Collection<DomEventRegisterData>> = [];\r\n\r\n            this._targetListenerMap.forEach((secondMap: Hash<Collection<DomEventRegisterData>>, firstLevelKey: string) => {\r\n                let list = secondMap.getChild(this.buildSecondLevelKey(eventName));\r\n\r\n                if (list) {\r\n                    arr.push(list.removeChild((data: DomEventRegisterData) => {\r\n                        return data.originHandler === handler\r\n                    }));\r\n                }\r\n            });\r\n\r\n            let l = Collection.create<DomEventRegisterData>();\r\n\r\n            for (let list of arr) {\r\n                l.addChildren(list);\r\n            }\r\n\r\n            result = this._getEventDataOffDataList(eventName, l);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                secondMap = null;\r\n\r\n            secondMap = this._targetListenerMap.getChild(this.buildFirstLevelKey(dom));\r\n\r\n            if (!secondMap) {\r\n                result = Collection.create<DomEventOffData>();\r\n            }\r\n            else {\r\n                result = this._getEventDataOffDataList(eventName, secondMap.removeChild(this.buildSecondLevelKey(eventName)).getChild(0));\r\n            }\r\n        }\r\n        else if (args.length === 3 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                secondMap = null;\r\n\r\n            secondMap = this._targetListenerMap.getChild(this.buildFirstLevelKey(dom));\r\n\r\n            if (!secondMap) {\r\n                result = Collection.create<DomEventOffData>();\r\n            }\r\n            else {\r\n                let list = secondMap.getChild(this.buildSecondLevelKey(eventName));\r\n\r\n                if (!list) {\r\n                    result = Collection.create<DomEventOffData>();\r\n                }\r\n                else {\r\n                    result = this._getEventDataOffDataList(eventName, list.removeChild((val: DomEventRegisterData) => {\r\n                        return val.originHandler === handler;\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    protected buildFirstLevelKey(dom: HTMLElement) {\r\n        if (dom.id) {\r\n            return `${dom.tagName}${dom.id}`;\r\n        }\r\n\r\n        if (dom.nodeName) {\r\n            return `${dom.nodeName}`;\r\n        }\r\n\r\n        return `${dom.tagName}`;\r\n    }\r\n\r\n    private _getEventDataOffDataList(eventName: string, result: Collection<DomEventRegisterData>): any {\r\n        if (!result) {\r\n            return Collection.create<DomEventRegisterData>();\r\n        }\r\n\r\n        return result.map((data: DomEventRegisterData) => {\r\n            return {\r\n                dom: data.dom,\r\n                eventName: eventName,\r\n                domHandler: data.domHandler\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport type DomEventOffData = {\r\n    dom: HTMLElement,\r\n    eventName: EEventName,\r\n    domHandler: Function\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { EventRegister } from \"./EventRegister\";\r\nimport { DomEventListenerMap } from \"../structure/DomEventListenerMap\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\n\r\n@singleton()\r\n@registerClass(\"DomEventRegister\")\r\nexport class DomEventRegister extends EventRegister {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    protected listenerMap: DomEventListenerMap = DomEventListenerMap.create();\r\n\r\n    public register(dom: HTMLElement, eventName: EEventName, eventData: Hash<any>, handler: Function, originHandler: Function, domHandler: Function, priority: number) {\r\n        this.listenerMap.appendChild(dom, eventName, <DomEventRegisterData>{\r\n            dom: dom,\r\n            eventName: eventName,\r\n            eventData: eventData,\r\n            handler: handler,\r\n            originHandler: originHandler,\r\n            domHandler: domHandler,\r\n            priority: priority\r\n        });\r\n    }\r\n\r\n    public remove(eventName: EEventName);\r\n\r\n    public remove(eventName: EEventName, handler: Function);\r\n    public remove(dom: HTMLElement, eventName: EEventName);\r\n\r\n    public remove(dom: HTMLElement, eventName: EEventName, handler: Function);\r\n\r\n\r\n    public remove(...args) {\r\n        var result = null;\r\n\r\n        if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0];\r\n\r\n            result = this.listenerMap.removeChild(eventName);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isFunction(args[1])) {\r\n            let eventName = args[0],\r\n                handler = args[1];\r\n\r\n            result = this.listenerMap.removeChild(eventName, handler);\r\n        }\r\n        else if ((args.length === 2 && JudgeUtils.isDom(args[0])) || args.length === 3) {\r\n            result = this.listenerMap.removeChild.apply(this.listenerMap, args);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public isBinded(dom: HTMLElement, eventName: EEventName) {\r\n        return this.listenerMap.hasChild(dom, eventName);\r\n    }\r\n\r\n    public getDomHandler(dom: HTMLElement, eventName: EEventName) {\r\n        var list: Collection<DomEventRegisterData> = this.getChild(dom, eventName);\r\n\r\n        if (list && list.getCount() > 0) {\r\n            return list.getChild(0).domHandler;\r\n        }\r\n    }\r\n}\r\n\r\nexport type DomEventRegisterData = {\r\n    dom?: HTMLElement,\r\n    target?: EntityObject,\r\n    eventData: Hash<any>,\r\n    //user's event handler\r\n    originHandler: Function,\r\n    //wraped user's event handler\r\n    handler: Function,\r\n    //dom event handler\r\n    domHandler: Function,\r\n    priority: number\r\n};","import { JudgeUtils } from \"./JudgeUtils\";\r\n\r\nexport class EventUtils {\r\n    public static bindEvent(context, func) {\r\n        //var args = Array.prototype.slice.call(arguments, 2),\r\n        //    self = this;\r\n\r\n        return function(event) {\r\n            //return fun.apply(object, [self.wrapEvent(event)].concat(args)); //对事件对象进行包装\r\n            return func.call(context, event);\r\n        }\r\n    }\r\n\r\n    public static addEvent(dom, eventName, handler) {\r\n        if (JudgeUtils.isHostMethod(dom, \"addEventListener\")) {\r\n            dom.addEventListener(eventName, handler, false);\r\n        }\r\n        else if (JudgeUtils.isHostMethod(dom, \"attachEvent\")) {\r\n            dom.attachEvent(\"on\" + eventName, handler);\r\n        }\r\n        else {\r\n            dom[\"on\" + eventName] = handler;\r\n        }\r\n    }\r\n\r\n    public static removeEvent(dom, eventName, handler) {\r\n        if (JudgeUtils.isHostMethod(dom, \"removeEventListener\")) {\r\n            dom.removeEventListener(eventName, handler, false);\r\n        }\r\n        else if (JudgeUtils.isHostMethod(dom, \"detachEvent\")) {\r\n            dom.detachEvent(\"on\" + eventName, handler);\r\n        }\r\n        else {\r\n            dom[\"on\" + eventName] = null;\r\n        }\r\n    }\r\n}","import { EventHandler } from \"./EventHandler\";\r\nimport { EEventName, EventNameHandler } from \"../object/EventNameHandler\";\r\nimport { DomEventRegister, DomEventRegisterData } from \"../binder/DomEventRegister\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { DomEventOffData } from \"../structure/DomEventListenerMap\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { Event } from \"../object/Event\";\r\nimport { IEventData } from \"../interface/IEventData\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { virtual } from \"../../definition/typescript/decorator/virtual\";\r\nimport { root } from \"../../definition/Variable\";\r\nimport { EventUtils } from \"wonder-commonlib/dist/es2015/utils/EventUtils\";\r\n\r\nexport abstract class DomEventHandler extends EventHandler {\r\n    public off(): void;\r\n    public off(eventName: EEventName): void;\r\n\r\n    public off(eventName: EEventName, handler: Function): void;\r\n    public off(dom: HTMLElement, eventName: EEventName): void;\r\n\r\n    public off(dom: HTMLElement, eventName: EEventName, handler: Function): void;\r\n\r\n    public off(...args) {\r\n        var self = this,\r\n            eventName: EEventName = null,\r\n            dom: HTMLElement = null,\r\n            eventRegister = DomEventRegister.getInstance(),\r\n            eventOffDataList: Collection<DomEventOffData> = null;\r\n\r\n        if (args.length === 1) {\r\n            eventName = args[0];\r\n\r\n            dom = this.getDefaultDom();\r\n\r\n            eventOffDataList = eventRegister.remove(eventName);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isDom(args[0])) {\r\n            dom = args[0];\r\n            eventName = args[1];\r\n\r\n            eventOffDataList = eventRegister.remove(dom, eventName);\r\n        }\r\n        else if (args.length === 2) {\r\n            let handler = args[1];\r\n\r\n            eventName = args[0];\r\n            dom = this.getDefaultDom();\r\n\r\n            eventOffDataList = eventRegister.remove(eventName, handler);\r\n        }\r\n        else {\r\n            let handler = args[2];\r\n\r\n            dom = args[0];\r\n            eventName = args[1];\r\n\r\n            eventOffDataList = eventRegister.remove(dom, eventName, handler);\r\n        }\r\n\r\n\r\n        if (eventOffDataList && !eventRegister.isBinded(dom, eventName)) {\r\n            eventOffDataList.forEach((eventOffData: DomEventOffData) => {\r\n                self._unBind(eventOffData.dom, eventOffData.eventName, eventOffData.domHandler);\r\n            })\r\n        }\r\n    }\r\n\r\n    public trigger(event: Event): void;\r\n    public trigger(dom: HTMLElement, event: Event): void;\r\n\r\n    public trigger(...args): void {\r\n        var dom = null,\r\n            event = null,\r\n            eventName = null,\r\n            registerDataList: Collection<DomEventRegisterData> = null;\r\n\r\n        if (args.length === 1) {\r\n            event = args[0];\r\n            dom = this.getDefaultDom();\r\n        }\r\n        else {\r\n            dom = args[0];\r\n            event = args[1];\r\n        }\r\n\r\n        eventName = event.name;\r\n\r\n        registerDataList = DomEventRegister.getInstance().getEventRegisterDataList(dom, eventName);\r\n\r\n        if (registerDataList === null || registerDataList.getCount() === 0) {\r\n            return;\r\n        }\r\n\r\n        registerDataList.forEach((registerData: DomEventRegisterData) => {\r\n            var eventCopy = event.clone();\r\n\r\n            registerData.handler(eventCopy, registerData.eventData);\r\n        });\r\n    }\r\n\r\n    protected abstract triggerDomEvent(dom: HTMLElement, event: IEventData, eventName: EEventName);\r\n    protected abstract addEngineHandler(eventName: EEventName, handler: Function);\r\n    protected abstract getDefaultDom(): HTMLElement;\r\n    protected abstract createEventData(): Hash<any>;\r\n\r\n    @virtual\r\n    protected clearHandler() {\r\n    }\r\n\r\n    protected buildDomHandler(dom: HTMLElement, eventName: EEventName) {\r\n        var self = this,\r\n            context = root;\r\n\r\n        return EventUtils.bindEvent(context, function(event) {\r\n            self.triggerDomEvent(dom, event, eventName);\r\n        });\r\n    }\r\n\r\n    protected handler(dom: HTMLElement, eventName: EEventName, handler: Function, priority: number) {\r\n        var domHandler = null,\r\n            originHandler = handler;\r\n\r\n        handler = this.addEngineHandler(eventName, handler);\r\n\r\n        if (!DomEventRegister.getInstance().isBinded(dom, eventName)) {\r\n            domHandler = this._bind(dom, eventName);\r\n        }\r\n        else {\r\n            domHandler = DomEventRegister.getInstance().getDomHandler(dom, eventName);\r\n        }\r\n\r\n        DomEventRegister.getInstance().register(\r\n            dom,\r\n            eventName,\r\n            this.createEventData(),\r\n            handler,\r\n            originHandler,\r\n            domHandler,\r\n            priority\r\n        );\r\n    }\r\n\r\n    private _bind(dom: HTMLElement, eventName: EEventName) {\r\n        var domHandler = null;\r\n\r\n        domHandler = this.buildDomHandler(dom, eventName);\r\n\r\n        EventUtils.addEvent(\r\n            dom,\r\n            EventNameHandler.handleEventName(eventName),\r\n            domHandler\r\n        );\r\n\r\n        return domHandler;\r\n    }\r\n\r\n    private _unBind(dom, eventName, handler) {\r\n        EventUtils.removeEvent(dom, EventNameHandler.handleEventName(eventName), handler);\r\n    }\r\n}","import { DomEventHandler } from \"./DomEventHandler\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { DomEvent } from \"../object/DomEvent\";\r\nimport { requireCheck, it } from \"../../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { IEventData } from \"../interface/IEventData\";\r\nimport { EventManager } from \"../EventManager\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { MouseEvent } from \"../object/MouseEvent\";\r\nimport { TouchEvent } from \"../object/TouchEvent\";\r\n\r\nexport abstract class PointEventHandler extends DomEventHandler {\r\n    public on(eventName: EEventName, handler: (event: DomEvent) => void, priority: number);\r\n    public on(dom: HTMLElement, eventName: EEventName, handler: (event: DomEvent) => void, priority: number);\r\n\r\n    @requireCheck(function(...args) {\r\n        if (args.length === 4) {\r\n            let dom = args[0];\r\n\r\n            it(\"first param should be HTMLElement\", () => {\r\n                expect(JudgeUtils.isDom(dom)).true;\r\n            });\r\n        }\r\n    })\r\n    public on(...args) {\r\n        var dom: HTMLElement = null,\r\n            eventName = null,\r\n            handler = null,\r\n            priority = null;\r\n\r\n        if (args.length === 3) {\r\n            dom = this.getDefaultDom();\r\n\r\n            eventName = args[0];\r\n            handler = args[1];\r\n            priority = args[2];\r\n        }\r\n        else {\r\n            dom = args[0];\r\n            eventName = args[1];\r\n            handler = args[2];\r\n            priority = args[3];\r\n        }\r\n\r\n        this.handler(dom, eventName, handler, priority);\r\n    }\r\n\r\n    protected abstract createEventObject(dom: HTMLElement, event: IEventData, eventName: EEventName): DomEvent;\r\n\r\n    protected getDefaultDom(): HTMLElement {\r\n        return document.body;\r\n    }\r\n\r\n    protected triggerDomEvent(dom: HTMLElement, event: IEventData, eventName: EEventName) {\r\n        var eventObj = this.createEventObject(dom, event, eventName);\r\n\r\n        EventManager.trigger(dom, eventObj);\r\n    }\r\n\r\n    protected createEventData(): Hash<any> {\r\n        var eventData = Hash.create<any>();\r\n\r\n        eventData.addChild(\"lastX\", null);\r\n        eventData.addChild(\"lastY\", null);\r\n\r\n        return eventData;\r\n    }\r\n\r\n    protected handleMove(handler: (event: MouseEvent | TouchEvent) => void) {\r\n        var self = this;\r\n\r\n        return (event: MouseEvent | TouchEvent, eventData: Hash<any>) => {\r\n            self._copyEventDataToEventObject(event, eventData);\r\n\r\n            handler(event);\r\n\r\n            self._saveLocation(event, eventData);\r\n        };\r\n    }\r\n\r\n    private _copyEventDataToEventObject(event: MouseEvent | TouchEvent, eventData: Hash<any>) {\r\n        event.lastX = eventData.getChild(\"lastX\");\r\n        event.lastY = eventData.getChild(\"lastY\");\r\n    }\r\n\r\n    private _saveLocation(event: MouseEvent | TouchEvent, eventData: Hash<any>) {\r\n        var location = event.location;\r\n\r\n        eventData.setValue(\"lastX\", location.x);\r\n        eventData.setValue(\"lastY\", location.y);\r\n    }\r\n}","import { EEventName } from \"./EventNameHandler\";\r\nimport { EEventType } from \"./EEventType\";\r\nimport { EEngineEvent } from \"../EEngineEvent\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { EEventPhase } from \"./EEventPhase\";\r\n\r\nexport abstract class Event {\r\n    protected constructor(eventName: EEventName) {\r\n        this.name = eventName;\r\n    }\r\n\r\n    public readonly abstract type: EEventType;\r\n\r\n    public name: string | EEventName | EEngineEvent = null;\r\n    //target is the actual target that received the event.\r\n    public target: HTMLElement | EntityObject;\r\n    //currentTarget is always the object listening for the event\r\n    public currentTarget: HTMLElement | EntityObject = null;\r\n    public isStopPropagation: boolean = false;\r\n    public phase: EEventPhase = null;\r\n\r\n    public abstract clone();\r\n\r\n    public stopPropagation() {\r\n        this.isStopPropagation = true;\r\n    }\r\n\r\n    protected copyMember(destination: Event, source: Event, memberArr: [any]) {\r\n        memberArr.forEach((member) => {\r\n            destination[member] = source[member];\r\n        });\r\n\r\n        return destination;\r\n    }\r\n}","import { Event } from \"./Event\";\r\nimport { EEventName } from \"./EventNameHandler\";\r\nimport { root } from \"../../definition/Variable\";\r\nimport { msie, version } from \"bowser\";\r\nimport { CustomEvent } from \"./CustomEvent\";\r\n\r\nexport abstract class DomEvent extends Event {\r\n    constructor(event: any, eventName: EEventName) {\r\n        super(eventName);\r\n\r\n        this.event = event;\r\n    }\r\n\r\n    private _event: any = null;\r\n    get event() {\r\n        return this._event;\r\n    }\r\n    set event(event: any) {\r\n        this._event = event || root.event;\r\n    }\r\n\r\n    public preventDefault() {\r\n        var e = this._event;\r\n\r\n        if (msie && Number(version) <= 8) {\r\n            e.returnValue = false;\r\n        }\r\n        else {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    public getDataFromCustomEvent(event: CustomEvent) {\r\n        this.target = event.target;\r\n        this.currentTarget = event.currentTarget;\r\n        this.isStopPropagation = event.isStopPropagation;\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n@registerClass(\"Point\")\r\nexport class Point {\r\n    public x: number = null;\r\n    public y: number = null;\r\n\r\n    constructor(x: number = null, y: number = null) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    public static create(x: number = null, y: number = null) {\r\n        var obj = new this(x, y);\r\n\r\n        return obj;\r\n    }\r\n}","export enum EMouseButton {\r\n    LEFT,\r\n    RIGHT,\r\n    CENTER\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { DomEvent } from \"./DomEvent\";\r\nimport { IMouseEventData } from \"../interface/IEventData\";\r\nimport { EEventName } from \"./EventNameHandler\";\r\nimport { Point } from \"../../structure/Point\";\r\nimport { msie, mobile } from \"bowser\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\nimport { EMouseButton } from \"./EMouseButton\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { EEventType } from \"./EEventType\";\r\n\r\ndeclare var document: any;\r\n\r\n@registerClass(\"MouseEvent\")\r\nexport class MouseEvent extends DomEvent {\r\n    public static create(event: IMouseEventData, eventName: EEventName) {\r\n        var obj = new this(event, eventName);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public event: IMouseEventData;\r\n\r\n    private _location: Point = null;\r\n    get location(): Point {\r\n        var point: Point = null,\r\n            e = this.event;\r\n\r\n        if (this._location) {\r\n            return this._location;\r\n        }\r\n\r\n        point = Point.create();\r\n\r\n        if (msie) {\r\n            point.x = e.clientX + document.body.scrollLeft || document.documentElement.scrollLeft;\r\n            point.y = e.clientY + document.body.scrollTop || document.documentElement.scrollTop;\r\n        }\r\n        else {\r\n            point.x = e.pageX;\r\n            point.y = e.pageY;\r\n        }\r\n\r\n        return point;\r\n    }\r\n    set location(point: Point) {\r\n        this._location = point;\r\n    }\r\n\r\n\r\n    private _locationInView: Point = null;\r\n    get locationInView(): Point {\r\n        var point: Point = null,\r\n            viewOffset: any = null;\r\n\r\n        if (this._locationInView) {\r\n            return this._locationInView;\r\n        }\r\n\r\n        point = this.location;\r\n\r\n\r\n        viewOffset = DeviceManager.getInstance().view.offset;\r\n\r\n        return Point.create(point.x - viewOffset.x, point.y - viewOffset.y);\r\n    }\r\n    set locationInView(locationInView: Point) {\r\n        this._locationInView = locationInView;\r\n    }\r\n\r\n    private _button: number = null;\r\n    get button() {\r\n        var e = this.event,\r\n            mouseButton: number = null;\r\n\r\n        if (mobile) {\r\n            return null;\r\n        }\r\n\r\n        if (this._button !== null) {\r\n            return this._button;\r\n        }\r\n\r\n        if (msie) {\r\n            switch (e.button) {\r\n                case 1:\r\n                    mouseButton = EMouseButton.LEFT;\r\n                    break;\r\n                case 4:\r\n                    mouseButton = EMouseButton.RIGHT;\r\n                    break;\r\n                case 2:\r\n                    mouseButton = EMouseButton.CENTER;\r\n                    break;\r\n                default:\r\n                    Log.error(true, Log.info.FUNC_NOT_SUPPORT(\"multi mouse button\"));\r\n                    break;\r\n            }\r\n        }\r\n        else {\r\n            switch (e.button) {\r\n                case 0:\r\n                    mouseButton = EMouseButton.LEFT;\r\n                    break;\r\n                case 1:\r\n                    mouseButton = EMouseButton.RIGHT;\r\n                    break;\r\n                case 2:\r\n                    mouseButton = EMouseButton.CENTER;\r\n                    break;\r\n                default:\r\n                    Log.error(true, Log.info.FUNC_NOT_SUPPORT(\"multi mouse button\"));\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return mouseButton;\r\n    }\r\n    set button(button: number) {\r\n        this._button = button;\r\n    }\r\n\r\n    get wheel() {\r\n        /*!\r\n         FF uses 'detail' and returns a value in 'no. of lines' to scroll\r\n         WebKit and Opera use 'wheelDelta', WebKit goes in multiples of 120 per wheel notch\r\n         */\r\n        var e = this.event;\r\n\r\n        if (mobile) {\r\n            return null;\r\n        }\r\n\r\n        if (e.detail) {\r\n            return -1 * e.detail;\r\n        }\r\n\r\n        if (e.wheelDelta) {\r\n            return e.wheelDelta / 120;\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    get movementDelta() {\r\n        var e = this.event,\r\n            dx = null,\r\n            dy = null;\r\n\r\n        if (this._isPointerLocked()) {\r\n            dx = e.movementX || e.webkitMovementX || e.mozMovementX || 0;\r\n            dy = e.movementY || e.webkitMovementY || e.mozMovementY || 0;\r\n        }\r\n        else {\r\n            let location = this.location,\r\n                lastX = this.lastX,\r\n                lastY = this.lastY;\r\n\r\n            if (lastX === null && lastY === null) {\r\n                dx = 0;\r\n                dy = 0;\r\n            }\r\n            else {\r\n                dx = location.x - lastX;\r\n                dy = location.y - lastY;\r\n            }\r\n        }\r\n\r\n        return {\r\n            x: dx,\r\n            y: dy\r\n        }\r\n    }\r\n\r\n    public readonly type: EEventType = EEventType.MOUSE;\r\n\r\n    public lastX: number = null;\r\n    public lastY: number = null;\r\n\r\n    public clone(): MouseEvent {\r\n        var eventObj = MouseEvent.create(this.event, <EEventName>this.name);\r\n\r\n        return <MouseEvent>this.copyMember(eventObj, this, [\"target\", \"currentTarget\", \"isStopPropagation\", \"phase\", \"lastX\", \"lastY\"]);\r\n    }\r\n\r\n    private _isPointerLocked() {\r\n        return !!(document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement);\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { PointEventHandler } from \"./PointEventHandler\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { MouseEvent } from \"../object/MouseEvent\";\r\nimport { IMouseEventData } from \"../interface/IEventData\";\r\nimport { root } from \"../../definition/Variable\";\r\n\r\n@singleton()\r\n@registerClass(\"MouseEventHandler\")\r\nexport class MouseEventHandler extends PointEventHandler {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    protected addEngineHandler(eventName: EEventName, handler: (event: MouseEvent) => void) {\r\n        var resultHandler = null;\r\n\r\n        switch (eventName) {\r\n            case EEventName.MOUSEMOVE:\r\n                resultHandler = this.handleMove(handler);\r\n                break;\r\n            default:\r\n                resultHandler = handler;\r\n                break;\r\n        }\r\n\r\n        return resultHandler;\r\n    }\r\n\r\n    protected createEventObject(dom: HTMLElement, event: IMouseEventData, eventName: EEventName) {\r\n        var obj = MouseEvent.create(event ? event : root.event, eventName);\r\n\r\n        obj.target = dom;\r\n\r\n        return obj;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { DomEvent } from \"./DomEvent\";\r\nimport { ITouchEventData, ITouchData } from \"../interface/IEventData\";\r\nimport { EEventName } from \"./EventNameHandler\";\r\nimport { Point } from \"../../structure/Point\";\r\nimport { ensureGetter, it } from \"../../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\nimport { EEventType } from \"./EEventType\";\r\n\r\n@registerClass(\"TouchEvent\")\r\nexport class TouchEvent extends DomEvent {\r\n    public static create(event: ITouchEventData, eventName: EEventName) {\r\n        var obj = new this(event, eventName);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public event: ITouchEventData;\r\n\r\n    private _location: Point = null;\r\n    get location(): Point {\r\n        var point: Point = null;\r\n\r\n        if (this._location) {\r\n            return this._location;\r\n        }\r\n\r\n        let touchData = this.touchData;\r\n\r\n        point = Point.create();\r\n\r\n        point.x = touchData.pageX;\r\n        point.y = touchData.pageY;\r\n\r\n        return point;\r\n    }\r\n    set location(point: Point) {\r\n        this._location = point;\r\n    }\r\n\r\n    @ensureGetter(function(touchData: ITouchData) {\r\n        it(\"should exist touch data\", () => {\r\n            expect(touchData).exist;\r\n        }, this);\r\n    })\r\n    get touchData(): ITouchData {\r\n        var touches = this.event.changedTouches;\r\n\r\n        return touches[0];\r\n    }\r\n\r\n    private _locationInView: Point = null;\r\n    get locationInView(): Point {\r\n        var point: Point = null,\r\n            viewOffset: any = null;\r\n\r\n        if (this._locationInView) {\r\n            return this._locationInView;\r\n        }\r\n\r\n        point = this.location;\r\n\r\n\r\n        viewOffset = DeviceManager.getInstance().view.offset;\r\n\r\n        return Point.create(point.x - viewOffset.x, point.y - viewOffset.y);\r\n    }\r\n    set locationInView(locationInView: Point) {\r\n        this._locationInView = locationInView;\r\n    }\r\n\r\n    get movementDelta() {\r\n        var dx = null,\r\n            dy = null,\r\n            location = this.location,\r\n            lastX = this.lastX,\r\n            lastY = this.lastY;\r\n\r\n        if (lastX === null && lastY === null) {\r\n            dx = 0;\r\n            dy = 0;\r\n        }\r\n        else {\r\n            dx = location.x - lastX;\r\n            dy = location.y - lastY;\r\n        }\r\n\r\n        return {\r\n            x: dx,\r\n            y: dy\r\n        }\r\n    }\r\n\r\n    public readonly type: EEventType = EEventType.TOUCH;\r\n\r\n    public lastX: number = null;\r\n    public lastY: number = null;\r\n\r\n    public clone(): TouchEvent {\r\n        var eventObj = TouchEvent.create(this.event, <EEventName>this.name);\r\n\r\n        return <TouchEvent>this.copyMember(eventObj, this, [\"target\", \"currentTarget\", \"isStopPropagation\", \"phase\", \"lastX\", \"lastY\"]);\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { PointEventHandler } from \"./PointEventHandler\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { TouchEvent } from \"../object/TouchEvent\";\r\nimport { ITouchEventData } from \"../interface/IEventData\";\r\nimport { root } from \"../../definition/Variable\";\r\n\r\n@singleton()\r\n@registerClass(\"TouchEventHandler\")\r\nexport class TouchEventHandler extends PointEventHandler {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    protected addEngineHandler(eventName: EEventName, handler: (event: TouchEvent) => void) {\r\n        var resultHandler = null;\r\n\r\n        switch (eventName) {\r\n            case EEventName.TOUCHMOVE:\r\n                resultHandler = this.handleMove(handler);\r\n                break;\r\n            default:\r\n                resultHandler = handler;\r\n                break;\r\n        }\r\n\r\n        return resultHandler;\r\n    }\r\n\r\n    protected createEventObject(dom: HTMLElement, event: ITouchEventData, eventName: EEventName) {\r\n        var obj = TouchEvent.create(event ? event : root.event, eventName);\r\n\r\n        obj.target = dom;\r\n\r\n        return obj;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { DomEvent } from \"./DomEvent\";\r\nimport { EEventName } from \"./EventNameHandler\";\r\nimport { IKeyboardEventData } from \"../interface/IEventData\";\r\nimport { EEventType } from \"./EEventType\";\r\n\r\nconst SPECIAL_KEY_MAP = {\r\n    8: \"backspace\",\r\n    9: \"tab\",\r\n    10: \"return\",\r\n    13: \"return\",\r\n    16: \"shift\",\r\n    17: \"ctrl\",\r\n    18: \"alt\",\r\n    19: \"pause\",\r\n    20: \"capslock\",\r\n    27: \"esc\",\r\n    32: \"space\",\r\n    33: \"pageup\",\r\n    34: \"pagedown\",\r\n    35: \"end\",\r\n    36: \"home\",\r\n    37: \"left\",\r\n    38: \"up\",\r\n    39: \"right\",\r\n    40: \"down\",\r\n    45: \"insert\",\r\n    46: \"del\",\r\n    59: \";\",\r\n    61: \"=\",\r\n    65: \"a\",\r\n    66: \"b\",\r\n    67: \"c\",\r\n    68: \"d\",\r\n    69: \"e\",\r\n    70: \"f\",\r\n    71: \"g\",\r\n    72: \"h\",\r\n    73: \"i\",\r\n    74: \"j\",\r\n    75: \"k\",\r\n    76: \"l\",\r\n    77: \"m\",\r\n    78: \"n\",\r\n    79: \"o\",\r\n    80: \"p\",\r\n    81: \"q\",\r\n    82: \"r\",\r\n    83: \"s\",\r\n    84: \"t\",\r\n    85: \"u\",\r\n    86: \"v\",\r\n    87: \"w\",\r\n    88: \"x\",\r\n    89: \"y\",\r\n    90: \"z\",\r\n    96: \"0\",\r\n    97: \"1\",\r\n    98: \"2\",\r\n    99: \"3\",\r\n    100: \"4\",\r\n    101: \"5\",\r\n    102: \"6\",\r\n    103: \"7\",\r\n    104: \"8\",\r\n    105: \"9\",\r\n    106: \"*\",\r\n    107: \"+\",\r\n    109: \"-\",\r\n    110: \".\",\r\n    111: \"/\",\r\n    112: \"f1\",\r\n    113: \"f2\",\r\n    114: \"f3\",\r\n    115: \"f4\",\r\n    116: \"f5\",\r\n    117: \"f6\",\r\n    118: \"f7\",\r\n    119: \"f8\",\r\n    120: \"f9\",\r\n    121: \"f10\",\r\n    122: \"f11\",\r\n    123: \"f12\",\r\n    144: \"numlock\",\r\n    145: \"scroll\",\r\n    173: \"-\",\r\n    186: \";\",\r\n    187: \"=\",\r\n    188: \",\",\r\n    189: \"-\",\r\n    190: \".\",\r\n    191: \"/\",\r\n    192: \"`\",\r\n    219: \"[\",\r\n    220: \"\\\\\",\r\n    221: \"]\",\r\n    222: \"'\"\r\n},\r\n    SHIFT_KEY_MAP = {\r\n        \"`\": \"~\",\r\n        \"1\": \"!\",\r\n        \"2\": \"@\",\r\n        \"3\": \"#\",\r\n        \"4\": \"$\",\r\n        \"5\": \"%\",\r\n        \"6\": \"^\",\r\n        \"7\": \"&\",\r\n        \"8\": \"*\",\r\n        \"9\": \"(\",\r\n        \"0\": \")\",\r\n        \"-\": \"_\",\r\n        \"=\": \"+\",\r\n        \";\": \": \",\r\n        \"'\": \"\\\"\",\r\n        \",\": \"<\",\r\n        \".\": \">\",\r\n        \"/\": \"?\",\r\n        \"\\\\\": \"|\"\r\n    };\r\n\r\n@registerClass(\"KeyboardEvent\")\r\nexport class KeyboardEvent extends DomEvent {\r\n    public static create(event: any, eventName: EEventName) {\r\n        var obj = new this(event, eventName);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public event: IKeyboardEventData;\r\n\r\n    get ctrlKey() {\r\n        return this.event.ctrlKey;\r\n    }\r\n\r\n    get altKey() {\r\n        return this.event.altKey;\r\n    }\r\n\r\n    get shiftKey() {\r\n        return this.event.shiftKey;\r\n    }\r\n\r\n    get metaKey() {\r\n        //return this.event.metaKey && !this.ctrlKey;\r\n        return this.event.metaKey;\r\n    }\r\n\r\n    get keyCode() {\r\n        return this.event.keyCode;\r\n    }\r\n\r\n    get key() {\r\n        var key = SPECIAL_KEY_MAP[this.keyCode],\r\n            char = null;\r\n\r\n        if (!key) {\r\n            char = String.fromCharCode(this.keyCode).toLowerCase();\r\n\r\n            if (this.shiftKey) {\r\n                return SHIFT_KEY_MAP[char];\r\n            }\r\n\r\n            return char;\r\n        }\r\n\r\n        return key;\r\n    }\r\n\r\n    public readonly type: EEventType = EEventType.KEYBOARD;\r\n\r\n    public keyState: any = null;\r\n\r\n    public clone(): KeyboardEvent {\r\n        var eventObj = KeyboardEvent.create(this.event, <EEventName>this.name);\r\n\r\n        return <KeyboardEvent>this.copyMember(eventObj, this, [\"target\", \"currentTarget\", \"isStopPropagation\", \"phase\"]);\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { DomEventHandler } from \"./DomEventHandler\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { KeyboardEvent } from \"../object/KeyboardEvent\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { IKeyboardEventData } from \"../interface/IEventData\";\r\nimport { EventManager } from \"../EventManager\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { root } from \"../../definition/Variable\";\r\n\r\ndeclare var document: any;\r\n\r\n//todo bind on EntityObject which has the focus\r\n@singleton()\r\n@registerClass(\"KeyboardEventHandler\")\r\nexport class KeyboardEventHandler extends DomEventHandler {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    //public keyState:any = {};\r\n\r\n    public on(eventName: EEventName, handler: (event: KeyboardEvent) => void, priority: number);\r\n    public on(dom: HTMLElement, eventName: EEventName, handler: (event: KeyboardEvent) => void, priority: number);\r\n\r\n    public on(...args) {\r\n        var eventName = null,\r\n            handler = null,\r\n            priority = null;\r\n\r\n        if (args.length === 3) {\r\n            eventName = args[0];\r\n            handler = args[1];\r\n            priority = args[2];\r\n        }\r\n        else {\r\n            Log.warn(\"keyboard event can only bind on document.body\");\r\n\r\n            eventName = args[1];\r\n            handler = args[2];\r\n            priority = args[3];\r\n        }\r\n\r\n        this.handler(this.getDefaultDom(), eventName, handler, priority);\r\n    }\r\n\r\n    protected triggerDomEvent(dom: HTMLElement, event: IKeyboardEventData, eventName: EEventName) {\r\n        var eventObj = this._createEventObject(dom, event, eventName);\r\n\r\n        EventManager.trigger(dom, eventObj);\r\n    }\r\n\r\n    protected getDefaultDom(): HTMLElement {\r\n        return document.body;\r\n    }\r\n\r\n    protected addEngineHandler(eventName: EEventName, handler: (event: KeyboardEvent) => void) {\r\n        var resultHandler = null;\r\n\r\n        switch (eventName) {\r\n            case EEventName.KEYDOWN:\r\n                resultHandler = this._handleKeyDown(handler);\r\n                break;\r\n            case EEventName.KEYUP:\r\n                resultHandler = this._handleKeyUp(handler);\r\n                break;\r\n            default:\r\n                resultHandler = handler;\r\n                break;\r\n        }\r\n\r\n        return resultHandler;\r\n    }\r\n\r\n    protected createEventData(): Hash<any> {\r\n        var eventData = Hash.create<any>();\r\n\r\n        eventData.addChild(\"keyState\", {});\r\n\r\n        return eventData;\r\n    }\r\n\r\n    private _handleKeyDown(handler: (event: KeyboardEvent) => void) {\r\n        var self = this;\r\n\r\n        return (event: KeyboardEvent, eventData: Hash<any>) => {\r\n            var keyState: any = eventData.getChild(\"keyState\");\r\n\r\n            self._setKeyStateAllFalse(keyState);\r\n            keyState[event.key] = true;\r\n\r\n            self._copyEventDataToEventObject(event, eventData);\r\n\r\n            handler(event);\r\n        };\r\n    }\r\n\r\n    private _handleKeyUp(handler: (event: KeyboardEvent) => void) {\r\n        var self = this;\r\n\r\n        return (event: KeyboardEvent, eventData: Hash<any>) => {\r\n            self._setKeyStateAllFalse(eventData.getChild(\"keyState\"));\r\n\r\n            self._copyEventDataToEventObject(event, eventData);\r\n\r\n            handler(event);\r\n        };\r\n    }\r\n\r\n    private _copyEventDataToEventObject(event: KeyboardEvent, eventData: Hash<any>) {\r\n        event.keyState = eventData.getChild(\"keyState\");\r\n    }\r\n\r\n    private _setKeyStateAllFalse(keyState: any) {\r\n        for (let i in keyState) {\r\n            if (keyState.hasOwnProperty(i)) {\r\n                keyState[i] = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _createEventObject(dom: HTMLElement, event: any, eventName: EEventName) {\r\n        var obj = KeyboardEvent.create(event ? event : root.event, eventName);\r\n\r\n        obj.target = dom;\r\n\r\n        return obj;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { EventListenerMap } from \"./EventListenerMap\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { CustomEventRegisterData } from \"../binder/CustomEventRegister\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\n\r\n@registerClass(\"CustomEventListenerMap\")\r\nexport class CustomEventListenerMap extends EventListenerMap {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _globalListenerMap: Hash<Collection<CustomEventRegisterData>> = Hash.create<Collection<CustomEventRegisterData>>();\r\n    private _targetRecordMap: Hash<EntityObject> = Hash.create<EntityObject>();\r\n\r\n    public hasChild(target: EntityObject) {\r\n        return target.customEventMap.getCount() > 0;\r\n    }\r\n\r\n    public appendChild(eventName: EEventName, data: any);\r\n    public appendChild(target: EntityObject, eventName: EEventName, data: any);\r\n\r\n    public appendChild(...args) {\r\n        if (args.length === 2) {\r\n            let eventName: EEventName = args[0],\r\n                data: any = args[1];\r\n\r\n            this._globalListenerMap.appendChild(<any>eventName, data);\r\n        }\r\n        else {\r\n            let target: EntityObject = args[0],\r\n                eventName: EEventName = args[1],\r\n                data: any = args[2];\r\n\r\n            this._targetRecordMap.addChild(this.buildFirstLevelKey(target), target);\r\n\r\n            target.customEventMap.appendChild(this.buildSecondLevelKey(eventName), data);\r\n        }\r\n    }\r\n\r\n    public forEachAll(func: (list: Collection<CustomEventRegisterData>, eventName: EEventName) => void) {\r\n        this._globalListenerMap.forEach(func);\r\n\r\n        this._targetRecordMap.forEach((target: EntityObject) => {\r\n            target.customEventMap.forEach(func);\r\n        });\r\n    }\r\n\r\n    public forEachEventName(func: (list: Collection<CustomEventRegisterData>, eventName: EEventName) => void) {\r\n        this._globalListenerMap.forEach(func);\r\n    }\r\n\r\n    public clear() {\r\n        this._globalListenerMap.removeAllChildren();\r\n\r\n        this._targetRecordMap.forEach((target: EntityObject) => {\r\n            target.customEventMap.removeAllChildren();\r\n        });\r\n        this._targetRecordMap.removeAllChildren();\r\n    }\r\n\r\n    public getChild(eventName: EEventName): Collection<CustomEventRegisterData>;\r\n    public getChild(target: EntityObject): Collection<CustomEventRegisterData>;\r\n    public getChild(target: EntityObject, eventName: EEventName): Collection<CustomEventRegisterData>;\r\n\r\n    public getChild(...args): any {\r\n        if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0];\r\n\r\n            return this._globalListenerMap.getChild(eventName);\r\n        }\r\n        else if (args.length === 1 && args[0] instanceof EntityObject) {\r\n            let target = args[0];\r\n\r\n            return target.customEventMap;\r\n        }\r\n        else if (args.length === 2) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                secondMap = null;\r\n\r\n            secondMap = target.customEventMap;\r\n\r\n            if (!secondMap) {\r\n                return null;\r\n            }\r\n\r\n            return secondMap.getChild(this.buildSecondLevelKey(eventName));\r\n        }\r\n    }\r\n\r\n    public removeChild(eventName: EEventName): void;\r\n    public removeChild(target: EntityObject): void;\r\n\r\n    public removeChild(eventName: EEventName, handler: Function): void;\r\n    public removeChild(uid: number, eventName: EEventName): void;\r\n    public removeChild(target: EntityObject, eventName: EEventName): void;\r\n\r\n    public removeChild(target: EntityObject, eventName: EEventName, handler: Function): void;\r\n\r\n\r\n    public removeChild(...args): void {\r\n        if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0];\r\n\r\n            this._globalListenerMap.removeChild(eventName);\r\n        }\r\n        else if (args.length === 1 && args[0] instanceof EntityObject) {\r\n            let target = args[0];\r\n\r\n            target.customEventMap.removeAllChildren();\r\n            this._targetRecordMap.removeChild(this.buildFirstLevelKey(target));\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                list = null;\r\n\r\n            list = this._globalListenerMap.getChild(eventName);\r\n\r\n            if (!!list) {\r\n                list.removeChild((val: CustomEventRegisterData) => {\r\n                    return val.originHandler === handler;\r\n                });\r\n\r\n                if (list.getCount() === 0) {\r\n                    this._globalListenerMap.removeChild(eventName);\r\n                }\r\n            }\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isNumber(args[0])) {\r\n            let uid = args[0],\r\n                eventName = args[1],\r\n                secondMap = null;\r\n\r\n            secondMap = <any>(this._targetRecordMap.getChild(this.buildFirstLevelKey(uid)));\r\n\r\n            if (!!secondMap) {\r\n                secondMap.removeChild(this.buildSecondLevelKey(eventName));\r\n            }\r\n        }\r\n        else if (args.length === 2 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                secondMap = null;\r\n\r\n            secondMap = target.customEventMap;\r\n\r\n            if (!!secondMap) {\r\n                secondMap.removeChild(this.buildSecondLevelKey(eventName));\r\n            }\r\n        }\r\n        else if (args.length === 3 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                secondMap = null;\r\n\r\n            secondMap = target.customEventMap;\r\n\r\n            if (!!secondMap) {\r\n                let secondList = secondMap.getChild(eventName);\r\n\r\n                if (!!secondList) {\r\n                    secondList.removeChild((val: CustomEventRegisterData) => {\r\n                        return val.originHandler === handler;\r\n                    });\r\n\r\n                    if (secondList.getCount() === 0) {\r\n                        secondMap.removeChild(eventName);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected buildFirstLevelKey(target: EntityObject);\r\n    protected buildFirstLevelKey(uid: number);\r\n\r\n    protected buildFirstLevelKey(...args) {\r\n        var v = args[0],\r\n            uid = v.uid;\r\n\r\n        if (uid) {\r\n            return String(uid);\r\n        }\r\n\r\n        return v;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { EventRegister } from \"./EventRegister\";\r\nimport { CustomEventListenerMap } from \"../structure/CustomEventListenerMap\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\n\r\n@singleton()\r\n@registerClass(\"CustomEventRegister\")\r\nexport class CustomEventRegister extends EventRegister {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    protected listenerMap: CustomEventListenerMap = CustomEventListenerMap.create();\r\n\r\n    public register(eventName: EEventName, handler: Function, originHandler: Function, domHandler: Function, priority: number);\r\n    public register(target: EntityObject, eventName: EEventName, handler: Function, originHandler: Function, domHandler: Function, priority: number);\r\n\r\n    public register(...args) {\r\n        if (args.length === 5) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                originHandler = args[2],\r\n                domHandler = args[3],\r\n                priority = args[4];\r\n\r\n            this.listenerMap.appendChild(eventName, <CustomEventRegisterData>{\r\n                target: null,\r\n                eventName: eventName,\r\n                handler: handler,\r\n                originHandler: originHandler,\r\n                domHandler: domHandler,\r\n                priority: priority\r\n            });\r\n        }\r\n        else {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                originHandler = args[3],\r\n                domHandler = args[4],\r\n                priority = args[5];\r\n\r\n            this.listenerMap.appendChild(target, eventName, <CustomEventRegisterData>{\r\n                target: target,\r\n                eventName: eventName,\r\n                handler: handler,\r\n                originHandler: originHandler,\r\n                domHandler: domHandler,\r\n                priority: priority\r\n            });\r\n        }\r\n    }\r\n\r\n    public remove(eventName: EEventName);\r\n    public remove(target: EntityObject);\r\n\r\n    public remove(eventName: EEventName, handler: Function);\r\n    public remove(uid: number, eventName: EEventName);\r\n    public remove(target: EntityObject, eventName: EEventName);\r\n\r\n    public remove(target: EntityObject, eventName: EEventName, handler: Function);\r\n\r\n\r\n    public remove(...args) {\r\n        var target = args[0];\r\n\r\n        if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0];\r\n\r\n            this.listenerMap.removeChild(eventName);\r\n        }\r\n        else if (args.length === 1 && args[0] instanceof EntityObject) {\r\n            this.listenerMap.removeChild(target);\r\n\r\n            this._handleAfterAllEventHandlerRemoved(target);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isFunction(args[1])) {\r\n            let eventName = args[0],\r\n                handler = args[1];\r\n\r\n            this.listenerMap.removeChild(eventName, handler);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isNumber(args[0])) {\r\n            let uid = args[0],\r\n                eventName = args[1];\r\n\r\n            this.listenerMap.removeChild(uid, eventName);\r\n        }\r\n        else if ((args.length === 2 && args[0] instanceof EntityObject) || args.length === 3) {\r\n            this.listenerMap.removeChild.apply(this.listenerMap, args);\r\n\r\n            if (this._isAllEventHandlerRemoved(target)) {\r\n                this._handleAfterAllEventHandlerRemoved(target);\r\n            }\r\n        }\r\n    }\r\n\r\n    public setBubbleParent(target: EntityObject, parent: EntityObject) {\r\n        target.bubbleParent = parent;\r\n    }\r\n\r\n    private _isAllEventHandlerRemoved(target: EntityObject) {\r\n        return !this.listenerMap.hasChild(target);\r\n    }\r\n\r\n    private _handleAfterAllEventHandlerRemoved(target: EntityObject) {\r\n        this.setBubbleParent(target, null);\r\n    }\r\n}\r\n\r\nexport type CustomEventRegisterData = {\r\n    target: EntityObject,\r\n    //user's event handler\r\n    originHandler: Function,\r\n    //wraped user's event handler\r\n    handler: Function,\r\n    //dom event handler\r\n    domHandler: Function,\r\n    priority: number\r\n};","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { EventHandler } from \"./EventHandler\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { CustomEventRegister, CustomEventRegisterData } from \"../binder/CustomEventRegister\";\r\nimport { Event } from \"../object/Event\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { CustomEvent } from \"../object/CustomEvent\";\r\n\r\n@singleton()\r\n@registerClass(\"CustomEventHandler\")\r\nexport class CustomEventHandler extends EventHandler {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    public on(eventName: string, handler: Function, priority: number): void;\r\n    public on(target: EntityObject, eventName: string, handler: Function, priority: number): void;\r\n\r\n    public on(...args) {\r\n        if (args.length === 3) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                originHandler = handler,\r\n                priority = args[2];\r\n\r\n            CustomEventRegister.getInstance().register(\r\n                <any>eventName,\r\n                handler,\r\n                originHandler,\r\n                null,\r\n                priority\r\n            );\r\n        }\r\n        else if (args.length === 4) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                originHandler = handler,\r\n                priority = args[3];\r\n\r\n            CustomEventRegister.getInstance().register(\r\n                target,\r\n                <any>eventName,\r\n                handler,\r\n                originHandler,\r\n                null,\r\n                priority\r\n            );\r\n        }\r\n    }\r\n\r\n    public off(eventName: string): void;\r\n    public off(uid: number, eventName: string): void;\r\n    public off(eventName: string, handler: Function): void;\r\n    public off(target: EntityObject, eventName: string, handler: Function): void;\r\n\r\n    public off(...args) {\r\n        var eventRegister = CustomEventRegister.getInstance();\r\n\r\n        eventRegister.remove.apply(eventRegister, args);\r\n    }\r\n\r\n    public trigger(event: Event): boolean;\r\n    public trigger(event: Event, userData: any): boolean;\r\n    public trigger(target: EntityObject, event: Event, notSetTarget: boolean): boolean;\r\n    public trigger(target: EntityObject, event: Event, userData: any, notSetTarget: boolean): boolean;\r\n\r\n    public trigger(...args): boolean {\r\n        var event: Event = null;\r\n\r\n        if (args.length === 1 || args.length === 2) {\r\n            let userData = null;\r\n\r\n            if (args.length === 1) {\r\n                event = args[0];\r\n            }\r\n            else {\r\n                event = args[0];\r\n                userData = args[1];\r\n            }\r\n\r\n            return this._triggerEventHandler(event, userData);\r\n        }\r\n        else if (args.length === 3 || args.length === 4) {\r\n            let target = null,\r\n                userData = null,\r\n                notSetTarget = null;\r\n\r\n            if (args.length === 3) {\r\n                target = args[0];\r\n                event = args[1];\r\n                notSetTarget = args[2];\r\n            }\r\n            else {\r\n                target = args[0];\r\n                event = args[1];\r\n                userData = args[2];\r\n                notSetTarget = args[3];\r\n            }\r\n\r\n            return this._triggerTargetAndEventHandler(target, event, userData, notSetTarget);\r\n        }\r\n\r\n    }\r\n\r\n    private _triggerEventHandler(event, userData) {\r\n        var registerDataList: Collection<CustomEventRegisterData> = null,\r\n            self = this;\r\n\r\n        registerDataList = CustomEventRegister.getInstance().getEventRegisterDataList(event.name);\r\n\r\n        if (registerDataList === null || registerDataList.getCount() === 0) {\r\n            return false;\r\n        }\r\n\r\n        registerDataList.forEach((registerData: CustomEventRegisterData) => {\r\n            //var eventCopy = event.clone();\r\n            //\r\n            //eventCopy.currentTarget = registerData.target;\r\n            //eventCopy.target = registerData.target;\r\n            //\r\n            //self._setUserData(eventCopy, userData);\r\n            //\r\n            //registerData.handler(eventCopy);\r\n            event.currentTarget = registerData.target;\r\n            event.target = registerData.target;\r\n\r\n            self._setUserData(event, userData);\r\n\r\n            registerData.handler(event);\r\n        });\r\n\r\n        return true;\r\n    }\r\n\r\n    private _triggerTargetAndEventHandler(target, event, userData, notSetTarget) {\r\n        var registerDataList: Collection<CustomEventRegisterData> = null,\r\n            isStopPropagation = false,\r\n            self = this;\r\n\r\n        if (!notSetTarget) {\r\n            event.target = target;\r\n        }\r\n\r\n        registerDataList = CustomEventRegister.getInstance().getEventRegisterDataList(target, event.name);\r\n\r\n        if (registerDataList === null || registerDataList.getCount() === 0) {\r\n            return false;\r\n        }\r\n\r\n        registerDataList.forEach((registerData: CustomEventRegisterData) => {\r\n            event.currentTarget = registerData.target;\r\n\r\n            self._setUserData(event, userData);\r\n\r\n            registerData.handler(event);\r\n\r\n            if (event.isStopPropagation) {\r\n                isStopPropagation = true;\r\n            }\r\n        });\r\n\r\n        return isStopPropagation;\r\n    }\r\n\r\n    private _setUserData(event: CustomEvent, userData) {\r\n        if (userData) {\r\n            event.userData = userData;\r\n        }\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { EEventType } from \"../object/EEventType\";\r\nimport { MouseEventHandler } from \"../handler/MouseEventHandler\";\r\nimport { TouchEventHandler } from \"../handler/TouchEventHandler\";\r\nimport { KeyboardEventHandler } from \"../handler/KeyboardEventHandler\";\r\nimport { CustomEventHandler } from \"../handler/CustomEventHandler\";\r\nimport { Log } from \"../../utils/Log\";\r\n\r\n@registerClass(\"EventHandlerFactory\")\r\nexport class EventHandlerFactory {\r\n    public static createEventHandler(eventType: EEventType) {\r\n        let handler = null;\r\n\r\n        switch (eventType) {\r\n            case EEventType.MOUSE:\r\n                handler = MouseEventHandler.getInstance();\r\n                break;\r\n            case EEventType.TOUCH:\r\n                handler = TouchEventHandler.getInstance();\r\n                break;\r\n            case EEventType.KEYBOARD:\r\n                handler = KeyboardEventHandler.getInstance();\r\n                break;\r\n            case EEventType.CUSTOM:\r\n            case EEventType.POINT:\r\n                handler = CustomEventHandler.getInstance();\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_INVALID(\"eventType\"));\r\n                break;\r\n        }\r\n\r\n        return handler;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { EventBinder } from \"./EventBinder\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { EventHandlerFactory } from \"../factory/EventHandlerFactory\";\r\nimport { EventTable } from \"../object/EventTable\";\r\nimport { DomEventRegister, DomEventRegisterData } from \"./DomEventRegister\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\n@singleton()\r\n@registerClass(\"DomEventBinder\")\r\nexport class DomEventBinder extends EventBinder {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    public on(eventName: EEventName | string, handler: Function): void;\r\n\r\n    public on(eventName: EEventName | string, handler: Function, priority: number): void;\r\n    public on(dom: HTMLElement, eventName: EEventName | string, handler: Function): void;\r\n\r\n    public on(dom: HTMLElement, eventName: EEventName | string, handler: Function, priority: number): void;\r\n\r\n    public on(...args) {\r\n        if (args.length === 2 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(eventName, handler);\r\n        }\r\n        else if (args.length === 3 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                priority = args[2];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(eventName, handler, priority);\r\n        }\r\n        else if (args.length === 3 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                handler = args[2];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(dom, eventName, handler);\r\n        }\r\n        else if (args.length === 4) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                priority = args[3];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(dom, eventName, handler, priority);\r\n        }\r\n    }\r\n\r\n    public off(): void;\r\n\r\n    public off(eventName: EEventName | string): void;\r\n    public off(dom: HTMLElement): void;\r\n\r\n    public off(eventName: EEventName | string, handler: Function): void;\r\n    public off(dom: HTMLElement, eventName: EEventName): void;\r\n\r\n    public off(dom: HTMLElement, eventName: EEventName, handler: Function): void;\r\n\r\n    public off(...args) {\r\n        var eventRegister = DomEventRegister.getInstance();\r\n\r\n        if (args.length === 0) {\r\n            eventRegister.forEachAll((list: Collection<DomEventRegisterData>, eventName: EEventName) => {\r\n                EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                    .off(eventName);\r\n            });\r\n\r\n            eventRegister.clear();\r\n        }\r\n        else if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0];\r\n\r\n            eventRegister.forEachEventName((list: Collection<DomEventRegisterData>, registeredEventName: string) => {\r\n                if (registeredEventName === eventName) {\r\n                    EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                        .off(eventName);\r\n                }\r\n            });\r\n        }\r\n        else if (args.length === 1 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                secondMap = null;\r\n\r\n            secondMap = eventRegister.getChild(dom);\r\n\r\n            if (!!secondMap) {\r\n                secondMap.forEach((list: Collection<DomEventRegisterData>, eventName: EEventName) => {\r\n                    EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                        .off(dom, eventName);\r\n                });\r\n            }\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .off(eventName, handler);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .off(dom, eventName);\r\n        }\r\n        else if (args.length === 3) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                handler = args[2];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .off(dom, eventName, handler);\r\n        }\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { EventBinder } from \"./EventBinder\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { EventHandlerFactory } from \"../factory/EventHandlerFactory\";\r\nimport { EventTable } from \"../object/EventTable\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { CustomEventRegister, CustomEventRegisterData } from \"./CustomEventRegister\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\n@singleton()\r\n@registerClass(\"CustomEventBinder\")\r\nexport class CustomEventBinder extends EventBinder {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    public on(eventName: EEventName | string, handler: Function): void;\r\n\r\n    public on(eventName: EEventName | string, handler: Function, priority: number): void;\r\n    public on(target: EntityObject, eventName: EEventName | string, handler: Function): void;\r\n\r\n    public on(target: EntityObject, eventName: EEventName | string, handler: Function, priority: number): void;\r\n\r\n    public on(...args) {\r\n        if (args.length === 2) {\r\n            let eventName = args[0],\r\n                handler = args[1];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(eventName, handler);\r\n        }\r\n        else if (args.length === 3 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                priority = args[2];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(eventName, handler, priority);\r\n        }\r\n        else if (args.length === 3 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(target, eventName, handler);\r\n        }\r\n        else if (args.length === 4) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                priority = args[3];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(target, eventName, handler, priority);\r\n        }\r\n    }\r\n\r\n    public off(): void;\r\n\r\n    public off(eventName: EEventName | string): void;\r\n    public off(target: EntityObject): void;\r\n\r\n    public off(eventName: EEventName | string, handler: Function): void;\r\n    public off(target: EntityObject, eventName: EEventName | string): void;\r\n\r\n    public off(target: EntityObject, eventName: EEventName | string, handler: Function): void;\r\n\r\n    public off(...args) {\r\n        var eventRegister = CustomEventRegister.getInstance();\r\n\r\n        if (args.length === 0) {\r\n            eventRegister.forEachAll((list: Collection<CustomEventRegisterData>, eventName: EEventName) => {\r\n                EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                    .off(eventName);\r\n            });\r\n\r\n            eventRegister.clear();\r\n        }\r\n        else if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0];\r\n\r\n            eventRegister.forEachEventName((list: Collection<CustomEventRegisterData>, registeredEventName: string) => {\r\n                if (registeredEventName === eventName) {\r\n                    EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                        .off(eventName);\r\n                }\r\n            });\r\n        }\r\n        else if (args.length === 1 && args[0] instanceof EntityObject) {\r\n            let target: EntityObject = args[0],\r\n                secondMap = null;\r\n\r\n            secondMap = eventRegister.getChild(target);\r\n\r\n            if (!!secondMap) {\r\n                secondMap.forEach((list: Collection<CustomEventRegisterData>, eventName: EEventName) => {\r\n                    EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                        .off(target, eventName);\r\n                });\r\n            }\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .off(eventName, handler);\r\n        }\r\n        else if (args.length === 2 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .off(target, eventName);\r\n        }\r\n        else if (args.length === 3 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .off(target, eventName, handler);\r\n        }\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { EventTable } from \"../object/EventTable\";\r\nimport { EEventType } from \"../object/EEventType\";\r\nimport { DomEventBinder } from \"../binder/DomEventBinder\";\r\nimport { CustomEventBinder } from \"../binder/CustomEventBinder\";\r\nimport { Log } from \"../../utils/Log\";\r\n\r\n@registerClass(\"EventBinderFactory\")\r\nexport class EventBinderFactory {\r\n    public static createEventBinder(eventName: EEventName) {\r\n        let binder = null,\r\n            eventType = EventTable.getEventType(eventName);\r\n\r\n        switch (eventType) {\r\n            case EEventType.MOUSE:\r\n            case EEventType.TOUCH:\r\n            case EEventType.KEYBOARD:\r\n                binder = DomEventBinder.getInstance();\r\n                break;\r\n            case EEventType.CUSTOM:\r\n            case EEventType.POINT:\r\n                binder = CustomEventBinder.getInstance();\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_INVALID(`eventName:${eventName}`));\r\n                break;\r\n        }\r\n\r\n        return binder;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Event } from \"./Event\";\r\nimport { EEventType } from \"./EEventType\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { DomEvent } from \"./DomEvent\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\n\r\n@registerClass(\"CustomEvent\")\r\nexport class CustomEvent extends Event {\r\n    public static create(eventName: string);\r\n    public static create(eventName: string, userData: any);\r\n\r\n    public static create(...args) {\r\n        var obj = null;\r\n\r\n        if (args.length === 1) {\r\n            obj = new this(args[0]);\r\n        }\r\n        else {\r\n            obj = new this(args[0], args[1]);\r\n        }\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(eventName: string);\r\n    constructor(eventName: string, userData: any);\r\n\r\n    constructor(...args) {\r\n        super(args[0]);\r\n\r\n        if (args.length === 2) {\r\n            let userData = args[1];\r\n\r\n            this.userData = userData;\r\n        }\r\n    }\r\n\r\n    public readonly type: EEventType = EEventType.CUSTOM;\r\n\r\n    public userData: any = null;\r\n\r\n\r\n    public copyPublicAttri(destination, source: any) {\r\n        var property = null;\r\n\r\n        ExtendUtils.extend(destination, function(item, property) {\r\n            return property.slice(0, 1) !== \"_\"\r\n                && !JudgeUtils.isFunction(item);\r\n        });\r\n\r\n        return destination;\r\n    }\r\n\r\n    public clone(): CustomEvent {\r\n        var eventObj = CustomEvent.create(<any>this.name);\r\n\r\n        return <CustomEvent>this.copyMember(eventObj, this, [\"target\", \"currentTarget\", \"isStopPropagation\", \"phase\"]);\r\n    }\r\n\r\n    //@requireCheck(function(event:PointEvent){\r\n    //    if(event.target){\r\n    //        assert(event.target instanceof EntityObject, Log.info.FUNC_MUST_BE(\"target\", \"EntityObject\"));\r\n    //    }\r\n    //})\r\n    public getDataFromDomEvent(event: DomEvent) {\r\n        this.target = <EntityObject>event.target;\r\n        this.currentTarget = event.currentTarget;\r\n        this.isStopPropagation = event.isStopPropagation;\r\n    }\r\n}","export abstract class EventDispatcher {\r\n    public abstract trigger(...args): any;\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { EventDispatcher } from \"./EventDispatcher\";\r\nimport { Event } from \"../object/Event\";\r\nimport { EventHandlerFactory } from \"../factory/EventHandlerFactory\";\r\n\r\n@singleton()\r\n@registerClass(\"DomEventDispatcher\")\r\nexport class DomEventDispatcher extends EventDispatcher {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    public trigger(event: Event): void;\r\n    public trigger(dom: HTMLElement, event: Event): void;\r\n\r\n    public trigger(...args): any {\r\n        if (args.length === 1) {\r\n            let event = args[0],\r\n                eventType = event.type;\r\n\r\n            EventHandlerFactory.createEventHandler(eventType)\r\n                .trigger(event);\r\n        }\r\n        else if (args.length === 2) {\r\n            let dom = args[0],\r\n                event = args[1],\r\n                eventType = event.type;\r\n\r\n            EventHandlerFactory.createEventHandler(eventType)\r\n                .trigger(dom, event);\r\n        }\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { ensure, assert } from \"../../definition/typescript/decorator/contract\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { Log } from \"../../utils/Log\";\r\n\r\n@registerClass(\"EventUtils\")\r\nexport class EventUtils {\r\n    public static isEvent(arg: any) {\r\n        return arg && arg.currentTarget !== void 0;\r\n    }\r\n\r\n    @ensure(function(isEntityObject: boolean, arg: EntityObject) {\r\n        if (isEntityObject) {\r\n            assert(arg instanceof EntityObject, Log.info.FUNC_MUST_BE(`EntityObject, but actual is ${arg}`));\r\n        }\r\n    })\r\n    public static isEntityObject(arg: EntityObject) {\r\n        return arg && arg.bubbleParent !== void 0;\r\n    }\r\n}","export enum EEventPhase {\r\n    BROADCAST,\r\n    EMIT\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { EventDispatcher } from \"./EventDispatcher\";\r\nimport { Event } from \"../object/Event\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { EventHandlerFactory } from \"../factory/EventHandlerFactory\";\r\nimport { EventUtils } from \"../utils/EventUtils\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { EEventPhase } from \"../object/EEventPhase\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\n@singleton()\r\n@registerClass(\"CustomEventDispatcher\")\r\nexport class CustomEventDispatcher extends EventDispatcher {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    public trigger(event: Event): boolean;\r\n\r\n    public trigger(event: Event, userData: any): boolean;\r\n    public trigger(target: EntityObject, event: Event): boolean;\r\n\r\n    public trigger(target: EntityObject, event: Event, notSetTarget: boolean): boolean;\r\n    public trigger(target: EntityObject, event: Event, userData: any): boolean;\r\n\r\n    public trigger(target: EntityObject, event: Event, userData: any, notSetTarget: boolean): boolean;\r\n\r\n    public trigger(...args): boolean {\r\n        var length = args.length;\r\n\r\n        if (length === 1) {\r\n            let event = args[0],\r\n                eventType = event.type;\r\n\r\n            return EventHandlerFactory.createEventHandler(eventType)\r\n                .trigger(event);\r\n        }\r\n        else if (length === 2 && EventUtils.isEvent(args[0])) {\r\n            let event = args[0],\r\n                userData = args[1],\r\n                eventType = event.type;\r\n\r\n            return EventHandlerFactory.createEventHandler(eventType)\r\n                .trigger(event, userData);\r\n        }\r\n        else if ((length === 2 && EventUtils.isEntityObject(args[0])) || (length === 3 && JudgeUtils.isBoolean(args[2]))) {\r\n            //else if((length === 2 && args[0] instanceof EntityObject) || (length === 3 && JudgeUtils.isBoolean(args[2]))){\r\n            let target = args[0],\r\n                event = args[1],\r\n                notSetTarget = args[2] === void 0 ? false : args[2],\r\n                eventType = event.type;\r\n\r\n            return EventHandlerFactory.createEventHandler(eventType)\r\n                .trigger(target, event, notSetTarget);\r\n        }\r\n        else if (length === 3 || length === 4) {\r\n            let target = args[0],\r\n                event = args[1],\r\n                userData = args[2],\r\n                notSetTarget = args[3] === void 0 ? false : args[3],\r\n                eventType = event.type;\r\n\r\n            return EventHandlerFactory.createEventHandler(eventType)\r\n                .trigger(target, event, userData, notSetTarget);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * transfer event up\r\n     * @param target\r\n     * @param eventObject\r\n     */\r\n    public emit(target: EntityObject, eventObject: Event, userData?: any) {\r\n        var isStopPropagation = false;\r\n\r\n        if (!target) {\r\n            return;\r\n        }\r\n\r\n        eventObject.phase = EEventPhase.EMIT;\r\n        eventObject.target = target;\r\n\r\n        do {\r\n            isStopPropagation = this._triggerWithUserData(target, eventObject, userData, true);\r\n\r\n            if (isStopPropagation) {\r\n                break;\r\n            }\r\n            target = target.bubbleParent;\r\n        } while (target);\r\n    }\r\n\r\n    /**\r\n     * transfer event down\r\n     * @param target\r\n     * @param eventObject\r\n     */\r\n    public broadcast(target: EntityObject, eventObject: Event, userData?: any) {\r\n        var self = this;\r\n        var iterator = (obj: EntityObject) => {\r\n            var children: Collection<EntityObject> = obj.getChildren();\r\n\r\n            if (children.getCount() === 0) {\r\n                return;\r\n            }\r\n\r\n            children.forEach((child: EntityObject) => {\r\n                self._triggerWithUserData(child, eventObject, userData, true);\r\n\r\n                iterator(child);\r\n            });\r\n        }\r\n\r\n        if (!target) {\r\n            return;\r\n        }\r\n\r\n        eventObject.phase = EEventPhase.BROADCAST;\r\n        eventObject.target = target;\r\n\r\n        this._triggerWithUserData(target, eventObject, userData, true);\r\n\r\n        iterator(target);\r\n    }\r\n\r\n    private _triggerWithUserData(target, event, userData, notSetTarget) {\r\n        return userData ? this.trigger(target, event, userData, notSetTarget)\r\n            : this.trigger(target, event, notSetTarget);\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Event } from \"../object/Event\";\r\nimport { EEventType } from \"../object/EEventType\";\r\nimport { DomEventDispatcher } from \"../dispatcher/DomEventDispatcher\";\r\nimport { CustomEventDispatcher } from \"../dispatcher/CustomEventDispatcher\";\r\nimport { Log } from \"../../utils/Log\";\r\n\r\n@registerClass(\"EventDispatcherFactory\")\r\nexport class EventDispatcherFactory {\r\n    public static createEventDispatcher(event: Event) {\r\n        let dispatcher = null,\r\n            eventType = event.type;\r\n\r\n        switch (eventType) {\r\n            case EEventType.MOUSE:\r\n            case EEventType.TOUCH:\r\n            case EEventType.KEYBOARD:\r\n                dispatcher = DomEventDispatcher.getInstance();\r\n                break;\r\n            case EEventType.CUSTOM:\r\n            case EEventType.POINT:\r\n                dispatcher = CustomEventDispatcher.getInstance();\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_INVALID(`event:${event}`));\r\n                break;\r\n        }\r\n\r\n        return dispatcher;\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { EEventName } from \"./object/EventNameHandler\";\r\nimport { EEngineEvent } from \"./EEngineEvent\";\r\nimport { EntityObject } from \"../core/entityObject/EntityObject\";\r\nimport { requireCheck, it, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { EventTable } from \"./object/EventTable\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { EEventType } from \"./object/EEventType\";\r\nimport { JudgeUtils } from \"../utils/JudgeUtils\";\r\nimport { EventBinderFactory } from \"./factory/EventBinderFactory\";\r\nimport { CustomEventBinder } from \"./binder/CustomEventBinder\";\r\nimport { DomEventBinder } from \"./binder/DomEventBinder\";\r\nimport { Event } from \"./object/Event\";\r\nimport { CustomEvent } from \"./object/CustomEvent\";\r\nimport { Log } from \"../utils/Log\";\r\nimport { EventDispatcherFactory } from \"./factory/EventDispatcherFactory\";\r\nimport { EventUtils } from \"./utils/EventUtils\";\r\nimport { CustomEventDispatcher } from \"./dispatcher/CustomEventDispatcher\";\r\nimport { DomEventDispatcher } from \"./dispatcher/DomEventDispatcher\";\r\nimport { FromEventPatternStream } from \"wonder-frp/dist/es2015/stream/FromEventPatternStream\";\r\nimport { fromEventPattern } from \"wonder-frp/dist/es2015/global/Operator\";\r\nimport { CustomEventRegister } from \"./binder/CustomEventRegister\";\r\n\r\n@registerClass(\"EventManager\")\r\nexport class EventManager {\r\n    public static on(eventName: EEventName | EEngineEvent | string, handler: Function): void;\r\n\r\n    public static on(eventName: EEventName | EEngineEvent | string, handler: Function, priority: number): void;\r\n    public static on(target: EntityObject, eventName: EEventName | EEngineEvent | string, handler: Function): void;\r\n    public static on(dom: HTMLElement, eventName: EEventName | EEngineEvent | string, handler: Function): void;\r\n\r\n    public static on(target: EntityObject, eventName: EEventName | EEngineEvent | string, handler: Function, priority: number): void;\r\n    public static on(dom: HTMLElement, eventName: EEventName | EEngineEvent | string, handler: Function, priority: number): void;\r\n\r\n    @requireCheck(function(...args) {\r\n        if (args[0] instanceof EntityObject) {\r\n            let eventName = args[1];\r\n\r\n            it(\"event must be custom event\", () => {\r\n                var eventType = EventTable.getEventType(eventName);\r\n\r\n                expect(eventType === EEventType.CUSTOM || eventType === EEventType.POINT).true;\r\n            });\r\n        }\r\n        else if (JudgeUtils.isDom(args[0])) {\r\n            let eventName = args[1],\r\n                eventType = EventTable.getEventType(eventName);\r\n\r\n            it(\"event must be dom event\", () => {\r\n                expect(eventType === EEventType.TOUCH || eventType === EEventType.MOUSE || eventType === EEventType.KEYBOARD).true;\r\n            });\r\n        }\r\n    })\r\n    public static on(...args) {\r\n        if (args.length === 2 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                priority = 1,\r\n                eventBinder = EventBinderFactory.createEventBinder(eventName);\r\n\r\n            eventBinder.on(eventName, handler, priority);\r\n        }\r\n        else if (args.length === 3 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                priority = args[2],\r\n                eventBinder = EventBinderFactory.createEventBinder(eventName);\r\n\r\n            eventBinder.on(eventName, handler, priority);\r\n        }\r\n        else if (args.length === 3 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                priority = 1,\r\n                eventBinder = CustomEventBinder.getInstance();\r\n\r\n            eventBinder.on(target, eventName, handler, priority);\r\n        }\r\n        else if (args.length === 3 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                priority = 1,\r\n                eventBinder = DomEventBinder.getInstance();\r\n\r\n            eventBinder.on(dom, eventName, handler, priority);\r\n        }\r\n        else if (args.length === 4 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                priority = args[3],\r\n                eventBinder = CustomEventBinder.getInstance();\r\n\r\n            eventBinder.on(target, eventName, handler, priority);\r\n        }\r\n        else if (args.length === 4 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                priority = args[3],\r\n                eventBinder = DomEventBinder.getInstance();\r\n\r\n            eventBinder.on(dom, eventName, handler, priority);\r\n        }\r\n    }\r\n\r\n    public static off(): void;\r\n\r\n    public static off(eventName: EEventName | EEngineEvent | string): void;\r\n    public static off(target: EntityObject): void;\r\n    public static off(dom: HTMLElement): void;\r\n\r\n    public static off(eventName: EEventName | EEngineEvent | string, handler: Function): void;\r\n    public static off(target: EntityObject, eventName: EEventName | EEngineEvent | string): void;\r\n    public static off(dom: HTMLElement, eventName: EEventName): void;\r\n\r\n    public static off(target: EntityObject, eventName: EEventName | EEngineEvent | string, handler: Function): void;\r\n    public static off(dom: HTMLElement, eventName: EEventName, handler: Function): void;\r\n\r\n\r\n    @requireCheck(function(...args) {\r\n        if (args.length > 2 && args[0] instanceof EntityObject) {\r\n            let eventName = args[1],\r\n                eventType = EventTable.getEventType(eventName);\r\n\r\n            it(\"event must be custom or point event\", () => {\r\n                expect(eventType === EEventType.CUSTOM || eventType === EEventType.POINT).true;\r\n            });\r\n        }\r\n        else if (args.length > 2 && JudgeUtils.isDom(args[0])) {\r\n            let eventName = args[1],\r\n                eventType = EventTable.getEventType(eventName);\r\n\r\n            it(\"event must be keyboard event\", () => {\r\n                expect(eventType === EEventType.KEYBOARD).true;\r\n            });\r\n        }\r\n    })\r\n    public static off(...args) {\r\n        if (args.length === 0) {\r\n            let customEventBinder = CustomEventBinder.getInstance(),\r\n                domEventBinder = DomEventBinder.getInstance();\r\n\r\n            customEventBinder.off();\r\n            domEventBinder.off();\r\n        }\r\n        else if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                eventBinder = EventBinderFactory.createEventBinder(eventName);\r\n\r\n            eventBinder.off(eventName);\r\n        }\r\n        else if (args.length === 1 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventBinder = CustomEventBinder.getInstance();\r\n\r\n            eventBinder.off(target);\r\n        }\r\n        else if (args.length === 1 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventBinder = DomEventBinder.getInstance();\r\n\r\n            eventBinder.off(dom);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                eventBinder = EventBinderFactory.createEventBinder(eventName);\r\n\r\n            eventBinder.off(eventName, handler);\r\n        }\r\n        else if (args.length === 2 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                eventBinder = CustomEventBinder.getInstance();\r\n\r\n            eventBinder.off(target, eventName);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                eventBinder = DomEventBinder.getInstance();\r\n\r\n            eventBinder.off(dom, eventName);\r\n        }\r\n        else if (args.length === 3 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                eventBinder = CustomEventBinder.getInstance();\r\n\r\n            eventBinder.off(target, eventName, handler);\r\n        }\r\n        else if (args.length === 3 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                eventBinder = DomEventBinder.getInstance();\r\n\r\n            eventBinder.off(dom, eventName, handler);\r\n        }\r\n    }\r\n\r\n    public static trigger(event: Event): void;\r\n\r\n    public static trigger(event: Event, userData: any): void;\r\n    public static trigger(target: EntityObject, event: Event): void;\r\n    public static trigger(dom: HTMLElement, event: Event): void;\r\n\r\n    public static trigger(target: EntityObject, event: Event, userData: any): void;\r\n\r\n    public static trigger(target: EntityObject, event: Event, userData: any, notSetTarget: boolean): void;\r\n\r\n\r\n    @requireCheck(function(...args) {\r\n        if (args.length === 2 && args[0] instanceof Event) {\r\n            let event = args[0];\r\n\r\n            assert(event instanceof CustomEvent, Log.info.FUNC_MUST_BE(\"event type\", \"CUSTOM\"));\r\n        }\r\n        else if (args.length === 2 && args[0] instanceof EntityObject) {\r\n        }\r\n        else if (args.length === 2) {\r\n            if (args[0]) {\r\n                assert(JudgeUtils.isDom(args[0]), Log.info.FUNC_MUST_BE(\"the first param\", \"dom\"));\r\n            }\r\n        }\r\n        else if (args[0] instanceof EntityObject) {\r\n            let event = args[1];\r\n\r\n            assert(event instanceof CustomEvent, Log.info.FUNC_MUST_BE(\"event type\", \"CUSTOM\"));\r\n        }\r\n    })\r\n    public static trigger(...args) {\r\n        var length = args.length;\r\n\r\n        if (length === 1) {\r\n            let event = args[0],\r\n                eventDispatcher = EventDispatcherFactory.createEventDispatcher(event);\r\n\r\n            eventDispatcher.trigger(event);\r\n        }\r\n        else if (length === 2 && EventUtils.isEvent(args[0])) {\r\n            let event = args[0],\r\n                userData = args[1],\r\n                eventDispatcher = CustomEventDispatcher.getInstance();\r\n\r\n            eventDispatcher.trigger(event, userData);\r\n        }\r\n        else if (length === 2 && EventUtils.isEntityObject(args[0])) {\r\n            let target = args[0],\r\n                event = args[1],\r\n                eventDispatcher = CustomEventDispatcher.getInstance();\r\n\r\n            if (!target) {\r\n                return;\r\n            }\r\n\r\n            eventDispatcher.trigger(target, event);\r\n        }\r\n        else if (length === 2) {\r\n            let dom = args[0],\r\n                event = args[1],\r\n                eventDispatcher = DomEventDispatcher.getInstance();\r\n\r\n            if (!dom) {\r\n                return;\r\n            }\r\n\r\n            eventDispatcher.trigger(dom, event);\r\n        }\r\n        else if (length === 3) {\r\n            let target = args[0],\r\n                event = args[1],\r\n                userData = args[2],\r\n                eventDispatcher = CustomEventDispatcher.getInstance();\r\n\r\n            if (!target) {\r\n                return;\r\n            }\r\n\r\n            eventDispatcher.trigger(target, event, userData);\r\n        }\r\n        else if (length === 4) {\r\n            let target = args[0],\r\n                event = args[1],\r\n                userData = args[2],\r\n                notSetTarget = args[3],\r\n                eventDispatcher = CustomEventDispatcher.getInstance();\r\n\r\n            if (!target) {\r\n                return;\r\n            }\r\n\r\n            eventDispatcher.trigger(target, event, userData, notSetTarget);\r\n        }\r\n    }\r\n\r\n    public static broadcast(target: EntityObject, event: Event);\r\n    public static broadcast(target: EntityObject, event: Event, userData: any);\r\n\r\n    @requireCheck(function(target: EntityObject, eventObject: Event, userData?: any) {\r\n        assert(eventObject instanceof CustomEvent, Log.info.FUNC_MUST_BE(\"eventObject\", \"CustomEvent\"));\r\n    })\r\n    public static broadcast(...args) {\r\n        var eventDispatcher = CustomEventDispatcher.getInstance();\r\n\r\n        eventDispatcher.broadcast.apply(eventDispatcher, args);\r\n    }\r\n\r\n    public static emit(target: EntityObject, event: Event);\r\n    public static emit(target: EntityObject, event: Event, userData: any);\r\n\r\n    @requireCheck(function(target: EntityObject, eventObject: Event, userData?: any) {\r\n        assert(eventObject instanceof CustomEvent, Log.info.FUNC_MUST_BE(\"eventObject\", \"CustomEvent\"));\r\n    })\r\n    public static emit(...args) {\r\n        var eventDispatcher = CustomEventDispatcher.getInstance();\r\n\r\n        eventDispatcher.emit.apply(eventDispatcher, args);\r\n    }\r\n\r\n    public static fromEvent(eventName: EEventName | EEngineEvent | string): FromEventPatternStream;\r\n\r\n    public static fromEvent(eventName: EEventName | EEngineEvent | string, priority: number): FromEventPatternStream;\r\n    public static fromEvent(target: EntityObject, eventName: EEventName | EEngineEvent | string): FromEventPatternStream;\r\n    public static fromEvent(dom: HTMLElement, eventName: EEventName | EEngineEvent | string): FromEventPatternStream;\r\n\r\n    public static fromEvent(target: EntityObject, eventName: EEventName | EEngineEvent | string, priority: number): FromEventPatternStream;\r\n    public static fromEvent(dom: HTMLElement, eventName: EEventName | EEngineEvent | string, priority: number): FromEventPatternStream;\r\n\r\n    public static fromEvent(...args): any {\r\n        var addHandler = null,\r\n            removeHandler = null;\r\n\r\n        if (args.length === 1) {\r\n            let eventName = args[0];\r\n\r\n            addHandler = function(handler) {\r\n                EventManager.on(eventName, handler);\r\n            };\r\n            removeHandler = function(handler) {\r\n                EventManager.off(eventName, handler);\r\n            };\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isNumber(args[1])) {\r\n            let eventName = args[0],\r\n                priority = args[1];\r\n\r\n            addHandler = function(handler) {\r\n                EventManager.on(eventName, handler, priority);\r\n            };\r\n            removeHandler = function(handler) {\r\n                EventManager.off(eventName, handler);\r\n            };\r\n        }\r\n        else if (args.length === 2) {\r\n            let eventName = args[1];\r\n\r\n            addHandler = function(handler) {\r\n                EventManager.on(args[0], eventName, handler);\r\n            };\r\n            removeHandler = function(handler) {\r\n                EventManager.off(args[0], eventName, handler);\r\n            };\r\n        }\r\n        else if (args.length === 3) {\r\n            let eventName = args[1],\r\n                priority = args[2];\r\n\r\n            addHandler = function(handler) {\r\n                EventManager.on(args[0], eventName, handler, priority);\r\n            };\r\n            removeHandler = function(handler) {\r\n                EventManager.off(args[0], eventName, handler);\r\n            };\r\n        }\r\n\r\n        return fromEventPattern(addHandler, removeHandler);\r\n    }\r\n\r\n    @requireCheck(function(target: EntityObject, parent: any) {\r\n        assert(target instanceof EntityObject, \"only EntityObject can setBubleParent\");\r\n    })\r\n    public static setBubbleParent(target: EntityObject, parent: any) {\r\n        CustomEventRegister.getInstance().setBubbleParent(target, parent);\r\n    }\r\n}","import \"wonder-frp/dist/es2015/stream/MergeAllStream\";\r\nimport { Component } from \"../../../core/Component\";\r\nimport { Camera } from \"../Camera\";\r\nimport { cacheGetter } from \"../../../definition/typescript/decorator/cache\";\r\nimport { Matrix4 } from \"../../../math/Matrix4\";\r\nimport { GameObject } from \"../../../core/entityObject/gameObject/GameObject\";\r\nimport { cloneAttributeAsCloneable, CloneUtils } from \"../../../definition/typescript/decorator/clone\";\r\nimport { IDisposable } from \"wonder-frp/dist/es2015/Disposable/IDisposable\";\r\nimport { virtual } from \"../../../definition/typescript/decorator/virtual\";\r\nimport { fromArray } from \"wonder-frp/dist/es2015/global/Operator\";\r\nimport { EventManager } from \"../../../event/EventManager\";\r\nimport { EEngineEvent } from \"../../../event/EEngineEvent\";\r\n\r\nexport abstract class CameraController extends Component {\r\n    constructor(cameraComponent: Camera) {\r\n        super();\r\n\r\n        this.camera = cameraComponent;\r\n    }\r\n\r\n    get cameraToWorldMatrix() {\r\n        return this.camera.cameraToWorldMatrix;\r\n    }\r\n\r\n    @cacheGetter(function() {\r\n        return this._worldToCameraMatrixCache !== null;\r\n    }, function() {\r\n        return this._worldToCameraMatrixCache;\r\n    }, function(result) {\r\n        this._worldToCameraMatrixCache = result;\r\n    })\r\n    get worldToCameraMatrix() {\r\n        return this._getWorldToCameraMatrix();\r\n    }\r\n\r\n    get pMatrix() {\r\n        return this.camera.pMatrix;\r\n    }\r\n    set pMatrix(pMatrix: Matrix4) {\r\n        this.camera.pMatrix = pMatrix;\r\n    }\r\n\r\n\r\n    public entityObject: GameObject;\r\n    @cloneAttributeAsCloneable()\r\n    public camera: Camera = null;\r\n\r\n    private _worldToCameraMatrixCache: Matrix4 = null;\r\n    private _clearCacheSubscription: IDisposable = null;\r\n\r\n    public init() {\r\n        this.camera.entityObject = <GameObject>this.entityObject;\r\n        this.camera.init();\r\n\r\n        this.bindClearCacheEvent();\r\n    }\r\n\r\n    public update(elapsed: number) {\r\n        this.camera.update(elapsed);\r\n    }\r\n\r\n    public dispose() {\r\n        this.camera.dispose();\r\n\r\n        this.disposeClearCacheEvent();\r\n    }\r\n\r\n    public clone() {\r\n        return CloneUtils.clone(this);\r\n    }\r\n\r\n    // public isIntersectWithRay(entityObject:GameObject, screenX:number, screenY:number):boolean{\r\n    //     var shape = null;\r\n    //\r\n    //     if(!entityObject.hasComponent(Collider)){\r\n    //         return false;\r\n    //     }\r\n    //\r\n    //     shape = entityObject.getComponent<Collider>(Collider).shape;\r\n    //\r\n    //     return shape.isIntersectWithRay(this.createRay(screenX, screenY));\r\n    // }\r\n    //\r\n    // public createRay(screenX:number, screenY:number){\r\n    //     var from = this.convertScreenToWorld(screenX, screenY, this.camera.near),\r\n    //         to = this.convertScreenToWorld(screenX, screenY, this.camera.far);\r\n    //\r\n    //     return Ray.create(from, to.sub(from));\r\n    // }\r\n    //\r\n    // public convertScreenToWorld(screenX:number, screenY:number, distanceFromCamera:number):Vector3{\r\n    //     return this.camera.convertScreenToWorld(screenX, screenY, distanceFromCamera);\r\n    // }\r\n    //\r\n    // public convertWorldToScreen(worldX:number, worldY:number, worldZ:number, screenWidth:number, screenHeight:number):Vector2{\r\n    //     return this.camera.convertWorldToScreen(worldX, worldY, worldZ, screenWidth, screenHeight);\r\n    // }\r\n    //\r\n    // public getPlanes():Array<Plane> {\r\n    //     var frustumPlanes = [],\r\n    //         transform = this.worldToCameraMatrix.applyMatrix(this.pMatrix, true);\r\n    //\r\n    //     for (var index = 0; index < 6; index++) {\r\n    //         frustumPlanes.push(Plane.create(0, 0, 0, 0));\r\n    //     }\r\n    //\r\n    //     this._setPlanes(transform, frustumPlanes);\r\n    //\r\n    //     return frustumPlanes;\r\n    // }\r\n\r\n    @virtual\r\n    protected bindClearCacheEvent() {\r\n        var self = this;\r\n\r\n        this._clearCacheSubscription = fromArray([\r\n            EventManager.fromEvent(<any>EEngineEvent.ENDLOOP),\r\n            EventManager.fromEvent(this.entityObject, <any>EEngineEvent.TRANSFORM_TRANSLATE),\r\n            EventManager.fromEvent(this.entityObject, <any>EEngineEvent.TRANSFORM_ROTATE),\r\n            EventManager.fromEvent(this.entityObject, <any>EEngineEvent.TRANSFORM_SCALE)\r\n        ])\r\n            .mergeAll()\r\n            .subscribe(() => {\r\n                self._clearCache();\r\n            });\r\n    }\r\n\r\n    @virtual\r\n    protected disposeClearCacheEvent() {\r\n        this._clearCacheSubscription && this._clearCacheSubscription.dispose();\r\n    }\r\n\r\n    // private _setPlanes(transform:Matrix4, frustumPlanes: Array<Plane>): void {\r\n    //     /*!\r\n    //      refer to http://gamedevs.org/uploads/fast-extraction-viewing-frustum-planes-from-world-view-projection-matrix.pdf\r\n    //      */\r\n    //\r\n    //     // Near\r\n    //     frustumPlanes[0].normal.x = transform.values[3] + transform.values[2];\r\n    //     frustumPlanes[0].normal.y = transform.values[7] + transform.values[6];\r\n    //     frustumPlanes[0].normal.z = transform.values[11] + transform.values[10];\r\n    //     frustumPlanes[0].d = transform.values[15] + transform.values[14];\r\n    //     frustumPlanes[0].normalize();\r\n    //\r\n    //     // Far\r\n    //     frustumPlanes[1].normal.x = transform.values[3] - transform.values[2];\r\n    //     frustumPlanes[1].normal.y = transform.values[7] - transform.values[6];\r\n    //     frustumPlanes[1].normal.z = transform.values[11] - transform.values[10];\r\n    //     frustumPlanes[1].d = transform.values[15] - transform.values[14];\r\n    //     frustumPlanes[1].normalize();\r\n    //\r\n    //     // Left\r\n    //     frustumPlanes[2].normal.x = transform.values[3] + transform.values[0];\r\n    //     frustumPlanes[2].normal.y = transform.values[7] + transform.values[4];\r\n    //     frustumPlanes[2].normal.z = transform.values[11] + transform.values[8];\r\n    //     frustumPlanes[2].d = transform.values[15] + transform.values[12];\r\n    //     frustumPlanes[2].normalize();\r\n    //\r\n    //     // Right\r\n    //     frustumPlanes[3].normal.x = transform.values[3] - transform.values[0];\r\n    //     frustumPlanes[3].normal.y = transform.values[7] - transform.values[4];\r\n    //     frustumPlanes[3].normal.z = transform.values[11] - transform.values[8];\r\n    //     frustumPlanes[3].d = transform.values[15] - transform.values[12];\r\n    //     frustumPlanes[3].normalize();\r\n    //\r\n    //     // Top\r\n    //     frustumPlanes[4].normal.x = transform.values[3] - transform.values[1];\r\n    //     frustumPlanes[4].normal.y = transform.values[7] - transform.values[5];\r\n    //     frustumPlanes[4].normal.z = transform.values[11] - transform.values[9];\r\n    //     frustumPlanes[4].d = transform.values[15] - transform.values[13];\r\n    //     frustumPlanes[4].normalize();\r\n    //\r\n    //     // Bottom\r\n    //     frustumPlanes[5].normal.x = transform.values[3] + transform.values[1];\r\n    //     frustumPlanes[5].normal.y = transform.values[7] + transform.values[5];\r\n    //     frustumPlanes[5].normal.z = transform.values[11] + transform.values[9];\r\n    //     frustumPlanes[5].d = transform.values[15] + transform.values[13];\r\n    //     frustumPlanes[5].normalize();\r\n    // }\r\n\r\n    private _clearCache() {\r\n        this._worldToCameraMatrixCache = null;\r\n    }\r\n\r\n    private _getWorldToCameraMatrix() {\r\n        return this.camera.worldToCameraMatrix;\r\n    }\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { CameraController } from \"../CameraController\";\r\nimport { Camera } from \"../../Camera\";\r\n\r\n@registerClass(\"BasicCameraController\")\r\nexport class BasicCameraController extends CameraController {\r\n    public static create(cameraComponent: Camera) {\r\n        var obj = new this(cameraComponent);\r\n\r\n        return obj;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Camera } from \"./Camera\";\r\nimport { cloneAttributeAsBasicType } from \"../../definition/typescript/decorator/clone\";\r\n\r\ndeclare var Math: any;\r\n\r\n@registerClass(\"PerspectiveCamera\")\r\nexport class PerspectiveCamera extends Camera {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _fovy: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    get fovy() {\r\n        return this._fovy;\r\n    }\r\n    set fovy(fovy: number) {\r\n        this._fovy = fovy;\r\n        this.pMatrixDirty = true;\r\n    }\r\n\r\n    private _aspect: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    get aspect() {\r\n        return this._aspect;\r\n    }\r\n    set aspect(aspect: number) {\r\n        this._aspect = aspect;\r\n        this.pMatrixDirty = true;\r\n    }\r\n\r\n    public zoomIn(speed: number, min: number = 1) {\r\n        this.fovy = Math.max(this.fovy - speed, min);\r\n    }\r\n    public zoomOut(speed: number, max: number = 179) {\r\n        this.fovy = Math.min(this.fovy + speed, max);\r\n    }\r\n\r\n    // public convertScreenToWorld(screenX:number, screenY:number, distanceFromCamera:number):Vector3{\r\n    //     var device:DeviceManager = DeviceManager.getInstance(),\r\n    //         width = device.view.width,\r\n    //         height = device.view.height,\r\n    //         normalizedDeviceCoordinate = Vector3.create(2 * screenX / width - 1, 1 - 2 * screenY / height, 1),\r\n    //         invViewProjMat = this.getInvViewProjMat(),\r\n    //         point = null,\r\n    //         w = null;\r\n    //\r\n    //     point = invViewProjMat.multiplyPoint(normalizedDeviceCoordinate);\r\n    //\r\n    //     w = normalizedDeviceCoordinate.x * invViewProjMat.values[3] +\r\n    //         normalizedDeviceCoordinate.y * invViewProjMat.values[7] +\r\n    //         normalizedDeviceCoordinate.z * invViewProjMat.values[11] +\r\n    //         invViewProjMat.values[15];\r\n    //\r\n    //     point.scale(1 / w);\r\n    //\r\n    //     return Vector3.create().lerp(this.entityObject.transform.position, point, distanceFromCamera / this.far);\r\n    // }\r\n    //\r\n    // public convertWorldToScreen(worldX:number, worldY:number, worldZ:number, screenWidth:number, screenHeight:number):Vector2{\r\n    //     var viewProjectionMatrix:Matrix4 = this.worldToCameraMatrix.clone().applyMatrix(this.pMatrix),\r\n    //         //todo optimize:use temp Vector3, Vector4\r\n    //         normalizedDeviceCoordinate:Vector4 = viewProjectionMatrix.multiplyVector4(Vector4.create(worldX, worldY, worldZ, 1.0)),\r\n    //         ndcSpacePos:Vector3 = Vector3.create(normalizedDeviceCoordinate.x / normalizedDeviceCoordinate.w, normalizedDeviceCoordinate.y / normalizedDeviceCoordinate.w, normalizedDeviceCoordinate.z / normalizedDeviceCoordinate.w);\r\n    //\r\n    //     return Vector2.create(\r\n    //         Math.round((ndcSpacePos.x + 1) / 2.0 * screenWidth),\r\n    //         Math.round((1 - ndcSpacePos.y) / 2.0 * screenHeight)\r\n    //     );\r\n    // }\r\n\r\n    protected updateProjectionMatrix() {\r\n        this.pMatrix.setPerspective(this._fovy, this._aspect, this.near, this.far);\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector3 } from \"../math/Vector3\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { cloneAttributeAsCloneable, cloneAttributeAsBasicType, cloneAttributeAsCustomType, CloneUtils } from \"../definition/typescript/decorator/clone\";\r\n\r\n@registerClass(\"Face3\")\r\nexport class Face3 {\r\n    public static create(aIndex: number, bIndex: number, cIndex: number, faceNormal: Vector3 = null, vertexNormals: Collection<Vector3> = Collection.create<Vector3>()) {\r\n        var obj = new this(aIndex, bIndex, cIndex, faceNormal, vertexNormals);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(aIndex: number, bIndex: number, cIndex: number, faceNormal: Vector3, vertexNormals: Collection<Vector3>) {\r\n        this.aIndex = aIndex;\r\n        this.bIndex = bIndex;\r\n        this.cIndex = cIndex;\r\n        this._faceNormal = faceNormal;\r\n        this.vertexNormals = vertexNormals;\r\n    }\r\n\r\n    @cloneAttributeAsCloneable()\r\n    private _faceNormal: Vector3 = null;\r\n    get faceNormal() {\r\n        return this._faceNormal !== null ? this._faceNormal : Vector3.create(0, 0, 0);\r\n    }\r\n    set faceNormal(faceNormal: Vector3) {\r\n        this._faceNormal = faceNormal;\r\n    }\r\n\r\n    @cloneAttributeAsBasicType()\r\n    public aIndex: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    public bIndex: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    public cIndex: number = null;\r\n    @cloneAttributeAsCustomType(function(source: Face3, target: Face3, memberName: string) {\r\n        target[memberName] = source[memberName].clone(true);\r\n    })\r\n    public vertexNormals: Collection<Vector3> = null;\r\n\r\n    public clone() {\r\n        return CloneUtils.clone(this);\r\n    }\r\n\r\n    public hasFaceNormal() {\r\n        return this._faceNormal !== null;\r\n    }\r\n\r\n    public hasVertexNormal() {\r\n        return this.vertexNormals.getCount() > 0;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Face3 } from \"../../structure/Face3\";\r\nimport { requireCheck, assert } from \"../../definition/typescript/decorator/contract\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { Vector3 } from \"../../math/Vector3\";\r\n\r\n@registerClass(\"GeometryUtils\")\r\nexport class GeometryUtils {\r\n    public static convertToFaces(indices: Array<number>, normals?: Array<number>): Array<Face3> {\r\n        var hasNormals = this.hasData(normals),\r\n            faces = [];\r\n\r\n        for (let i = 0, len = indices.length; i < len; i += 3) {\r\n            let a = indices[i],\r\n                b = indices[i + 1],\r\n                c = indices[i + 2],\r\n                face = Face3.create(a, b, c);\r\n\r\n            if (hasNormals) {\r\n                face.vertexNormals.addChildren([\r\n                    this.getThreeComponent(normals, a),\r\n                    this.getThreeComponent(normals, b),\r\n                    this.getThreeComponent(normals, c)\r\n                ]);\r\n                face.faceNormal = face.vertexNormals.getChild(0).clone();\r\n            }\r\n\r\n            faces.push(face);\r\n        }\r\n\r\n        return faces;\r\n    }\r\n\r\n    @requireCheck(function(data) {\r\n        if (data) {\r\n            assert(data instanceof Collection || data instanceof Hash || JudgeUtils.isArrayExactly(data), Log.info.FUNC_SHOULD(\"data\", \"be Array or Collection or Hash\"));\r\n        }\r\n    })\r\n    public static hasData(data: any) {\r\n        return data && ((data.length && data.length > 0) || (data.getCount && data.getCount() > 0));\r\n    }\r\n\r\n    public static getThreeComponent(sourceData: Array<number>, index: number) {\r\n        var startIndex = 3 * index;\r\n\r\n        return Vector3.create(\r\n            sourceData[startIndex],\r\n            sourceData[startIndex + 1],\r\n            sourceData[startIndex + 2]\r\n        );\r\n    }\r\n\r\n    @requireCheck(function(dataArr: Array<number>, iterator: (v: Vector3) => void) {\r\n        assert(dataArr.length % 3 === 0, Log.info.FUNC_SHOULD(\"dataArr.length\", \"times of three\"));\r\n    })\r\n    public static iterateThreeComponent(dataArr: Array<number>, iterator: (v: Vector3) => void) {\r\n        for (let i = 0, len = dataArr.length; i < len; i += 3) {\r\n            iterator(Vector3.create(dataArr[i], dataArr[i + 1], dataArr[i + 2]));\r\n        }\r\n    }\r\n\r\n    public static setThreeComponent(targetData: Array<number>, sourceData: Vector3, index: number);\r\n    public static setThreeComponent(targetData: Array<number>, sourceData: Array<number>, index: number);\r\n\r\n    public static setThreeComponent(targetData: Array<number>, sourceData: any, index: number) {\r\n        if (sourceData instanceof Vector3) {\r\n            targetData[index * 3] = sourceData.x;\r\n            targetData[index * 3 + 1] = sourceData.y;\r\n            targetData[index * 3 + 2] = sourceData.z;\r\n        }\r\n        else {\r\n            targetData[index * 3] = sourceData[0];\r\n            targetData[index * 3 + 1] = sourceData[1];\r\n            targetData[index * 3 + 2] = sourceData[2];\r\n        }\r\n    }\r\n\r\n    // public static mergeFace(source:Array<Face3>, target:Array<Face3>){\r\n    //     if(!target){\r\n    //         return source;\r\n    //     }\r\n    //\r\n    //     for(let face of target){\r\n    //         source.push(face.clone());\r\n    //     }\r\n    //\r\n    //     return source;\r\n    // }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Geometry } from \"./Geometry\";\r\nimport { cloneAttributeAsBasicType } from \"../../definition/typescript/decorator/clone\";\r\nimport { Vector3 } from \"../../math/Vector3\";\r\nimport { GeometryUtils } from \"./GeometryUtils\";\r\nimport { Face3 } from \"../../structure/Face3\";\r\n\r\n@registerClass(\"BoxGeometry\")\r\nexport class BoxGeometry extends Geometry {\r\n    public static create() {\r\n        var geom = new this();\r\n\r\n        return geom;\r\n    }\r\n\r\n    @cloneAttributeAsBasicType()\r\n    public width: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    public height: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    public depth: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    public widthSegments: number = 1;\r\n    @cloneAttributeAsBasicType()\r\n    public heightSegments: number = 1;\r\n    @cloneAttributeAsBasicType()\r\n    public depthSegments: number = 1;\r\n\r\n    public computeData() {\r\n        var width = this.width,\r\n            height = this.height,\r\n            depth = this.depth,\r\n            widthSegments = this.widthSegments,\r\n            heightSegments = this.heightSegments,\r\n            depthSegments = this.depthSegments,\r\n            sides = {\r\n                FRONT: 0,\r\n                BACK: 1,\r\n                TOP: 2,\r\n                BOTTOM: 3,\r\n                RIGHT: 4,\r\n                LEFT: 5\r\n            };\r\n        var faceAxes = [\r\n            [0, 1, 3], // FRONT\r\n            [4, 5, 7], // BACK\r\n            [3, 2, 6], // TOP\r\n            [1, 0, 4], // BOTTOM\r\n            [1, 4, 2], // RIGHT\r\n            [5, 0, 6]  // LEFT\r\n        ];\r\n\r\n        // var faceNormals = [\r\n        //     [  0,  0,  1 ], // FRONT\r\n        //     [  0,  0, -1 ], // BACK\r\n        //     [  0,  1,  0 ], // TOP\r\n        //     [  0, -1,  0 ], // BOTTOM\r\n        //     [  1,  0,  0 ], // RIGHT\r\n        //     [ -1,  0,  0 ]  // LEFT\r\n        // ];\r\n        var corners = [\r\n            Vector3.create(-width, -height, depth),\r\n            Vector3.create(width, -height, depth),\r\n            Vector3.create(width, height, depth),\r\n            Vector3.create(-width, height, depth),\r\n            Vector3.create(width, -height, -depth),\r\n            Vector3.create(-width, -height, -depth),\r\n            Vector3.create(-width, height, -depth),\r\n            Vector3.create(width, height, -depth)\r\n        ];\r\n\r\n        var vertices = [];\r\n        // var normals = [];\r\n        // var texCoords = [];\r\n        var indices = [];\r\n\r\n        function generateFace(side, uSegments, vSegments) {\r\n            var x, y, z, u, v;\r\n            var i, j;\r\n            var offset = vertices.length / 3;\r\n\r\n            for (i = 0; i <= uSegments; i++) {\r\n                for (j = 0; j <= vSegments; j++) {\r\n                    let temp1 = Vector3.create()\r\n                    var temp2 = Vector3.create();\r\n                    var temp3 = Vector3.create();\r\n                    var r = Vector3.create();\r\n                    temp1.lerp(corners[faceAxes[side][0]], corners[faceAxes[side][1]], i / uSegments);\r\n                    temp2.lerp(corners[faceAxes[side][0]], corners[faceAxes[side][2]], j / vSegments);\r\n                    temp3.sub2(temp2, corners[faceAxes[side][0]]);\r\n                    r.add2(temp1, temp3);\r\n                    u = i / uSegments;\r\n                    v = j / vSegments;\r\n\r\n                    vertices.push(r.x, r.y, r.z);\r\n                    // normals.push(faceNormals[side][0], faceNormals[side][1], faceNormals[side][2]);\r\n                    // texCoords.push(u, v);\r\n\r\n                    if ((i < uSegments) && (j < vSegments)) {\r\n                        indices.push(offset + j + i * (uSegments + 1), offset + j + (i + 1) * (uSegments + 1), offset + j + i * (uSegments + 1) + 1);\r\n                        indices.push(offset + j + (i + 1) * (uSegments + 1), offset + j + (i + 1) * (uSegments + 1) + 1, offset + j + i * (uSegments + 1) + 1);\r\n\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        generateFace(sides.FRONT, widthSegments, heightSegments);\r\n        generateFace(sides.BACK, widthSegments, heightSegments);\r\n        generateFace(sides.TOP, widthSegments, depthSegments);\r\n        generateFace(sides.BOTTOM, widthSegments, depthSegments);\r\n        generateFace(sides.RIGHT, depthSegments, heightSegments);\r\n        generateFace(sides.LEFT, depthSegments, heightSegments);\r\n\r\n        return {\r\n            vertices: vertices,\r\n            //todo direct add to faces, remove indices,normals\r\n            // faces: GeometryUtils.convertToFaces(indices, normals)\r\n            faces: GeometryUtils.convertToFaces(indices)\r\n            // texCoords: texCoords\r\n        };\r\n    }\r\n}","import { Material } from \"../../material/Material\";\r\n\r\nexport abstract class WebGLState {\r\n    public abstract setState(material: Material): void;\r\n\r\n    // protected getSide(material:Material){\r\n    //     var scene:SceneDispatcher = Director.getInstance().scene;\r\n    //\r\n    //     return scene.side ? scene.side : material.side;\r\n    // }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { WebGLState } from \"./WebGLState\";\r\nimport { Material } from \"../../material/Material\";\r\n\r\n@registerClass(\"BasicState\")\r\nexport class BasicState extends WebGLState {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    // @requireCheck(function(material:Material){\r\n    //     if(material.blendFuncSeparate && material.blendEquationSeparate){\r\n    //     }\r\n    //     else{\r\n    //         assert(!!material.blendSrc && !!material.blendDst && !!material.blendEquation, wdCb.Log.info.FUNC_MUST(\"material.blendSrc && material.blendDst && material.blendEquation\", \"be set\"));\r\n    //     }\r\n    // })\r\n    public setState(material: Material): void {\r\n        // var deviceManager = DeviceManager.getInstance();\r\n\r\n        // deviceManager.setColorWrite(material.redWrite, material.greenWrite, material.blueWrite, material.alphaWrite);\r\n        // deviceManager.polygonOffsetMode = material.polygonOffsetMode;\r\n\r\n        // deviceManager.side = this.getSide(material);\r\n\r\n        // deviceManager.blend = material.blend;\r\n        //\r\n        // if(material.blendFuncSeparate && material.blendEquationSeparate){\r\n        //     deviceManager.setBlendFuncSeparate(material.blendFuncSeparate);\r\n        //     deviceManager.setBlendEquationSeparate(material.blendEquationSeparate);\r\n        // }\r\n        // else{\r\n        //     deviceManager.setBlendFunc(material.blendSrc, material.blendDst);\r\n        //     deviceManager.setBlendEquation(material.blendEquation);\r\n        // }\r\n        //\r\n        // if(material.alphaToCoverage){\r\n        //     deviceManager.alphaToCoverage = material.alphaToCoverage;\r\n        // }\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { DeviceManager } from \"../device/DeviceManager\";\r\n\r\n@registerClass(\"GlUtils\")\r\nexport class GlUtils {\r\n    public static drawElements(mode: any, count: number, type: any, offset: number) {\r\n        // var DebugStatistics = ClassUtils.getClassOrEmpty(\"DebugStatistics\", \"EmptyDebugStatistics\");\r\n\r\n        // DebugStatistics.count.drawCalls++;\r\n        // DebugStatistics.count.renderGameObjects++;\r\n\r\n        this._getGl().drawElements(mode, count, type, offset);\r\n    }\r\n\r\n    public static drawArrays(mode: any, first: number, count: number) {\r\n        // var DebugStatistics = ClassUtils.getClassOrEmpty(\"DebugStatistics\", \"EmptyDebugStatistics\");\r\n\r\n        // DebugStatistics.count.drawCalls++;\r\n        // DebugStatistics.count.renderGameObjects++;\r\n\r\n        this._getGl().drawArrays(mode, first, count);\r\n    }\r\n\r\n    // public static drawElementsInstancedANGLE(mode:any, count:number, type:any, offset:number, instancesCount:number){\r\n    //     var extension = GPUDetector.getInstance().extensionInstancedArrays;\r\n    //         // DebugStatistics = ClassUtils.getClassOrEmpty(\"DebugStatistics\", \"EmptyDebugStatistics\");\r\n    //\r\n    //     // DebugStatistics.count.drawCalls++;\r\n    //     // DebugStatistics.count.renderGameObjects += instancesCount;\r\n    //\r\n    //     extension.drawElementsInstancedANGLE(mode, count, type, offset, instancesCount);\r\n    // }\r\n\r\n    // public static drawArraysInstancedANGLE(mode:any, startOffset:number, count:number, instancesCount:number){\r\n    //     var extension = GPUDetector.getInstance().extensionInstancedArrays,\r\n    //         DebugStatistics = ClassUtils.getClassOrEmpty(\"DebugStatistics\", \"EmptyDebugStatistics\");\r\n    //\r\n    //     DebugStatistics.count.drawCalls++;\r\n    //     DebugStatistics.count.renderGameObjects += instancesCount;\r\n    //\r\n    //     extension.drawArraysInstancedANGLE(mode, startOffset, count, instancesCount);\r\n    // }\r\n\r\n    private static _getGl() {\r\n        return DeviceManager.getInstance().gl;\r\n    }\r\n}","import { WebGLState } from \"../state/WebGLState\";\r\nimport { BasicState } from \"../state/BasicState\";\r\nimport { EDrawMode } from \"../EDrawMode\";\r\nimport { virtual } from \"../../definition/typescript/decorator/virtual\";\r\nimport { ElementBuffer } from \"../buffer/ElementBuffer\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\nimport { BufferTable } from \"../../core/entityObject/scene/cache/BufferTable\";\r\nimport { GlUtils } from \"../GlUtils\";\r\nimport { ArrayBuffer } from \"../buffer/ArrayBuffer\";\r\n\r\nexport abstract class RenderCommand {\r\n    private _webglState: WebGLState = null;\r\n    get webglState() {\r\n        return this._webglState ? this._webglState : BasicState.create();\r\n    }\r\n    set webglState(webglState: WebGLState) {\r\n        this._webglState = webglState;\r\n    }\r\n\r\n    public drawMode: EDrawMode = EDrawMode.TRIANGLES;\r\n    // public blend:boolean = false;\r\n    // public vaoManager:VAOManager = null;\r\n\r\n    public abstract execute(): void;\r\n\r\n    @virtual\r\n    public init() {\r\n    }\r\n\r\n    @virtual\r\n    public dispose() {\r\n    }\r\n\r\n    protected drawElements(indexBuffer: ElementBuffer) {\r\n        var startOffset: number = 0,\r\n            gl = DeviceManager.getInstance().gl;\r\n\r\n        BufferTable.bindIndexBuffer(indexBuffer);\r\n\r\n        GlUtils.drawElements(gl[this.drawMode], indexBuffer.count, gl[indexBuffer.type], indexBuffer.typeSize * startOffset);\r\n    }\r\n\r\n    protected drawArray(vertexBuffer: ArrayBuffer) {\r\n        var startOffset: number = 0,\r\n            gl = DeviceManager.getInstance().gl;\r\n\r\n        GlUtils.drawArrays(gl[this.drawMode], startOffset, vertexBuffer.count);\r\n    }\r\n}","import { RenderCommand } from \"./RenderCommand\";\r\nimport { requireGetter, assert } from \"../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\nimport { BufferContainer } from \"../../component/geometry/data/BufferContainer\";\r\nimport { Material } from \"../../material/Material\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { Program } from \"../program/Program\";\r\n\r\nexport abstract class QuadCommand extends RenderCommand {\r\n    get program() {\r\n        return this.material.program;\r\n    }\r\n\r\n    @requireGetter(function() {\r\n        assert(!!this.mMatrix && !!this.vMatrix && !!this.pMatrix, Log.info.FUNC_NOT_EXIST(\"mMatrix or vMatrix or pMatrix\"));\r\n    })\r\n    get mvpMatrix() {\r\n        return this.mMatrix.applyMatrix(this.vMatrix, true).applyMatrix(this.pMatrix, false);\r\n    }\r\n\r\n    @requireGetter(function() {\r\n        assert(!!this.vMatrix && !!this.pMatrix, Log.info.FUNC_NOT_EXIST(\"vMatrix or pMatrix\"));\r\n    })\r\n    get vpMatrix() {\r\n        return this.vMatrix.applyMatrix(this.pMatrix, true);\r\n    }\r\n\r\n    public mMatrix: Matrix4 = null;\r\n    public vMatrix: Matrix4 = null;\r\n    public pMatrix: Matrix4 = null;\r\n    public buffers: BufferContainer = null;\r\n    public material: Material = null;\r\n    public target: GameObject = null;\r\n\r\n    public sortId: number = null;\r\n\r\n    public execute() {\r\n        var material = this.material;\r\n\r\n        material.updateShader(this);\r\n\r\n        this.draw(material);\r\n    }\r\n\r\n    protected abstract draw(material: Material): void;\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { QuadCommand } from \"./QuadCommand\";\r\nimport { Matrix3 } from \"../../math/Matrix3\";\r\nimport { Material } from \"../../material/Material\";\r\nimport { ArrayBuffer } from \"../buffer/ArrayBuffer\";\r\nimport { ElementBuffer } from \"../buffer/ElementBuffer\";\r\nimport { EBufferDataType } from \"../buffer/EBufferDataType\";\r\n\r\n@registerClass(\"SingleDrawCommand\")\r\nexport class SingleDrawCommand extends QuadCommand {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public normalMatrix: Matrix3 = null;\r\n\r\n    protected draw(material: Material) {\r\n        var vertexBuffer: ArrayBuffer = null,\r\n            indexBuffer: ElementBuffer = this.buffers.getChild(EBufferDataType.INDICE);\r\n\r\n        this.webglState.setState(material);\r\n\r\n        if (indexBuffer) {\r\n            this.drawElements(indexBuffer);\r\n        }\r\n        else {\r\n            vertexBuffer = this.buffers.getChild(EBufferDataType.VERTICE);\r\n\r\n            this.drawArray(vertexBuffer);\r\n        }\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { RendererComponent } from \"./RendererComponent\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { Renderer } from \"../../renderer/renderer/Renderer\";\r\nimport { requireCheck, it } from \"../../definition/typescript/decorator/contract\";\r\nimport { Geometry } from \"../geometry/Geometry\";\r\nimport { CameraController } from \"../camera/controller/CameraController\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { QuadCommand } from \"../../renderer/command/QuadCommand\";\r\nimport { Material } from \"../../material/Material\";\r\nimport { SingleDrawCommand } from \"../../renderer/command/SingleDrawCommand\";\r\n\r\n@registerClass(\"MeshRenderer\")\r\nexport class MeshRenderer extends RendererComponent {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public entityObject: GameObject;\r\n\r\n    public render(renderer: Renderer, target: GameObject, camera: GameObject) {\r\n        var geometry = target.getGeometry();\r\n\r\n        if (!geometry) {\r\n            return;\r\n        }\r\n\r\n        renderer.addCommand(this.createDrawCommand(target, geometry, camera));\r\n    }\r\n\r\n    @requireCheck(function(target: GameObject, geometry: Geometry, camera: GameObject) {\r\n        var controller = camera.getComponent<CameraController>(CameraController);\r\n\r\n        it(\"camera must add Camera Component\", () => {\r\n            expect(!!controller && !!controller.camera).true;\r\n        });\r\n        it(\"Mesh must add geometry component\", () => {\r\n            expect(!!geometry).true;\r\n        });\r\n    })\r\n    protected createDrawCommand(target: GameObject, geometry: Geometry, camera: GameObject) {\r\n        var cmd: QuadCommand = null,\r\n            cameraComponent = camera.getComponent<CameraController>(CameraController),\r\n            material: Material = geometry.material;\r\n\r\n        cmd = this._createCommand(target, material);\r\n\r\n        cmd.target = target;\r\n\r\n        cmd.buffers = geometry.buffers;\r\n\r\n        // cmd.vaoManager = geometry.vaoManager;\r\n\r\n        cmd.drawMode = geometry.drawMode;\r\n\r\n        cmd.mMatrix = target.transform.localToWorldMatrix;\r\n\r\n\r\n        if (target.data && target.data.vMatrix) {\r\n            cmd.vMatrix = target.data.vMatrix;\r\n        }\r\n        else {\r\n            cmd.vMatrix = cameraComponent.worldToCameraMatrix;\r\n        }\r\n\r\n        if (target.data && target.data.pMatrix) {\r\n            cmd.pMatrix = target.data.pMatrix;\r\n        }\r\n        else {\r\n            cmd.pMatrix = cameraComponent.pMatrix;\r\n        }\r\n\r\n        cmd.material = material;\r\n\r\n\r\n        // cmd.blend = material.blend;\r\n\r\n        return cmd;\r\n    }\r\n\r\n    private _createCommand(target: GameObject, material: Material) {\r\n        var cmd: any = null;\r\n\r\n        // if(isHardwareInstance){\r\n        //     if(isOneToManyInstance){\r\n        //         cmd = this._createOneToManyHardwareInstanceCommand(target, material, glslData);\r\n        //     }\r\n        //     else{\r\n        //         cmd = this._createOneToOneHardwareInstanceCommand(target, material, glslData);\r\n        //     }\r\n        // }\r\n        // else if(isBatchInstance){\r\n        //     if(isOneToManyInstance){\r\n        //         cmd = this._createOneToManyBatchInstanceCommand(target, material, glslData);\r\n        //     }\r\n        //     else{\r\n        //         cmd = this._createOneToOneBatchInstanceCommand(target, material, glslData);\r\n        //     }\r\n        // }\r\n        // else{\r\n        cmd = SingleDrawCommand.create();\r\n\r\n        cmd.normalMatrix = this.entityObject.transform.normalMatrix;\r\n        // }\r\n\r\n        return cmd;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Transform } from \"./Transform\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\nimport { cacheGetter } from \"../../definition/typescript/decorator/cache\";\r\nimport { Vector3 } from \"../../math/Vector3\";\r\nimport { cloneAttributeAsCloneable, cloneAttributeAsBasicType } from \"../../definition/typescript/decorator/clone\";\r\nimport { Quaternion } from \"../../math/Quaternion\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { Matrix3 } from \"../../math/Matrix3\";\r\nimport { ETransformState } from \"./ETransformState\";\r\nimport { EventManager } from \"../../event/EventManager\";\r\nimport { CustomEvent } from \"../../event/object/CustomEvent\";\r\nimport { EEngineEvent } from \"../../event/EEngineEvent\";\r\nimport { Log } from \"../../utils/Log\";\r\n\r\n@registerClass(\"ThreeDTransform\")\r\nexport class ThreeDTransform extends Transform {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _localToWorldMatrix: Matrix4 = null;\r\n    @cacheGetter(function() {\r\n        return this._localToWorldMatrixCache !== null;\r\n    }, function() {\r\n        return this._localToWorldMatrixCache;\r\n    }, function(result) {\r\n        this._localToWorldMatrixCache = result;\r\n    })\r\n    get localToWorldMatrix() {\r\n        if (this._isUserSpecifyTheLocalToWorldMatrix) {\r\n            return this._userLocalToWorldMatrix;\r\n        }\r\n\r\n        return this.getMatrix<Matrix4>(\"sync\", \"_localToWorldMatrix\");\r\n    }\r\n    set localToWorldMatrix(matrix: Matrix4) {\r\n        this._isUserSpecifyTheLocalToWorldMatrix = true;\r\n\r\n        this._userLocalToWorldMatrix = matrix;\r\n\r\n        this.isTransform = true;\r\n    }\r\n\r\n    @cacheGetter(function() {\r\n        return this._normalMatrixCache !== null;\r\n    }, function() {\r\n        return this._normalMatrixCache;\r\n    }, function(result) {\r\n        this._normalMatrixCache = result;\r\n    })\r\n    get normalMatrix() {\r\n        return this.localToWorldMatrix.invertTo3x3().transpose();\r\n    }\r\n\r\n    private _position: Vector3 = Vector3.create();\r\n    @cloneAttributeAsCloneable()\r\n    @cacheGetter(function() {\r\n        return this._positionCache !== null;\r\n    }, function() {\r\n        return this._positionCache;\r\n    }, function(result) {\r\n        this._positionCache = result;\r\n    })\r\n    get position() {\r\n        this._position = this.localToWorldMatrix.getTranslation();\r\n\r\n        return this._position;\r\n    }\r\n    set position(position: Vector3) {\r\n        if (this.p_parent === null) {\r\n            this._localPosition = position;\r\n        }\r\n        else {\r\n            this._localPosition = this.p_parent.localToWorldMatrix.clone().invert().multiplyPoint(position);\r\n        }\r\n\r\n        this.isTranslate = true;\r\n    }\r\n\r\n    private _rotation: Quaternion = Quaternion.create(0, 0, 0, 1);\r\n    @cloneAttributeAsCloneable()\r\n    @cacheGetter(function() {\r\n        return this._rotationCache !== null;\r\n    }, function() {\r\n        return this._rotationCache;\r\n    }, function(result) {\r\n        this._rotationCache = result;\r\n    })\r\n    get rotation() {\r\n        this._rotation.setFromMatrix(this.localToWorldMatrix);\r\n\r\n        return this._rotation;\r\n    }\r\n    set rotation(rotation: Quaternion) {\r\n        if (this.p_parent === null) {\r\n            this._localRotation = rotation;\r\n        }\r\n        else {\r\n            this._localRotation = this.p_parent.rotation.clone().invert().multiply(rotation);\r\n        }\r\n\r\n        this.isRotate = true;\r\n    }\r\n\r\n    private _scale: Vector3 = Vector3.create(1, 1, 1);\r\n    @cloneAttributeAsCloneable()\r\n    @cacheGetter(function() {\r\n        return this._scaleCache !== null;\r\n    }, function() {\r\n        return this._scaleCache;\r\n    }, function(result) {\r\n        this._scaleCache = result;\r\n    })\r\n    get scale() {\r\n        this._scale = this.localToWorldMatrix.getScale();\r\n\r\n        return this._scale;\r\n    }\r\n    set scale(scale: Vector3) {\r\n        if (this.p_parent === null) {\r\n            this._localScale = scale;\r\n        }\r\n        else {\r\n            this._localScale = this.p_parent.localToWorldMatrix.clone().invert().multiplyVector3(scale);\r\n        }\r\n\r\n        this.isScale = true;\r\n    }\r\n\r\n    private _eulerAngles: Vector3 = null;\r\n    @cacheGetter(function() {\r\n        return this._eulerAnglesCache !== null;\r\n    }, function() {\r\n        return this._eulerAnglesCache;\r\n    }, function(result) {\r\n        this._eulerAnglesCache = result;\r\n    })\r\n    get eulerAngles() {\r\n        this._eulerAngles = this.localToWorldMatrix.getEulerAngles();\r\n        return this._eulerAngles;\r\n    }\r\n    set eulerAngles(eulerAngles: Vector3) {\r\n        this._localRotation.setFromEulerAngles(eulerAngles);\r\n\r\n        if (this.p_parent !== null) {\r\n            this._localRotation = this.p_parent.rotation.clone().invert().multiply(this._localRotation);\r\n        }\r\n\r\n        this.isRotate = true;\r\n    }\r\n\r\n    private _localPosition: Vector3 = Vector3.create(0, 0, 0);\r\n    @cloneAttributeAsCloneable()\r\n    get localPosition() {\r\n        return this._localPosition;\r\n    }\r\n    set localPosition(position: Vector3) {\r\n        this._localPosition = position;\r\n\r\n        this.isLocalTranslate = true;\r\n    }\r\n\r\n    private _localRotation: Quaternion = Quaternion.create(0, 0, 0, 1);\r\n    @cloneAttributeAsCloneable()\r\n    get localRotation() {\r\n        return this._localRotation;\r\n    }\r\n    set localRotation(rotation: Quaternion) {\r\n        this._localRotation = rotation;\r\n\r\n        this.isLocalRotate = true;\r\n    }\r\n\r\n    private _localEulerAngles: Vector3 = null;\r\n    @cacheGetter(function() {\r\n        return this._localEulerAnglesCache !== null;\r\n    }, function() {\r\n        return this._localEulerAnglesCache;\r\n    }, function(result) {\r\n        this._localEulerAnglesCache = result;\r\n    })\r\n    get localEulerAngles() {\r\n        this._localEulerAngles = this._localRotation.getEulerAngles();\r\n\r\n        return this._localEulerAngles;\r\n    }\r\n    set localEulerAngles(localEulerAngles: Vector3) {\r\n        this._localRotation.setFromEulerAngles(localEulerAngles);\r\n\r\n        this.isLocalRotate = true;\r\n    }\r\n\r\n    private _localScale: Vector3 = Vector3.create(1, 1, 1);\r\n    @cloneAttributeAsCloneable()\r\n    get localScale() {\r\n        return this._localScale;\r\n    }\r\n    set localScale(scale: Vector3) {\r\n        this._localScale = scale;\r\n\r\n        this.isLocalScale = true;\r\n    }\r\n\r\n    get up() {\r\n        return this.localToWorldMatrix.getY().normalize();\r\n    }\r\n\r\n    get right() {\r\n        return this.localToWorldMatrix.getX().normalize();\r\n    }\r\n\r\n    get forward() {\r\n        //todo why scale(-1)?\r\n        //return this.localToWorldMatrix.getZ().normalize();\r\n        return this.localToWorldMatrix.getZ().normalize().scale(-1);\r\n    }\r\n\r\n\r\n    public dirtyWorld: boolean = null;\r\n\r\n    protected p_parent: ThreeDTransform;\r\n    protected children: Collection<ThreeDTransform>;\r\n\r\n    private _localToParentMatrix: Matrix4 = Matrix4.create();\r\n    private _localToWorldMatrixCache: Matrix4 = null;\r\n    private _positionCache: Vector3 = null;\r\n    private _rotationCache: Vector3 = null;\r\n    private _scaleCache: Vector3 = null;\r\n    private _eulerAnglesCache: Vector3 = null;\r\n    private _localEulerAnglesCache: Vector3 = null;\r\n    private _normalMatrixCache: Matrix3 = null;\r\n    @cloneAttributeAsBasicType()\r\n    private _isUserSpecifyTheLocalToWorldMatrix: boolean = false;\r\n    @cloneAttributeAsCloneable()\r\n    private _userLocalToWorldMatrix = null;\r\n\r\n    public sync() {\r\n        if (this.dirtyLocal) {\r\n            this._localToParentMatrix.setTRS(this._localPosition, this._localRotation, this._localScale);\r\n\r\n            this.dirtyLocal = false;\r\n            this.dirtyWorld = true;\r\n        }\r\n\r\n        if (this.dirtyWorld) {\r\n            if (this.p_parent === null) {\r\n                this._localToWorldMatrix = this._localToParentMatrix.clone();\r\n            }\r\n            else {\r\n                this._localToWorldMatrix = this.p_parent.localToWorldMatrix.clone().multiply(this._localToParentMatrix);\r\n            }\r\n\r\n            this.dirtyWorld = false;\r\n\r\n            this.children.forEach((child: ThreeDTransform) => {\r\n                child.dirtyWorld = true;\r\n            });\r\n        }\r\n    }\r\n\r\n    public translateLocal(translation: Vector3);\r\n    public translateLocal(x: number, y: number, z: number);\r\n\r\n\r\n    public translateLocal(...args) {\r\n        var translation = null;\r\n\r\n        if (args.length === 3) {\r\n            translation = Vector3.create(args[0], args[1], args[2]);\r\n        }\r\n        else {\r\n            translation = args[0];\r\n        }\r\n\r\n        this._localPosition = this._localPosition.add(this._localRotation.multiplyVector3(translation));\r\n\r\n        this.isTranslate = true;\r\n\r\n        return this;\r\n    }\r\n\r\n    public translate(translation: Vector3);\r\n    public translate(x: number, y: number, z: number);\r\n\r\n    public translate(...args) {\r\n        var translation = null;\r\n\r\n        if (args.length === 3) {\r\n            translation = Vector3.create(args[0], args[1], args[2]);\r\n        }\r\n        else {\r\n            translation = args[0];\r\n        }\r\n\r\n        this.position = translation.add(this.position);\r\n\r\n        return this;\r\n    }\r\n\r\n    public rotate(eulerAngles: Vector3);\r\n    public rotate(x: number, y: number, z: number);\r\n\r\n    public rotate(...args) {\r\n        var eulerAngles = null,\r\n            quaternion = Quaternion.create();\r\n\r\n        if (args.length === 3) {\r\n            eulerAngles = Vector3.create(args[0], args[1], args[2]);\r\n        }\r\n        else {\r\n            eulerAngles = args[0];\r\n        }\r\n\r\n        quaternion.setFromEulerAngles(eulerAngles);\r\n\r\n        if (this.p_parent === null) {\r\n            this._localRotation = quaternion.multiply(this._localRotation);\r\n        }\r\n        else {\r\n            //todo why?\r\n            quaternion = this.p_parent.rotation.clone().invert().multiply(quaternion);\r\n            this._localRotation = quaternion.multiply(this.rotation);\r\n        }\r\n\r\n        this.isRotate = true;\r\n\r\n        return this;\r\n    }\r\n\r\n    public rotateLocal(eulerAngles: Vector3);\r\n    public rotateLocal(x: number, y: number, z: number);\r\n\r\n    public rotateLocal(...args) {\r\n        var eulerAngles = null,\r\n            quaternion = Quaternion.create();\r\n\r\n        if (args.length === 3) {\r\n            eulerAngles = Vector3.create(args[0], args[1], args[2]);\r\n        }\r\n        else {\r\n            eulerAngles = args[0];\r\n        }\r\n\r\n        quaternion.setFromEulerAngles(eulerAngles);\r\n\r\n        this._localRotation.multiply(quaternion);\r\n\r\n        this.isRotate = true;\r\n\r\n        return this;\r\n    }\r\n\r\n    public rotateAround(angle: number, center: Vector3, axis: Vector3);\r\n    public rotateAround(angle: number, centerX: number, centerY: number, centerZ: number, axisX: number, axisY: number, axisZ: number);\r\n\r\n    public rotateAround(...args) {\r\n        var angle = null,\r\n            center = null,\r\n            axis = null,\r\n            rot: Quaternion = null,\r\n            dir: Vector3 = null;\r\n\r\n        if (args.length === 3) {\r\n            angle = args[0];\r\n            center = args[1];\r\n            axis = args[2];\r\n        }\r\n        else {\r\n            angle = args[0];\r\n            center = Vector3.create(args[1], args[2], args[3]);\r\n            axis = Vector3.create(args[4], args[5], args[6]);\r\n        }\r\n\r\n        rot = Quaternion.create().setFromAxisAngle(angle, axis);\r\n        // find current direction relative to center\r\n        dir = this.position.clone().sub(center);\r\n\r\n        // rotate the direction\r\n        dir = rot.multiplyVector3(dir);\r\n\r\n        // define new position\r\n        this.position = center.add(dir);\r\n        //todo why \"this.rotation = this.rotation.multiply(rot)\" will cause entityObject rotate direction around self?\r\n        this.rotation = rot.multiply(this.rotation);\r\n\r\n        return this;\r\n    }\r\n\r\n    public lookAt(target: Vector3);\r\n    public lookAt(targetX: number, targetY: number, targetZ: number);\r\n    public lookAt(target: Vector3, up: Vector3);\r\n    public lookAt(targetX: number, targetY: number, targetZ: number, upX: number, upY: number, upZ: number);\r\n\r\n    public lookAt(...args) {\r\n        var target = null,\r\n            up = null;\r\n\r\n        if (args.length === 1) {\r\n            target = args[0];\r\n            up = Vector3.up;\r\n        }\r\n        else if (args.length === 2) {\r\n            target = args[0];\r\n            up = args[1];\r\n        }\r\n        else if (args.length === 3) {\r\n            target = Vector3.create(args[0], args[1], args[2]);\r\n            up = Vector3.up;\r\n        }\r\n        else {\r\n            target = Vector3.create(args[0], args[1], args[2]);\r\n            up = Vector3.create(args[3], args[4], args[5]);\r\n        }\r\n\r\n        this.rotation = Quaternion.create().setFromMatrix(Matrix4.create().setLookAt(this.position, target, up));\r\n\r\n        return this;\r\n    }\r\n\r\n    protected clearCache() {\r\n        this._localToWorldMatrixCache = null;\r\n        this._normalMatrixCache = null;\r\n        this._positionCache = null;\r\n        this._rotationCache = null;\r\n        this._scaleCache = null;\r\n        this._eulerAnglesCache = null;\r\n        this._localEulerAnglesCache = null;\r\n    }\r\n\r\n    protected handleWhenSetTransformState(transformState?: ETransformState): void {\r\n        var eventName: string = null;\r\n\r\n        if (transformState === void 0) {\r\n            EventManager.trigger(this.entityObject, CustomEvent.create(<any>EEngineEvent.TRANSFORM_TRANSLATE));\r\n            EventManager.trigger(this.entityObject, CustomEvent.create(<any>EEngineEvent.TRANSFORM_ROTATE));\r\n            EventManager.trigger(this.entityObject, CustomEvent.create(<any>EEngineEvent.TRANSFORM_SCALE));\r\n\r\n            return;\r\n        }\r\n\r\n        switch (transformState) {\r\n            case ETransformState.ISTRANSLATE:\r\n                eventName = <any>EEngineEvent.TRANSFORM_TRANSLATE;\r\n                break;\r\n            case ETransformState.ISROTATE:\r\n                eventName = <any>EEngineEvent.TRANSFORM_ROTATE;\r\n                break;\r\n            case ETransformState.ISSCALE:\r\n                eventName = <any>EEngineEvent.TRANSFORM_SCALE;\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_UNKNOW(`transformState:${transformState}`));\r\n                break;\r\n        }\r\n\r\n        EventManager.trigger(this.entityObject, CustomEvent.create(eventName));\r\n    }\r\n}","export var DebugConfig = {\r\n    isTest: false,\r\n    debugCollision: false,\r\n    showDebugPanel: false\r\n}","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\n\r\nexport class ConcatObserver extends Observer {\r\n    public static create(currentObserver: IObserver, startNextStream: Function) {\r\n        return new this(currentObserver, startNextStream);\r\n    }\r\n\r\n    //private currentObserver:IObserver = null;\r\n    protected currentObserver: any = null;\r\n    private _startNextStream: Function = null;\r\n\r\n    constructor(currentObserver: IObserver, startNextStream: Function) {\r\n        super(null, null, null);\r\n\r\n        this.currentObserver = currentObserver;\r\n        this._startNextStream = startNextStream;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        /*!\r\n        if \"this.currentObserver.next\" error, it will pase to this.currentObserver->onError.\r\n        so it shouldn't invoke this.currentObserver.error here again!\r\n         */\r\n        //try{\r\n        this.currentObserver.next(value);\r\n        //}\r\n        //catch(e){\r\n        //    this.currentObserver.error(e);\r\n        //}\r\n    }\r\n\r\n    protected onError(error) {\r\n        this.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        //this.currentObserver.completed();\r\n        this._startNextStream();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { fromPromise } from \"../global/Operator\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { ConcatObserver } from \"../observer/ConcatObserver\";\r\nimport { ClassMapUtils } from \"../utils/ClassMapUtils\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"ConcatStream\")\r\nexport class ConcatStream extends BaseStream {\r\n    public static create(sources: Array<Stream>) {\r\n        var obj = new this(sources);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _sources: Collection<Stream> = Collection.create<Stream>();\r\n\r\n    constructor(sources: Array<Stream>) {\r\n        super(null);\r\n\r\n        var self = this;\r\n\r\n        //todo don't set scheduler here?\r\n        this.scheduler = sources[0].scheduler;\r\n\r\n        sources.forEach((source) => {\r\n            if (JudgeUtils.isPromise(source)) {\r\n                self._sources.addChild(fromPromise(source));\r\n            }\r\n            else {\r\n                self._sources.addChild(source);\r\n            }\r\n        });\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this,\r\n            count = this._sources.getCount(),\r\n            d = GroupDisposable.create();\r\n\r\n        function loopRecursive(i) {\r\n            if (i === count) {\r\n                observer.completed();\r\n\r\n                return;\r\n            }\r\n\r\n            d.add(self._sources.getChild(i).buildStream(ConcatObserver.create(\r\n                observer, () => {\r\n                    loopRecursive(i + 1);\r\n                })\r\n            ));\r\n        }\r\n\r\n        this.scheduler.publishRecursive(observer, 0, loopRecursive);\r\n\r\n        return GroupDisposable.create(d);\r\n    }\r\n}\r\n","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\n\r\nexport class IgnoreElementsObserver extends Observer {\r\n    public static create(currentObserver: IObserver) {\r\n        return new this(currentObserver);\r\n    }\r\n\r\n    private _currentObserver: IObserver = null;\r\n\r\n    constructor(currentObserver: IObserver) {\r\n        super(null, null, null);\r\n\r\n        this._currentObserver = currentObserver;\r\n    }\r\n\r\n    protected onNext(value) {\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this._currentObserver.completed();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { IgnoreElementsObserver } from \"../observer/IgnoreElementsObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"IgnoreElementsStream\")\r\nexport class IgnoreElementsStream extends BaseStream {\r\n    public static create(source: Stream) {\r\n        var obj = new this(source);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n\r\n    constructor(source: Stream) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        return this._source.buildStream(IgnoreElementsObserver.create(observer));\r\n    }\r\n}\r\n","import { root } from \"../global/Variable\";\r\n\r\nroot.requestNextAnimationFrame = (function() {\r\n    var originalRequestAnimationFrame = undefined,\r\n        wrapper = undefined,\r\n        callback = undefined,\r\n        geckoVersion = null,\r\n        userAgent = root.navigator && root.navigator.userAgent,\r\n        index = 0,\r\n        self = this;\r\n\r\n    wrapper = function(time) {\r\n        time = root.performance.now();\r\n        self.callback(time);\r\n    };\r\n\r\n    /*!\r\n     bug!\r\n     below code:\r\n     when invoke b after 1s, will only invoke b, not invoke a!\r\n\r\n     function a(time){\r\n     console.log(\"a\", time);\r\n     webkitRequestAnimationFrame(a);\r\n     }\r\n\r\n     function b(time){\r\n     console.log(\"b\", time);\r\n     webkitRequestAnimationFrame(b);\r\n     }\r\n\r\n     a();\r\n\r\n     setTimeout(b, 1000);\r\n\r\n\r\n\r\n     so use requestAnimationFrame priority!\r\n     */\r\n    if (root.requestAnimationFrame) {\r\n        return requestAnimationFrame;\r\n    }\r\n\r\n\r\n    // Workaround for Chrome 10 bug where Chrome\r\n    // does not pass the time to the animation function\r\n\r\n    if (root.webkitRequestAnimationFrame) {\r\n        // Define the wrapper\r\n\r\n        // Make the switch\r\n\r\n        originalRequestAnimationFrame = root.webkitRequestAnimationFrame;\r\n\r\n        root.webkitRequestAnimationFrame = function(callback, element) {\r\n            self.callback = callback;\r\n\r\n            // Browser calls the wrapper and wrapper calls the callback\r\n\r\n            return originalRequestAnimationFrame(wrapper, element);\r\n        }\r\n    }\r\n\r\n    //修改time参数\r\n    if (root.msRequestAnimationFrame) {\r\n        originalRequestAnimationFrame = root.msRequestAnimationFrame;\r\n\r\n        root.msRequestAnimationFrame = function(callback) {\r\n            self.callback = callback;\r\n\r\n            return originalRequestAnimationFrame(wrapper);\r\n        }\r\n    }\r\n\r\n    // Workaround for Gecko 2.0, which has a bug in\r\n    // mozRequestAnimationFrame() that restricts animations\r\n    // to 30-40 fps.\r\n\r\n    if (root.mozRequestAnimationFrame) {\r\n        // Check the Gecko version. Gecko is used by browsers\r\n        // other than Firefox. Gecko 2.0 corresponds to\r\n        // Firefox 4.0.\r\n\r\n        index = userAgent.indexOf('rv:');\r\n\r\n        if (userAgent.indexOf('Gecko') != -1) {\r\n            geckoVersion = userAgent.substr(index + 3, 3);\r\n\r\n            if (geckoVersion === '2.0') {\r\n                // Forces the return statement to fall through\r\n                // to the setTimeout() function.\r\n\r\n                root.mozRequestAnimationFrame = undefined;\r\n            }\r\n        }\r\n    }\r\n\r\n    return root.webkitRequestAnimationFrame ||\r\n        root.mozRequestAnimationFrame ||\r\n        root.oRequestAnimationFrame ||\r\n        root.msRequestAnimationFrame ||\r\n\r\n        function(callback, element) {\r\n            var start,\r\n                finish;\r\n\r\n            root.setTimeout(function() {\r\n                start = root.performance.now();\r\n                callback(start);\r\n                finish = root.performance.now();\r\n\r\n                self.timeout = 1000 / 60 - (finish - start);\r\n\r\n            }, self.timeout);\r\n        };\r\n}());\r\n\r\nroot.cancelNextRequestAnimationFrame = root.cancelRequestAnimationFrame\r\n    || root.webkitCancelAnimationFrame\r\n    || root.webkitCancelRequestAnimationFrame\r\n    || root.mozCancelRequestAnimationFrame\r\n    || root.oCancelRequestAnimationFrame\r\n    || root.msCancelRequestAnimationFrame\r\n    || clearTimeout;\r\n\r\n","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { GameObject } from \"../core/entityObject/gameObject/GameObject\";\r\n\r\n@registerClass(\"RenderUtils\")\r\nexport class RenderUtils {\r\n    public static getGameObjectRenderList(sourceList: Collection<GameObject>) {\r\n        var renderList = [];\r\n        // GameObjectLOD:any = ClassUtils.getClass(\"GameObjectLOD\");\r\n\r\n        sourceList.forEach((child: GameObject) => {\r\n            var activeGameObject: GameObject = null;\r\n\r\n            activeGameObject = child;\r\n\r\n            // if(activeGameObject.isVisible && !InstanceUtils.isObjectInstance(activeGameObject)){\r\n            if (activeGameObject.isVisible) {\r\n                renderList.push(activeGameObject);\r\n            }\r\n        });\r\n\r\n        //todo optimize:use temp Collection\r\n        return Collection.create<GameObject>(renderList);\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { EntityObject } from \"../EntityObject\";\r\nimport { ThreeDTransform } from \"../../../component/transform/ThreeDTransform\";\r\nimport { cloneAttributeAsBasicType } from \"../../../definition/typescript/decorator/clone\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { RenderUtils } from \"../../../utils/RenderUtils\";\r\n\r\n@registerClass(\"GameObject\")\r\nexport class GameObject extends EntityObject {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        obj.initWhenCreate();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public transform: ThreeDTransform;\r\n    public parent: GameObject;\r\n\r\n    @cloneAttributeAsBasicType()\r\n    public renderGroup: number = 0;\r\n    @cloneAttributeAsBasicType()\r\n    public renderPriority: number = 0;\r\n    @cloneAttributeAsBasicType()\r\n    public isVisible: boolean = true;\r\n\r\n    protected children: Collection<GameObject>;\r\n\r\n    public initWhenCreate() {\r\n        super.initWhenCreate();\r\n\r\n        this.name = `gameObject${String(this.uid)}`;\r\n    }\r\n\r\n    protected createTransform() {\r\n        return ThreeDTransform.create();\r\n    }\r\n\r\n    protected getRenderList() {\r\n        return RenderUtils.getGameObjectRenderList(this.getChildren());\r\n    }\r\n}","import { EntityObject } from \"../EntityObject\";\r\n\r\nexport abstract class Scene extends EntityObject {\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { Scene } from \"../Scene\";\r\nimport { GameObject } from \"../../gameObject/GameObject\";\r\nimport { requireSetter, assert } from \"../../../../definition/typescript/decorator/contract\";\r\nimport { JudgeUtils } from \"../../../../utils/JudgeUtils\";\r\nimport { Log } from \"../../../../utils/Log\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { Renderer } from \"../../../../renderer/renderer/Renderer\";\r\nimport { RenderUtils } from \"../../../../utils/RenderUtils\";\r\nimport { CameraController } from \"../../../../component/camera/controller/CameraController\";\r\n\r\n@registerClass(\"GameObjectScene\")\r\nexport class GameObjectScene extends Scene {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _currentCamera: GameObject = null;\r\n    get currentCamera(): any {\r\n        return this._currentCamera || this._cameraList.getChild(0);\r\n    }\r\n    @requireSetter(function(arg: any) {\r\n        if (JudgeUtils.isNumber(arg)) {\r\n            let index: number = arg;\r\n\r\n            assert(!!this._cameraList.getChild(index), Log.info.FUNC_NOT_EXIST(\"current camera in cameraList\"));\r\n        }\r\n    })\r\n    set currentCamera(arg: any) {\r\n        if (JudgeUtils.isNumber(arg)) {\r\n            let index: number = arg;\r\n\r\n            this._currentCamera = this._cameraList.getChild(index);\r\n        }\r\n        else if (arg instanceof GameObject) {\r\n            let currentCamera: GameObject = arg;\r\n\r\n            this._currentCamera = currentCamera;\r\n        }\r\n    }\r\n\r\n    private _cameraList: Collection<GameObject> = Collection.create<GameObject>();\r\n\r\n    public addChild(child: GameObject): GameObject {\r\n        var cameraList = this._getCameras(child);\r\n\r\n        if (cameraList.getCount() > 0) {\r\n            this._cameraList.addChildren(cameraList);\r\n        }\r\n\r\n        return <GameObject>super.addChild(child);\r\n    }\r\n\r\n    public update(elapsed: number) {\r\n        var currentCamera = this._getCurrentCameraComponent();\r\n\r\n        if (currentCamera) {\r\n            currentCamera.update(elapsed);\r\n        }\r\n\r\n        super.update(elapsed);\r\n    }\r\n\r\n    public render(renderer: Renderer) {\r\n        // this.shadowManager.setShadowRenderListForCurrentLoop();\r\n        //\r\n        // this.renderTargetRendererManager.render(renderer, this.currentCamera);\r\n\r\n        super.render(renderer, this.currentCamera);\r\n    }\r\n\r\n    protected getRenderList() {\r\n        return RenderUtils.getGameObjectRenderList(this.getChildren());\r\n    }\r\n\r\n    protected createTransform() {\r\n        return null;\r\n    }\r\n\r\n    private _getCameras(gameObject: GameObject) {\r\n        return this._find(gameObject, this._isCamera);\r\n    }\r\n\r\n    private _find(gameObject: GameObject, judgeFunc) {\r\n        var self = this,\r\n            resultArr: Collection<GameObject> = Collection.create<GameObject>();\r\n        var find = (gameObject: GameObject) => {\r\n            if (judgeFunc.call(self, gameObject)) {\r\n                resultArr.addChild(gameObject);\r\n            }\r\n\r\n            gameObject.forEach((child: GameObject) => {\r\n                find(child);\r\n            });\r\n        }\r\n\r\n        find(gameObject);\r\n\r\n        return resultArr;\r\n    }\r\n\r\n    private _isCamera(child: GameObject) {\r\n        return child.hasComponent(CameraController);\r\n    }\r\n\r\n    private _getCurrentCameraComponent(): CameraController {\r\n        if (!this.currentCamera) {\r\n            return null;\r\n        }\r\n\r\n        return this.currentCamera.getComponent(CameraController);\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { EntityObject } from \"../EntityObject\";\r\nimport { GameObject } from \"../gameObject/GameObject\";\r\nimport { GameObjectScene } from \"./gameObjectScene/GameObjectScene\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { JudgeUtils } from \"../../../utils/JudgeUtils\";\r\n\r\n@registerClass(\"SceneDispatcher\")\r\nexport class SceneDispatcher extends EntityObject {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        obj.initWhenCreate();\r\n\r\n        return obj;\r\n    }\r\n\r\n    get currentCamera(): GameObject {\r\n        return this.gameObjectScene.currentCamera;\r\n    }\r\n    set currentCamera(arg: GameObject) {\r\n        this.gameObjectScene.currentCamera = arg;\r\n    }\r\n\r\n    public name: string = `scene${String(this.uid)}`;\r\n\r\n    public gameObjectScene: GameObjectScene = GameObjectScene.create();\r\n\r\n    public addChild(child: EntityObject): EntityObject {\r\n        if (child instanceof GameObject) {\r\n            this.gameObjectScene.addChild(child);\r\n        }\r\n        child.parent = this;\r\n\r\n        return this;\r\n    }\r\n\r\n    public dispose() {\r\n        this.gameObjectScene.dispose();\r\n    }\r\n\r\n    public hasChild(child: EntityObject): boolean {\r\n        if (child instanceof GameObject) {\r\n            return this.gameObjectScene.hasChild(child);\r\n        }\r\n    }\r\n\r\n    public addChildren(children: EntityObject);\r\n    public addChildren(children: Array<EntityObject>);\r\n    public addChildren(children: Collection<EntityObject>);\r\n\r\n    public addChildren(...args) {\r\n        if (args[0] instanceof EntityObject) {\r\n            let child: EntityObject = <EntityObject>args[0];\r\n\r\n            this.addChild(child);\r\n        }\r\n        if (args[0] instanceof Collection) {\r\n            let children: Collection<EntityObject> = <Collection<EntityObject>>args[0],\r\n                self = this;\r\n\r\n            children.forEach((child: EntityObject) => {\r\n                self.addChild(child);\r\n            });\r\n        }\r\n        else if (JudgeUtils.isArrayExactly(args[0])) {\r\n            let children: Array<EntityObject> = <Array<EntityObject>>args[0];\r\n\r\n            for (let child of children) {\r\n                this.addChild(child);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public getChildren() {\r\n        return this.gameObjectScene.getChildren();\r\n    }\r\n\r\n    protected createTransform() {\r\n        return null;\r\n    }\r\n}","import { ensure, assert } from \"../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../Log\";\r\n\r\nexport abstract class TimeController {\r\n    public elapsed: number = null;\r\n    public pauseElapsed: number = 0;\r\n    public pauseTime: number = null;\r\n    public startTime: number = null;\r\n\r\n    public start() {\r\n        this.startTime = this.getNow();\r\n        this.pauseElapsed = null;\r\n    }\r\n\r\n    public stop() {\r\n        this.startTime = null;\r\n    }\r\n\r\n    public pause() {\r\n        this.pauseTime = this.getNow();\r\n    }\r\n\r\n    public resume() {\r\n        this.pauseElapsed += this.getNow() - this.pauseTime;\r\n        this.pauseTime = null;\r\n    }\r\n\r\n    @ensure(function() {\r\n        assert(this.elapsed >= 0, Log.info.FUNC_SHOULD(`elapsed:${this.elapsed}`, \">= 0\"));\r\n    })\r\n    public computeElapseTime(time: number) {\r\n        if (this.pauseElapsed) {\r\n            this.elapsed = time - this.pauseElapsed - this.startTime;\r\n        }\r\n        else {\r\n            this.elapsed = time - this.startTime;\r\n        }\r\n\r\n        if (this.elapsed < 0) {\r\n            this.elapsed = 0;\r\n        }\r\n\r\n        return this.elapsed;\r\n    }\r\n\r\n    protected abstract getNow();\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { TimeController } from \"./TimeController\";\r\nimport { root } from \"../../definition/Variable\";\r\n\r\nconst STARTING_FPS = 60,\r\n    GAMETIME_SCALE = 1000;\r\n\r\n@registerClass(\"DirectorTimeController\")\r\nexport class DirectorTimeController extends TimeController {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public gameTime: number = null;\r\n    public fps: number = null;\r\n    public isTimeChange: boolean = false;\r\n    public deltaTime: number = null;\r\n\r\n    private _lastTime: number = null;\r\n\r\n    public tick(time: number) {\r\n        this.deltaTime = this._lastTime !== null ? time - this._lastTime : time;\r\n        this._updateFps(this.deltaTime);\r\n        this.gameTime = time / GAMETIME_SCALE;\r\n\r\n        this._lastTime = time;\r\n    }\r\n\r\n    public start() {\r\n        super.start();\r\n\r\n        this.isTimeChange = true;\r\n        this.elapsed = 0;\r\n    }\r\n\r\n    public resume() {\r\n        super.resume();\r\n\r\n        this.isTimeChange = true;\r\n    }\r\n\r\n    protected getNow() {\r\n        return root.performance.now();\r\n    }\r\n\r\n    private _updateFps(deltaTime: number) {\r\n        if (this._lastTime === null) {\r\n            this.fps = STARTING_FPS;\r\n        }\r\n        else {\r\n            this.fps = 1000 / deltaTime;\r\n        }\r\n    }\r\n}","import { WebGLState } from \"../state/WebGLState\";\r\nimport { BasicState } from \"../state/BasicState\";\r\nimport { RenderCommand } from \"../command/RenderCommand\";\r\nimport { virtual } from \"../../definition/typescript/decorator/virtual\";\r\n\r\nexport abstract class Renderer {\r\n    private _webglState: WebGLState = null;\r\n    get webglState() {\r\n        return this._webglState ? this._webglState : BasicState.create();\r\n    }\r\n    set webglState(webglState: WebGLState) {\r\n        this._webglState = webglState;\r\n    }\r\n\r\n    // public skyboxCommand:QuadCommand = null;\r\n\r\n    public abstract addCommand(command: RenderCommand): void;\r\n    public abstract hasCommand(): boolean;\r\n    public abstract render(): void;\r\n    public abstract clear(): void;\r\n\r\n    @virtual\r\n    public init() {\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { ensureGetter, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../utils/Log\";\r\nimport { Vector3 } from \"../math/Vector3\";\r\nimport { Vector4 } from \"../math/Vector4\";\r\nimport { cache } from \"../definition/typescript/decorator/cache\";\r\n\r\ndeclare var Math: any;\r\n\r\n@registerClass(\"Color\")\r\nexport class Color {\r\n    public static create(colorVal?: string) {\r\n        var obj = new this();\r\n\r\n        obj.initWhenCreate(colorVal);\r\n\r\n        return obj;\r\n    }\r\n\r\n    set dirty(dirty: boolean) {\r\n        if (dirty) {\r\n            this._clearCache();\r\n        }\r\n    }\r\n\r\n    private _r: number = null;\r\n    @ensureGetter(function(r: number) {\r\n        assert(r >= 0, Log.info.FUNC_SHOULD(\"r\", `>= 0, but actual is ${r}`));\r\n    })\r\n    get r() {\r\n        return this._r;\r\n    }\r\n    set r(r: number) {\r\n        if (this._r !== r) {\r\n            this.dirty = true;\r\n\r\n            this._r = r;\r\n        }\r\n    }\r\n\r\n    private _g: number = null;\r\n    @ensureGetter(function(g: number) {\r\n        assert(g >= 0, Log.info.FUNC_SHOULD(\"g\", `>= 0, but actual is ${g}`));\r\n    })\r\n    get g() {\r\n        return this._g;\r\n    }\r\n    set g(g: number) {\r\n        if (this._g !== g) {\r\n            this.dirty = true;\r\n\r\n            this._g = g;\r\n        }\r\n    }\r\n\r\n    private _b: number = null;\r\n    @ensureGetter(function(b: number) {\r\n        assert(b >= 0, Log.info.FUNC_SHOULD(\"b\", `>= 0, but actual is ${b}`));\r\n    })\r\n    get b() {\r\n        return this._b;\r\n    }\r\n    set b(b: number) {\r\n        if (this._b !== b) {\r\n            this.dirty = true;\r\n\r\n            this._b = b;\r\n        }\r\n    }\r\n\r\n    private _a: number = null;\r\n    @ensureGetter(function(a: number) {\r\n        assert(a >= 0, Log.info.FUNC_SHOULD(\"a\", `>= 0, but actual is ${a}`));\r\n    })\r\n    get a() {\r\n        return this._a;\r\n    }\r\n    set a(a: number) {\r\n        if (this._a !== a) {\r\n            this.dirty = true;\r\n\r\n            this._a = a;\r\n        }\r\n    }\r\n\r\n    private _colorString: string = null;\r\n    private _colorVec3Cache: Vector3 = null;\r\n    private _colorVec4Cache: Vector4 = null;\r\n\r\n    public initWhenCreate(colorVal?: string) {\r\n        if (!colorVal) {\r\n            return;\r\n        }\r\n\r\n        this._colorString = colorVal;\r\n        this._setColor(colorVal);\r\n    }\r\n\r\n    @cache(function() {\r\n        return this._colorVec3Cache !== null;\r\n    }, function() {\r\n        return this._colorVec3Cache;\r\n    }, function(result) {\r\n        this._colorVec3Cache = result;\r\n    })\r\n    public toVector3() {\r\n        return Vector3.create(this.r, this.g, this.b);\r\n    }\r\n\r\n    @cache(function() {\r\n        return this._colorVec4Cache !== null;\r\n    }, function() {\r\n        return this._colorVec4Cache;\r\n    }, function(result) {\r\n        this._colorVec4Cache = result;\r\n    })\r\n    public toVector4() {\r\n        return Vector4.create(this.r, this.g, this.b, this.a);\r\n    }\r\n\r\n    public toString() {\r\n        return this._colorString;\r\n    }\r\n\r\n    public clone() {\r\n        return Color.create(this._colorString);\r\n    }\r\n\r\n    public isEqual(color: Color) {\r\n        return this.r === color.r && this.g === color.g && this.b === color.b && this.a === color.a;\r\n    }\r\n\r\n    private _setColor(colorVal: string) {\r\n        const REGEX_RGBA = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*([^\\)]+)\\)$/i,\r\n            REGEX_RGBA_2 = /^rgba\\((\\d+\\.\\d+),\\s*(\\d+\\.\\d+),\\s*(\\d+\\.\\d+),\\s*([^\\)]+)\\)$/i,\r\n            REGEX_RGB = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/i,\r\n            REGEX_RGB_2 = /^rgb\\((\\d+\\.\\d+),\\s*(\\d+\\.\\d+),\\s*(\\d+\\.\\d+)\\)$/i,\r\n            REGEX_NUM = /^\\#([0-9a-f]{6})$/i;\r\n        var color = null;\r\n\r\n        // rgba(255,0,0,0)\r\n\r\n        if (REGEX_RGBA.test(colorVal)) {\r\n            color = REGEX_RGBA.exec(colorVal);\r\n\r\n            this.r = this._getColorValue(color, 1);\r\n            this.g = this._getColorValue(color, 2);\r\n            this.b = this._getColorValue(color, 3);\r\n            this.a = Number(color[4]);\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        // rgba(0.1,0.0,0.3,0.2)\r\n\r\n        if (REGEX_RGBA_2.test(colorVal)) {\r\n            color = REGEX_RGBA_2.exec(colorVal);\r\n\r\n            this.r = parseFloat(color[1]);\r\n            this.g = parseFloat(color[2]);\r\n            this.b = parseFloat(color[3]);\r\n            this.a = Number(color[4]);\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        // rgb(255,0,0)\r\n\r\n        if (REGEX_RGB.test(colorVal)) {\r\n            color = REGEX_RGB.exec(colorVal);\r\n\r\n            this.r = this._getColorValue(color, 1);\r\n            this.g = this._getColorValue(color, 2);\r\n            this.b = this._getColorValue(color, 3);\r\n            this.a = 1;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        /*!\r\n         it will cause ambiguity: rgb(x,x,x)\r\n         so the format should be:\r\n         rgb(x.x,x.x,x.x)\r\n         */\r\n        if (REGEX_RGB_2.test(colorVal)) {\r\n            color = REGEX_RGB_2.exec(colorVal);\r\n\r\n            this.r = parseFloat(color[1]);\r\n            this.g = parseFloat(color[2]);\r\n            this.b = parseFloat(color[3]);\r\n            this.a = 1;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n        // #ffffff\r\n\r\n        if (REGEX_NUM.test(colorVal)) {\r\n            color = REGEX_NUM.exec(colorVal);\r\n\r\n            this._setHex(parseInt(color[1], 16));\r\n\r\n            return this;\r\n\r\n        }\r\n    }\r\n\r\n    private _getColorValue(color, index, num = 255) {\r\n        return Math.min(num, parseInt(color[index], 10)) / num;\r\n    }\r\n\r\n    private _setHex(hex) {\r\n        hex = Math.floor(hex);\r\n\r\n        this.r = (hex >> 16 & 255) / 255;\r\n        this.g = (hex >> 8 & 255) / 255;\r\n        this.b = (hex & 255) / 255;\r\n        this.a = 1;\r\n\r\n        return this;\r\n    }\r\n\r\n    private _clearCache() {\r\n        this._colorVec3Cache = null;\r\n        this._colorVec4Cache = null;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Renderer } from \"./Renderer\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { RenderCommand } from \"../command/RenderCommand\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport { ensure, assert, requireCheck } from \"../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { DeviceManager, ESide } from \"../../device/DeviceManager\";\r\nimport { WebGLState } from \"../state/WebGLState\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\n\r\n/*!\r\nstart from 0, so its max is 32\r\n */\r\n// const RENDER_GROUP_MAX = 31,\r\n//     RENDER_PRIORITY_MAX = 31,\r\n//     /*!\r\n//     shader id start from 1, so its max is 1024\r\n//      */\r\n//     SHADER_ID_MAX = 1024,\r\n//     TEXTURE_ID_MAX = 1024,\r\n//     BUFFER_ID_MAX = 1024,\r\n//\r\n//     TOTAL_BIT = 30,\r\n//     RENDER_GROUP_MOVE_LEFT_BIT = TOTAL_BIT - 5,\r\n//     RENDER_PRIORITY_MOVE_LEFT_BIT = TOTAL_BIT - 5 - 5,\r\n//     SHADER_ID_MOVE_LEFT_BIT = TOTAL_BIT - 5 - 5 - 10;\r\n\r\n@registerClass(\"WebGLRenderer\")\r\nexport class WebGLRenderer extends Renderer {\r\n    public static create(): WebGLRenderer {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _commandQueue: Collection<RenderCommand> = Collection.create<RenderCommand>();\r\n\r\n    private _clearOptions: any = {\r\n        color: Color.create(\"#000000\")\r\n    };\r\n\r\n    @ensure(function() {\r\n        assert(!this._commandQueue.hasRepeatItems(), Log.info.FUNC_SHOULD_NOT(\"has duplicate render command\"));\r\n    })\r\n    public addCommand(command: RenderCommand) {\r\n        this._commandQueue.addChild(command);\r\n\r\n        command.init();\r\n    }\r\n\r\n    public hasCommand() {\r\n        // return this._commandQueue.getCount() > 0 || !!this.skyboxCommand;\r\n        return this._commandQueue.getCount() > 0;\r\n    }\r\n\r\n    public clear() {\r\n        DeviceManager.getInstance().clear(this._clearOptions);\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        assert(!!this.webglState, Log.info.FUNC_MUST_DEFINE(\"webglState\"));\r\n    })\r\n    public render() {\r\n        var deviceManager: DeviceManager = DeviceManager.getInstance(),\r\n            webglState: WebGLState = this.webglState;\r\n        // transparentCommandArr:Array<RenderCommand> = [],\r\n        // opaqueQuadCommandArr:Array<QuadCommand> = [];\r\n\r\n        this._commandQueue.forEach((command: RenderCommand) => {\r\n            command.webglState = webglState;\r\n\r\n            /*!\r\n            //todo optimize: if all commands->blendType === EBlendType.ADDITIVE, sort the transparentCommandArr as the opaque command arr(but it's not necessarily because many rendering effects do not fall into this category?)\r\n             However, if the blending is additive-only, then this is not needed. In the case of our game Oort Online, the “effects” pass only contains geometries rendered with additive blending, which is correct no matter the order; this means that we can employ more efficient sorting for this group.\r\n             */\r\n            // if(command.blend){\r\n            //     //todo optimize: sort command here\r\n            //     transparentCommandArr.push(command);\r\n            // }\r\n            // else if(command instanceof QuadCommand){\r\n            //     this._buildOpaqueCommandSortId(command);\r\n            //\r\n            //     opaqueQuadCommandArr.push(command);\r\n            // }\r\n            // else{\r\n            command.execute();\r\n            // }\r\n        }, this);\r\n\r\n        // if(opaqueQuadCommandArr.length > 0){\r\n        //     this._sortOpaqueQuadCommand(opaqueQuadCommandArr);\r\n        //\r\n        //     for(let command of opaqueQuadCommandArr){\r\n        //         command.execute();\r\n        //     }\r\n        // }\r\n        //\r\n        // if(transparentCommandArr.length > 0){\r\n        //     deviceManager.depthWrite = false;\r\n        //\r\n        //     this._renderSortedTransparentCommands(<Array<QuadCommand>>transparentCommandArr);\r\n        //\r\n        //     deviceManager.depthWrite = true;\r\n        // }\r\n\r\n        // if(this.skyboxCommand){\r\n        //     deviceManager.depthFunc = EDepthFunction.LEQUAL;\r\n        //     this.skyboxCommand.webglState = webglState;\r\n        //     this.skyboxCommand.execute();\r\n        //     deviceManager.depthFunc = EDepthFunction.LESS;\r\n        // }\r\n\r\n        this._clearCommand();\r\n        this.webglState = null;\r\n    }\r\n\r\n    public init() {\r\n        var deviceManager = DeviceManager.getInstance();\r\n\r\n        deviceManager.depthTest = true;\r\n        deviceManager.blend = false;\r\n        deviceManager.setColorWrite(true, true, true, true);\r\n        deviceManager.side = ESide.FRONT;\r\n        deviceManager.depthWrite = true;\r\n    }\r\n\r\n    public setClearColor(color: Color) {\r\n        this._setClearOptions({\r\n            color: color\r\n        });\r\n    }\r\n\r\n    // @requireCheck(function(transparentCommandArr:Array<RenderCommand>){\r\n    //     assert(!!Director.getInstance().scene.currentCamera, Log.info.FUNC_NOT_EXIST(\"current camera\"));\r\n    //\r\n    //     for (let command of transparentCommandArr){\r\n    //         assert(command instanceof QuadCommand, Log.info.FUNC_MUST_BE(\"transparent command\", \"QuadCommand\"));\r\n    //     }\r\n    // })\r\n    // private _renderSortedTransparentCommands(transparentCommandArr:Array<QuadCommand>) {\r\n    //     var self = this;\r\n    //\r\n    //     for (let command of SortUtils.insertSort(transparentCommandArr, (a:QuadCommand, b:QuadCommand) => {\r\n    //         return self._getObjectZDistanceInCameraCoordinate(a) < self._getObjectZDistanceInCameraCoordinate(b);\r\n    //         })){\r\n    //         command.execute();\r\n    //     }\r\n    // }\r\n    //\r\n    // private _getObjectZDistanceInCameraCoordinate(cmd:QuadCommand){\r\n    //     return cmd.mMatrix.applyMatrix(cmd.vMatrix, true).getTranslation().z;\r\n    // }\r\n\r\n    private _clearCommand() {\r\n        this._commandQueue.forEach((command: RenderCommand) => {\r\n            command.dispose();\r\n        });\r\n\r\n        this._commandQueue.removeAllChildren();\r\n\r\n        // if(this.skyboxCommand){\r\n        //     this.skyboxCommand.dispose();\r\n        //     this.skyboxCommand = null;\r\n        // }\r\n    }\r\n\r\n    private _setClearOptions(clearOptions: any) {\r\n        ExtendUtils.extend(this._clearOptions, clearOptions);\r\n    }\r\n}","import \"wonder-frp/dist/es2015/stream/ConcatStream\";\r\nimport \"wonder-frp/dist/es2015/stream/IgnoreElementsStream\";\r\nimport \"wonder-frp/dist/es2015/extend/root\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../definition/typescript/decorator/singleton\";\r\nimport { DeviceManager } from \"../device/DeviceManager\";\r\nimport { SceneDispatcher } from \"./entityObject/scene/SceneDispatcher\";\r\nimport { Renderer } from \"../renderer/renderer/Renderer\";\r\nimport { IDisposable } from \"wonder-frp/dist/es2015/Disposable/IDisposable\";\r\nimport { DirectorTimeController } from \"../utils/time/DirectorTimeController\";\r\nimport { WebGLRenderer } from \"../renderer/renderer/WebGLRenderer\";\r\nimport { callFunc, intervalRequest } from \"wonder-frp/dist/es2015/global/Operator\";\r\nimport { GameObjectScene } from \"./entityObject/scene/gameObjectScene/GameObjectScene\";\r\nimport { BasicState } from \"../renderer/state/BasicState\";\r\nimport { EventManager } from \"../event/EventManager\";\r\nimport { CustomEvent } from \"../event/object/CustomEvent\";\r\nimport { EEngineEvent } from \"../event/EEngineEvent\";\r\n\r\nenum EGameState {\r\n    NORMAL,\r\n    STOP,\r\n    PAUSE\r\n}\r\n\r\n//todo invoke scene.onExit\r\n\r\n@singleton(true)\r\n@registerClass(\"Director\")\r\nexport class Director {\r\n    public static getInstance(): any { };\r\n\r\n    private constructor() { }\r\n\r\n    get gameTime() {\r\n        return this._timeController.gameTime;\r\n    }\r\n\r\n    get fps() {\r\n        return this._timeController.fps;\r\n    }\r\n\r\n    get isNormal() {\r\n        return this._gameState === EGameState.NORMAL;\r\n    }\r\n\r\n    get isStop() {\r\n        return this._gameState === EGameState.STOP;\r\n    }\r\n\r\n    get isPause() {\r\n        return this._gameState === EGameState.PAUSE;\r\n    }\r\n\r\n    get isTimeChange() {\r\n        return this._timeController.isTimeChange;\r\n    }\r\n\r\n    get elapsed() {\r\n        return this._timeController.elapsed;\r\n    }\r\n\r\n    get view() {\r\n        return DeviceManager.getInstance().view;\r\n    }\r\n\r\n    public scene: SceneDispatcher = null;\r\n    public renderer: Renderer = null;\r\n\r\n    private _gameLoop: IDisposable = null;\r\n    private _gameState: EGameState = EGameState.NORMAL;\r\n    private _timeController: DirectorTimeController = DirectorTimeController.create();\r\n\r\n\r\n    public initWhenCreate() {\r\n        this.scene = SceneDispatcher.create();\r\n        this.renderer = WebGLRenderer.create();\r\n    }\r\n\r\n    public start() {\r\n        this._gameState = EGameState.NORMAL;\r\n\r\n        this._startLoop();\r\n    }\r\n\r\n    public stop() {\r\n        this._gameLoop && this._gameLoop.dispose();\r\n        this._gameState = EGameState.STOP;\r\n        this._timeController.stop();\r\n    }\r\n\r\n    public pause() {\r\n        if (this._gameState === EGameState.PAUSE) {\r\n            return;\r\n        }\r\n\r\n        this._gameState = EGameState.PAUSE;\r\n        this._timeController.pause();\r\n    }\r\n\r\n    public resume() {\r\n        this._gameState = EGameState.NORMAL;\r\n        this._timeController.resume();\r\n    }\r\n\r\n    //todo add dispose\r\n\r\n    public getDeltaTime() {\r\n        return this._timeController.deltaTime;\r\n    }\r\n\r\n    private _startLoop() {\r\n        var self = this;\r\n\r\n        // console.log(IgnoreElementsStream, ConcatStream);\r\n\r\n        this._gameLoop = this._buildInitStream()\r\n            .ignoreElements()\r\n            .concat(this._buildLoopStream())\r\n            .subscribe((time) => {\r\n                //todo need polyfill\r\n                /*!\r\n                 I assume that the time is DOMHighResTimeStamp, but it may be DOMTimeStamp in some browser!\r\n                 so it need polyfill\r\n                 */\r\n                self._loopBody(time);\r\n                // }, (e) => {\r\n                //     console.error(e);\r\n                //     throw e;\r\n                // });\r\n            });\r\n    }\r\n\r\n    private _buildInitStream() {\r\n        return callFunc(() => {\r\n            this._init();\r\n        }, this);\r\n    }\r\n\r\n    private _init() {\r\n        this._initGameObjectScene();\r\n    }\r\n\r\n    private _initGameObjectScene() {\r\n        var gameObjectScene: GameObjectScene = this.scene.gameObjectScene;\r\n\r\n        gameObjectScene.init();\r\n\r\n        //todo not put here?\r\n        this.renderer.init();\r\n\r\n        this._timeController.start();\r\n    }\r\n\r\n    private _buildLoopStream() {\r\n        return intervalRequest();\r\n    }\r\n\r\n    private _loopBody(time) {\r\n        var elapsed: number = null;\r\n\r\n        if (this._gameState === EGameState.PAUSE || this._gameState === EGameState.STOP) {\r\n            return false;\r\n        }\r\n\r\n        elapsed = this._timeController.computeElapseTime(time);\r\n\r\n        this._run(elapsed);\r\n\r\n        return true;\r\n    }\r\n\r\n    private _run(elapsed: number) {\r\n        this._timeController.tick(elapsed);\r\n\r\n        EventManager.trigger(CustomEvent.create(<any>EEngineEvent.STARTLOOP));\r\n\r\n        this._update(elapsed);\r\n\r\n        this._render();\r\n\r\n        EventManager.trigger(CustomEvent.create(<any>EEngineEvent.ENDLOOP));\r\n    }\r\n\r\n    private _update(elapsed: number) {\r\n        this.scene.gameObjectScene.update(elapsed);\r\n    }\r\n\r\n    private _render() {\r\n        this.scene.gameObjectScene.render(this.renderer);\r\n\r\n        this.renderer.clear();\r\n\r\n        if (this.renderer.hasCommand()) {\r\n            this.renderer.webglState = BasicState.create();\r\n            this.renderer.render();\r\n        }\r\n    }\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { Program } from \"../../../../renderer/program/Program\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\n\r\n@registerClass(\"ProgramTable\")\r\nexport class ProgramTable {\r\n    public static lastUsedProgram: Program = null;\r\n\r\n    private static _table: Hash<Program> = Hash.create<Program>();\r\n\r\n    public static hasProgram(key: string) {\r\n        return this._table.hasChild(key);\r\n    }\r\n\r\n    public static addProgram(key: string, program: Program) {\r\n        this._table.addChild(key, program);\r\n    }\r\n\r\n    public static getProgram(key: string) {\r\n        return this._table.getChild(key);\r\n    }\r\n\r\n    public static dispose() {\r\n        this._table.forEach((program: Program) => {\r\n            program.dispose();\r\n        });\r\n\r\n        this.lastUsedProgram = null;\r\n    }\r\n\r\n    public static clearAll() {\r\n        this._table.removeAllChildren();\r\n\r\n        this.lastUsedProgram = null;\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { DebugConfig } from \"../config/DebugConfig\";\r\nimport { EScreenSize } from \"../device/EScreenSize\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\nimport { DeviceManager } from \"../device/DeviceManager\";\r\nimport { GPUDetector } from \"../device/GPUDetector\";\r\nimport { CompileConfig } from \"../config/CompileConfig\";\r\nimport { MainData, ContextConfigData } from \"./data/MainData\";\r\nimport { RectRegion } from \"../structure/RectRegion\";\r\n\r\n@registerClass(\"Main\")\r\nexport class Main {\r\n    private static _canvasId: string = null;\r\n    private static _contextConfig: ContextConfigData = null;\r\n    private static _useDevicePixelRatio: boolean = null;\r\n\r\n    public static setConfig({\r\n            canvasId = null,\r\n        isTest = DebugConfig.isTest,\r\n        screenSize = EScreenSize.FULL,\r\n        useDevicePixelRatio = false,\r\n        contextConfig = {\r\n            options: {\r\n                alpha: true,\r\n                depth: true,\r\n                stencil: false,\r\n                antialias: true,\r\n                premultipliedAlpha: true,\r\n                preserveDrawingBuffer: false\r\n            }\r\n        }\r\n        }) {\r\n        MainData.screenSize = <EScreenSize & RectRegion>screenSize;\r\n        this._canvasId = canvasId;\r\n        this._useDevicePixelRatio = useDevicePixelRatio;\r\n        this._contextConfig = {\r\n            options: ExtendUtils.extend({\r\n                alpha: true,\r\n                depth: true,\r\n                stencil: false,\r\n                antialias: true,\r\n                premultipliedAlpha: true,\r\n                preserveDrawingBuffer: false\r\n            }, contextConfig.options)\r\n        };\r\n\r\n        this._setIsTest(isTest);\r\n\r\n        return this;\r\n    }\r\n\r\n    public static init() {\r\n        DeviceManager.getInstance().createGL(this._canvasId, this._contextConfig, this._useDevicePixelRatio);\r\n        DeviceManager.getInstance().setScreen();\r\n        GPUDetector.getInstance().detect();\r\n\r\n        return this;\r\n    }\r\n\r\n    private static _setIsTest(isTestFromDebugConfig: boolean) {\r\n        if (CompileConfig.closeContractTest) {\r\n            MainData.isTest = false;\r\n        }\r\n        else {\r\n            MainData.isTest = isTestFromDebugConfig;\r\n        }\r\n    }\r\n}\r\n","import { DomEvent } from \"./DomEvent\";\r\nimport { IPointEventData } from \"../interface/IEventData\";\r\nimport { Point } from \"../../structure/Point\";\r\nimport { EEventType } from \"./EEventType\";\r\nimport { MouseEvent } from \"./MouseEvent\";\r\nimport { TouchEvent } from \"./TouchEvent\";\r\n\r\nexport abstract class PointEvent extends DomEvent {\r\n    public event: IPointEventData;\r\n\r\n    //Get cursor location(related to document)\r\n    public abstract location: Point;\r\n    //Returns the current cursor location in screen coordinates(related to canvas)\r\n    public abstract locationInView: Point;\r\n    public abstract button: number | null;\r\n    public readonly abstract wheel: number | null;\r\n    public readonly abstract movementDelta: Point;\r\n\r\n    get lastX() {\r\n        return this.eventObj.lastX;\r\n    }\r\n    set lastX(x: number) {\r\n        this.eventObj.lastX = x;\r\n    }\r\n\r\n    get lastY() {\r\n        return this.eventObj.lastY;\r\n    }\r\n    set lastY(y: number) {\r\n        this.eventObj.lastY = y;\r\n    }\r\n\r\n    public readonly type: EEventType = EEventType.POINT;\r\n\r\n    public eventObj: MouseEvent | TouchEvent = null;\r\n\r\n    public abstract getDataFromEventObj(eventObj: TouchEvent | MouseEvent): void;\r\n\r\n    protected cloneHelper(eventObj: PointEvent) {\r\n        eventObj.event = this.event;\r\n\r\n        return <PointEvent>this.copyMember(eventObj, this, [\"eventObj\", \"target\", \"currentTarget\", \"isStopPropagation\", \"phase\", \"lastX\", \"lastY\"]);\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { PointEvent } from \"./PointEvent\";\r\nimport { EEventName } from \"./EventNameHandler\";\r\nimport { MouseEvent } from \"./MouseEvent\";\r\nimport { Point } from \"../../structure/Point\";\r\nimport { IPointEventData } from \"../interface/IEventData\";\r\n\r\n@registerClass(\"MousePointEvent\")\r\nexport class MousePointEvent extends PointEvent {\r\n    public static create(eventName: EEventName) {\r\n        var obj = new this(null, eventName);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public eventObj: MouseEvent;\r\n\r\n    get location(): Point {\r\n        return this.eventObj.location;\r\n    }\r\n    set location(point: Point) {\r\n        this.eventObj.location = point;\r\n    }\r\n\r\n    get locationInView(): Point {\r\n        return this.eventObj.locationInView;\r\n    }\r\n    set locationInView(locationInView: Point) {\r\n        this.eventObj.locationInView = locationInView;\r\n    }\r\n\r\n    get button() {\r\n        return this.eventObj.button;\r\n    }\r\n    set button(button: number) {\r\n        this.eventObj.button = button;\r\n    }\r\n\r\n    get wheel() {\r\n        return this.eventObj.wheel;\r\n    }\r\n\r\n    get movementDelta() {\r\n        return this.eventObj.movementDelta;\r\n    }\r\n\r\n    public getDataFromEventObj(e: MouseEvent) {\r\n        this.eventObj = e;\r\n\r\n        this.event = <IPointEventData>e.event;\r\n    }\r\n\r\n    public clone() {\r\n        return this.cloneHelper(MousePointEvent.create(<EEventName>this.name));\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { PointEvent } from \"./PointEvent\";\r\nimport { EEventName } from \"./EventNameHandler\";\r\nimport { TouchEvent } from \"./TouchEvent\";\r\nimport { Point } from \"../../structure/Point\";\r\nimport { ITouchData, IPointEventData } from \"../interface/IEventData\";\r\n\r\n@registerClass(\"TouchPointEvent\")\r\nexport class TouchPointEvent extends PointEvent {\r\n    public static create(eventName: EEventName) {\r\n        var obj = new this(null, eventName);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public eventObj: TouchEvent;\r\n\r\n    get location(): Point {\r\n        return this.eventObj.location;\r\n    }\r\n    set location(point: Point) {\r\n        this.eventObj.location = point;\r\n    }\r\n\r\n    get locationInView(): Point {\r\n        return this.eventObj.locationInView;\r\n    }\r\n    set locationInView(locationInView: Point) {\r\n        this.eventObj.locationInView = locationInView;\r\n    }\r\n\r\n    get wheel() {\r\n        return null;\r\n    }\r\n\r\n    get movementDelta() {\r\n        return this.eventObj.movementDelta;\r\n    }\r\n\r\n    public button: number = null;\r\n\r\n    public getDataFromEventObj(e: TouchEvent) {\r\n        var touchData: ITouchData = e.touchData;\r\n\r\n        this.eventObj = e;\r\n\r\n        this.event = <IPointEventData>{\r\n            clientX: touchData.clientX,\r\n            clientY: touchData.clientY,\r\n            pageX: touchData.pageX,\r\n            pageY: touchData.pageY,\r\n\r\n            target: touchData.target,\r\n            currentTarget: e.currentTarget\r\n        }\r\n    }\r\n\r\n    public clone() {\r\n        return this.cloneHelper(TouchPointEvent.create(<EEventName>this.name));\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Material } from \"./Material\";\r\nimport { ensureGetter, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { Shader } from \"../renderer/shader/shader/Shader\";\r\nimport { Log } from \"../utils/Log\";\r\nimport { SceneDispatcher } from \"../core/entityObject/scene/SceneDispatcher\";\r\nimport { Director } from \"../core/Director\";\r\nimport { QuadCommand } from \"../renderer/command/QuadCommand\";\r\n\r\n@registerClass(\"ShaderManager\")\r\nexport class ShaderManager {\r\n    public static create(material: Material) {\r\n        var obj = new this(material);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(material: Material) {\r\n        this._material = material;\r\n    }\r\n\r\n    //private _shader:Shader = null;\r\n    @ensureGetter(function(shader: Shader) {\r\n        assert(!!shader, Log.info.FUNC_NOT_EXIST(\"shader\"));\r\n    })\r\n    get shader() {\r\n        var scene: SceneDispatcher = Director.getInstance().scene;\r\n\r\n        // return scene.isUseShader ? this._otherShaderMap.getChild(<any>scene.currentShaderType) : this._mainShader;\r\n        return this._mainShader;\r\n    }\r\n\r\n    // get mapManager(){\r\n    //     return this.shader.mapManager;\r\n    // }\r\n\r\n    private _material: Material = null;\r\n    //private _sceneShader:Shader = null;\r\n    //private _unUseSceneShaderSubscription:wdFrp.IDisposable = null;\r\n    // private _otherShaderMap:wdCb.Hash<Shader> = wdCb.Hash.create<Shader>();\r\n    private _mainShader: Shader = null;\r\n\r\n    public setShader(shader: Shader) {\r\n        this._mainShader = shader;\r\n\r\n        // this._mainShader.mapManager.material = this._material;\r\n    }\r\n\r\n    public init() {\r\n        var material = this._material;\r\n\r\n        // this._otherShaderMap.forEach((shader:Shader) => {\r\n        //     shader.init(material);\r\n        // });\r\n\r\n        this._mainShader.init(material);\r\n    }\r\n\r\n    public dispose() {\r\n        // this._otherShaderMap.forEach((shader:Shader) => {\r\n        //     shader.dispose();\r\n        // });\r\n\r\n        this._mainShader.dispose();\r\n    }\r\n\r\n    public update(quadCmd: QuadCommand) {\r\n        this.shader.update(quadCmd, this._material);\r\n    }\r\n\r\n    // public addShader(shaderKey:EShaderTypeOfScene, shader:Shader){\r\n    //     this._otherShaderMap.addChild(<any>shaderKey, shader);\r\n    // }\r\n\r\n    // public hasShader(shaderKey:EShaderTypeOfScene){\r\n    //     return this._otherShaderMap.hasChild(<any>shaderKey);\r\n    // }\r\n\r\n    // public getShader(shaderKey:EShaderTypeOfScene){\r\n    //     return this._otherShaderMap.getChild(<any>shaderKey);\r\n    // }\r\n}","import { Color } from \"../structure/Color\";\r\nimport { cloneAttributeAsCloneable, cloneAttributeAsBasicType, CloneUtils } from \"../definition/typescript/decorator/clone\";\r\nimport { Geometry } from \"../component/geometry/Geometry\";\r\nimport { ShaderManager } from \"./ShaderManager\";\r\nimport { QuadCommand } from \"../renderer/command/QuadCommand\";\r\nimport { Shader } from \"../renderer/shader/shader/Shader\";\r\nimport { Program } from \"../renderer/program/Program\";\r\n\r\nexport abstract class Material {\r\n    get program() {\r\n        return this.shader.program;\r\n    }\r\n\r\n    // private _blendType:EBlendType = null;\r\n    // @cloneAttributeAsBasicType({\r\n    //     order:1\r\n    // })\r\n    // get blendType(){\r\n    //     return this._blendType;\r\n    // }\r\n    // set blendType(blendType:EBlendType){\r\n    //     if(blendType === null){\r\n    //         return;\r\n    //     }\r\n    //\r\n    //     switch (blendType) {\r\n    //         case EBlendType.NONE:\r\n    //             this.blend = false;\r\n    //             this.blendSrc = EBlendFunc.ONE;\r\n    //             this.blendDst = EBlendFunc.ZERO;\r\n    //             this.blendEquation = EBlendEquation.ADD;\r\n    //             break;\r\n    //         case EBlendType.NORMAL:\r\n    //             this.blend = true;\r\n    //             this.blendSrc = EBlendFunc.SRC_ALPHA;\r\n    //             this.blendDst = EBlendFunc.ONE_MINUS_SRC_ALPHA;\r\n    //             this.blendEquation = EBlendEquation.ADD;\r\n    //             break;\r\n    //         case EBlendType.PREMULTIPLIED:\r\n    //             this.blend = true;\r\n    //             this.blendSrc = EBlendFunc.ONE;\r\n    //             this.blendDst = EBlendFunc.ONE_MINUS_SRC_ALPHA;\r\n    //             this.blendEquation = EBlendEquation.ADD;\r\n    //             break;\r\n    //         case EBlendType.ADDITIVE:\r\n    //             this.blend = true;\r\n    //             this.blendSrc = EBlendFunc.ONE;\r\n    //             this.blendDst = EBlendFunc.ONE;\r\n    //             this.blendEquation = EBlendEquation.ADD;\r\n    //             break;\r\n    //         case EBlendType.ADDITIVEALPHA:\r\n    //             this.blend = true;\r\n    //             this.blendSrc = EBlendFunc.SRC_ALPHA;\r\n    //             this.blendDst = EBlendFunc.ONE;\r\n    //             this.blendEquation = EBlendEquation.ADD;\r\n    //             break;\r\n    //         case EBlendType.MULTIPLICATIVE:\r\n    //             this.blend = true;\r\n    //             this.blendSrc = EBlendFunc.DST_COLOR;\r\n    //             this.blendDst = EBlendFunc.ZERO;\r\n    //             this.blendEquation = EBlendEquation.ADD;\r\n    //             break;\r\n    //         default:\r\n    //             Log.error(true, Log.info.FUNC_INVALID(\"blendType\"));\r\n    //             break;\r\n    //     }\r\n    //\r\n    //     this._blendType = blendType;\r\n    // }\r\n\r\n    // @cloneAttributeAsCloneable()\r\n    // get envMap(){\r\n    //     return this.mapManager.getEnvMap();\r\n    // }\r\n    // set envMap(envMap:CubemapTexture){\r\n    //     this.mapManager.setEnvMap(envMap);\r\n    // }\r\n\r\n    // private _blendSrc:EBlendFunc= EBlendFunc.ONE;\r\n    // @cloneAttributeAsBasicType()\r\n    // get blendSrc(){\r\n    //     return this._blendSrc;\r\n    // }\r\n    // set blendSrc(blendSrc:EBlendFunc){\r\n    //     if(this._blendSrc === blendSrc){\r\n    //         return;\r\n    //     }\r\n    //\r\n    //     this._blendSrc = blendSrc;\r\n    //     this.blendFuncSeparate = null;\r\n    // }\r\n    //\r\n    // private _blendDst:EBlendFunc= EBlendFunc.ZERO;\r\n    // @cloneAttributeAsBasicType()\r\n    // get blendDst(){\r\n    //     return this._blendDst;\r\n    // }\r\n    // set blendDst(blendDst:EBlendFunc){\r\n    //     if(this._blendDst === blendDst){\r\n    //         return;\r\n    //     }\r\n    //\r\n    //     this._blendDst = blendDst;\r\n    //     this.blendFuncSeparate = null;\r\n    // }\r\n    //\r\n    // private _blendEquation:EBlendEquation = EBlendEquation.ADD;\r\n    // @cloneAttributeAsBasicType()\r\n    // get blendEquation(){\r\n    //     return this._blendEquation;\r\n    // }\r\n    // set blendEquation(blendEquation:EBlendEquation){\r\n    //     if(this._blendEquation === blendEquation){\r\n    //         return;\r\n    //     }\r\n    //\r\n    //     this._blendEquation = blendEquation;\r\n    //     this.blendEquationSeparate = null;\r\n    // }\r\n\r\n    // private _alphaToCoverage:boolean = false;\r\n    // @cloneAttributeAsBasicType()\r\n    // @ensureGetter(function(alphaToCoverage:boolean){\r\n    //     it(\"if enable alphaToCoverage, multiSample should be enabled\", () => {\r\n    //         if(alphaToCoverage){\r\n    //             chai.expect(DeviceManager.getInstance().contextConfig.options.antialias).true;\r\n    //         }\r\n    //     });\r\n    // })\r\n    // get alphaToCoverage(){\r\n    //     return this._alphaToCoverage;\r\n    // }\r\n    // set alphaToCoverage(alphaToCoverage:boolean){\r\n    //     this._alphaToCoverage = alphaToCoverage;\r\n    // }\r\n\r\n    private _color: Color = Color.create(\"#ffffff\");\r\n    @cloneAttributeAsCloneable()\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color: Color) {\r\n        if (this._color.isEqual(color)) {\r\n            return;\r\n        }\r\n\r\n        this._color = color;\r\n    }\r\n\r\n    // get mapManager(){\r\n    //     return this._shaderManager.mapManager;\r\n    // }\r\n\r\n    get shader() {\r\n        return this._shaderManager.shader;\r\n    }\r\n\r\n    // @cloneAttributeAsBasicType()\r\n    // public redWrite:boolean = true;\r\n    // @cloneAttributeAsBasicType()\r\n    // public greenWrite:boolean = true;\r\n    // @cloneAttributeAsBasicType()\r\n    // public blueWrite:boolean = true;\r\n    // @cloneAttributeAsBasicType()\r\n    // public alphaWrite:boolean = true;\r\n    // @cloneAttributeAsBasicType()\r\n    // public polygonOffsetMode:EPolygonOffsetMode = EPolygonOffsetMode.NONE;\r\n    // @cloneAttributeAsBasicType()\r\n    // public side:ESide = ESide.FRONT;\r\n    // @cloneAttributeAsBasicType()\r\n    // public blend:boolean = false;\r\n    // @cloneAttributeAsBasicType({\r\n    //     order:-1\r\n    // })\r\n    // public blendFuncSeparate:Array<EBlendFunc> = null;\r\n    // @cloneAttributeAsBasicType()\r\n    // public blendEquationSeparate:Array<EBlendEquation> = [EBlendEquation.ADD, EBlendEquation.ADD];\r\n    @cloneAttributeAsBasicType()\r\n    public geometry: Geometry = null;\r\n\r\n    private _shaderManager: ShaderManager = ShaderManager.create(this);\r\n\r\n    // public abstract getTextureForRenderSort():Texture;\r\n\r\n    public clone() {\r\n        return CloneUtils.clone(this);\r\n    }\r\n\r\n    public initWhenCreate() {\r\n        this._shaderManager.setShader(this.createShader());\r\n    }\r\n\r\n    public init() {\r\n        this._shaderManager.init();\r\n    }\r\n\r\n    public dispose() {\r\n        this._shaderManager.dispose();\r\n    }\r\n\r\n    public updateShader(quadCmd: QuadCommand) {\r\n        this._shaderManager.update(quadCmd);\r\n    }\r\n\r\n    // public addShader(shaderKey:EShaderTypeOfScene, shader:Shader){\r\n    //     this._shaderManager.addShader(shaderKey, shader);\r\n    // }\r\n    //\r\n    // public hasShader(shaderKey:EShaderTypeOfScene){\r\n    //     return this._shaderManager.hasShader(shaderKey);\r\n    // }\r\n\r\n    // public getShader(shaderKey:EShaderTypeOfScene){\r\n    //     return this._shaderManager.getShader(shaderKey);\r\n    // }\r\n\r\n    // public hasMap(map:Texture){\r\n    //     return this.mapManager.hasMap(map);\r\n    // }\r\n\r\n    protected abstract createShader(): Shader;\r\n}","import { JudgeUtils } from \"./JudgeUtils\";\r\n\r\nexport class ArrayUtils {\r\n    public static removeRepeatItems(arr: Array<any>, isEqual: (a: any, b: any) => boolean = (a, b) => {\r\n        return a === b;\r\n    }) {\r\n        var resultArr = [],\r\n            self = this;\r\n\r\n        arr.forEach(function(ele) {\r\n            if (self.contain(resultArr, function(val) {\r\n                return isEqual(val, ele);\r\n            })) {\r\n                return;\r\n            }\r\n\r\n            resultArr.push(ele);\r\n        });\r\n\r\n        return resultArr;\r\n    }\r\n\r\n    public static contain(arr: Array<any>, ele: any) {\r\n        if (JudgeUtils.isFunction(ele)) {\r\n            let func: Function = ele;\r\n\r\n            for (let i = 0, len = arr.length; i < len; i++) {\r\n                let value = arr[i];\r\n\r\n                if (!!func.call(null, value, i)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0, len = arr.length; i < len; i++) {\r\n                let value = arr[i];\r\n\r\n                if (ele === value || (value.contain && value.contain(ele))) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { ArrayUtils as ArrayUtils$ } from \"wonder-commonlib/dist/es2015/utils/ArrayUtils\";\r\n\r\n@registerClass(\"ArrayUtils\")\r\nexport class ArrayUtils extends ArrayUtils$ {\r\n    public static hasRepeatItems(arr: Array<any>) {\r\n        var noRepeatArr = [],\r\n            hasRepeat: boolean = false;\r\n\r\n        for (let item of arr) {\r\n            if (!item) {\r\n                continue;\r\n            }\r\n\r\n            if (this.contain(noRepeatArr, item)) {\r\n                hasRepeat = true;\r\n\r\n                break;\r\n            }\r\n\r\n            noRepeatArr.push(item);\r\n        }\r\n\r\n        return hasRepeat;\r\n    }\r\n\r\n    public static contain(arr: Array<any>, item: any): boolean {\r\n        var c: any = null;\r\n\r\n        for (let i = 0, len = arr.length; i < len; i++) {\r\n            c = arr[i];\r\n\r\n            if (item.uid && c.uid && item.uid == c.uid) {\r\n                return true;\r\n            }\r\n            else if (item === c) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Program } from \"./Program\";\r\nimport { ArrayBuffer } from \"../buffer/ArrayBuffer\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport { requireCheck, assert, it } from \"../../definition/typescript/decorator/contract\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { Matrix3 } from \"../../math/Matrix3\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { ArrayUtils } from \"../../utils/ArrayUtils\";\r\nimport { cache } from \"../../definition/typescript/decorator/cache\";\r\nimport { BufferTable } from \"../../core/entityObject/scene/cache/BufferTable\";\r\n\r\n@registerClass(\"GLSLDataSender\")\r\nexport class GLSLDataSender {\r\n    public static create(program: Program) {\r\n        var obj = new this(program);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(program: Program) {\r\n        this._program = program;\r\n    }\r\n\r\n    private _program: Program = null;\r\n    private _uniformCache: Object = {};\r\n    private _vertexAttribHistory: Array<boolean> = [];\r\n    private _getUniformLocationCache: Object = {};\r\n    private _toSendBufferArr: Array<ArrayBuffer> = [];\r\n\r\n    public sendFloat1(name: string, data: any) {\r\n        var gl = null,\r\n            pos = null;\r\n\r\n        if (this._uniformCache[name] == data) {\r\n            return;\r\n        }\r\n\r\n        this._recordUniformData(name, data);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform1f(pos, Number(data));\r\n    }\r\n\r\n    public sendFloat2(name: string, data: any) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name];\r\n\r\n        if (recordedData && recordedData[0] === data[0] && recordedData[1] === data[1]) {\r\n            return;\r\n        }\r\n\r\n        this._recordUniformData(name, data);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform2f(pos, data[0], data[1]);\r\n    }\r\n\r\n    public sendFloat3(name: string, data: any) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name];\r\n\r\n        if (recordedData && recordedData[0] === data[0] && recordedData[1] === data[1] && recordedData[2] === data[2]) {\r\n            return;\r\n        }\r\n\r\n        this._recordUniformData(name, data);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform3f(pos, data[0], data[1], data[2]);\r\n    }\r\n\r\n    public sendFloat4(name: string, data: any) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name];\r\n\r\n        if (recordedData && recordedData[0] === data[0] && recordedData[1] === data[1] && recordedData[2] === data[2] && recordedData[3] === data[3]) {\r\n            return;\r\n        }\r\n\r\n        this._recordUniformData(name, data);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform4f(pos, data[0], data[1], data[2], data[3]);\r\n    }\r\n\r\n    public sendVector2(name: string, data: any) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name];\r\n\r\n        if (recordedData && recordedData[0] == data.x && recordedData[1] == data.y) {\r\n            return;\r\n        }\r\n\r\n        let x = data.x,\r\n            y = data.y;\r\n\r\n        this._recordUniformData(name, [x, y]);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform2f(pos, x, y);\r\n    }\r\n\r\n    public sendVector3(name: string, data: any) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name];\r\n\r\n        if (recordedData && recordedData[0] == data.x && recordedData[1] == data.y && recordedData[2] == data.z) {\r\n            return;\r\n        }\r\n\r\n        let x = data.x,\r\n            y = data.y,\r\n            z = data.z;\r\n\r\n        this._recordUniformData(name, [x, y, z]);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform3f(pos, x, y, z);\r\n    }\r\n\r\n    public sendVector4(name: string, data: any) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name];\r\n\r\n        if (recordedData && recordedData[0] == data.x && recordedData[1] == data.y && recordedData[2] == data.z && recordedData[3] == data.w) {\r\n            return;\r\n        }\r\n\r\n        let x = data.x,\r\n            y = data.y,\r\n            z = data.z,\r\n            w = data.w;\r\n\r\n        this._recordUniformData(name, [x, y, z, w]);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform4f(pos, x, y, z, w);\r\n    }\r\n\r\n    public sendColor3(name: string, data: Color) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name],\r\n            convertedData = null;\r\n\r\n        if (recordedData && recordedData[0] == data.r && recordedData[1] == data.g && recordedData[2] == data.b) {\r\n            return;\r\n        }\r\n\r\n        let r = data.r,\r\n            g = data.g,\r\n            b = data.b;\r\n\r\n        this._recordUniformData(name, [r, g, b]);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform3f(pos, r, g, b);\r\n    }\r\n\r\n    @requireCheck(function(name: string, data: number) {\r\n        assert(JudgeUtils.isNumber(data), Log.info.FUNC_MUST_BE(\"data\", \"be number\"));\r\n    })\r\n    public sendNum1(name: string, data: number) {\r\n        var gl = null,\r\n            pos = null;\r\n\r\n        if (this._uniformCache[name] === data) {\r\n            return;\r\n        }\r\n\r\n        this._recordUniformData(name, data);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform1i(pos, data);\r\n    }\r\n\r\n    public sendMatrix3(name: string, data: Matrix3) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniformMatrix3fv(pos, false, data.values);\r\n    }\r\n\r\n    public sendMatrix4(name: string, data: Matrix4) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniformMatrix4fv(pos, false, data.values);\r\n    }\r\n\r\n    @requireCheck(function(name: string, data: Array<number> | Float32Array) {\r\n        it(`data should be array, but actual is ${data}`, () => {\r\n            expect(JudgeUtils.isFloatArray(data) || JudgeUtils.isArrayExactly(data)).true;\r\n        });\r\n        it(\"name shouldn't be the first matrix of the array\", () => {\r\n            expect(/\\[0\\]$/.test(name)).false;\r\n        });\r\n    })\r\n    public sendMatrix4Array(name: string, data: Array<number> | Float32Array) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            pos = this.getUniformLocation(`${name}[0]`);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniformMatrix4fv(pos, false, data);\r\n    }\r\n\r\n    @requireCheck(function(name: string, data: Array<number>) {\r\n        assert(JudgeUtils.isArrayExactly(data), Log.info.FUNC_SHOULD(\"data\", `be array, but actual is ${data}`));\r\n\r\n        for (let unit of data) {\r\n            assert(JudgeUtils.isNumber(unit), Log.info.FUNC_SHOULD(\"data\", `be Array<number>, but actual is ${data}`));\r\n        }\r\n    })\r\n    public sendSampleArray(name: string, data: Array<number>) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name],\r\n            isEqual: boolean = true;\r\n\r\n        if (recordedData) {\r\n            for (let i = 0, len = data.length; i < len; i++) {\r\n                if (recordedData[i] !== data[i]) {\r\n                    isEqual = false;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (isEqual) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        this._recordUniformData(name, data);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform1iv(pos, data);\r\n    }\r\n\r\n    /*!\r\n     not use @cache,\r\n     here judge return pos of \"getChild\", so it don't need to invoke \"hasChild\"\r\n     */\r\n    public getUniformLocation(name: string) {\r\n        var pos = null,\r\n            gl = DeviceManager.getInstance().gl;\r\n\r\n        pos = this._getUniformLocationCache[name];\r\n\r\n        if (pos !== void 0) {\r\n            return pos;\r\n        }\r\n\r\n        pos = gl.getUniformLocation(this._program.glProgram, name);\r\n\r\n        this._getUniformLocationCache[name] = pos;\r\n\r\n        return pos;\r\n    }\r\n\r\n    public addBufferToToSendList(pos: number, buffer: ArrayBuffer) {\r\n        this._toSendBufferArr[pos] = buffer;\r\n\r\n        this._toSendBuffersUidStr += String(buffer.uid);\r\n    }\r\n\r\n    private _toSendBuffersUidStr: string = \"\";\r\n\r\n    @requireCheck(function() {\r\n        assert(!ArrayUtils.hasRepeatItems(this._toSendBufferArr), Log.info.FUNC_SHOULD_NOT(\"_toSendBufferArr\", \"has repeat buffer\"));\r\n    })\r\n    @cache(function() {\r\n        return BufferTable.lastBindedArrayBufferListUidStr === this._toSendBuffersUidStr;\r\n    }, function() {\r\n    }, function() {\r\n        BufferTable.lastBindedArrayBufferListUidStr = this._toSendBuffersUidStr;\r\n\r\n    })\r\n    // public sendAllBufferData(vaoManager:VAOManager){\r\n    public sendAllBufferData() {\r\n        var toSendBufferArr = this._toSendBufferArr;\r\n\r\n        for (let pos = 0, len = toSendBufferArr.length; pos < len; pos++) {\r\n            let buffer = toSendBufferArr[pos];\r\n\r\n            if (!buffer) {\r\n                continue;\r\n            }\r\n\r\n            this.sendBuffer(pos, buffer);\r\n        }\r\n    }\r\n\r\n    public clearBufferList() {\r\n        this._toSendBufferArr = [];\r\n        this._toSendBuffersUidStr = \"\";\r\n    }\r\n\r\n    public sendBuffer(pos: number, buffer: ArrayBuffer) {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer.buffer);\r\n        gl.vertexAttribPointer(pos, buffer.size, gl[buffer.type], false, 0, 0);\r\n\r\n        if (this._vertexAttribHistory[pos] !== true) {\r\n            gl.enableVertexAttribArray(pos);\r\n\r\n            this._vertexAttribHistory[pos] = true;\r\n        }\r\n    }\r\n\r\n    public disableVertexAttribArray() {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        for (let i in this._vertexAttribHistory) {\r\n            //make sure this is a number)\r\n            let iAsNumber = +i;\r\n\r\n            if (iAsNumber > gl.VERTEX_ATTRIB_ARRAY_ENABLED || !this._vertexAttribHistory[iAsNumber]) {\r\n                continue;\r\n            }\r\n            this._vertexAttribHistory[iAsNumber] = false;\r\n            gl.disableVertexAttribArray(iAsNumber);\r\n        }\r\n\r\n        this._vertexAttribHistory = [];\r\n    }\r\n\r\n    public clearAllCache() {\r\n        this._getUniformLocationCache = {};\r\n\r\n        this._uniformCache = {};\r\n    }\r\n\r\n    public dispose() {\r\n        this.disableVertexAttribArray();\r\n    }\r\n\r\n    private _recordUniformData(name: string, data: any) {\r\n        this._uniformCache[name] = data;\r\n    }\r\n\r\n    private _isUniformDataNotExistByLocation(pos: number) {\r\n        return pos === null;\r\n    }\r\n}","export enum EVariableType {\r\n    FLOAT_1 = <any>\"FLOAT_1\",\r\n    FLOAT_2 = <any>\"FLOAT_2\",\r\n    FLOAT_3 = <any>\"FLOAT_3\",\r\n    FLOAT_4 = <any>\"FLOAT_4\",\r\n    VECTOR_2 = <any>\"VECTOR_2\",\r\n    VECTOR_3 = <any>\"VECTOR_3\",\r\n    VECTOR_4 = <any>\"VECTOR_4\",\r\n    COLOR_3 = <any>\"COLOR_3\",\r\n    FLOAT_MAT3 = <any>\"FLOAT_MAT3\",\r\n    FLOAT_MAT4 = <any>\"FLOAT_MAT4\",\r\n    BUFFER = <any>\"BUFFER\",\r\n    SAMPLER_CUBE = <any>\"SAMPLER_CUBE\",\r\n    SAMPLER_2D = <any>\"SAMPLER_2D\",\r\n    NUMBER_1 = <any>\"NUMBER_1\",\r\n    STRUCTURE = <any>\"STRUCTURE\",\r\n    STRUCTURES = <any>\"STRUCTURES\",\r\n\r\n    SAMPLER_ARRAY = <any>\"SAMPLER_ARRAY\",\r\n    FLOAT_MAT4_ARRAY = <any>\"FLOAT_MAT4_ARRAY\"\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Entity } from \"../../core/Entity\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { GLSLDataSender } from \"./GLSLDataSender\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { ProgramTable } from \"../../core/entityObject/scene/cache/ProgramTable\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\nimport { BufferTable } from \"../../core/entityObject/scene/cache/BufferTable\";\r\nimport { EVariableType } from \"../shader/variable/EVariableType\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { requireCheck, assert } from \"../../definition/typescript/decorator/contract\";\r\nimport { ArrayBuffer } from \"../buffer/ArrayBuffer\";\r\nimport { Shader } from \"../shader/shader/Shader\";\r\n\r\n@registerClass(\"Program\")\r\nexport class Program extends Entity {\r\n    public static create(): Program {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public glProgram: any = null;\r\n\r\n    private _getAttribLocationCache: Hash<number> = Hash.create<number>();\r\n    private _sender: GLSLDataSender = GLSLDataSender.create(this);\r\n\r\n    public use() {\r\n        if (JudgeUtils.isEqual(this, ProgramTable.lastUsedProgram)) {\r\n            return;\r\n        }\r\n\r\n        ProgramTable.lastUsedProgram = this;\r\n\r\n        DeviceManager.getInstance().gl.useProgram(this.glProgram);\r\n\r\n        this._sender.disableVertexAttribArray();\r\n\r\n        BufferTable.lastBindedArrayBufferListUidStr = null;\r\n    }\r\n\r\n    /*!\r\n     not use @cache,\r\n     here judge return pos of \"getChild\", so it don't need to invoke \"hasChild\"\r\n     */\r\n    public getAttribLocation(name: string) {\r\n        var pos = null,\r\n            gl = DeviceManager.getInstance().gl;\r\n\r\n        pos = this._getAttribLocationCache.getChild(name);\r\n\r\n        if (pos !== void 0) {\r\n            return pos;\r\n        }\r\n\r\n        pos = gl.getAttribLocation(this.glProgram, name);\r\n\r\n        this._getAttribLocationCache.addChild(name, pos);\r\n\r\n        return pos;\r\n    }\r\n\r\n    public getUniformLocation(name: string) {\r\n        return this._sender.getUniformLocation(name);\r\n    }\r\n\r\n    public sendUniformData(name: string, type: EVariableType, data: any) {\r\n        if (data === null) {\r\n            return;\r\n        }\r\n\r\n        switch (type) {\r\n            case EVariableType.FLOAT_1:\r\n                this._sender.sendFloat1(name, data);\r\n                break;\r\n            case EVariableType.FLOAT_2:\r\n                this._sender.sendFloat2(name, data);\r\n                break;\r\n            case EVariableType.FLOAT_3:\r\n                this._sender.sendFloat3(name, data);\r\n                break;\r\n            case EVariableType.FLOAT_4:\r\n                this._sender.sendFloat4(name, data);\r\n                break;\r\n            case EVariableType.VECTOR_2:\r\n                this._sender.sendVector2(name, data);\r\n                break;\r\n            case EVariableType.VECTOR_3:\r\n                this._sender.sendVector3(name, data);\r\n                break;\r\n            case EVariableType.VECTOR_4:\r\n                this._sender.sendVector4(name, data);\r\n                break;\r\n            case EVariableType.COLOR_3:\r\n                this._sender.sendColor3(name, data);\r\n                break;\r\n            case EVariableType.FLOAT_MAT3:\r\n                this._sender.sendMatrix3(name, data);\r\n                break;\r\n            case EVariableType.FLOAT_MAT4:\r\n                this._sender.sendMatrix4(name, data);\r\n                break;\r\n            case EVariableType.NUMBER_1:\r\n            case EVariableType.SAMPLER_CUBE:\r\n            case EVariableType.SAMPLER_2D:\r\n                this._sender.sendNum1(name, data);\r\n                break;\r\n            case EVariableType.FLOAT_MAT4_ARRAY:\r\n                this._sender.sendMatrix4Array(name, data);\r\n                break;\r\n            case EVariableType.SAMPLER_ARRAY:\r\n                this._sender.sendSampleArray(name, data);\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_INVALID(\"EVariableType:\", type));\r\n                break;\r\n        }\r\n    }\r\n\r\n    @requireCheck(function(name: string, type: EVariableType, buffer: ArrayBuffer) {\r\n        assert(buffer instanceof ArrayBuffer, Log.info.FUNC_MUST_BE(\"ArrayBuffer\"));\r\n\r\n        assert(type === EVariableType.BUFFER, Log.info.FUNC_SHOULD(\"type\", `be EVariableType.BUFFER, but actual is ${type}`));\r\n    })\r\n    public sendAttributeBuffer(name: string, type: EVariableType, buffer: ArrayBuffer) {\r\n        var pos: number = null;\r\n\r\n        pos = this.getAttribLocation(name);\r\n\r\n        if (pos === -1) {\r\n            return;\r\n        }\r\n\r\n        this._sender.addBufferToToSendList(pos, buffer);\r\n    }\r\n\r\n    public sendStructureData(name: string, type: EVariableType, data: any) {\r\n        this.sendUniformData(name, type, data);\r\n    }\r\n\r\n    public sendFloat1(name: string, data: any) {\r\n        this._sender.sendFloat1(name, data);\r\n    }\r\n\r\n    public sendFloat2(name: string, data: any) {\r\n        this._sender.sendFloat2(name, data);\r\n    }\r\n\r\n    public sendFloat3(name: string, data: any) {\r\n        this._sender.sendFloat3(name, data);\r\n    }\r\n\r\n    public sendFloat4(name: string, data: any) {\r\n        this._sender.sendFloat4(name, data);\r\n    }\r\n\r\n    public sendVector2(name: string, data: any) {\r\n        this._sender.sendVector2(name, data);\r\n    }\r\n\r\n    public sendVector3(name: string, data: any) {\r\n        this._sender.sendVector3(name, data);\r\n    }\r\n\r\n    public sendVector4(name: string, data: any) {\r\n        this._sender.sendVector4(name, data);\r\n    }\r\n\r\n    public sendColor3(name: string, data: any) {\r\n        this._sender.sendColor3(name, data);\r\n    }\r\n\r\n    public sendNum1(name: string, data: any) {\r\n        this._sender.sendNum1(name, data);\r\n    }\r\n\r\n    public sendMatrix3(name: string, data: any) {\r\n        this._sender.sendMatrix3(name, data);\r\n    }\r\n\r\n    public sendMatrix4(name: string, data: any) {\r\n        this._sender.sendMatrix4(name, data);\r\n    }\r\n\r\n    public sendMatrix4Array(name: string, data: Float32Array) {\r\n        this._sender.sendMatrix4Array(name, data);\r\n    }\r\n\r\n    public sendSampleArray(name: string, data: any) {\r\n        this._sender.sendSampleArray(name, data);\r\n    }\r\n\r\n    // public sendAllBufferData(vaoManager:VAOManager){\r\n    public sendAllBufferData() {\r\n        // this._sender.sendAllBufferData(vaoManager);\r\n        this._sender.sendAllBufferData();\r\n        this._sender.clearBufferList();\r\n    }\r\n\r\n    public initWithShader(shader: Shader) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            vs = null,\r\n            fs = null;\r\n\r\n        if (this.glProgram) {\r\n            this.dispose();\r\n        }\r\n\r\n        this.glProgram = DeviceManager.getInstance().gl.createProgram();\r\n\r\n        vs = shader.createVsShader();\r\n        fs = shader.createFsShader();\r\n\r\n        gl.attachShader(this.glProgram, vs);\r\n        gl.attachShader(this.glProgram, fs);\r\n\r\n\r\n        /*!\r\n         if warn:\"Attribute 0 is disabled. This has significant performance penalty\" when run,\r\n         then do this before linkProgram:\r\n         gl.bindAttribLocation( this.glProgram, 0, \"a_position\");\r\n\r\n\r\n\r\n         can reference here:\r\n         http://stackoverflow.com/questions/20305231/webgl-warning-attribute-0-is-disabled-this-has-significant-performance-penalt?answertab=votes#tab-top\r\n\r\n\r\n         OpenGL requires attribute zero to be enabled otherwise it will not render anything.\r\n         On the other hand OpenGL ES 2.0 on which WebGL is based does not. So, to emulate OpenGL ES 2.0 on top of OpenGL if you don't enable attribute 0 the browser has to make a buffer for you large enough for the number of vertices you've requested to be drawn, fill it with the correct value (see gl.vertexAttrib),\r\n         attach it to attribute zero, and enable it.\r\n\r\n         It does all this behind the scenes but it's important for you to know that it takes time to create and fill that buffer. There are optimizations the browser can make but in the general case,\r\n         if you were to assume you were running on OpenGL ES 2.0 and used attribute zero as a constant like you are supposed to be able to do, without the warning you'd have no idea of the work the browser is doing on your behalf to emulate that feature of OpenGL ES 2.0 that is different from OpenGL.\r\n\r\n         require your particular case the warning doesn't have much meaning. It looks like you are only drawing a single point. But it would not be easy for the browser to figure that out so it just warns you anytime you draw and attribute 0 is not enabled.\r\n         */\r\n        /*!\r\n         Always have vertex attrib 0 array enabled. If you draw with vertex attrib 0 array disabled, you will force the browser to do complicated emulation when running on desktop OpenGL (e.g. on Mac OSX). This is because in desktop OpenGL, nothing gets drawn if vertex attrib 0 is not array-enabled. You can use bindAttribLocation() to force a vertex attribute to use location 0, and use enableVertexAttribArray() to make it array-enabled.\r\n         */\r\n        gl.bindAttribLocation(this.glProgram, 0, \"a_position\");\r\n\r\n\r\n        gl.linkProgram(this.glProgram);\r\n\r\n        Log.error(gl.getProgramParameter(this.glProgram, gl.LINK_STATUS) === false, gl.getProgramInfoLog(this.glProgram));\r\n\r\n\r\n\r\n\r\n        /*!\r\n         should detach and delete shaders after linking the program\r\n\r\n         explain:\r\n         The shader object, due to being attached to the program object, will continue to exist even if you delete the shader object. It will only be deleted by the system when it is no longer attached to any program object (and when the user has asked to delete it, of course).\r\n\r\n         \"Deleting\" the shader, as with all OpenGL objects, merely sets a flag that says you don't need it any more. OpenGL will keep it around for as long as it needs it itself, and will do the actual delete any time later (most likely, but not necessarily, after the program is deleted).\r\n         */\r\n        gl.deleteShader(vs);\r\n        gl.deleteShader(fs);\r\n\r\n        return this;\r\n    }\r\n\r\n    public dispose() {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        gl.deleteProgram(this.glProgram);\r\n        this.glProgram = null;\r\n\r\n        this._sender.dispose();\r\n\r\n        this._clearAllCache();\r\n    }\r\n\r\n    private _clearAllCache() {\r\n        this._getAttribLocationCache.removeAllChildren();\r\n        this._sender.clearAllCache();\r\n    }\r\n}","import { Shader } from \"../shader/Shader\";\r\nimport { virtual } from \"../../../definition/typescript/decorator/virtual\";\r\nimport { Program } from \"../../program/Program\";\r\nimport { RenderCommand } from \"../../command/RenderCommand\";\r\nimport { Material } from \"../../../material/Material\";\r\n\r\nexport abstract class ShaderLib {\r\n    public shader: Shader = null;\r\n\r\n    @virtual\r\n    public sendShaderVariables(program: Program, cmd: RenderCommand, material: Material) {\r\n    }\r\n\r\n    @virtual\r\n    public init() {\r\n    }\r\n\r\n    @virtual\r\n    public dispose() {\r\n    }\r\n}","import { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { ensureGetter, it, ensure } from \"../../../definition/typescript/decorator/contract\";\r\nimport { Program } from \"../../program/Program\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { cacheGetter } from \"../../../definition/typescript/decorator/cache\";\r\nimport { ProgramTable } from \"../../../core/entityObject/scene/cache/ProgramTable\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { ShaderLib } from \"../lib/ShaderLib\";\r\nimport { ShaderSourceBuilder } from \"../sourceBuilder/ShaderSourceBuilder\";\r\nimport { RenderCommand } from \"../../command/RenderCommand\";\r\nimport { Material } from \"../../../material/Material\";\r\nimport { DeviceManager } from \"../../../device/DeviceManager\";\r\nimport { execOnlyOnce } from \"../../../definition/typescript/decorator/control\";\r\nimport { JudgeUtils } from \"../../../utils/JudgeUtils\";\r\nimport { Log } from \"../../../utils/Log\";\r\nimport { $BREAK } from \"wonder-commonlib/dist/es2015/global/Const\";\r\nimport { EVariableType } from \"../variable/EVariableType\";\r\n\r\nexport abstract class Shader {\r\n    private _attributes: Hash<ShaderData> = Hash.create<ShaderData>();\r\n    get attributes() {\r\n        return this._attributes;\r\n    }\r\n    set attributes(attributes: Hash<ShaderData>) {\r\n        if (this._isNotEqual(attributes, this._attributes)) {\r\n            this.definitionDataDirty = true;\r\n        }\r\n        this._attributes = attributes;\r\n    }\r\n\r\n    private _uniforms: Hash<ShaderData> = Hash.create<ShaderData>();\r\n    get uniforms() {\r\n        return this._uniforms;\r\n    }\r\n    set uniforms(uniforms: Hash<ShaderData>) {\r\n        if (this._isNotEqual(uniforms, this._uniforms)) {\r\n            this.definitionDataDirty = true;\r\n        }\r\n        this._uniforms = uniforms;\r\n    }\r\n\r\n    private _vsSource: string = \"\";\r\n    get vsSource() {\r\n        return this._vsSource;\r\n    }\r\n    set vsSource(vsSource: string) {\r\n        if (vsSource !== this._vsSource) {\r\n            this.definitionDataDirty = true;\r\n        }\r\n        this._vsSource = vsSource;\r\n    }\r\n\r\n    private _fsSource: string = \"\";\r\n    get fsSource() {\r\n        return this._fsSource;\r\n    }\r\n    set fsSource(fsSource: string) {\r\n        if (fsSource !== this._fsSource) {\r\n            this.definitionDataDirty = true;\r\n        }\r\n        this._fsSource = fsSource;\r\n    }\r\n\r\n    get dirty() {\r\n        return this.libDirty || this.definitionDataDirty;\r\n    }\r\n\r\n    @ensureGetter(function(program: Program) {\r\n        it(`program should exist(its table key is ${this._getProgramTableKey()}`, () => {\r\n            expect(program).exist;\r\n        }, this);\r\n    })\r\n    @cacheGetter(function() {\r\n        return this._programCache !== null;\r\n    }, function() {\r\n        return this._programCache;\r\n    }, function(program: Program) {\r\n        this._programCache = program;\r\n    })\r\n    get program() {\r\n        return ProgramTable.getProgram(this._getProgramTableKey());\r\n    }\r\n\r\n    public libDirty: boolean = false;\r\n    public definitionDataDirty: boolean = false;\r\n    // public mapManager:MapManager = MapManager.create();\r\n\r\n    protected libs: Collection<ShaderLib> = Collection.create<ShaderLib>();\r\n    protected sourceBuilder: ShaderSourceBuilder = this.createShaderSourceBuilder();\r\n\r\n    private _programCache: Program = null;\r\n    // private _instanceStateCache:InstanceState = null;\r\n\r\n    public abstract update(cmd: RenderCommand, material: Material);\r\n\r\n    public createVsShader() {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        return this._initShader(gl.createShader(gl.VERTEX_SHADER), this.vsSource);\r\n    }\r\n\r\n    public createFsShader() {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        return this._initShader(gl.createShader(gl.FRAGMENT_SHADER), this.fsSource);\r\n    }\r\n\r\n    @execOnlyOnce(\"_isInit\")\r\n    public init(material: Material) {\r\n        this.libs.forEach((lib: ShaderLib) => {\r\n            lib.init();\r\n        });\r\n\r\n        this.judgeRefreshShader(null, material);\r\n\r\n        // this.mapManager.init();\r\n    }\r\n\r\n    public dispose() {\r\n        this.attributes.removeAllChildren();\r\n        this.uniforms.removeAllChildren();\r\n\r\n        this.libs.forEach((lib: ShaderLib) => {\r\n            lib.dispose();\r\n        });\r\n\r\n        // this.mapManager.dispose();\r\n\r\n        this._clearAllCache();\r\n    }\r\n\r\n    public hasLib(lib: ShaderLib);\r\n    public hasLib(_class: Function);\r\n\r\n    public hasLib(...args) {\r\n        if (args[0] instanceof ShaderLib) {\r\n            let lib: ShaderLib = args[0];\r\n\r\n            return this.libs.hasChild(lib);\r\n        }\r\n        else {\r\n            let _class = args[0];\r\n\r\n            return this.libs.hasChildWithFunc((lib: ShaderLib) => {\r\n                return lib instanceof _class;\r\n            })\r\n        }\r\n    }\r\n\r\n    @ensure(function() {\r\n        it(\"should set ShaderLib.shader to be this\", () => {\r\n            this.libs.forEach((lib: ShaderLib) => {\r\n                expect(lib.shader === this).true;\r\n            });\r\n        }, this);\r\n        it(\"libDirty should be true\", () => {\r\n            expect(this.libDirty).true;\r\n        }, this);\r\n    })\r\n    public addLib(lib: ShaderLib) {\r\n        this.libs.addChild(lib);\r\n\r\n        lib.shader = this;\r\n\r\n        this.libDirty = true;\r\n    }\r\n\r\n    @ensure(function(val, lib: ShaderLib) {\r\n        it(\"should add shader lib to the top\", () => {\r\n            expect(JudgeUtils.isEqual(lib, this.libs.getChild(0))).true;\r\n        }, this);\r\n        it(\"should set ShaderLib.shader to be this\", () => {\r\n            this.libs.forEach((lib: ShaderLib) => {\r\n                expect(lib.shader === this).true;\r\n            });\r\n        }, this);\r\n        it(\"libDirty should be true\", () => {\r\n            expect(this.libDirty).true;\r\n        }, this);\r\n    })\r\n    public addShaderLibToTop(lib: ShaderLib) {\r\n        this.libs.unShiftChild(lib);\r\n\r\n        lib.shader = this;\r\n\r\n        this.libDirty = true;\r\n    }\r\n\r\n    public getLib(libClass: Function) {\r\n        return this.libs.findOne((lib: ShaderLib) => {\r\n            return lib instanceof libClass;\r\n        });\r\n    }\r\n\r\n    public getLibs() {\r\n        return this.libs;\r\n    }\r\n\r\n    public removeLib(lib: ShaderLib);\r\n    public removeLib(func: Function);\r\n\r\n    public removeLib(...args) {\r\n        this.libDirty = true;\r\n\r\n        return this.libs.removeChild(args[0]);\r\n    }\r\n\r\n    public removeAllLibs() {\r\n        this.libDirty = true;\r\n\r\n        this.libs.removeAllChildren();\r\n    }\r\n\r\n    public sortLib(func: (a: ShaderLib, b: ShaderLib) => any) {\r\n        this.libDirty = true;\r\n\r\n        this.libs.sort(func, true);\r\n    }\r\n\r\n    protected abstract createShaderSourceBuilder(): ShaderSourceBuilder;\r\n    protected abstract buildDefinitionData(cmd: RenderCommand, material: Material): void;\r\n\r\n\r\n    protected judgeRefreshShader(cmd: RenderCommand, material: Material) {\r\n        if (this.libDirty) {\r\n            // this._instanceStateCache = null;\r\n            this.buildDefinitionData(cmd, material);\r\n        }\r\n\r\n        if (this.definitionDataDirty) {\r\n            this._programCache = null;\r\n            this._registerAndUpdateProgram();\r\n            this._programCache = null;\r\n        }\r\n\r\n\r\n        this.libDirty = false;\r\n        this.definitionDataDirty = false;\r\n    }\r\n\r\n    private _registerAndUpdateProgram() {\r\n        var key = this._getProgramTableKey();\r\n\r\n        if (ProgramTable.hasProgram(key)) {\r\n            return;\r\n        }\r\n\r\n        ProgramTable.addProgram(key, Program.create());\r\n        this._updateProgram();\r\n    }\r\n\r\n    private _updateProgram() {\r\n        this.program.initWithShader(this);\r\n    }\r\n\r\n    private _getProgramTableKey() {\r\n        return `${this.vsSource}\\n${this.fsSource}`;\r\n    }\r\n\r\n    private _initShader(shader, source) {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        gl.shaderSource(shader, source);\r\n        gl.compileShader(shader);\r\n\r\n        if (gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n            return shader;\r\n        }\r\n        else {\r\n            Log.log(gl.getShaderInfoLog(shader));\r\n            Log.log(\"attributes:\\n\", this.attributes);\r\n            Log.log(\"uniforms:\\n\", this.uniforms);\r\n            Log.log(\"source:\\n\", source);\r\n        }\r\n    }\r\n\r\n    private _isNotEqual(list1: Hash<ShaderData>, list2: Hash<ShaderData>) {\r\n        var result = false;\r\n\r\n        list1.forEach((data: ShaderData, key: string) => {\r\n            var list2Data = list2.getChild(key);\r\n\r\n            if (!list2Data || data.type !== list2Data.type || data.value !== list2Data.value) {\r\n                result = true;\r\n                return $BREAK;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    private _clearAllCache() {\r\n        this._programCache = null;\r\n        // this._instanceStateCache = null;\r\n    }\r\n}\r\n\r\nexport type ShaderData = {\r\n    type: EVariableType;\r\n    value?: any;\r\n    textureId?: string;\r\n}\r\n\r\n    // type InstanceState = {\r\n    //     isModelMatrixInstance:boolean;\r\n    //     isNormalMatrixInstance:boolean;\r\n    //     isHardwareInstance:boolean;\r\n    //     isBatchInstance:boolean\r\n    // }","export enum EVariableCategory {\r\n    /*! avoid to equal 0\r\n    for example, when compare to texture index, it may equal texture 0\r\n    */\r\n    ENGINE = <any>\"ENGINE\",\r\n    CUSTOM = <any>\"CUSTOM\"\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { requireCheck, it } from \"../definition/typescript/decorator/contract\";\r\nimport { EVariableType } from \"../renderer/shader/variable/EVariableType\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { JudgeUtils } from \"./JudgeUtils\";\r\nimport { ArrayBuffer } from \"../renderer/buffer/ArrayBuffer\";\r\nimport { EBufferType } from \"../renderer/buffer/EBufferType\";\r\nimport { Log } from \"./Log\";\r\n\r\n@registerClass(\"BufferUtils\")\r\nexport class BufferUtils {\r\n    @requireCheck(function(type: EVariableType, value: Array<any>) {\r\n        it(`value:${value} should be array`, () => {\r\n            expect(JudgeUtils.isArrayExactly(value)).true;\r\n        });\r\n    })\r\n    public static convertArrayToArrayBuffer(type: EVariableType, value: Array<any>) {\r\n        var size = this._getBufferSize(type);\r\n\r\n        return ArrayBuffer.create(value, size, EBufferType.FLOAT);\r\n    }\r\n\r\n    private static _getBufferSize(type: EVariableType) {\r\n        var size = null;\r\n\r\n        switch (type) {\r\n            case EVariableType.FLOAT_1:\r\n            case EVariableType.NUMBER_1:\r\n                size = 1;\r\n                break;\r\n            case EVariableType.FLOAT_2:\r\n                size = 2;\r\n                break;\r\n            case EVariableType.FLOAT_3:\r\n                size = 3;\r\n                break;\r\n            case EVariableType.FLOAT_4:\r\n                size = 4;\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_UNEXPECT(\"EVariableType\", type));\r\n                break;\r\n        }\r\n\r\n        return size;\r\n    }\r\n}","import { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { ShaderData } from \"../shader/Shader\";\r\nimport { requireCheck, assert } from \"../../../definition/typescript/decorator/contract\";\r\nimport { JudgeUtils } from \"../../../utils/JudgeUtils\";\r\nimport { Log } from \"../../../utils/Log\";\r\nimport { EVariableCategory } from \"../variable/EVariableCategory\";\r\nimport { BufferUtils } from \"../../../utils/BufferUtils\";\r\n\r\nexport abstract class ShaderSourceBuilder {\r\n    public attributes: Hash<ShaderData> = Hash.create<ShaderData>();\r\n    public uniforms: Hash<ShaderData> = Hash.create<ShaderData>();\r\n    public vsSource: string = null;\r\n    public fsSource: string = null;\r\n\r\n    public abstract build(...args): void;\r\n\r\n    public abstract clearShaderDefinition(): void;\r\n\r\n    public dispose() {\r\n        this.clearShaderDefinition();\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        this.attributes.forEach((data: ShaderData) => {\r\n            assert(!JudgeUtils.isFloatArray(data.value), Log.info.FUNC_SHOULD_NOT(\"attribute->value\", \"be Float array\"));\r\n        });\r\n    })\r\n    protected convertAttributesData() {\r\n        this.attributes\r\n            .filter((data: ShaderData) => {\r\n                return data.value !== EVariableCategory.ENGINE && JudgeUtils.isArrayExactly(data.value);\r\n            })\r\n            .forEach((data: ShaderData, key: string) => {\r\n                data.value = BufferUtils.convertArrayToArrayBuffer(data.type, data.value);\r\n            });\r\n    }\r\n}\r\n\r\nexport type SourceDefine = {\r\n    name: string;\r\n    value: any;\r\n}","export const main_begin: string = \"void main(void){\\n\";\r\nexport const main_end: string = \"}\\n\";\r\n\r\n// export const setPos_mvp: string = \"gl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\\n\"\r\nexport const setPos_mvp: string = \"gl_Position = u_pMatrix * u_vMatrix * u_mMatrix * vec4(a_position, 1.0);\\n\"\r\n","export const empty:GLSLChunk = {top:\"\", define:\"\", varDeclare:\"\", funcDeclare:\"\", funcDefine:\"\", body:\"\"};\nexport const NULL:number = -1.0;\nexport const basic_materialColor_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"vec4 totalColor = vec4(u_color, 1.0);\\n\"};\nexport const end_basic_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"gl_FragColor = vec4(totalColor.rgb, totalColor.a * u_opacity);\\n\"};\nexport const common_define:GLSLChunk = {top: \"\",define: \"#define NULL -1.0\\n\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const common_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const common_function:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"mat2 transpose(mat2 m) {\\n  return mat2(  m[0][0], m[1][0],   // new col 0\\n                m[0][1], m[1][1]    // new col 1\\n             );\\n  }\\nmat3 transpose(mat3 m) {\\n  return mat3(  m[0][0], m[1][0], m[2][0],  // new col 0\\n                m[0][1], m[1][1], m[2][1],  // new col 1\\n                m[0][2], m[1][2], m[2][2]   // new col 1\\n             );\\n  }\\n\\nbool isRenderListEmpty(int isRenderListEmpty){\\n  return isRenderListEmpty == 1;\\n}\\n\",body: \"\"};\nexport const common_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const highp_fragment:GLSLChunk = {top: \"precision highp float;\\nprecision highp int;\\n\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const lowp_fragment:GLSLChunk = {top: \"precision lowp float;\\nprecision lowp int;\\n\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const mediump_fragment:GLSLChunk = {top: \"precision mediump float;\\nprecision mediump int;\\n\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport type GLSLChunk = {top?:string;define?:string;varDeclare?:string;funcDeclare?:string;funcDefine?:string;body?:string;}\n","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { EVariableType } from \"./EVariableType\";\r\nimport { Log } from \"../../../utils/Log\";\r\n\r\nconst _table = Hash.create<string>();\r\n\r\n//todo remove <any>\r\n_table.addChild(<any>EVariableType.FLOAT_1, \"float\");\r\n_table.addChild(<any>EVariableType.FLOAT_2, \"vec2\");\r\n_table.addChild(<any>EVariableType.FLOAT_3, \"vec3\");\r\n_table.addChild(<any>EVariableType.FLOAT_4, \"vec4\");\r\n\r\n_table.addChild(<any>EVariableType.VECTOR_2, \"vec2\");\r\n_table.addChild(<any>EVariableType.VECTOR_3, \"vec3\");\r\n_table.addChild(<any>EVariableType.VECTOR_4, \"vec4\");\r\n\r\n_table.addChild(<any>EVariableType.FLOAT_MAT3, \"mat3\");\r\n_table.addChild(<any>EVariableType.FLOAT_MAT4, \"mat4\");\r\n_table.addChild(<any>EVariableType.NUMBER_1, \"int\");\r\n_table.addChild(<any>EVariableType.SAMPLER_CUBE, \"samplerCube\");\r\n_table.addChild(<any>EVariableType.SAMPLER_2D, \"sampler2D\");\r\n\r\n@registerClass(\"VariableTypeTable\")\r\nexport class VariableTypeTable {\r\n    public static getVariableType(type: EVariableType) {\r\n        //todo remove <any>\r\n        var result = _table.getChild(<any>type);\r\n\r\n        Log.error(result === void 0, Log.info.FUNC_NOT_EXIST(type, \"in VariableTypeTable\"));\r\n\r\n        return result;\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { ShaderSourceBuilder, SourceDefine } from \"./ShaderSourceBuilder\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { requireCheck, assert } from \"../../../definition/typescript/decorator/contract\";\r\nimport { EngineShaderLib } from \"../lib/EngineShaderLib\";\r\nimport { Log } from \"../../../utils/Log\";\r\nimport { main_begin, main_end } from \"../snippet/ShaderSnippet\";\r\nimport { GPUDetector, EGPUPrecision } from \"../../../device/GPUDetector\";\r\nimport { lowp_fragment, mediump_fragment, highp_fragment } from \"../chunk/ShaderChunk\";\r\nimport { ShaderData } from \"../shader/Shader\";\r\nimport { VariableTypeTable } from \"../variable/VariableTypeTable\";\r\nimport { EVariableType } from \"../variable/EVariableType\";\r\n\r\n//todo add custom define\r\n@registerClass(\"EngineShaderSourceBuilder\")\r\nexport class EngineShaderSourceBuilder extends ShaderSourceBuilder {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public vsSourceTop: string = \"\";\r\n    public vsSourceDefine: string = \"\";\r\n    public vsSourceVarDeclare: string = \"\";\r\n    public vsSourceFuncDeclare: string = \"\";\r\n    public vsSourceFuncDefine: string = \"\";\r\n    public vsSourceBody: string = \"\";\r\n\r\n    public fsSourceTop: string = \"\";\r\n    public fsSourceDefine: string = \"\";\r\n    public fsSourceVarDeclare: string = \"\";\r\n    public fsSourceFuncDeclare: string = \"\";\r\n    public fsSourceFuncDefine: string = \"\";\r\n    public fsSourceBody: string = \"\";\r\n\r\n    public vsSourceDefineList: Collection<SourceDefine> = Collection.create<SourceDefine>();\r\n    public fsSourceDefineList: Collection<SourceDefine> = Collection.create<SourceDefine>();\r\n\r\n    public vsSourceExtensionList: Collection<string> = Collection.create<string>();\r\n    public fsSourceExtensionList: Collection<string> = Collection.create<string>();\r\n\r\n    @requireCheck(function(libs: Collection<EngineShaderLib>) {\r\n        assert(this.vsSource === null, Log.info.FUNC_SHOULD(\"vsSource\", \"be null\"));\r\n        assert(this.fsSource === null, Log.info.FUNC_SHOULD(\"fsSource\", \"be null\"));\r\n    })\r\n    public build(libs: Collection<EngineShaderLib>) {\r\n        this._readLibSource(libs);\r\n\r\n        if (this.vsSource === null) {\r\n            this._buildVsSource();\r\n        }\r\n        if (this.fsSource === null) {\r\n            this._buildFsSource();\r\n        }\r\n\r\n        this.convertAttributesData();\r\n    }\r\n\r\n    public clearShaderDefinition() {\r\n        this.attributes.removeAllChildren();\r\n        this.uniforms.removeAllChildren();\r\n        this.vsSourceDefineList.removeAllChildren();\r\n        this.fsSourceDefineList.removeAllChildren();\r\n\r\n        this.vsSourceTop = \"\";\r\n        this.vsSourceDefine = \"\";\r\n        this.vsSourceVarDeclare = \"\";\r\n        this.vsSourceFuncDeclare = \"\";\r\n        this.vsSourceFuncDefine = \"\";\r\n        this.vsSourceBody = \"\";\r\n        this.vsSource = null;\r\n\r\n        this.fsSourceTop = \"\";\r\n        this.fsSourceDefine = \"\";\r\n        this.fsSourceVarDeclare = \"\";\r\n        this.fsSourceFuncDeclare = \"\";\r\n        this.fsSourceFuncDefine = \"\";\r\n        this.fsSourceBody = \"\";\r\n        this.fsSource = null;\r\n    }\r\n\r\n    private _readLibSource(libs: Collection<EngineShaderLib>) {\r\n        var setSourceLibs = libs.filter((lib: EngineShaderLib) => {\r\n            return lib.vsSource !== null || lib.fsSource !== null;\r\n        });\r\n\r\n        this._judgeAndSetVsSource(setSourceLibs);\r\n        this._judgeAndSetFsSource(setSourceLibs);\r\n\r\n        this._judgeAndSetPartSource(libs);\r\n    }\r\n\r\n    private _judgeAndSetVsSource(setSourceLibs: Collection<EngineShaderLib>) {\r\n        var setVsSourceLib = setSourceLibs.findOne((lib: EngineShaderLib) => {\r\n            return lib.vsSource !== null;\r\n        });\r\n\r\n        if (setVsSourceLib) {\r\n            this.vsSource = setVsSourceLib.vsSource;\r\n        }\r\n    }\r\n\r\n    private _judgeAndSetFsSource(setSourceLibs: Collection<EngineShaderLib>) {\r\n        var setFsSourceLib = setSourceLibs.findOne((lib: EngineShaderLib) => {\r\n            return lib.fsSource !== null;\r\n        });\r\n\r\n        if (setFsSourceLib) {\r\n            this.fsSource = setFsSourceLib.fsSource;\r\n        }\r\n    }\r\n\r\n    private _judgeAndSetPartSource(libs: Collection<EngineShaderLib>) {\r\n        var vsSource = this.vsSource,\r\n            fsSource = this.fsSource,\r\n            attributes = this.attributes,\r\n            uniforms = this.uniforms,\r\n            vsSourceDefineList = this.vsSourceDefineList,\r\n            fsSourceDefineList = this.fsSourceDefineList,\r\n            vsSourceExtensionList = this.vsSourceExtensionList,\r\n            fsSourceExtensionList = this.fsSourceExtensionList,\r\n            vsSourceTop = \"\",\r\n            vsSourceDefine = \"\",\r\n            vsSourceVarDeclare = \"\",\r\n            vsSourceFuncDeclare = \"\",\r\n            vsSourceFuncDefine = \"\",\r\n            vsSourceBody = \"\",\r\n            fsSourceTop = \"\",\r\n            fsSourceDefine = \"\",\r\n            fsSourceVarDeclare = \"\",\r\n            fsSourceFuncDeclare = \"\",\r\n            fsSourceFuncDefine = \"\",\r\n            fsSourceBody = \"\";\r\n\r\n        libs.forEach((lib: EngineShaderLib) => {\r\n            attributes.addChildren(lib.attributes);\r\n            uniforms.addChildren(lib.uniforms);\r\n\r\n            if (vsSource === null) {\r\n                vsSourceTop += lib.vsSourceTop;\r\n                vsSourceDefine += lib.vsSourceDefine;\r\n                vsSourceVarDeclare += lib.vsSourceVarDeclare;\r\n                vsSourceFuncDeclare += lib.vsSourceFuncDeclare;\r\n                vsSourceFuncDefine += lib.vsSourceFuncDefine;\r\n                vsSourceBody += lib.vsSourceBody;\r\n\r\n                vsSourceDefineList.addChildren(lib.vsSourceDefineList);\r\n                vsSourceExtensionList.addChildren(lib.vsSourceExtensionList);\r\n            }\r\n\r\n            if (fsSource === null) {\r\n                fsSourceTop += lib.fsSourceTop;\r\n                fsSourceDefine += lib.fsSourceDefine;\r\n                fsSourceVarDeclare += lib.fsSourceVarDeclare;\r\n                fsSourceFuncDeclare += lib.fsSourceFuncDeclare;\r\n                fsSourceFuncDefine += lib.fsSourceFuncDefine;\r\n                fsSourceBody += lib.fsSourceBody;\r\n\r\n                fsSourceDefineList.addChildren(lib.fsSourceDefineList);\r\n                fsSourceExtensionList.addChildren(lib.fsSourceExtensionList);\r\n            }\r\n        });\r\n\r\n        if (vsSource === null) {\r\n            this.vsSourceTop = vsSourceTop;\r\n            this.vsSourceDefine = vsSourceDefine;\r\n            this.vsSourceVarDeclare = vsSourceVarDeclare;\r\n            this.vsSourceFuncDeclare = vsSourceFuncDeclare;\r\n            this.vsSourceFuncDefine = vsSourceFuncDefine;\r\n            this.vsSourceBody = vsSourceBody;\r\n        }\r\n\r\n        if (fsSource === null) {\r\n            this.fsSourceTop = fsSourceTop;\r\n            this.fsSourceDefine = fsSourceDefine;\r\n            this.fsSourceVarDeclare = fsSourceVarDeclare;\r\n            this.fsSourceFuncDeclare = fsSourceFuncDeclare;\r\n            this.fsSourceFuncDefine = fsSourceFuncDefine;\r\n            this.fsSourceBody = fsSourceBody;\r\n        }\r\n    }\r\n\r\n    private _buildVsSource() {\r\n        this.vsSource = this._buildVsSourceTop() + this._buildVsSourceDefine() + this._buildVsSourceVarDeclare() + this._buildVsSourceFuncDeclare() + this._buildVsSourceFuncDefine() + this._buildVsSourceBody();\r\n    }\r\n\r\n    private _buildFsSource() {\r\n        this.fsSource = this._buildFsSourceTop() + this._buildFsSourceDefine() + this._buildFsSourceVarDeclare() + this._buildFsSourceFuncDeclare() + this._buildFsSourceFuncDefine() + this._buildFsSourceBody();\r\n    }\r\n\r\n    private _buildVsSourceTop() {\r\n        return this._buildVsSourceExtension() + this._getPrecisionSource() + this.vsSourceTop;\r\n    }\r\n\r\n    private _buildVsSourceDefine() {\r\n        return this._buildSourceDefine(this.vsSourceDefineList) + this.vsSourceDefine;\r\n    }\r\n\r\n    private _buildVsSourceExtension() {\r\n        return this._buildSourceExtension(this.vsSourceExtensionList);\r\n    }\r\n\r\n    private _buildVsSourceVarDeclare() {\r\n        return this._generateAttributeSource() + this._generateUniformSource(this.vsSourceVarDeclare, this.vsSourceFuncDefine, this.vsSourceBody) + this.vsSourceVarDeclare;\r\n    }\r\n\r\n    private _buildVsSourceFuncDeclare() {\r\n        return this.vsSourceFuncDeclare;\r\n    }\r\n\r\n    private _buildVsSourceFuncDefine() {\r\n        return this.vsSourceFuncDefine;\r\n    }\r\n\r\n    private _buildVsSourceBody() {\r\n        return main_begin + this.vsSourceBody + main_end;\r\n    }\r\n\r\n    private _buildFsSourceTop() {\r\n        return this._buildFsSourceExtension() + this._getPrecisionSource() + this.fsSourceTop;\r\n    }\r\n\r\n    private _buildFsSourceDefine() {\r\n        return this._buildSourceDefine(this.fsSourceDefineList) + this.fsSourceDefine;\r\n    }\r\n\r\n    private _buildFsSourceExtension() {\r\n        return this._buildSourceExtension(this.fsSourceExtensionList);\r\n    }\r\n\r\n    private _buildFsSourceVarDeclare() {\r\n        return this._generateUniformSource(this.fsSourceVarDeclare, this.fsSourceFuncDefine, this.fsSourceBody) + this.fsSourceVarDeclare;\r\n    }\r\n\r\n    private _buildFsSourceFuncDeclare() {\r\n        return this.fsSourceFuncDeclare;\r\n    }\r\n\r\n    private _buildFsSourceFuncDefine() {\r\n        return this.fsSourceFuncDefine;\r\n    }\r\n\r\n    private _buildFsSourceBody() {\r\n        return main_begin + this.fsSourceBody + main_end;\r\n    }\r\n\r\n    private _buildSourceDefine(defineList: Collection<SourceDefine>) {\r\n        var result = \"\";\r\n\r\n        defineList.forEach((sourceDefine: SourceDefine) => {\r\n            if (sourceDefine.value === void 0) {\r\n                result += `#define ${sourceDefine.name}\\n`;\r\n            }\r\n            else {\r\n                result += `#define ${sourceDefine.name} ${sourceDefine.value}\\n`;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    private _buildSourceExtension(extensionList: Collection<string>) {\r\n        var result = \"\";\r\n\r\n        extensionList.forEach((name: string) => {\r\n            result += `#extension ${name} : enable\\n`;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    private _getPrecisionSource() {\r\n        var precision = GPUDetector.getInstance().precision,\r\n            result = null;\r\n\r\n        switch (precision) {\r\n            case EGPUPrecision.HIGHP:\r\n                result = highp_fragment.top;\r\n                break;\r\n            case EGPUPrecision.MEDIUMP:\r\n                result = mediump_fragment.top;\r\n                break;\r\n            case EGPUPrecision.LOWP:\r\n                result = lowp_fragment.top;\r\n                break;\r\n            default:\r\n                result = \"\";\r\n                break;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private _generateAttributeSource() {\r\n        var result = \"\";\r\n\r\n        this.attributes.filter((data: ShaderData, key: string) => {\r\n            return !!data;\r\n        }).forEach((data: ShaderData, key: string) => {\r\n            result += `attribute ${VariableTypeTable.getVariableType(data.type)} ${key};\\n`;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    private _generateUniformSource(sourceVarDeclare: string, sourceFuncDefine: string, sourceBody: string) {\r\n        var result = \"\",\r\n            self = this;\r\n\r\n        this.uniforms.filter((data: ShaderData, key: string) => {\r\n            return !!data && data.type !== EVariableType.STRUCTURE && data.type !== EVariableType.STRUCTURES && !self._isExistInSource(key, sourceVarDeclare) && (self._isExistInSource(key, sourceFuncDefine) || self._isExistInSource(key, sourceBody));\r\n        }).forEach((data: ShaderData, key: string) => {\r\n            result += `uniform ${VariableTypeTable.getVariableType(data.type)} ${key};\\n`;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    private _isExistInSource(key: string, source: string) {\r\n        return source.indexOf(key) !== -1;\r\n    }\r\n}\r\n\r\n","import { Shader } from \"./Shader\";\r\nimport { EngineShaderSourceBuilder } from \"../sourceBuilder/EngineShaderSourceBuilder\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { EngineShaderLib } from \"../lib/EngineShaderLib\";\r\nimport { RenderCommand } from \"../../command/RenderCommand\";\r\nimport { Material } from \"../../../material/Material\";\r\nimport { ShaderSourceBuilder } from \"../sourceBuilder/ShaderSourceBuilder\";\r\n\r\nexport abstract class EngineShader extends Shader {\r\n    protected sourceBuilder: EngineShaderSourceBuilder;\r\n    protected libs: Collection<EngineShaderLib>;\r\n\r\n    protected buildDefinitionData(cmd: RenderCommand, material: Material) {\r\n        this.libs.forEach((lib: EngineShaderLib) => {\r\n            lib.setShaderDefinition(cmd, material);\r\n        });\r\n\r\n        this.sourceBuilder.clearShaderDefinition();\r\n\r\n        this.sourceBuilder.build(this.libs);\r\n\r\n        this.attributes = this.sourceBuilder.attributes;\r\n        this.uniforms = this.sourceBuilder.uniforms;\r\n        this.vsSource = this.sourceBuilder.vsSource;\r\n        this.fsSource = this.sourceBuilder.fsSource;\r\n    }\r\n\r\n    protected createShaderSourceBuilder(): ShaderSourceBuilder {\r\n        return EngineShaderSourceBuilder.create();\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { EngineShader } from \"./EngineShader\";\r\nimport { QuadCommand } from \"../../command/QuadCommand\";\r\nimport { Material } from \"../../../material/Material\";\r\nimport { EngineShaderLib } from \"../lib/EngineShaderLib\";\r\n\r\n@registerClass(\"CommonShader\")\r\nexport class CommonShader extends EngineShader {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public update(cmd: QuadCommand, material: Material) {\r\n        var program = null;\r\n\r\n        this.judgeRefreshShader(cmd, material);\r\n\r\n        program = this.program;\r\n\r\n        program.use();\r\n\r\n        this.libs.forEach((lib: EngineShaderLib) => {\r\n            lib.sendShaderVariables(program, cmd, material);\r\n        });\r\n\r\n        // this.mapManager.bindAndUpdate();\r\n        // this.mapManager.sendData(program);\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { EVariableType } from \"./EVariableType\";\r\nimport { EVariableCategory } from \"./EVariableCategory\";\r\n\r\n@registerClass(\"VariableLib\")\r\nexport class VariableLib {\r\n    //todo group?(common,cubemap...)\r\n\r\n    public static a_position: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_positionVec2: ShaderVariable = {\r\n        type: EVariableType.FLOAT_2,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_currentFramePosition: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_nextFramePosition: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_normal: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_currentFrameNormal: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_nextFrameNormal: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_color: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_texCoord: ShaderVariable = {\r\n        type: EVariableType.FLOAT_2,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_tangent: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_color: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_mMatrix: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_vMatrix: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_pMatrix: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_mvpMatrix: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_vpMatrix: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_normalMatrix: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_samplerCube0: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_CUBE,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_sampler2D0: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_sampler2D1: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_lightMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMap1Sampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMap2Sampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMap3Sampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_specularMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_emissionMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_normalMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_reflectionMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_refractionMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_cameraPos: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_refractionRatio: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_reflectivity: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_map0SourceRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_map1SourceRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMapSourceRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_map0RepeatRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_map1RepeatRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMapRepeatRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_combineMode: ShaderVariable = {\r\n        type: EVariableType.NUMBER_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_mixRatio: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_lightMapIntensity: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuse: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_specular: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_emission: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_shininess: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_lightModel: ShaderVariable = {\r\n        type: EVariableType.NUMBER_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_isBothSide: ShaderVariable = {\r\n        type: EVariableType.NUMBER_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_opacity: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_ambient: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_directionLights: ShaderVariable = {\r\n        type: EVariableType.STRUCTURES,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_pointLights: ShaderVariable = {\r\n        type: EVariableType.STRUCTURES,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_vpMatrixFromLight: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_lightPos: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_farPlane: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_interpolation: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_tilesHeightNumber: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_tilesWidthNumber: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_amplitude: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_jointColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_time: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_speed: ShaderVariable = {\r\n        type: EVariableType.VECTOR_2,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_shift: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_alphaThreshold: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_fireColor: ShaderVariable = {\r\n        type: EVariableType.STRUCTURE,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_layerHeightDatas: ShaderVariable = {\r\n        type: EVariableType.STRUCTURES,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_layerSampler2Ds: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_ARRAY,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_herb1Color: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_herb2Color: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_herb3Color: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_groundColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_ampScale: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_woodColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_roadColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_skyColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_cloudColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_brickColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_waveData: ShaderVariable = {\r\n        type: EVariableType.STRUCTURE,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_windMatrix: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_bumpMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_bumpMap1Sampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_bumpMap2Sampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_bumpMap3Sampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_levelData: ShaderVariable = {\r\n        type: EVariableType.STRUCTURE,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_mVec4_0: ShaderVariable = {\r\n        type: EVariableType.FLOAT_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n\r\n    public static a_mVec4_1: ShaderVariable = {\r\n        type: EVariableType.FLOAT_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_mVec4_2: ShaderVariable = {\r\n        type: EVariableType.FLOAT_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_mVec4_3: ShaderVariable = {\r\n        type: EVariableType.FLOAT_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_normalVec4_0: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_normalVec4_1: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_normalVec4_2: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_isRenderListEmpty: ShaderVariable = {\r\n        type: EVariableType.NUMBER_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_isReflectionRenderListEmpty: ShaderVariable = {\r\n        type: EVariableType.NUMBER_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_isRefractionRenderListEmpty: ShaderVariable = {\r\n        type: EVariableType.NUMBER_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_bitmapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_page: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_pageSampler2Ds: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_ARRAY,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_mixMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMap1RepeatRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMap2RepeatRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMap3RepeatRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_grassMapDatas: ShaderVariable = {\r\n        type: EVariableType.STRUCTURES,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_quadIndex: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_grassMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_windData: ShaderVariable = {\r\n        type: EVariableType.STRUCTURES,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_vertexIndex: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_grassRangeWidth: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_grassRangeHeight: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_terrainRangeWidth: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_terrainRangeHeight: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_terrainMinHeight: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_terrainMaxHeight: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_terrainSubdivisions: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_terrainScaleY: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_terrainPositionY: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_heightMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_lightColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_jointIndice: ShaderVariable = {\r\n        type: EVariableType.FLOAT_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_jointWeight: ShaderVariable = {\r\n        type: EVariableType.FLOAT_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_jointMatrices: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4_ARRAY,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n}\r\n\r\nexport type ShaderVariable = {\r\n    type: EVariableType;\r\n    value: any\r\n}","import { ShaderLib } from \"./ShaderLib\";\r\nimport { EngineShader } from \"../shader/EngineShader\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { ShaderVariable, VariableLib } from \"../variable/VariableLib\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { virtual } from \"../../../definition/typescript/decorator/virtual\";\r\nimport { RenderCommand } from \"../../command/RenderCommand\";\r\nimport { Material } from \"../../../material/Material\";\r\nimport { Program } from \"../../program/Program\";\r\nimport { EVariableType } from \"../variable/EVariableType\";\r\nimport { requireCheck, assert, it } from \"../../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../../../utils/Log\";\r\nimport { GLSLChunk, empty } from \"../chunk/ShaderChunk\";\r\nimport { JudgeUtils } from \"../../../utils/JudgeUtils\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { PathUtils } from \"wonder-commonlib/dist/es2015/utils/PathUtils\";\r\n// import { SourceDefine } from \"../sourceBuilder/ShaderSourceBuilder\";\r\n\r\nexport abstract class EngineShaderLib extends ShaderLib {\r\n    public shader: EngineShader;\r\n\r\n    public abstract vsChunk: GLSLChunk;\r\n    public abstract fsChunk: GLSLChunk;\r\n\r\n    public attributes: Hash<ShaderVariable> = Hash.create<ShaderVariable>();\r\n    public uniforms: Hash<ShaderVariable> = Hash.create<ShaderVariable>();\r\n    public vsSourceTop: string = \"\";\r\n    public vsSourceDefine: string = \"\";\r\n    public vsSourceVarDeclare: string = \"\";\r\n    public vsSourceFuncDeclare: string = \"\";\r\n    public vsSourceFuncDefine: string = \"\";\r\n    public vsSourceBody: string = \"\";\r\n    public vsSource: string = null;\r\n\r\n    public fsSourceTop: string = \"\";\r\n    public fsSourceDefine: string = \"\";\r\n    public fsSourceVarDeclare: string = \"\";\r\n    public fsSourceFuncDeclare: string = \"\";\r\n    public fsSourceFuncDefine: string = \"\";\r\n    public fsSourceBody: string = \"\";\r\n    public fsSource: string = null;\r\n    public vsSourceDefineList: Collection<any> = Collection.create<any>();\r\n    public fsSourceDefineList: Collection<any> = Collection.create<any>();\r\n    public vsSourceExtensionList: Collection<string> = Collection.create<string>();\r\n    public fsSourceExtensionList: Collection<string> = Collection.create<string>();\r\n\r\n    @virtual\r\n    public setShaderDefinition(cmd: RenderCommand, material: Material) {\r\n        var vs = null,\r\n            fs = null;\r\n\r\n        this._clearShaderDefinition();\r\n\r\n        vs = this.getVsChunk();\r\n        fs = this.getFsChunk();\r\n\r\n        vs && this.setVsSource(vs);\r\n        fs && this.setFsSource(fs);\r\n    }\r\n\r\n    protected sendAttributeBuffer(program: Program, name: string, data: any) {\r\n        program.sendAttributeBuffer(name, EVariableType.BUFFER, data);\r\n    }\r\n\r\n    @requireCheck(function(program: Program, name: string, data: any) {\r\n        assert(!!VariableLib[name], `${name} should exist in VariableLib`);\r\n    })\r\n    protected sendUniformData(program: Program, name: string, data: any) {\r\n        program.sendUniformData(name, VariableLib[name].type, data);\r\n    }\r\n\r\n    protected getVsChunk();\r\n    protected getVsChunk(chunk: GLSLChunk);\r\n\r\n    protected getVsChunk(...args) {\r\n        var chunk = args.length === 0 ? this.vsChunk : args[0];\r\n\r\n        return this._getChunk(chunk, EShaderLibType.vs);\r\n    }\r\n\r\n    protected getFsChunk();\r\n    protected getFsChunk(chunk: GLSLChunk);\r\n\r\n    protected getFsChunk(...args) {\r\n        var chunk = args.length === 0 ? this.fsChunk : args[0];\r\n\r\n        return this._getChunk(chunk, EShaderLibType.fs);\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        assert(this.vsSource === null, Log.info.FUNC_SHOULD(\"vsSource\", \"be null\"));\r\n    })\r\n    protected setVsSource(vs: GLSLChunk | string, operator: string = \"=\") {\r\n        if (JudgeUtils.isString(vs)) {\r\n            this.vsSource = <string>vs;\r\n        }\r\n        else {\r\n            this._setSource(vs, EShaderLibType.vs, operator);\r\n        }\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        assert(this.fsSource === null, Log.info.FUNC_SHOULD(\"fsSource\", \"be null\"));\r\n    })\r\n    protected setFsSource(fs: GLSLChunk | string, operator: string = \"=\") {\r\n        if (JudgeUtils.isString(fs)) {\r\n            this.fsSource = <string>fs;\r\n        }\r\n        else {\r\n            this._setSource(fs, EShaderLibType.fs, operator);\r\n        }\r\n    }\r\n\r\n    protected addAttributeVariable(variableArr: Array<string>) {\r\n        this._addVariable(this.attributes, variableArr);\r\n    }\r\n\r\n    protected addUniformVariable(variableArr: Array<string>) {\r\n        this._addVariable(this.uniforms, variableArr);\r\n    }\r\n\r\n    @requireCheck(function(target: Hash<ShaderVariable>, variableArr: Array<string>) {\r\n        variableArr.forEach((variable: string) => {\r\n            it(\"should exist in VariableLib\", function() {\r\n                expect(VariableLib[variable]).exist;\r\n            });\r\n        });\r\n    })\r\n    private _addVariable(target: Hash<ShaderVariable>, variableArr: Array<string>) {\r\n        variableArr.forEach((variable: string) => {\r\n            assert(VariableLib[variable], Log.info.FUNC_SHOULD(variable, \"exist in VariableLib\"));\r\n\r\n            target.addChild(variable, VariableLib[variable]);\r\n        });\r\n    }\r\n\r\n    private _clearShaderDefinition() {\r\n        this.attributes.removeAllChildren();\r\n        this.uniforms.removeAllChildren();\r\n        this.vsSourceDefineList.removeAllChildren();\r\n        this.fsSourceDefineList.removeAllChildren();\r\n        this.vsSourceExtensionList.removeAllChildren();\r\n        this.fsSourceExtensionList.removeAllChildren();\r\n\r\n        this.vsSourceTop = \"\";\r\n        this.vsSourceDefine = \"\";\r\n        this.vsSourceVarDeclare = \"\";\r\n        this.vsSourceFuncDeclare = \"\";\r\n        this.vsSourceFuncDefine = \"\";\r\n        this.vsSourceBody = \"\";\r\n        this.vsSource = null;\r\n\r\n        this.fsSourceTop = \"\";\r\n        this.fsSourceDefine = \"\";\r\n        this.fsSourceVarDeclare = \"\";\r\n        this.fsSourceFuncDeclare = \"\";\r\n        this.fsSourceFuncDefine = \"\";\r\n        this.fsSourceBody = \"\";\r\n        this.fsSource = null;\r\n    }\r\n\r\n    private _getChunk(chunk: GLSLChunk | null, sourceType: EShaderLibType) {\r\n        var key = null;\r\n\r\n        if (chunk === null) {\r\n            return empty;\r\n        }\r\n\r\n        return chunk;\r\n    }\r\n\r\n    private _setSource(chunk: GLSLChunk, sourceType: EShaderLibType, operator: string) {\r\n        if (!chunk) {\r\n            return;\r\n        }\r\n\r\n        switch (operator) {\r\n            case \"+\":\r\n                this[`${sourceType}SourceTop`] += chunk.top;\r\n                this[`${sourceType}SourceDefine`] += chunk.define;\r\n                this[`${sourceType}SourceVarDeclare`] += chunk.varDeclare;\r\n                this[`${sourceType}SourceFuncDeclare`] += chunk.funcDeclare;\r\n                this[`${sourceType}SourceFuncDefine`] += chunk.funcDefine;\r\n                this[`${sourceType}SourceBody`] += chunk.body;\r\n                break;\r\n            case \"=\":\r\n                this[`${sourceType}SourceTop`] = chunk.top;\r\n                this[`${sourceType}SourceDefine`] = chunk.define;\r\n                this[`${sourceType}SourceVarDeclare`] = chunk.varDeclare;\r\n                this[`${sourceType}SourceFuncDeclare`] = chunk.funcDeclare;\r\n                this[`${sourceType}SourceFuncDefine`] = chunk.funcDefine;\r\n                this[`${sourceType}SourceBody`] = chunk.body;\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_INVALID(\"opertor:\", operator));\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\nenum EShaderLibType {\r\n    vs = <any>\"vs\",\r\n    fs = <any>\"fs\"\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { EngineShaderLib } from \"../EngineShaderLib\";\r\nimport { Program } from \"../../../program/Program\";\r\nimport { QuadCommand } from \"../../../command/QuadCommand\";\r\nimport { EngineMaterial } from \"../../../../material/EngineMaterial\";\r\nimport { common_vertex, common_fragment, GLSLChunk, common_define, common_function } from \"../../chunk/ShaderChunk\";\r\n\r\n@registerClass(\"CommonShaderLib\")\r\nexport class CommonShaderLib extends EngineShaderLib {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public vsChunk: GLSLChunk = common_vertex;\r\n    public fsChunk: GLSLChunk = common_fragment;\r\n\r\n    public sendShaderVariables(program: Program, cmd: QuadCommand, material: EngineMaterial) {\r\n        this.sendUniformData(program, \"u_vMatrix\", cmd.vMatrix);\r\n        this.sendUniformData(program, \"u_pMatrix\", cmd.pMatrix);\r\n        this.sendUniformData(program, \"u_mMatrix\", cmd.mMatrix);\r\n    }\r\n\r\n    public setShaderDefinition(cmd: QuadCommand, material: EngineMaterial) {\r\n        super.setShaderDefinition(cmd, material);\r\n\r\n        //todo use VariableLib.xxx?\r\n        // this.addUniformVariable([\"u_vMatrix\", \"u_pMatrix\"]);\r\n        this.addUniformVariable([\"u_vMatrix\", \"u_pMatrix\", \"u_mMatrix\"]);\r\n\r\n        this.vsSourceDefine = common_define.define + common_vertex.define;\r\n        this.vsSourceFuncDefine = common_function.funcDefine + common_vertex.funcDefine;\r\n\r\n        this.fsSourceDefine = common_define.define + common_fragment.define;\r\n        this.fsSourceFuncDefine = common_function.funcDefine + common_fragment.funcDefine;\r\n    }\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { EngineShaderLib } from \"../EngineShaderLib\";\r\nimport { Program } from \"../../../program/Program\";\r\nimport { QuadCommand } from \"../../../command/QuadCommand\";\r\nimport { EngineMaterial } from \"../../../../material/EngineMaterial\";\r\nimport { ArrayBuffer } from \"../../../buffer/ArrayBuffer\";\r\nimport { EBufferDataType } from \"../../../buffer/EBufferDataType\";\r\nimport { GLSLChunk } from \"../../chunk/ShaderChunk\";\r\n\r\n@registerClass(\"VerticeCommonShaderLib\")\r\nexport class VerticeCommonShaderLib extends EngineShaderLib {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public vsChunk: GLSLChunk = null;\r\n    public fsChunk: GLSLChunk = null;\r\n\r\n    public sendShaderVariables(program: Program, cmd: QuadCommand, material: EngineMaterial) {\r\n        this._sendAttributeVariables(program, cmd);\r\n    }\r\n\r\n    public setShaderDefinition(cmd: QuadCommand, material: EngineMaterial) {\r\n        super.setShaderDefinition(cmd, material);\r\n\r\n        this.addAttributeVariable([\"a_position\"]);\r\n    }\r\n\r\n    private _sendAttributeVariables(program: Program, cmd: QuadCommand) {\r\n        var verticeBuffer = <ArrayBuffer>cmd.buffers.getChild(EBufferDataType.VERTICE);\r\n\r\n        if (!verticeBuffer) {\r\n            return;\r\n        }\r\n\r\n        this.sendAttributeBuffer(program, \"a_position\", verticeBuffer);\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Geometry } from \"../component/geometry/Geometry\";\r\nimport { Shader } from \"../renderer/shader/shader/Shader\";\r\nimport { VerticeCommonShaderLib } from \"../renderer/shader/lib/common/VerticeCommonShaderLib\";\r\n\r\n@registerClass(\"ShaderLibUtils\")\r\nexport class ShaderLibUtils {\r\n    public static addVerticeShaderLib(geometry: Geometry, shader: Shader) {\r\n        // if(GlobalGeometryUtils.hasMorphData(geometry)){\r\n        //     let CommonMorphShaderLib = ClassUtils.getClass(\"CommonMorphShaderLib\"),\r\n        //         VerticeMorphShaderLib = ClassUtils.getClass(\"VerticeMorphShaderLib\");\r\n        //\r\n        //     shader.addLib(CommonMorphShaderLib.create());\r\n        //     shader.addLib(VerticeMorphShaderLib.create());\r\n        // }\r\n        // else if(GlobalGeometryUtils.hasSkinSkeletonData(geometry)){\r\n        //     let VerticeSkinSkeletonShaderLib = ClassUtils.getClass(\"VerticeSkinSkeletonShaderLib\");\r\n        //\r\n        //     shader.addLib(VerticeCommonShaderLib.create());\r\n        //     shader.addLib(VerticeSkinSkeletonShaderLib.create());\r\n        // }\r\n        // else{\r\n        shader.addLib(VerticeCommonShaderLib.create());\r\n        // }\r\n    }\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { EngineShaderLib } from \"../EngineShaderLib\";\r\nimport { Program } from \"../../../program/Program\";\r\nimport { QuadCommand } from \"../../../command/QuadCommand\";\r\nimport { EngineMaterial } from \"../../../../material/EngineMaterial\";\r\nimport { GLSLChunk, end_basic_fragment } from \"../../chunk/ShaderChunk\";\r\n\r\n@registerClass(\"EndShaderLib\")\r\nexport class EndShaderLib extends EngineShaderLib {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public vsChunk: GLSLChunk = null;\r\n    public fsChunk: GLSLChunk = end_basic_fragment;\r\n\r\n    public sendShaderVariables(program: Program, cmd: QuadCommand, material: EngineMaterial) {\r\n        // program.sendAllBufferData(cmd.vaoManager);\r\n        program.sendAllBufferData();\r\n    }\r\n}","import { Material } from \"./Material\";\r\nimport { virtual } from \"../definition/typescript/decorator/virtual\";\r\nimport { Shader } from \"../renderer/shader/shader/Shader\";\r\nimport { CommonShader } from \"../renderer/shader/shader/CommonShader\";\r\nimport { CommonShaderLib } from \"../renderer/shader/lib/common/CommonShaderLib\";\r\nimport { ShaderLibUtils } from \"../utils/ShaderLibUtils\";\r\nimport { ShaderLib } from \"../renderer/shader/lib/ShaderLib\";\r\nimport { EndShaderLib } from \"../renderer/shader/lib/common/EndShaderLib\";\r\n\r\nexport abstract class EngineMaterial extends Material {\r\n    // @cloneAttributeAsBasicType()\r\n    // public refractionRatio:number = 0;\r\n    // @cloneAttributeAsBasicType()\r\n    // public reflectivity:number = null;\r\n    // @cloneAttributeAsBasicType()\r\n    // public mapCombineMode:ETextureCombineMode = ETextureCombineMode.MIX;\r\n    // @cloneAttributeAsBasicType()\r\n    // public mapMixRatio:number = 0.5;\r\n\r\n    public init() {\r\n        this._addTopShaderLib();\r\n        this.addShaderLib();\r\n        this._addEndShaderLib();\r\n\r\n        super.init();\r\n    }\r\n\r\n    @virtual\r\n    protected addShaderLib() {\r\n    }\r\n\r\n    // protected addNormalShaderLib(){\r\n    //     // var NormalMorphShaderLib = ClassUtils.getClass(\"NormalMorphShaderLib\");\r\n    //     //\r\n    //     // if(GlobalGeometryUtils.hasMorphData(this.geometry)\r\n    //     //     && !this.shader.hasLib(NormalMorphShaderLib)){\r\n    //     //     this._addShaderLibToTop(NormalMorphShaderLib.create());\r\n    //     // }\r\n    //     // else if(!this.shader.hasLib(NormalCommonShaderLib)){\r\n    //     //     this._addShaderLibToTop(NormalCommonShaderLib.create());\r\n    //     // }\r\n    // }\r\n\r\n    protected createShader(): Shader {\r\n        return CommonShader.create();\r\n    }\r\n\r\n    private _addTopShaderLib() {\r\n        this.shader.addLib(CommonShaderLib.create());\r\n\r\n        // InstanceUtils.addModelMatrixShaderLib(this.shader, this.geometry.entityObject);\r\n\r\n        ShaderLibUtils.addVerticeShaderLib(this.geometry, this.shader);\r\n    }\r\n\r\n    private _addShaderLibToTop(lib: ShaderLib) {\r\n        this.shader.addShaderLibToTop(lib);\r\n    }\r\n\r\n    private _addEndShaderLib() {\r\n        this.shader.addLib(EndShaderLib.create());\r\n    }\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { EngineShaderLib } from \"../EngineShaderLib\";\r\nimport { Program } from \"../../../program/Program\";\r\nimport { QuadCommand } from \"../../../command/QuadCommand\";\r\nimport { BasicMaterial } from \"../../../../material/BasicMaterial\";\r\nimport { GLSLChunk, basic_materialColor_fragment } from \"../../chunk/ShaderChunk\";\r\n\r\n@registerClass(\"BasicMaterialColorShaderLib\")\r\nexport class BasicMaterialColorShaderLib extends EngineShaderLib {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public vsChunk: GLSLChunk = null;\r\n    public fsChunk: GLSLChunk = basic_materialColor_fragment;\r\n\r\n    public sendShaderVariables(program: Program, cmd: QuadCommand, material: BasicMaterial) {\r\n        this.sendUniformData(program, \"u_color\", material.color.toVector3());\r\n    }\r\n\r\n    public setShaderDefinition(cmd: QuadCommand, material: BasicMaterial) {\r\n        super.setShaderDefinition(cmd, material);\r\n\r\n        this.addUniformVariable([\"u_color\"]);\r\n    }\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { EngineShaderLib } from \"../EngineShaderLib\";\r\nimport { Program } from \"../../../program/Program\";\r\nimport { QuadCommand } from \"../../../command/QuadCommand\";\r\nimport { BasicMaterial } from \"../../../../material/BasicMaterial\";\r\nimport { setPos_mvp } from \"../../snippet/ShaderSnippet\";\r\nimport { GLSLChunk } from \"../../chunk/ShaderChunk\";\r\n\r\n@registerClass(\"BasicShaderLib\")\r\nexport class BasicShaderLib extends EngineShaderLib {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public vsChunk: GLSLChunk = null;\r\n    public fsChunk: GLSLChunk = null;\r\n\r\n    public sendShaderVariables(program: Program, cmd: QuadCommand, material: BasicMaterial) {\r\n        this.sendUniformData(program, \"u_opacity\", material.opacity);\r\n    }\r\n\r\n    public setShaderDefinition(cmd: QuadCommand, material: BasicMaterial) {\r\n        super.setShaderDefinition(cmd, material);\r\n\r\n        this.addUniformVariable([\"u_opacity\"]);\r\n\r\n        this.vsSourceBody = setPos_mvp;\r\n    }\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { EngineShaderLib } from \"../EngineShaderLib\";\r\nimport { QuadCommand } from \"../../../command/QuadCommand\";\r\nimport { StandardBasicMaterial } from \"../../../../material/StandardBasicMaterial\";\r\nimport { GLSLChunk, end_basic_fragment } from \"../../chunk/ShaderChunk\";\r\n\r\n@registerClass(\"EndBasicShaderLib\")\r\nexport class EndBasicShaderLib extends EngineShaderLib {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public vsChunk: GLSLChunk = null;\r\n    public fsChunk: GLSLChunk = end_basic_fragment;\r\n\r\n    public setShaderDefinition(cmd: QuadCommand, material: StandardBasicMaterial) {\r\n        super.setShaderDefinition(cmd, material);\r\n\r\n        if (material.alphaTest !== null) {\r\n            this.fsSourceBody += `if (gl_FragColor.a < ${material.alphaTest}){\r\n    discard;\r\n}\\n`;\r\n        }\r\n    }\r\n}","import { EngineMaterial } from \"./EngineMaterial\";\r\nimport { cloneAttributeAsBasicType } from \"../definition/typescript/decorator/clone\";\r\nimport { virtual } from \"../definition/typescript/decorator/virtual\";\r\nimport { BasicMaterialColorShaderLib } from \"../renderer/shader/lib/basic/BasicMaterialColorShaderLib\";\r\nimport { BasicShaderLib } from \"../renderer/shader/lib/basic/BasicShaderLib\";\r\nimport { EndBasicShaderLib } from \"../renderer/shader/lib/basic/EndBasicShaderLib\";\r\n\r\nexport abstract class StandardBasicMaterial extends EngineMaterial {\r\n    // @ensureGetter(function(mapList:wdCb.Collection<Texture>){\r\n    //     assert(mapList.getCount() <= 2, wdCb.Log.info.FUNC_SUPPORT(\"only\", \"map.count <= 2\"));\r\n    // })\r\n    // @cloneAttributeAsCustomType(function(source:StandardBasicMaterial, target:StandardBasicMaterial, memberName:string){\r\n    //     source[memberName].forEach((map:BasicTexture|ProceduralTexture) => {\r\n    //         target.mapManager.addMap(map.clone());\r\n    //     });\r\n    // })\r\n    // get mapList(){\r\n    //     return this.mapManager.getMapList();\r\n    // }\r\n    //\r\n    // private _map:Texture|TextureAsset|Array<Texture>|Array<TextureAsset> = null;\r\n    // @requireSetter(function(map:Texture|TextureAsset|Array<Texture>|Array<TextureAsset>){\r\n    //     if(map instanceof Texture || map instanceof TextureAsset){\r\n    //     }\r\n    //     else{\r\n    //         let mapArr:Array<any> = map;\r\n    //\r\n    //         it(\"map should be array\", () => {\r\n    //             chai.expect(mapArr).be.a(\"array\");\r\n    //         });\r\n    //         it(\"map.count should < 3\", () => {\r\n    //             chai.expect(mapArr.length).lessThan(3);\r\n    //         });\r\n    //     }\r\n    // })\r\n    // set map(map:Texture|TextureAsset|Array<Texture>|Array<TextureAsset>){\r\n    //     this._map = map;\r\n    //\r\n    //     this._addMap();\r\n    // }\r\n    // get map(){\r\n    //     return this.mapList.getChild(0);\r\n    // }\r\n\r\n    @cloneAttributeAsBasicType()\r\n    public opacity: number = 1.0;\r\n    @cloneAttributeAsBasicType()\r\n    public alphaTest: number = null;\r\n\r\n    @virtual\r\n    protected addExtendShaderLib() {\r\n    }\r\n\r\n    protected addShaderLib() {\r\n        var envMap = null;\r\n\r\n        // if(this.geometry.hasColors()){\r\n        //     this.shader.addLib(BasicVertexColorShaderLib.create());\r\n        // }\r\n        // else{\r\n        this.shader.addLib(BasicMaterialColorShaderLib.create());\r\n        // }\r\n\r\n        this.shader.addLib(BasicShaderLib.create());\r\n\r\n        // this._setMapShaderLib();\r\n\r\n        // envMap = this.envMap;\r\n        // if(envMap){\r\n        //     InstanceUtils.addNormalModelMatrixShaderLib(this.shader, this.geometry.entityObject);\r\n        //\r\n        //     this._setEnvMapShaderLib(envMap);\r\n        // }\r\n\r\n        this.addExtendShaderLib();\r\n\r\n        this.shader.addLib(EndBasicShaderLib.create());\r\n    }\r\n\r\n    // private _setMapShaderLib(){\r\n    //     var mapManager = this.mapManager,\r\n    //         mapCount = mapManager.getMapCount();\r\n    //\r\n    //     if(mapCount > 0){\r\n    //         if(mapCount > 1){\r\n    //             this.shader.addLib(MultiMapShaderLib.create());\r\n    //         }\r\n    //         else{\r\n    //             this.shader.addLib(BasicMapShaderLib.create());\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    // private _setEnvMapShaderLib(envMap:CubemapTexture){\r\n    //     this.addNormalShaderLib();\r\n    //\r\n    //     this.shader.addLib(CommonEnvMapShaderLib.create());\r\n    //\r\n    //     switch (envMap.mode){\r\n    //         case EEnvMapMode.BASIC:\r\n    //             this.shader.addLib(BasicForBasicEnvMapShaderLib.create());\r\n    //             break;\r\n    //         case EEnvMapMode.REFLECTION:\r\n    //             this.shader.addLib(ReflectionForBasicEnvMapShaderLib.create());\r\n    //             break;\r\n    //         case EEnvMapMode.REFRACTION:\r\n    //             this.shader.addLib(RefractionForBasicEnvMapShaderLib.create());\r\n    //             break;\r\n    //         case EEnvMapMode.FRESNEL:\r\n    //             this.shader.addLib(FresnelForBasicEnvMapShaderLib.create());\r\n    //             break;\r\n    //         default:\r\n    //             Log.error(true, Log.info.FUNC_INVALID(\"EEnvMapMode\"));\r\n    //             break;\r\n    //     }\r\n    // }\r\n\r\n    // private _addMap(){\r\n    //     var map = this._map;\r\n    //\r\n    //     if(map === null){\r\n    //         return;\r\n    //     }\r\n    //\r\n    //     if(map instanceof Texture || map instanceof TextureAsset){\r\n    //         this.mapManager.addMap(<Texture&TextureAsset>map);\r\n    //     }\r\n    //     else{\r\n    //         for(let m of map){\r\n    //             this.mapManager.addMap(<Texture&TextureAsset>m);\r\n    //         }\r\n    //     }\r\n    // }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { StandardBasicMaterial } from \"./StandardBasicMaterial\";\r\n\r\n@registerClass(\"BasicMaterial\")\r\nexport class BasicMaterial extends StandardBasicMaterial {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        obj.initWhenCreate();\r\n\r\n        return obj;\r\n    }\r\n\r\n    // public getTextureForRenderSort():Texture{\r\n    //     // return this.mapList.getChild(0);\r\n    //     return null;\r\n    // }\r\n}","export enum EVariableSemantic {\r\n    POSITION = <any>\"POSITION\",\r\n    NORMAL = <any>\"NORMAL\",\r\n    TEXCOORD = <any>\"TEXCOORD\",\r\n    TANGENT = <any>\"TANGENT\",\r\n    COLOR = <any>\"COLOR\",\r\n\r\n    MODEL = <any>\"MODEL\",\r\n    VIEW = <any>\"VIEW\",\r\n    PROJECTION = <any>\"PROJECTION\",\r\n    MODEL_VIEW = <any>\"MODEL_VIEW\",\r\n    MODEL_VIEW_PROJECTION = <any>\"MODEL_VIEW_PROJECTION\",\r\n    MODEL_INVERSE = <any>\"MODEL_INVERSE\",\r\n    VIEW_INVERSE = <any>\"VIEW_INVERSE\",\r\n    PROJECTION_INVERSE = <any>\"PROJECTION_INVERSE\",\r\n    MODEL_VIEW_INVERSE = <any>\"MODEL_VIEW_INVERSE\",\r\n    MODEL_VIEW_PROJECTION_INVERSE = <any>\"MODEL_VIEW_PROJECTION_INVERSE\",\r\n    MODEL_INVERSE_TRANSPOSE = <any>\"MODEL_INVERSE_TRANSPOSE\",\r\n    MODEL_VIEW_INVERSE_TRANSPOSE = <any>\"MODEL_VIEW_INVERSE_TRANSPOSE\",\r\n    VIEWPORT = <any>\"VIEWPORT\"\r\n\r\n    //\"LOCAL\" (FLOAT_MAT4), \"MODEL\" (FLOAT_MAT4), \"VIEW\" (FLOAT_MAT4), \"PROJECTION\" (FLOAT_MAT4), \"MODELVIEW\" (FLOAT_MAT4), \"MODELVIEWPROJECTION\" (FLOAT_MAT4), \"MODELINVERSE\" (FLOAT_MAT4), \"VIEWINVERSE\" (FLOAT_MAT4), \"PROJECTIONINVERSE\" (FLOAT_MAT4), \"MODELVIEWINVERSE\" (FLOAT_MAT4), \"MODELVIEWPROJECTIONINVERSE\" (FLOAT_MAT4), \"MODELINVERSETRANSPOSE\" (FLOAT_MAT3), \"MODELVIEWINVERSETRANSPOSE\" (FLOAT_MAT3), \"VIEWPORT\" (FLOAT_VEC4).\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { ensure, it } from \"../../../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\n\r\nconst _table = Hash.create<string>();\r\n\r\n_table.addChild(\"lightMap\", \"u_lightMapSampler\");\r\n_table.addChild(\"diffuseMap\", \"u_diffuseMapSampler\");\r\n_table.addChild(\"diffuseMap1\", \"u_diffuseMap1Sampler\");\r\n_table.addChild(\"diffuseMap2\", \"u_diffuseMap2Sampler\");\r\n_table.addChild(\"diffuseMap3\", \"u_diffuseMap3Sampler\");\r\n_table.addChild(\"specularMap\", \"u_specularMapSampler\");\r\n_table.addChild(\"emissionMap\", \"u_emissionMapSampler\");\r\n_table.addChild(\"normalMap\", \"u_normalMapSampler\");\r\n_table.addChild(\"reflectionMap\", \"u_reflectionMapSampler\");\r\n_table.addChild(\"refractionMap\", \"u_refractionMapSampler\");\r\n_table.addChild(\"bitmap\", \"u_bitmapSampler\");\r\n\r\n_table.addChild(\"bumpMap\", \"u_bumpMapSampler\");\r\n_table.addChild(\"bumpMap1\", \"u_bumpMap1Sampler\");\r\n_table.addChild(\"bumpMap2\", \"u_bumpMap2Sampler\");\r\n_table.addChild(\"bumpMap3\", \"u_bumpMap3Sampler\");\r\n\r\n_table.addChild(\"mixMap\", \"u_mixMapSampler\");\r\n\r\n_table.addChild(\"grassMap\", \"u_grassMapSampler\");\r\n\r\n_table.addChild(\"heightMap\", \"u_heightMapSampler\");\r\n\r\n\r\n@registerClass(\"VariableNameTable\")\r\nexport class VariableNameTable {\r\n    @ensure(function(variableName: string) {\r\n        it(\"variableName should in VariableNameTable\", () => {\r\n            expect(variableName).exist;\r\n        });\r\n    })\r\n    public static getVariableName(name: string) {\r\n        return _table.getChild(name);\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { requireCheck, it, ensure } from \"../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\n\r\n@registerClass(\"MathUtils\")\r\nexport class MathUtils {\r\n    public static clamp(num: number, below: number, up: number): number {\r\n        if (num < below) {\r\n            return below;\r\n        }\r\n        else if (num > up) {\r\n            return up;\r\n        }\r\n\r\n        return num;\r\n    }\r\n\r\n    public static bigThan(num: number, below: number) {\r\n        return num < below ? below : num;\r\n    }\r\n\r\n    public static generateZeroToOne() {\r\n        return Math.random();\r\n    }\r\n\r\n    @requireCheck(function(min: number, max: number) {\r\n        it(\"min should <= max\", () => {\r\n            expect(min).lte(max);\r\n        });\r\n    })\r\n    public static generateMinToMax(min: number, max: number) {\r\n        return Math.random() * (max + 1 - min) + min;\r\n    }\r\n\r\n    public static generateInteger(min: number, max: number) {\r\n        return Math.floor(this.generateMinToMax(min, max));\r\n    }\r\n\r\n    @ensure(function(val) {\r\n        it(\"result should >= 0\", () => {\r\n            expect(val).gte(0);\r\n        });\r\n    })\r\n    public static mod(a: number, b: number) {\r\n        var n = Math.floor(a / b);\r\n\r\n        a -= n * b;\r\n\r\n        if (a < 0) {\r\n            a += b;\r\n        }\r\n\r\n        return a;\r\n    }\r\n\r\n    @requireCheck(function(a: number, b: number) {\r\n        it(\"a,b should >= 0\", () => {\r\n            expect(a).gte(0);\r\n            expect(b).gte(0);\r\n        });\r\n    })\r\n    @ensure(function(val) {\r\n        it(\"result should >= 0\", () => {\r\n            expect(val).gte(0);\r\n        });\r\n    })\r\n    public static maxFloorIntegralMultiple(a: number, b: number) {\r\n        if (b == 0) {\r\n            return a;\r\n        }\r\n\r\n        if (a < b) {\r\n            return 0;\r\n        }\r\n\r\n        return Math.floor(a / b) * b;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { TimeController } from \"./TimeController\";\r\nimport { Director } from \"../../core/Director\";\r\nimport { root } from \"../../definition/Variable\";\r\n\r\n@registerClass(\"CommonTimeController\")\r\nexport class CommonTimeController extends TimeController {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    protected getNow() {\r\n        if (Director.getInstance().isTimeChange) {\r\n            return Director.getInstance().elapsed;\r\n        }\r\n\r\n        return root.performance.now();\r\n    }\r\n}"],"names":["Log","Log$","this","expect","JudgeUtils","JudgeUtils$","index","requireCheck","assert","root","registerClass","Entity","Buffer","define","chrome","firefox","_table","msie","version","mobile","EventUtils","Main","ArrayUtils","ArrayUtils$","empty"],"mappings":"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AAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QAC5B,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QAC5B,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QAC5B,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QAC5B,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QAC5B,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QAC5B,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QAC5B,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QAC5B,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QAC5B,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QAE5B,MAAM,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;QAErF,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACrD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACrD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACrD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACrD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACrD,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACrD,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACtD,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACtD,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACrD,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACtD,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,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AC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC3C,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC3C,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC3C,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,C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"}