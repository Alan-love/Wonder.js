{"version":3,"file":"wd.js","sources":["../node_modules/wonder-commonlib/dist/es2015/utils/JudgeUtils.ts","../node_modules/wonder-commonlib/dist/es2015/global/Variable.ts","../node_modules/wonder-commonlib/dist/es2015/Log.ts","../src/utils/Log.ts","../src/config/CompileConfig.ts","../node_modules/wonder-frp/dist/es2015/core/Main.ts","../src/core/data/MainData.ts","../src/definition/typescript/decorator/contract.ts","../node_modules/wonder-expect.js/index.js","../src/utils/ClassUtils.ts","../src/definition/typescript/decorator/registerClass.ts","../node_modules/wonder-commonlib/dist/es2015/global/Const.ts","../node_modules/wonder-commonlib/dist/es2015/List.ts","../node_modules/wonder-commonlib/dist/es2015/utils/ExtendUtils.ts","../node_modules/wonder-commonlib/dist/es2015/Collection.ts","../src/utils/JudgeUtils.ts","../src/definition/typescript/decorator/clone.ts","../src/math/Vector2.ts","../src/math/Global.ts","../src/math/Matrix3.ts","../src/math/Vector4.ts","../src/math/Vector3.ts","../src/math/Quaternion.ts","../src/math/Matrix4.ts","../src/definition/typescript/decorator/virtual.ts","../src/component/camera/Camera.ts","../node_modules/wonder-frp/dist/es2015/core/Entity.ts","../node_modules/wonder-frp/dist/es2015/JudgeUtils.ts","../node_modules/wonder-frp/dist/es2015/observer/SubjectObserver.ts","../node_modules/wonder-frp/dist/es2015/core/Observer.ts","../node_modules/wonder-frp/dist/es2015/definition/typescript/decorator/contract.ts","../node_modules/wonder-frp/dist/es2015/observer/AutoDetachObserver.ts","../node_modules/wonder-frp/dist/es2015/Disposable/InnerSubscription.ts","../node_modules/wonder-frp/dist/es2015/subject/Subject.ts","../node_modules/wonder-frp/dist/es2015/Disposable/SingleDisposable.ts","../node_modules/wonder-frp/dist/es2015/utils/ClassMapUtils.ts","../node_modules/wonder-commonlib/dist/es2015/utils/FunctionUtils.ts","../node_modules/wonder-frp/dist/es2015/core/Stream.ts","../node_modules/wonder-frp/dist/es2015/stream/BaseStream.ts","../node_modules/wonder-frp/dist/es2015/Disposable/GroupDisposable.ts","../node_modules/wonder-frp/dist/es2015/global/Variable.ts","../node_modules/wonder-frp/dist/es2015/core/Scheduler.ts","../node_modules/wonder-frp/dist/es2015/stream/AnonymousStream.ts","../node_modules/wonder-frp/dist/es2015/stream/FromArrayStream.ts","../node_modules/wonder-frp/dist/es2015/stream/FromPromiseStream.ts","../node_modules/wonder-frp/dist/es2015/stream/FromEventPatternStream.ts","../node_modules/wonder-frp/dist/es2015/stream/IntervalStream.ts","../node_modules/wonder-frp/dist/es2015/stream/IntervalRequestStream.ts","../node_modules/wonder-frp/dist/es2015/stream/TimeoutStream.ts","../node_modules/wonder-frp/dist/es2015/stream/DeferStream.ts","../node_modules/wonder-frp/dist/es2015/definition/typescript/decorator/registerClass.ts","../node_modules/wonder-frp/dist/es2015/global/Operator.ts","../node_modules/wonder-frp/dist/es2015/observer/MergeAllObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/MergeAllStream.ts","../src/core/Entity.ts","../src/core/Component.ts","../src/definition/typescript/decorator/cache.ts","../node_modules/wonder-commonlib/dist/es2015/Hash.ts","../src/component/transform/ETransformState.ts","../src/event/EEngineEvent.ts","../src/component/transform/Transform.ts","../src/component/renderer/RendererComponent.ts","../src/renderer/EDrawMode.ts","../src/definition/typescript/decorator/control.ts","../src/definition/typescript/decorator/singleton.ts","../src/structure/View.ts","../src/structure/RectRegion.ts","../node_modules/wonder-commonlib/dist/es2015/utils/DomQuery.ts","../src/definition/Variable.ts","../src/device/EScreenSize.ts","../src/device/DeviceManager.ts","../src/renderer/buffer/Buffer.ts","../src/renderer/buffer/EBufferUsage.ts","../src/renderer/buffer/CommonBuffer.ts","../src/renderer/buffer/EBufferType.ts","../src/core/entityObject/scene/cache/BufferTable.ts","../src/device/GPUDetector.ts","../src/renderer/buffer/ElementBuffer.ts","../src/renderer/buffer/EBufferDataType.ts","../src/renderer/buffer/ArrayBuffer.ts","../src/renderer/buffer/BufferDataTable.ts","../src/component/geometry/data/BufferContainer.ts","../src/component/geometry/data/CommonBufferContainer.ts","../src/component/geometry/data/BasicBufferContainer.ts","../src/component/geometry/data/GeometryData.ts","../src/component/geometry/data/BasicGeometryData.ts","../src/component/geometry/Geometry.ts","../src/utils/SortUtils.ts","../src/component/data/ComponentInitOrderTable.ts","../src/core/entityObject/manager/ComponentManager.ts","../src/core/entityObject/manager/EntityObjectManager.ts","../src/core/entityObject/EntityObject.ts","../src/event/object/EEventType.ts","../node_modules/bowser/src/bowser.js","../src/event/object/EventNameHandler.ts","../src/event/object/EventTable.ts","../src/event/binder/EventBinder.ts","../src/event/handler/EventHandler.ts","../src/event/binder/EventRegister.ts","../src/event/structure/EventListenerMap.ts","../src/event/structure/DomEventListenerMap.ts","../src/event/binder/DomEventRegister.ts","../node_modules/wonder-commonlib/dist/es2015/utils/EventUtils.ts","../src/event/handler/DomEventHandler.ts","../src/event/handler/PointEventHandler.ts","../src/event/object/Event.ts","../src/event/object/DomEvent.ts","../src/structure/Point.ts","../src/event/object/EMouseButton.ts","../src/event/object/MouseEvent.ts","../src/event/handler/MouseEventHandler.ts","../src/event/object/TouchEvent.ts","../src/event/handler/TouchEventHandler.ts","../src/event/object/KeyboardEvent.ts","../src/event/handler/KeyboardEventHandler.ts","../src/event/structure/CustomEventListenerMap.ts","../src/event/binder/CustomEventRegister.ts","../src/event/handler/CustomEventHandler.ts","../src/event/factory/EventHandlerFactory.ts","../src/event/binder/DomEventBinder.ts","../src/event/binder/CustomEventBinder.ts","../src/event/factory/EventBinderFactory.ts","../src/event/object/CustomEvent.ts","../src/event/dispatcher/EventDispatcher.ts","../src/event/dispatcher/DomEventDispatcher.ts","../src/event/utils/EventUtils.ts","../src/event/object/EEventPhase.ts","../src/event/dispatcher/CustomEventDispatcher.ts","../src/event/factory/EventDispatcherFactory.ts","../src/event/EventManager.ts","../src/component/camera/controller/CameraController.ts","../src/component/camera/controller/basic/BasicCameraController.ts","../src/component/camera/PerspectiveCamera.ts","../src/structure/Face3.ts","../src/component/geometry/GeometryUtils.ts","../src/component/geometry/BoxGeometry.ts","../src/renderer/state/WebGLState.ts","../src/renderer/state/BasicState.ts","../src/renderer/GlUtils.ts","../src/renderer/command/RenderCommand.ts","../src/renderer/command/QuadCommand.ts","../src/renderer/command/SingleDrawCommand.ts","../src/component/renderer/MeshRenderer.ts","../src/component/transform/ThreeDTransform.ts","../src/config/DebugConfig.ts","../node_modules/wonder-frp/dist/es2015/observer/ConcatObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/ConcatStream.ts","../node_modules/wonder-frp/dist/es2015/observer/IgnoreElementsObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/IgnoreElementsStream.ts","../node_modules/wonder-frp/dist/es2015/extend/root.ts","../src/utils/RenderUtils.ts","../src/core/entityObject/gameObject/GameObject.ts","../src/core/entityObject/scene/Scene.ts","../src/core/entityObject/scene/gameObjectScene/GameObjectScene.ts","../src/core/entityObject/scene/SceneDispatcher.ts","../src/utils/time/TimeController.ts","../src/utils/time/DirectorTimeController.ts","../src/renderer/renderer/Renderer.ts","../src/structure/Color.ts","../src/renderer/renderer/WebGLRenderer.ts","../src/core/Director.ts","../src/core/entityObject/scene/cache/ProgramTable.ts","../src/core/Main.ts","../src/event/object/PointEvent.ts","../src/event/object/MousePointEvent.ts","../src/event/object/TouchPointEvent.ts","../src/material/ShaderManager.ts","../src/material/Material.ts","../node_modules/wonder-commonlib/dist/es2015/utils/ArrayUtils.ts","../src/utils/ArrayUtils.ts","../src/renderer/program/GLSLDataSender.ts","../src/renderer/shader/variable/EVariableType.ts","../src/renderer/program/Program.ts","../src/renderer/shader/lib/ShaderLib.ts","../src/renderer/shader/shader/Shader.ts","../src/renderer/shader/variable/EVariableCategory.ts","../src/utils/BufferUtils.ts","../src/renderer/shader/sourceBuilder/ShaderSourceBuilder.ts","../src/renderer/shader/snippet/ShaderSnippet.ts","../src/renderer/shader/chunk/ShaderChunk.ts","../src/renderer/shader/variable/VariableTypeTable.ts","../src/renderer/shader/sourceBuilder/EngineShaderSourceBuilder.ts","../src/renderer/shader/shader/EngineShader.ts","../src/renderer/shader/shader/CommonShader.ts","../src/renderer/shader/variable/VariableLib.ts","../src/renderer/shader/lib/EngineShaderLib.ts","../src/renderer/shader/lib/common/CommonShaderLib.ts","../src/renderer/shader/lib/common/VerticeCommonShaderLib.ts","../src/utils/ShaderLibUtils.ts","../src/renderer/shader/lib/common/EndShaderLib.ts","../src/material/EngineMaterial.ts","../src/renderer/shader/lib/basic/BasicMaterialColorShaderLib.ts","../src/renderer/shader/lib/basic/BasicShaderLib.ts","../src/renderer/shader/lib/basic/EndBasicShaderLib.ts","../src/material/StandardBasicMaterial.ts","../src/material/BasicMaterial.ts","../src/renderer/shader/variable/EVariableSemantic.ts","../src/renderer/shader/variable/VariableNameTable.ts","../src/utils/MathUtils.ts","../src/utils/time/CommonTimeController.ts"],"sourcesContent":["declare var global: any, module: any;\r\n\r\nexport class JudgeUtils {\r\n    public static isArray(arr: any) {\r\n        const MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\r\n        var length = arr && arr.length;\r\n\r\n        return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\r\n    }\r\n\r\n    public static isArrayExactly(arr: any) {\r\n        return Object.prototype.toString.call(arr) === \"[object Array]\";\r\n    }\r\n\r\n    public static isNumber(num: any) {\r\n        return typeof num == \"number\";\r\n    }\r\n\r\n    public static isNumberExactly(num: any) {\r\n        return Object.prototype.toString.call(num) === \"[object Number]\";\r\n    }\r\n\r\n    public static isString(str: any) {\r\n        return typeof str == \"string\";\r\n    }\r\n\r\n    public static isStringExactly(str: any) {\r\n        return Object.prototype.toString.call(str) === \"[object String]\";\r\n    }\r\n\r\n    public static isBoolean(bool: any) {\r\n        return bool === true || bool === false || toString.call(bool) === '[boolect Boolean]';\r\n    }\r\n\r\n    public static isDom(obj: any) {\r\n        return !!(obj && obj.nodeType === 1);\r\n    }\r\n\r\n\r\n    public static isObject(obj: any) {\r\n        var type = typeof obj;\r\n\r\n        return type === 'function' || type === 'object' && !!obj;\r\n    }\r\n\r\n    /**\r\n     * 判断是否为对象字面量（{}）\r\n     */\r\n    public static isDirectObject(obj: any) {\r\n        return Object.prototype.toString.call(obj) === \"[object Object]\";\r\n    }\r\n\r\n    /**\r\n     * 检查宿主对象是否可调用\r\n     *\r\n     * 任何对象，如果其语义在ECMAScript规范中被定义过，那么它被称为原生对象；\r\n     环境所提供的，而在ECMAScript规范中没有被描述的对象，我们称之为宿主对象。\r\n\r\n     该方法用于特性检测，判断对象是否可用。用法如下：\r\n\r\n     MyEngine addEvent():\r\n     if (Tool.judge.isHostMethod(dom, \"addEventListener\")) {    //判断dom是否具有addEventListener方法\r\n        dom.addEventListener(sEventType, fnHandler, false);\r\n        }\r\n     */\r\n    public static isHostMethod(object: any, property: any) {\r\n        var type = typeof object[property];\r\n\r\n        return type === \"function\" ||\r\n            (type === \"object\" && !!object[property]);\r\n        // || type == \"unknown\";\r\n    }\r\n\r\n    public static isNodeJs() {\r\n        return ((typeof global != \"undefined\" && global.module) || (typeof module != \"undefined\")) && typeof module.exports != \"undefined\";\r\n    }\r\n\r\n    //overwrite it in the end of this file\r\n    public static isFunction(func: any): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\n// Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\r\n// IE 11 (#1621), and in Safari 8 (#1929).\r\nif (typeof /./ != 'function' && typeof Int8Array != 'object') {\r\n    JudgeUtils.isFunction = (func: any) => {\r\n        return typeof func == 'function';\r\n    };\r\n}\r\nelse {\r\n    JudgeUtils.isFunction = (func: any) => {\r\n        return Object.prototype.toString.call(func) === \"[object Function]\";\r\n    };\r\n}","import { JudgeUtils } from \"../utils/JudgeUtils\";\r\n\r\ndeclare var global: NodeJS.Global, window: Window;\r\nexport var root: any;\r\n\r\nif (JudgeUtils.isNodeJs() && typeof global != \"undefined\") {\r\n    root = global;\r\n}\r\nelse {\r\n    root = window;\r\n}","import { root } from \"./global/Variable\";\r\n\r\nexport class Log {\r\n    public static info = {\r\n        INVALID_PARAM: \"invalid parameter\",\r\n\r\n        helperFunc: function(...args) {\r\n            var result = \"\";\r\n\r\n            args.forEach(function(val) {\r\n                result += String(val) + \" \";\r\n            });\r\n\r\n            return result.slice(0, -1);\r\n        },\r\n        assertion: function(...args) {\r\n            if (args.length === 2) {\r\n                return this.helperFunc(args[0], args[1]);\r\n            }\r\n            else if (args.length === 3) {\r\n                return this.helperFunc(args[1], args[0], args[2]);\r\n            }\r\n            else {\r\n                throw new Error(\"args.length must <= 3\");\r\n            }\r\n        },\r\n\r\n        FUNC_INVALID: function(...args) {\r\n            args.unshift(\"invalid\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST: function(...args) {\r\n            args.unshift(\"must\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_BE: function(...args) {\r\n            args.unshift(\"must be\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_NOT_BE: function(...args) {\r\n            args.unshift(\"must not be\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SHOULD: function(...args) {\r\n            args.unshift(\"should\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SHOULD_NOT: function(...args) {\r\n            args.unshift(\"should not\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SUPPORT: function(...args) {\r\n            args.unshift(\"support\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_NOT_SUPPORT: function(...args) {\r\n            args.unshift(\"not support\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_DEFINE: function(...args) {\r\n            args.unshift(\"must define\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_NOT_DEFINE: function(...args) {\r\n            args.unshift(\"must not define\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_UNKNOW: function(...args) {\r\n            args.unshift(\"unknow\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_EXPECT: function(...args) {\r\n            args.unshift(\"expect\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_UNEXPECT: function(...args) {\r\n            args.unshift(\"unexpect\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_EXIST: function(...args) {\r\n            args.unshift(\"exist\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_NOT_EXIST: function(...args) {\r\n            args.unshift(\"not exist\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_ONLY: function(...args) {\r\n            args.unshift(\"only\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_CAN_NOT: function(...args) {\r\n            args.unshift(\"can't\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Output Debug message.\r\n     * @function\r\n     * @param {String} message\r\n     */\r\n    public static log(...messages) {\r\n        if (!this._exec(\"log\", messages)) {\r\n            root.alert(messages.join(\",\"));\r\n        }\r\n\r\n        this._exec(\"trace\", messages);\r\n    }\r\n\r\n    /**\r\n     * 断言失败时，会提示错误信息，但程序会继续执行下去\r\n     * 使用断言捕捉不应该发生的非法情况。不要混淆非法情况与错误情况之间的区别，后者是必然存在的并且是一定要作出处理的。\r\n     *\r\n     * 1）对非预期错误使用断言\r\n     断言中的布尔表达式的反面一定要描述一个非预期错误，下面所述的在一定情况下为非预期错误的一些例子：\r\n     （1）空指针。\r\n     （2）输入或者输出参数的值不在预期范围内。\r\n     （3）数组的越界。\r\n     非预期错误对应的就是预期错误，我们通常使用错误处理代码来处理预期错误，而使用断言处理非预期错误。在代码执行过程中，有些错误永远不应该发生，这样的错误是非预期错误。断言可以被看成是一种可执行的注释，你不能依赖它来让代码正常工作（《Code Complete 2》）。例如：\r\n     int nRes = f(); // nRes 由 f 函数控制， f 函数保证返回值一定在 -100 ~ 100\r\n     Assert(-100 <= nRes && nRes <= 100); // 断言，一个可执行的注释\r\n     由于 f 函数保证了返回值处于 -100 ~ 100，那么如果出现了 nRes 不在这个范围的值时，就表明一个非预期错误的出现。后面会讲到“隔栏”，那时会对断言有更加深刻的理解。\r\n     2）不要把需要执行的代码放入断言中\r\n     断言用于软件的开发和维护，而通常不在发行版本中包含断言。\r\n     需要执行的代码放入断言中是不正确的，因为在发行版本中，这些代码通常不会被执行，例如：\r\n     Assert(f()); // f 函数通常在发行版本中不会被执行\r\n     而使用如下方法则比较安全：\r\n     res = f();\r\n     Assert(res); // 安全\r\n     3）对来源于内部系统的可靠的数据使用断言，而不要对外部不可靠的数据使用断言，对于外部不可靠数据，应该使用错误处理代码。\r\n     再次强调，把断言看成可执行的注释。\r\n     * @param cond 如果cond返回false，则断言失败，显示message\r\n     * @param message\r\n     */\r\n    public static assert(cond, ...messages) {\r\n        if (cond) {\r\n            if (!this._exec(\"assert\", arguments, 1)) {\r\n                this.log.apply(this, Array.prototype.slice.call(arguments, 1));\r\n            }\r\n        }\r\n    }\r\n\r\n    public static error(cond, ...message): any {\r\n        if (cond) {\r\n            /*!\r\n            console.error will not interrupt, it will throw error and continue exec the left statements\r\n\r\n            but here need interrupt! so not use it here.\r\n             */\r\n            //if (!this._exec(\"error\", arguments, 1)) {\r\n            throw new Error(Array.prototype.slice.call(arguments, 1).join(\"\\n\"));\r\n            //}\r\n        }\r\n    }\r\n\r\n    public static warn(...message) {\r\n        var result = this._exec(\"warn\", arguments);\r\n\r\n        if (!result) {\r\n            this.log.apply(this, arguments);\r\n        }\r\n        else {\r\n            this._exec(\"trace\", [\"warn trace\"]);\r\n        }\r\n    }\r\n\r\n    private static _exec(consoleMethod, args, sliceBegin = 0) {\r\n        if (root.console && root.console[consoleMethod]) {\r\n            root.console[consoleMethod].apply(root.console, Array.prototype.slice.call(args, sliceBegin));\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}","// import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Log as Log$ } from \"wonder-commonlib/dist/es2015/Log\";\r\n\r\n// @registerClass(\"Log\")\r\nexport class Log extends Log$ {\r\n}","export var CompileConfig = {\r\n    isCompileTest: true,\r\n    closeContractTest: false\r\n}","export class Main {\r\n    public static isTest: boolean = false;\r\n}","import { EScreenSize } from \"../../device/EScreenSize\";\r\nimport { Main } from \"wonder-frp/dist/es2015/core/Main\";\r\nimport { RectRegion } from \"../../structure/RectRegion\";\r\nexport class MainData {\r\n    private static _isTest: boolean = false;\r\n    static get isTest() {\r\n        return this._isTest;\r\n    }\r\n    static set isTest(isTest: boolean) {\r\n        this._isTest = isTest;\r\n\r\n        Main.isTest = MainData.isTest;\r\n    }\r\n\r\n    public static screenSize: EScreenSize & RectRegion = null;\r\n}\r\n\r\nexport type ContextConfigData = {\r\n    options: {\r\n        alpha: boolean;\r\n        depth: boolean;\r\n        stencil: boolean;\r\n        antialias: boolean;\r\n        premultipliedAlpha: boolean;\r\n        preserveDrawingBuffer: boolean;\r\n    }\r\n}\r\n","import { Log } from \"../../../utils/Log\";\r\nimport { CompileConfig } from \"../../../config/CompileConfig\";\r\nimport { MainData } from \"../../../core/data/MainData\";\r\n\r\nvar _describeContext = null;\r\n\r\nexport function assert(cond: boolean, message: string = \"contract error\") {\r\n    Log.error(!cond, message);\r\n}\r\n\r\nexport function describe(message: string, func: Function, preCondition: Function = () => true, context: any = this) {\r\n    if (preCondition.call(context, null)) {\r\n        _describeContext = context;\r\n\r\n        try {\r\n            func.call(context, null);\r\n        }\r\n        catch (e) {\r\n            assert(false, `${message}->${e.message}`);\r\n        }\r\n        finally {\r\n            _describeContext = null;\r\n        }\r\n    }\r\n}\r\n\r\nexport function it(message: string, func: Function, context?: any) {\r\n    try {\r\n        if (arguments.length === 3) {\r\n            func.call(context, null);\r\n        }\r\n        else {\r\n            if (_describeContext) {\r\n                func.call(_describeContext, null);\r\n            }\r\n            else {\r\n                func();\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        assert(false, `${message}->${e.message}`);\r\n    }\r\n}\r\n\r\nexport function requireCheck(inFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let value = descriptor.value;\r\n\r\n            descriptor.value = function(args) {\r\n                if (MainData.isTest) {\r\n                    inFunc.apply(this, arguments);\r\n                }\r\n\r\n                return value.apply(this, arguments);\r\n            };\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensure(outFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let value = descriptor.value;\r\n\r\n            descriptor.value = function(args) {\r\n                var result = value.apply(this, arguments);\r\n\r\n                if (MainData.isTest) {\r\n\r\n                    var params = [result];\r\n\r\n                    for (let i = 0, len = arguments.length; i < len; i++) {\r\n                        params[i + 1] = arguments[i];\r\n                    }\r\n\r\n                    outFunc.apply(this, params);\r\n                }\r\n\r\n                return result;\r\n            }\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireGetterAndSetter(inGetterFunc, inSetterFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let getter = descriptor.get,\r\n                setter = descriptor.set;\r\n\r\n            descriptor.get = function() {\r\n                if (MainData.isTest) {\r\n                    inGetterFunc.call(this);\r\n                }\r\n\r\n                return getter.call(this);\r\n            };\r\n\r\n            descriptor.set = function(val) {\r\n                if (MainData.isTest) {\r\n                    inSetterFunc.call(this, val);\r\n                }\r\n\r\n                setter.call(this, val);\r\n            };\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireGetter(inFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let getter = descriptor.get;\r\n\r\n            descriptor.get = function() {\r\n                if (MainData.isTest) {\r\n                    inFunc.call(this);\r\n                }\r\n\r\n                return getter.call(this);\r\n            };\r\n\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireSetter(inFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let setter = descriptor.set;\r\n\r\n            descriptor.set = function(val) {\r\n                if (MainData.isTest) {\r\n                    inFunc.call(this, val);\r\n                }\r\n\r\n                setter.call(this, val);\r\n            };\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureGetterAndSetter(outGetterFunc, outSetterFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let getter = descriptor.get,\r\n                setter = descriptor.set;\r\n\r\n            descriptor.get = function() {\r\n                var result = getter.call(this);\r\n\r\n                if (MainData.isTest) {\r\n                    outGetterFunc.call(this, result);\r\n                }\r\n\r\n                return result;\r\n            };\r\n\r\n            descriptor.set = function(val) {\r\n                var result = setter.call(this, val);\r\n\r\n                if (MainData.isTest) {\r\n                    let params = [result, val];\r\n                    outSetterFunc.apply(this, params);\r\n                }\r\n            };\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureGetter(outFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let getter = descriptor.get;\r\n\r\n            descriptor.get = function() {\r\n                var result = getter.call(this);\r\n\r\n                if (MainData.isTest) {\r\n                    outFunc.call(this, result);\r\n                }\r\n\r\n                return result;\r\n            };\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureSetter(outFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let setter = descriptor.set;\r\n\r\n            descriptor.set = function(val) {\r\n                var result = setter.call(this, val);\r\n\r\n                if (MainData.isTest) {\r\n                    let params = [result, val];\r\n                    outFunc.apply(this, params);\r\n                }\r\n            };\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function invariant(func) {\r\n    return function(target) {\r\n        if (CompileConfig.isCompileTest) {\r\n            if (MainData.isTest) {\r\n                func(target);\r\n            }\r\n        }\r\n    }\r\n}","(function (global, module) {\n\n  var exports = module.exports;\n\n  /**\n   * Exports.\n   */\n\n  module.exports = expect;\n  expect.Assertion = Assertion;\n\n  /**\n   * Exports version.\n   */\n\n  expect.version = '0.3.1';\n\n  /**\n   * Possible assertion flags.\n   */\n\n  var flags = {\n      not: ['to', 'be', 'have', 'include', 'only']\n    , to: ['be', 'have', 'include', 'only', 'not']\n    , only: ['have']\n    , have: ['own']\n    , be: ['an']\n  };\n\n  function expect (obj) {\n    return new Assertion(obj);\n  }\n\n  /**\n   * Constructor\n   *\n   * @api private\n   */\n\n  function Assertion (obj, flag, parent) {\n    this.obj = obj;\n    this.flags = {};\n\n    if (undefined != parent) {\n      this.flags[flag] = true;\n\n      for (var i in parent.flags) {\n        if (parent.flags.hasOwnProperty(i)) {\n          this.flags[i] = true;\n        }\n      }\n    }\n\n    var $flags = flag ? flags[flag] : keys(flags)\n      , self = this;\n\n    if ($flags) {\n      for (var i = 0, l = $flags.length; i < l; i++) {\n        // avoid recursion\n        if (this.flags[$flags[i]]) continue;\n\n        var name = $flags[i]\n          , assertion = new Assertion(this.obj, name, this)\n\n        if ('function' == typeof Assertion.prototype[name]) {\n          // clone the function, make sure we dont touch the prot reference\n          var old = this[name];\n          this[name] = function () {\n            return old.apply(self, arguments);\n          };\n\n          for (var fn in Assertion.prototype) {\n            if (Assertion.prototype.hasOwnProperty(fn) && fn != name) {\n                /*!\n                modify by wonder\n                 */\n              if(fn !== \"length\"){\n                  this[name][fn] = bind(assertion[fn], assertion);\n              }\n            }\n          }\n        } else {\n          this[name] = assertion;\n        }\n      }\n    }\n  }\n\n  /**\n   * Performs an assertion\n   *\n   * @api private\n   */\n\n  Assertion.prototype.assert = function (truth, msg, error, expected) {\n    var msg = this.flags.not ? error : msg\n      , ok = this.flags.not ? !truth : truth\n      , err;\n\n    if (!ok) {\n      err = new Error(msg.call(this));\n      if (arguments.length > 3) {\n        err.actual = this.obj;\n        err.expected = expected;\n        err.showDiff = true;\n      }\n      throw err;\n    }\n\n    this.and = new Assertion(this.obj);\n  };\n\n  /**\n   * Check if the value is truthy\n   *\n   * @api public\n   */\n\n  Assertion.prototype.ok = function () {\n    this.assert(\n        !!this.obj\n      , function(){ return 'expected ' + i(this.obj) + ' to be truthy' }\n      , function(){ return 'expected ' + i(this.obj) + ' to be falsy' });\n  };\n\n  /**\n   * Creates an anonymous function which calls fn with arguments.\n   *\n   * @api public\n   */\n\n  Assertion.prototype.withArgs = function() {\n    expect(this.obj).to.be.a('function');\n    var fn = this.obj;\n    var args = Array.prototype.slice.call(arguments);\n    return expect(function() { fn.apply(null, args); });\n  };\n\n  /**\n   * Assert that the function throws.\n   *\n   * @param {Function|RegExp} callback, or regexp to match error string against\n   * @api public\n   */\n\n  Assertion.prototype.throwError =\n  Assertion.prototype.throwException = function (fn) {\n    expect(this.obj).to.be.a('function');\n\n    var thrown = false\n      , not = this.flags.not;\n\n    try {\n      this.obj();\n    } catch (e) {\n      if (isRegExp(fn)) {\n        var subject = 'string' == typeof e ? e : e.message;\n        if (not) {\n          expect(subject).to.not.match(fn);\n        } else {\n          expect(subject).to.match(fn);\n        }\n      } else if ('function' == typeof fn) {\n        fn(e);\n      }\n      thrown = true;\n    }\n\n    if (isRegExp(fn) && not) {\n      // in the presence of a matcher, ensure the `not` only applies to\n      // the matching.\n      this.flags.not = false;\n    }\n\n    var name = this.obj.name || 'fn';\n    this.assert(\n        thrown\n      , function(){ return 'expected ' + name + ' to throw an exception' }\n      , function(){ return 'expected ' + name + ' not to throw an exception' });\n  };\n\n  /**\n   * Checks if the array is empty.\n   *\n   * @api public\n   */\n\n  Assertion.prototype.empty = function () {\n    var expectation;\n\n    if ('object' == typeof this.obj && null !== this.obj && !isArray(this.obj)) {\n      if ('number' == typeof this.obj.length) {\n        expectation = !this.obj.length;\n      } else {\n        expectation = !keys(this.obj).length;\n      }\n    } else {\n      if ('string' != typeof this.obj) {\n        expect(this.obj).to.be.an('object');\n      }\n\n      expect(this.obj).to.have.property('length');\n      expectation = !this.obj.length;\n    }\n\n    this.assert(\n        expectation\n      , function(){ return 'expected ' + i(this.obj) + ' to be empty' }\n      , function(){ return 'expected ' + i(this.obj) + ' to not be empty' });\n    return this;\n  };\n\n  /**\n   * Checks if the obj exactly equals another.\n   *\n   * @api public\n   */\n\n  Assertion.prototype.be =\n  Assertion.prototype.equal = function (obj) {\n    this.assert(\n        obj === this.obj\n      , function(){ return 'expected ' + i(this.obj) + ' to equal ' + i(obj) }\n      , function(){ return 'expected ' + i(this.obj) + ' to not equal ' + i(obj) });\n    return this;\n  };\n\n  /**\n   * Checks if the obj sortof equals another.\n   *\n   * @api public\n   */\n\n  Assertion.prototype.eql = function (obj) {\n    this.assert(\n        expect.eql(this.obj, obj)\n      , function(){ return 'expected ' + i(this.obj) + ' to sort of equal ' + i(obj) }\n      , function(){ return 'expected ' + i(this.obj) + ' to sort of not equal ' + i(obj) }\n      , obj);\n    return this;\n  };\n\n  /**\n   * Assert within start to finish (inclusive).\n   *\n   * @param {Number} start\n   * @param {Number} finish\n   * @api public\n   */\n\n  Assertion.prototype.within = function (start, finish) {\n    var range = start + '..' + finish;\n    this.assert(\n        this.obj >= start && this.obj <= finish\n      , function(){ return 'expected ' + i(this.obj) + ' to be within ' + range }\n      , function(){ return 'expected ' + i(this.obj) + ' to not be within ' + range });\n    return this;\n  };\n\n  /**\n   * Assert typeof / instance of\n   *\n   * @api public\n   */\n\n  Assertion.prototype.a =\n  Assertion.prototype.an = function (type) {\n    if ('string' == typeof type) {\n      // proper english in error msg\n      var n = /^[aeiou]/.test(type) ? 'n' : '';\n\n      // typeof with support for 'array'\n      this.assert(\n          'array' == type ? isArray(this.obj) :\n            'regexp' == type ? isRegExp(this.obj) :\n              'object' == type\n                ? 'object' == typeof this.obj && null !== this.obj\n                : type == typeof this.obj\n        , function(){ return 'expected ' + i(this.obj) + ' to be a' + n + ' ' + type }\n        , function(){ return 'expected ' + i(this.obj) + ' not to be a' + n + ' ' + type });\n    } else {\n      // instanceof\n      var name = type.name || 'supplied constructor';\n      this.assert(\n          this.obj instanceof type\n        , function(){ return 'expected ' + i(this.obj) + ' to be an instance of ' + name }\n        , function(){ return 'expected ' + i(this.obj) + ' not to be an instance of ' + name });\n    }\n\n    return this;\n  };\n\n  /**\n   * Assert numeric value above _n_.\n   *\n   * @param {Number} n\n   * @api public\n   */\n\n  Assertion.prototype.greaterThan =\n  Assertion.prototype.above = function (n) {\n    this.assert(\n        this.obj > n\n      , function(){ return 'expected ' + i(this.obj) + ' to be above ' + n }\n      , function(){ return 'expected ' + i(this.obj) + ' to be below ' + n });\n    return this;\n  };\n\n  /**\n   * Assert numeric value below _n_.\n   *\n   * @param {Number} n\n   * @api public\n   */\n\n  Assertion.prototype.lessThan =\n  Assertion.prototype.below = function (n) {\n    this.assert(\n        this.obj < n\n      , function(){ return 'expected ' + i(this.obj) + ' to be below ' + n }\n      , function(){ return 'expected ' + i(this.obj) + ' to be above ' + n });\n    return this;\n  };\n\n  /**\n   * Assert string value matches _regexp_.\n   *\n   * @param {RegExp} regexp\n   * @api public\n   */\n\n  Assertion.prototype.match = function (regexp) {\n    this.assert(\n        regexp.exec(this.obj)\n      , function(){ return 'expected ' + i(this.obj) + ' to match ' + regexp }\n      , function(){ return 'expected ' + i(this.obj) + ' not to match ' + regexp });\n    return this;\n  };\n\n  /**\n   * Assert property \"length\" exists and has value of _n_.\n   *\n   * @param {Number} n\n   * @api public\n   */\n\n  Assertion.prototype.length = function (n) {\n    expect(this.obj).to.have.property('length');\n    var len = this.obj.length;\n    this.assert(\n        n == len\n      , function(){ return 'expected ' + i(this.obj) + ' to have a length of ' + n + ' but got ' + len }\n      , function(){ return 'expected ' + i(this.obj) + ' to not have a length of ' + len });\n    return this;\n  };\n\n  /**\n   * Assert property _name_ exists, with optional _val_.\n   *\n   * @param {String} name\n   * @param {Mixed} val\n   * @api public\n   */\n\n  Assertion.prototype.property = function (name, val) {\n    if (this.flags.own) {\n      this.assert(\n          Object.prototype.hasOwnProperty.call(this.obj, name)\n        , function(){ return 'expected ' + i(this.obj) + ' to have own property ' + i(name) }\n        , function(){ return 'expected ' + i(this.obj) + ' to not have own property ' + i(name) });\n      return this;\n    }\n\n    if (this.flags.not && undefined !== val) {\n      if (undefined === this.obj[name]) {\n        throw new Error(i(this.obj) + ' has no property ' + i(name));\n      }\n    } else {\n      var hasProp;\n      try {\n        hasProp = name in this.obj\n      } catch (e) {\n        hasProp = undefined !== this.obj[name]\n      }\n\n      this.assert(\n          hasProp\n        , function(){ return 'expected ' + i(this.obj) + ' to have a property ' + i(name) }\n        , function(){ return 'expected ' + i(this.obj) + ' to not have a property ' + i(name) });\n    }\n\n    if (undefined !== val) {\n      this.assert(\n          val === this.obj[name]\n        , function(){ return 'expected ' + i(this.obj) + ' to have a property ' + i(name)\n          + ' of ' + i(val) + ', but got ' + i(this.obj[name]) }\n        , function(){ return 'expected ' + i(this.obj) + ' to not have a property ' + i(name)\n          + ' of ' + i(val) });\n    }\n\n    this.obj = this.obj[name];\n    return this;\n  };\n\n  /**\n   * Assert that the array contains _obj_ or string contains _obj_.\n   *\n   * @param {Mixed} obj|string\n   * @api public\n   */\n\n  Assertion.prototype.string =\n  Assertion.prototype.contain = function (obj) {\n    if ('string' == typeof this.obj) {\n      this.assert(\n          ~this.obj.indexOf(obj)\n        , function(){ return 'expected ' + i(this.obj) + ' to contain ' + i(obj) }\n        , function(){ return 'expected ' + i(this.obj) + ' to not contain ' + i(obj) });\n    } else {\n      this.assert(\n          ~indexOf(this.obj, obj)\n        , function(){ return 'expected ' + i(this.obj) + ' to contain ' + i(obj) }\n        , function(){ return 'expected ' + i(this.obj) + ' to not contain ' + i(obj) });\n    }\n    return this;\n  };\n\n  /**\n   * Assert exact keys or inclusion of keys by using\n   * the `.own` modifier.\n   *\n   * @param {Array|String ...} keys\n   * @api public\n   */\n\n  Assertion.prototype.key =\n  Assertion.prototype.keys = function ($keys) {\n    var str\n      , ok = true;\n\n    $keys = isArray($keys)\n      ? $keys\n      : Array.prototype.slice.call(arguments);\n\n    if (!$keys.length) throw new Error('keys required');\n\n    var actual = keys(this.obj)\n      , len = $keys.length;\n\n    // Inclusion\n    ok = every($keys, function (key) {\n      return ~indexOf(actual, key);\n    });\n\n    // Strict\n    if (!this.flags.not && this.flags.only) {\n      ok = ok && $keys.length == actual.length;\n    }\n\n    // Key string\n    if (len > 1) {\n      $keys = map($keys, function (key) {\n        return i(key);\n      });\n      var last = $keys.pop();\n      str = $keys.join(', ') + ', and ' + last;\n    } else {\n      str = i($keys[0]);\n    }\n\n    // Form\n    str = (len > 1 ? 'keys ' : 'key ') + str;\n\n    // Have / include\n    str = (!this.flags.only ? 'include ' : 'only have ') + str;\n\n    // Assertion\n    this.assert(\n        ok\n      , function(){ return 'expected ' + i(this.obj) + ' to ' + str }\n      , function(){ return 'expected ' + i(this.obj) + ' to not ' + str });\n\n    return this;\n  };\n\n  /**\n   * Assert a failure.\n   *\n   * @param {String ...} custom message\n   * @api public\n   */\n  Assertion.prototype.fail = function (msg) {\n    var error = function() { return msg || \"explicit failure\"; }\n    this.assert(false, error, error);\n    return this;\n  };\n\n  /**\n   * Function bind implementation.\n   */\n\n  function bind (fn, scope) {\n    return function () {\n      return fn.apply(scope, arguments);\n    }\n  }\n\n  /**\n   * Array every compatibility\n   *\n   * @see bit.ly/5Fq1N2\n   * @api public\n   */\n\n  function every (arr, fn, thisObj) {\n    var scope = thisObj || global;\n    for (var i = 0, j = arr.length; i < j; ++i) {\n      if (!fn.call(scope, arr[i], i, arr)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Array indexOf compatibility.\n   *\n   * @see bit.ly/a5Dxa2\n   * @api public\n   */\n\n  function indexOf (arr, o, i) {\n    if (Array.prototype.indexOf) {\n      return Array.prototype.indexOf.call(arr, o, i);\n    }\n\n    if (arr.length === undefined) {\n      return -1;\n    }\n\n    for (var j = arr.length, i = i < 0 ? i + j < 0 ? 0 : i + j : i || 0\n        ; i < j && arr[i] !== o; i++);\n\n    return j <= i ? -1 : i;\n  }\n\n  // https://gist.github.com/1044128/\n  var getOuterHTML = function(element) {\n    if ('outerHTML' in element) return element.outerHTML;\n    var ns = \"http://www.w3.org/1999/xhtml\";\n    var container = document.createElementNS(ns, '_');\n    var xmlSerializer = new XMLSerializer();\n    var html;\n    if (document.xmlVersion) {\n      return xmlSerializer.serializeToString(element);\n    } else {\n      container.appendChild(element.cloneNode(false));\n      html = container.innerHTML.replace('><', '>' + element.innerHTML + '<');\n      container.innerHTML = '';\n      return html;\n    }\n  };\n\n  // Returns true if object is a DOM element.\n  var isDOMElement = function (object) {\n    if (typeof HTMLElement === 'object') {\n      return object instanceof HTMLElement;\n    } else {\n      return object &&\n        typeof object === 'object' &&\n        object.nodeType === 1 &&\n        typeof object.nodeName === 'string';\n    }\n  };\n\n  /**\n   * Inspects an object.\n   *\n   * @see taken from node.js `util` module (copyright Joyent, MIT license)\n   * @api private\n   */\n\n  function i (obj, showHidden, depth) {\n    var seen = [];\n\n    function stylize (str) {\n      return str;\n    }\n\n    function format (value, recurseTimes) {\n      // Provide a hook for user-specified inspect functions.\n      // Check that value is an object with an inspect function on it\n      if (value && typeof value.inspect === 'function' &&\n          // Filter out the util module, it's inspect function is special\n          value !== exports &&\n          // Also filter out any prototype objects using the circular check.\n          !(value.constructor && value.constructor.prototype === value)) {\n        return value.inspect(recurseTimes);\n      }\n\n      // Primitive types cannot have properties\n      switch (typeof value) {\n        case 'undefined':\n          return stylize('undefined', 'undefined');\n\n        case 'string':\n          var simple = '\\'' + json.stringify(value).replace(/^\"|\"$/g, '')\n                                                   .replace(/'/g, \"\\\\'\")\n                                                   .replace(/\\\\\"/g, '\"') + '\\'';\n          return stylize(simple, 'string');\n\n        case 'number':\n          return stylize('' + value, 'number');\n\n        case 'boolean':\n          return stylize('' + value, 'boolean');\n      }\n      // For some reason typeof null is \"object\", so special case here.\n      if (value === null) {\n        return stylize('null', 'null');\n      }\n\n      if (isDOMElement(value)) {\n        return getOuterHTML(value);\n      }\n\n      // Look up the keys of the object.\n      var visible_keys = keys(value);\n      var $keys = showHidden ? Object.getOwnPropertyNames(value) : visible_keys;\n\n      // Functions without properties can be shortcutted.\n      if (typeof value === 'function' && $keys.length === 0) {\n        if (isRegExp(value)) {\n          return stylize('' + value, 'regexp');\n        } else {\n          var name = value.name ? ': ' + value.name : '';\n          return stylize('[Function' + name + ']', 'special');\n        }\n      }\n\n      // Dates without properties can be shortcutted\n      if (isDate(value) && $keys.length === 0) {\n        return stylize(value.toUTCString(), 'date');\n      }\n      \n      // Error objects can be shortcutted\n      if (value instanceof Error) {\n        return stylize(\"[\"+value.toString()+\"]\", 'Error');\n      }\n\n      var base, type, braces;\n      // Determine the object type\n      if (isArray(value)) {\n        type = 'Array';\n        braces = ['[', ']'];\n      } else {\n        type = 'Object';\n        braces = ['{', '}'];\n      }\n\n      // Make functions say that they are functions\n      if (typeof value === 'function') {\n        var n = value.name ? ': ' + value.name : '';\n        base = (isRegExp(value)) ? ' ' + value : ' [Function' + n + ']';\n      } else {\n        base = '';\n      }\n\n      // Make dates with properties first say the date\n      if (isDate(value)) {\n        base = ' ' + value.toUTCString();\n      }\n\n      if ($keys.length === 0) {\n        return braces[0] + base + braces[1];\n      }\n\n      if (recurseTimes < 0) {\n        if (isRegExp(value)) {\n          return stylize('' + value, 'regexp');\n        } else {\n          return stylize('[Object]', 'special');\n        }\n      }\n\n      seen.push(value);\n\n      var output = map($keys, function (key) {\n        var name, str;\n        if (value.__lookupGetter__) {\n          if (value.__lookupGetter__(key)) {\n            if (value.__lookupSetter__(key)) {\n              str = stylize('[Getter/Setter]', 'special');\n            } else {\n              str = stylize('[Getter]', 'special');\n            }\n          } else {\n            if (value.__lookupSetter__(key)) {\n              str = stylize('[Setter]', 'special');\n            }\n          }\n        }\n        if (indexOf(visible_keys, key) < 0) {\n          name = '[' + key + ']';\n        }\n        if (!str) {\n          if (indexOf(seen, value[key]) < 0) {\n            if (recurseTimes === null) {\n              str = format(value[key]);\n            } else {\n              str = format(value[key], recurseTimes - 1);\n            }\n            if (str.indexOf('\\n') > -1) {\n              if (isArray(value)) {\n                str = map(str.split('\\n'), function (line) {\n                  return '  ' + line;\n                }).join('\\n').substr(2);\n              } else {\n                str = '\\n' + map(str.split('\\n'), function (line) {\n                  return '   ' + line;\n                }).join('\\n');\n              }\n            }\n          } else {\n            str = stylize('[Circular]', 'special');\n          }\n        }\n        if (typeof name === 'undefined') {\n          if (type === 'Array' && key.match(/^\\d+$/)) {\n            return str;\n          }\n          name = json.stringify('' + key);\n          if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n            name = name.substr(1, name.length - 2);\n            name = stylize(name, 'name');\n          } else {\n            name = name.replace(/'/g, \"\\\\'\")\n                       .replace(/\\\\\"/g, '\"')\n                       .replace(/(^\"|\"$)/g, \"'\");\n            name = stylize(name, 'string');\n          }\n        }\n\n        return name + ': ' + str;\n      });\n\n      seen.pop();\n\n      var numLinesEst = 0;\n      var length = reduce(output, function (prev, cur) {\n        numLinesEst++;\n        if (indexOf(cur, '\\n') >= 0) numLinesEst++;\n        return prev + cur.length + 1;\n      }, 0);\n\n      if (length > 50) {\n        output = braces[0] +\n                 (base === '' ? '' : base + '\\n ') +\n                 ' ' +\n                 output.join(',\\n  ') +\n                 ' ' +\n                 braces[1];\n\n      } else {\n        output = braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n      }\n\n      return output;\n    }\n    return format(obj, (typeof depth === 'undefined' ? 2 : depth));\n  }\n\n  expect.stringify = i;\n\n  function isArray (ar) {\n    return Object.prototype.toString.call(ar) === '[object Array]';\n  }\n\n  function isRegExp(re) {\n    var s;\n    try {\n      s = '' + re;\n    } catch (e) {\n      return false;\n    }\n\n    return re instanceof RegExp || // easy case\n           // duck-type for context-switching evalcx case\n           typeof(re) === 'function' &&\n           re.constructor.name === 'RegExp' &&\n           re.compile &&\n           re.test &&\n           re.exec &&\n           s.match(/^\\/.*\\/[gim]{0,3}$/);\n  }\n\n  function isDate(d) {\n    return d instanceof Date;\n  }\n\n  function keys (obj) {\n    if (Object.keys) {\n      return Object.keys(obj);\n    }\n\n    var keys = [];\n\n    for (var i in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, i)) {\n        keys.push(i);\n      }\n    }\n\n    return keys;\n  }\n\n  function map (arr, mapper, that) {\n    if (Array.prototype.map) {\n      return Array.prototype.map.call(arr, mapper, that);\n    }\n\n    var other= new Array(arr.length);\n\n    for (var i= 0, n = arr.length; i<n; i++)\n      if (i in arr)\n        other[i] = mapper.call(that, arr[i], i, arr);\n\n    return other;\n  }\n\n  function reduce (arr, fun) {\n    if (Array.prototype.reduce) {\n      return Array.prototype.reduce.apply(\n          arr\n        , Array.prototype.slice.call(arguments, 1)\n      );\n    }\n\n    var len = +this.length;\n\n    if (typeof fun !== \"function\")\n      throw new TypeError();\n\n    // no value to return if no initial value and an empty array\n    if (len === 0 && arguments.length === 1)\n      throw new TypeError();\n\n    var i = 0;\n    if (arguments.length >= 2) {\n      var rv = arguments[1];\n    } else {\n      do {\n        if (i in this) {\n          rv = this[i++];\n          break;\n        }\n\n        // if array contains no values, no initial value to return\n        if (++i >= len)\n          throw new TypeError();\n      } while (true);\n    }\n\n    for (; i < len; i++) {\n      if (i in this)\n        rv = fun.call(null, rv, this[i], i, this);\n    }\n\n    return rv;\n  }\n\n  /**\n   * Asserts deep equality\n   *\n   * @see taken from node.js `assert` module (copyright Joyent, MIT license)\n   * @api private\n   */\n\n  expect.eql = function eql(actual, expected) {\n    // 7.1. All identical values are equivalent, as determined by ===.\n    if (actual === expected) {\n      return true;\n    } else if ('undefined' != typeof Buffer\n      && Buffer.isBuffer(actual) && Buffer.isBuffer(expected)) {\n      if (actual.length != expected.length) return false;\n\n      for (var i = 0; i < actual.length; i++) {\n        if (actual[i] !== expected[i]) return false;\n      }\n\n      return true;\n\n      // 7.2. If the expected value is a Date object, the actual value is\n      // equivalent if it is also a Date object that refers to the same time.\n    } else if (actual instanceof Date && expected instanceof Date) {\n      return actual.getTime() === expected.getTime();\n\n      // 7.3. Other pairs that do not both pass typeof value == \"object\",\n      // equivalence is determined by ==.\n    } else if (typeof actual != 'object' && typeof expected != 'object') {\n      return actual == expected;\n    // If both are regular expression use the special `regExpEquiv` method\n    // to determine equivalence.\n    } else if (isRegExp(actual) && isRegExp(expected)) {\n      return regExpEquiv(actual, expected);\n    // 7.4. For all other Object pairs, including Array objects, equivalence is\n    // determined by having the same number of owned properties (as verified\n    // with Object.prototype.hasOwnProperty.call), the same set of keys\n    // (although not necessarily the same order), equivalent values for every\n    // corresponding key, and an identical \"prototype\" property. Note: this\n    // accounts for both named and indexed properties on Arrays.\n    } else {\n      return objEquiv(actual, expected);\n    }\n  };\n\n  function isUndefinedOrNull (value) {\n    return value === null || value === undefined;\n  }\n\n  function isArguments (object) {\n    return Object.prototype.toString.call(object) == '[object Arguments]';\n  }\n\n  function regExpEquiv (a, b) {\n    return a.source === b.source && a.global === b.global &&\n           a.ignoreCase === b.ignoreCase && a.multiline === b.multiline;\n  }\n\n  function objEquiv (a, b) {\n    if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n      return false;\n    // an identical \"prototype\" property.\n    if (a.prototype !== b.prototype) return false;\n    //~~~I've managed to break Object.keys through screwy arguments passing.\n    //   Converting to array solves the problem.\n    if (isArguments(a)) {\n      if (!isArguments(b)) {\n        return false;\n      }\n      a = pSlice.call(a);\n      b = pSlice.call(b);\n      return expect.eql(a, b);\n    }\n    try{\n      var ka = keys(a),\n        kb = keys(b),\n        key, i;\n    } catch (e) {//happens when one is a string literal and the other isn't\n      return false;\n    }\n    // having the same number of owned properties (keys incorporates hasOwnProperty)\n    if (ka.length != kb.length)\n      return false;\n    //the same set of keys (although not necessarily the same order),\n    ka.sort();\n    kb.sort();\n    //~~~cheap key test\n    for (i = ka.length - 1; i >= 0; i--) {\n      if (ka[i] != kb[i])\n        return false;\n    }\n    //equivalent values for every corresponding key, and\n    //~~~possibly expensive deep test\n    for (i = ka.length - 1; i >= 0; i--) {\n      key = ka[i];\n      if (!expect.eql(a[key], b[key]))\n         return false;\n    }\n    return true;\n  }\n\n  var json = (function () {\n    \"use strict\";\n\n    if ('object' == typeof JSON && JSON.parse && JSON.stringify) {\n      return {\n          parse: nativeJSON.parse\n        , stringify: nativeJSON.stringify\n      }\n    }\n\n    var JSON = {};\n\n    function f(n) {\n        // Format integers to have at least two digits.\n        return n < 10 ? '0' + n : n;\n    }\n\n    function date(d, key) {\n      return isFinite(d.valueOf()) ?\n          d.getUTCFullYear()     + '-' +\n          f(d.getUTCMonth() + 1) + '-' +\n          f(d.getUTCDate())      + 'T' +\n          f(d.getUTCHours())     + ':' +\n          f(d.getUTCMinutes())   + ':' +\n          f(d.getUTCSeconds())   + 'Z' : null;\n    }\n\n    var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        gap,\n        indent,\n        meta = {    // table of character substitutions\n            '\\b': '\\\\b',\n            '\\t': '\\\\t',\n            '\\n': '\\\\n',\n            '\\f': '\\\\f',\n            '\\r': '\\\\r',\n            '\"' : '\\\\\"',\n            '\\\\': '\\\\\\\\'\n        },\n        rep;\n\n\n    function quote(string) {\n\n  // If the string contains no control characters, no quote characters, and no\n  // backslash characters, then we can safely slap some quotes around it.\n  // Otherwise we must also replace the offending characters with safe escape\n  // sequences.\n\n        escapable.lastIndex = 0;\n        return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n            var c = meta[a];\n            return typeof c === 'string' ? c :\n                '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n        }) + '\"' : '\"' + string + '\"';\n    }\n\n\n    function str(key, holder) {\n\n  // Produce a string from holder[key].\n\n        var i,          // The loop counter.\n            k,          // The member key.\n            v,          // The member value.\n            length,\n            mind = gap,\n            partial,\n            value = holder[key];\n\n  // If the value has a toJSON method, call it to obtain a replacement value.\n\n        if (value instanceof Date) {\n            value = date(key);\n        }\n\n  // If we were called with a replacer function, then call the replacer to\n  // obtain a replacement value.\n\n        if (typeof rep === 'function') {\n            value = rep.call(holder, key, value);\n        }\n\n  // What happens next depends on the value's type.\n\n        switch (typeof value) {\n        case 'string':\n            return quote(value);\n\n        case 'number':\n\n  // JSON numbers must be finite. Encode non-finite numbers as null.\n\n            return isFinite(value) ? String(value) : 'null';\n\n        case 'boolean':\n        case 'null':\n\n  // If the value is a boolean or null, convert it to a string. Note:\n  // typeof null does not produce 'null'. The case is included here in\n  // the remote chance that this gets fixed someday.\n\n            return String(value);\n\n  // If the type is 'object', we might be dealing with an object or an array or\n  // null.\n\n        case 'object':\n\n  // Due to a specification blunder in ECMAScript, typeof null is 'object',\n  // so watch out for that case.\n\n            if (!value) {\n                return 'null';\n            }\n\n  // Make an array to hold the partial results of stringifying this object value.\n\n            gap += indent;\n            partial = [];\n\n  // Is the value an array?\n\n            if (Object.prototype.toString.apply(value) === '[object Array]') {\n\n  // The value is an array. Stringify every element. Use null as a placeholder\n  // for non-JSON values.\n\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || 'null';\n                }\n\n  // Join all of the elements together, separated with commas, and wrap them in\n  // brackets.\n\n                v = partial.length === 0 ? '[]' : gap ?\n                    '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' :\n                    '[' + partial.join(',') + ']';\n                gap = mind;\n                return v;\n            }\n\n  // If the replacer is an array, use it to select the members to be stringified.\n\n            if (rep && typeof rep === 'object') {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    if (typeof rep[i] === 'string') {\n                        k = rep[i];\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            } else {\n\n  // Otherwise, iterate through all of the keys in the object.\n\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            }\n\n  // Join all of the member texts together, separated with commas,\n  // and wrap them in braces.\n\n            v = partial.length === 0 ? '{}' : gap ?\n                '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}' :\n                '{' + partial.join(',') + '}';\n            gap = mind;\n            return v;\n        }\n    }\n\n  // If the JSON object does not yet have a stringify method, give it one.\n\n    JSON.stringify = function (value, replacer, space) {\n\n  // The stringify method takes a value and an optional replacer, and an optional\n  // space parameter, and returns a JSON text. The replacer can be a function\n  // that can replace values, or an array of strings that will select the keys.\n  // A default replacer method can be provided. Use of the space parameter can\n  // produce text that is more easily readable.\n\n        var i;\n        gap = '';\n        indent = '';\n\n  // If the space parameter is a number, make an indent string containing that\n  // many spaces.\n\n        if (typeof space === 'number') {\n            for (i = 0; i < space; i += 1) {\n                indent += ' ';\n            }\n\n  // If the space parameter is a string, it will be used as the indent string.\n\n        } else if (typeof space === 'string') {\n            indent = space;\n        }\n\n  // If there is a replacer, it must be a function or an array.\n  // Otherwise, throw an error.\n\n        rep = replacer;\n        if (replacer && typeof replacer !== 'function' &&\n                (typeof replacer !== 'object' ||\n                typeof replacer.length !== 'number')) {\n            throw new Error('JSON.stringify');\n        }\n\n  // Make a fake root object containing our value under the key of ''.\n  // Return the result of stringifying the value.\n\n        return str('', {'': value});\n    };\n\n  // If the JSON object does not yet have a parse method, give it one.\n\n    JSON.parse = function (text, reviver) {\n    // The parse method takes a text and an optional reviver function, and returns\n    // a JavaScript value if the text is a valid JSON text.\n\n        var j;\n\n        function walk(holder, key) {\n\n    // The walk method is used to recursively walk the resulting structure so\n    // that modifications can be made.\n\n            var k, v, value = holder[key];\n            if (value && typeof value === 'object') {\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = walk(value, k);\n                        if (v !== undefined) {\n                            value[k] = v;\n                        } else {\n                            delete value[k];\n                        }\n                    }\n                }\n            }\n            return reviver.call(holder, key, value);\n        }\n\n\n    // Parsing happens in four stages. In the first stage, we replace certain\n    // Unicode characters with escape sequences. JavaScript handles many characters\n    // incorrectly, either silently deleting them, or treating them as line endings.\n\n        text = String(text);\n        cx.lastIndex = 0;\n        if (cx.test(text)) {\n            text = text.replace(cx, function (a) {\n                return '\\\\u' +\n                    ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n            });\n        }\n\n    // In the second stage, we run the text against regular expressions that look\n    // for non-JSON patterns. We are especially concerned with '()' and 'new'\n    // because they can cause invocation, and '=' because it can cause mutation.\n    // But just to be safe, we want to reject all unexpected forms.\n\n    // We split the second stage into 4 regexp operations in order to work around\n    // crippling inefficiencies in IE's and Safari's regexp engines. First we\n    // replace the JSON backslash pairs with '@' (a non-JSON character). Second, we\n    // replace all simple value tokens with ']' characters. Third, we delete all\n    // open brackets that follow a colon or comma or that begin the text. Finally,\n    // we look to see that the remaining characters are only whitespace or ']' or\n    // ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.\n\n        if (/^[\\],:{}\\s]*$/\n                .test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')\n                    .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']')\n                    .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\n\n    // In the third stage we use the eval function to compile the text into a\n    // JavaScript structure. The '{' operator is subject to a syntactic ambiguity\n    // in JavaScript: it can begin a block or an object literal. We wrap the text\n    // in parens to eliminate the ambiguity.\n\n            j = eval('(' + text + ')');\n\n    // In the optional fourth stage, we recursively walk the new structure, passing\n    // each name/value pair to a reviver function for possible transformation.\n\n            return typeof reviver === 'function' ?\n                walk({'': j}, '') : j;\n        }\n\n    // If the text is not JSON parseable, then a SyntaxError is thrown.\n\n        throw new SyntaxError('JSON.parse');\n    };\n\n    return JSON;\n  })();\n\n  if ('undefined' != typeof window) {\n    window.expect = module.exports;\n  }\n\n})(\n    this\n  , 'undefined' != typeof module ? module : {exports: {}}\n);\n","import { ensure, it } from \"../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\n\r\nexport class ClassUtils {\r\n    private static _classMap: ClassMapData = {};\r\n\r\n    @ensure(function(className: string) {\r\n        it(\"should get class name from objInstance\", () => {\r\n            expect(className).exist;\r\n            expect(className !== \"\").true\r\n        });\r\n    })\r\n    public static getClassNameByInstance(obj: any) {\r\n        return obj.constructor[\"className\"];\r\n    }\r\n\r\n    public static addClass(className: string, _class: any) {\r\n        this._classMap[className] = _class;\r\n    }\r\n\r\n    public static addClassNameAttributeToClass(className: string, _class: any) {\r\n        _class[\"className\"] = className;\r\n    }\r\n\r\n    public static getClass(className: string) {\r\n        return this._classMap[className];\r\n    }\r\n}\r\n\r\ntype ClassMapData = {\r\n    [className: string]: any;\r\n}\r\n","import { ClassUtils } from \"../../../utils/ClassUtils\";\r\n\r\nexport function registerClass(className: string) {\r\n    return function(_class) {\r\n        ClassUtils.addClassNameAttributeToClass(className, _class);\r\n        ClassUtils.addClass(className, _class);\r\n    }\r\n}","export const $BREAK = {\r\n    break: true\r\n};\r\nexport const $REMOVE = void 0;","import { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { $BREAK } from \"./global/Const\";\r\n\r\nexport class List<T> {\r\n    protected children: Array<T> = null;\r\n\r\n    public getCount(): number {\r\n        return this.children.length;\r\n    }\r\n\r\n    public hasChild(child: any): boolean {\r\n        var c: any = null,\r\n            children = this.children;\r\n\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            c = children[i];\r\n\r\n            if (child.uid && c.uid && child.uid == c.uid) {\r\n                return true;\r\n            }\r\n            else if (child === c) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public hasChildWithFunc(func: Function): boolean {\r\n        for (let i = 0, len = this.children.length; i < len; i++) {\r\n            if (func(this.children[i], i)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n\r\n    public getChildren() {\r\n        return this.children;\r\n    }\r\n\r\n    public getChild(index: number) {\r\n        return this.children[index];\r\n    }\r\n\r\n    public addChild(child: T) {\r\n        this.children.push(child);\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChildren(arg: Array<T> | List<T> | any) {\r\n        if (JudgeUtils.isArray(arg)) {\r\n            let children: Array<T> = arg;\r\n\r\n            this.children = this.children.concat(children);\r\n        }\r\n        else if (arg instanceof List) {\r\n            let children: List<T> = arg;\r\n\r\n            this.children = this.children.concat(children.getChildren());\r\n        }\r\n        else {\r\n            let child: any = arg;\r\n\r\n            this.addChild(child);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    //todo test\r\n    public setChildren(children: Array<T>) {\r\n        this.children = children;\r\n\r\n        return this;\r\n    }\r\n\r\n    public unShiftChild(child: T) {\r\n        this.children.unshift(child);\r\n    }\r\n\r\n    public removeAllChildren() {\r\n        this.children = [];\r\n\r\n        return this;\r\n    }\r\n\r\n    public forEach(func: Function, context?: any) {\r\n        this._forEach(this.children, func, context);\r\n\r\n        return this;\r\n    }\r\n\r\n    //public removeChildAt (index) {\r\n    //    Log.error(index < 0, \"序号必须大于等于0\");\r\n    //\r\n    //    this.children.splice(index, 1);\r\n    //}\r\n    //\r\n\r\n    public toArray() {\r\n        return this.children;\r\n    }\r\n\r\n    protected copyChildren() {\r\n        return this.children.slice(0);\r\n    }\r\n\r\n    protected removeChildHelper(arg: any): Array<T> {\r\n        var result = null;\r\n\r\n        if (JudgeUtils.isFunction(arg)) {\r\n            let func = <Function>arg;\r\n\r\n            result = this._removeChild(this.children, func);\r\n        }\r\n        else if (arg.uid) {\r\n            result = this._removeChild(this.children, (e) => {\r\n                if (!e.uid) {\r\n                    return false;\r\n                }\r\n                return e.uid === arg.uid;\r\n            });\r\n        }\r\n        else {\r\n            result = this._removeChild(this.children, (e) => {\r\n                return e === arg;\r\n            });\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private _forEach(arr: T[], func: Function, context?: any) {\r\n        var scope = context,\r\n            i = 0,\r\n            len = arr.length;\r\n\r\n\r\n        for (i = 0; i < len; i++) {\r\n            if (func.call(scope, arr[i], i) === $BREAK) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _removeChild(arr: T[], func: Function) {\r\n        var self = this,\r\n            removedElementArr = [],\r\n            remainElementArr = [];\r\n\r\n        this._forEach(arr, (e, index) => {\r\n            if (!!func.call(self, e)) {\r\n                removedElementArr.push(e);\r\n            }\r\n            else {\r\n                remainElementArr.push(e);\r\n            }\r\n        });\r\n\r\n        this.children = remainElementArr;\r\n\r\n        return removedElementArr;\r\n    }\r\n}","import { JudgeUtils } from \"./JudgeUtils\";\r\n\r\nexport class ExtendUtils {\r\n    /**\r\n     * 深拷贝\r\n     *\r\n     * 示例：\r\n     * 如果拷贝对象为数组，能够成功拷贝（不拷贝Array原型链上的成员）\r\n     * expect(extend.extendDeep([1, { x: 1, y: 1 }, \"a\", { x: 2 }, [2]])).toEqual([1, { x: 1, y: 1 }, \"a\", { x: 2 }, [2]]);\r\n     *\r\n     * 如果拷贝对象为对象，能够成功拷贝（能拷贝原型链上的成员）\r\n     * var result = null;\r\n     function A() {\r\n            };\r\n     A.prototype.a = 1;\r\n\r\n     function B() {\r\n            };\r\n     B.prototype = new A();\r\n     B.prototype.b = { x: 1, y: 1 };\r\n     B.prototype.c = [{ x: 1 }, [2]];\r\n\r\n     var t = new B();\r\n\r\n     result = extend.extendDeep(t);\r\n\r\n     expect(result).toEqual(\r\n     {\r\n         a: 1,\r\n         b: { x: 1, y: 1 },\r\n         c: [{ x: 1 }, [2]]\r\n     });\r\n     * @param parent\r\n     * @param child\r\n     * @returns\r\n     */\r\n    public static extendDeep(parent, child?, filter = function(val, i) { return true; }) {\r\n        var i = null,\r\n            len = 0,\r\n            toStr = Object.prototype.toString,\r\n            sArr = \"[object Array]\",\r\n            sOb = \"[object Object]\",\r\n            type = \"\",\r\n            _child = null;\r\n\r\n        //数组的话，不获得Array原型上的成员。\r\n        if (toStr.call(parent) === sArr) {\r\n            _child = child || [];\r\n\r\n            for (i = 0, len = parent.length; i < len; i++) {\r\n                let member = parent[i];\r\n\r\n                if (!filter(member, i)) {\r\n                    continue;\r\n                }\r\n\r\n                if (member.clone) {\r\n                    _child[i] = member.clone();\r\n                    continue;\r\n                }\r\n\r\n                type = toStr.call(member);\r\n                if (type === sArr || type === sOb) {    //如果为数组或object对象\r\n                    _child[i] = type === sArr ? [] : {};\r\n                    ExtendUtils.extendDeep(member, _child[i]);\r\n                } else {\r\n                    _child[i] = member;\r\n                }\r\n            }\r\n        }\r\n        //对象的话，要获得原型链上的成员。因为考虑以下情景：\r\n        //类A继承于类B，现在想要拷贝类A的实例a的成员（包括从类B继承来的成员），那么就需要获得原型链上的成员。\r\n        else if (toStr.call(parent) === sOb) {\r\n            _child = child || {};\r\n\r\n            for (i in parent) {\r\n                let member = parent[i];\r\n\r\n                if (!filter(member, i)) {\r\n                    continue;\r\n                }\r\n\r\n                if (member.clone) {\r\n                    _child[i] = member.clone();\r\n                    continue;\r\n                }\r\n\r\n                type = toStr.call(member);\r\n                if (type === sArr || type === sOb) {    //如果为数组或object对象\r\n                    _child[i] = type === sArr ? [] : {};\r\n                    ExtendUtils.extendDeep(member, _child[i]);\r\n                } else {\r\n                    _child[i] = member;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            _child = parent;\r\n        }\r\n\r\n        return _child;\r\n    }\r\n\r\n    /**\r\n     * 浅拷贝\r\n     */\r\n    public static extend(destination: any, source: any) {\r\n        var property = \"\";\r\n\r\n        for (property in source) {\r\n            destination[property] = source[property];\r\n        }\r\n        return destination;\r\n    }\r\n\r\n    public static copyPublicAttri(source: any) {\r\n        var property = null,\r\n            destination = {};\r\n\r\n        this.extendDeep(source, destination, function(item, property) {\r\n            return property.slice(0, 1) !== \"_\"\r\n                && !JudgeUtils.isFunction(item);\r\n        });\r\n\r\n        return destination;\r\n    }\r\n}","import { List } from \"./List\";\r\nimport { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { ExtendUtils } from \"./utils/ExtendUtils\";\r\nimport { $BREAK, $REMOVE } from \"./global/Const\";\r\n\r\nexport class Collection<T> extends List<T>{\r\n    public static create<T>(children = []) {\r\n        var obj = new this(<Array<T>>children);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(children: Array<T> = []) {\r\n        super();\r\n\r\n        this.children = children;\r\n    }\r\n\r\n    public clone();\r\n    public clone(isDeep: boolean);\r\n    public clone(target: Collection<T>);\r\n    public clone(target: Collection<T>, isDeep: boolean);\r\n\r\n    public clone(...args) {\r\n        var target: Collection<T> = null,\r\n            isDeep: boolean = null;\r\n\r\n        if (args.length === 0) {\r\n            isDeep = false;\r\n            target = Collection.create<T>();\r\n        }\r\n        else if (args.length === 1) {\r\n            if (JudgeUtils.isBoolean(args[0])) {\r\n                target = Collection.create<T>();\r\n                isDeep = args[0];\r\n            }\r\n            else {\r\n                target = args[0];\r\n                isDeep = false;\r\n            }\r\n        }\r\n        else {\r\n            target = args[0];\r\n            isDeep = args[1];\r\n        }\r\n\r\n        if (isDeep === true) {\r\n            target.setChildren(ExtendUtils.extendDeep(this.children));\r\n        }\r\n        else {\r\n            target.setChildren(ExtendUtils.extend([], this.children));\r\n        }\r\n\r\n        return target;\r\n    }\r\n\r\n    public filter(func: (value: T, index: number) => boolean): Collection<T> {\r\n        var children = this.children,\r\n            result = [],\r\n            value = null;\r\n\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            value = children[i];\r\n\r\n            if (func.call(children, value, i)) {\r\n                result.push(value);\r\n            }\r\n        }\r\n\r\n        return Collection.create<T>(result);\r\n    }\r\n\r\n    public findOne(func: (value: T, index: number) => boolean) {\r\n        var scope = this.children,\r\n            result: T = null;\r\n\r\n        this.forEach((value: T, index) => {\r\n            if (!func.call(scope, value, index)) {\r\n                return;\r\n            }\r\n\r\n            result = value;\r\n            return $BREAK;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public reverse() {\r\n        return Collection.create<T>(this.copyChildren().reverse());\r\n    }\r\n\r\n    public removeChild(arg: any) {\r\n        return Collection.create<T>(this.removeChildHelper(arg));\r\n    }\r\n\r\n    public sort(func: (a: T, b: T) => any, isSortSelf = false): Collection<T> {\r\n        if (isSortSelf) {\r\n            this.children.sort(func);\r\n\r\n            return this;\r\n        }\r\n\r\n        return Collection.create<T>(this.copyChildren().sort(func));\r\n    }\r\n\r\n    public map(func: (value: T, index: number) => any) {\r\n        var resultArr = [];\r\n\r\n        this.forEach((e, index) => {\r\n            var result = func(e, index);\r\n\r\n            if (result !== $REMOVE) {\r\n                resultArr.push(result);\r\n            }\r\n            //e && e[handlerName] && e[handlerName].apply(context || e, valueArr);\r\n        });\r\n\r\n        return Collection.create<any>(resultArr);\r\n    }\r\n\r\n    public removeRepeatItems() {\r\n        var noRepeatList = Collection.create<T>();\r\n\r\n        this.forEach((item: T) => {\r\n            if (noRepeatList.hasChild(item)) {\r\n                return;\r\n            }\r\n\r\n            noRepeatList.addChild(item);\r\n        });\r\n\r\n        return noRepeatList;\r\n    }\r\n\r\n    public hasRepeatItems() {\r\n        var noRepeatList = Collection.create<T>(),\r\n            hasRepeat: boolean = false;\r\n\r\n        this.forEach((item: T) => {\r\n            if (noRepeatList.hasChild(item)) {\r\n                hasRepeat = true;\r\n\r\n                return $BREAK;\r\n            }\r\n\r\n            noRepeatList.addChild(item);\r\n        });\r\n\r\n        return hasRepeat;\r\n    }\r\n}\r\n","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { JudgeUtils as JudgeUtils$ } from \"wonder-commonlib/dist/es2015/utils/JudgeUtils\";\r\nimport { Entity } from \"../core/Entity\";\r\nimport { Component } from \"../core/Component\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\n@registerClass(\"JudgeUtils\")\r\nexport class JudgeUtils extends JudgeUtils$ {\r\n    public static isView(obj) {\r\n        return !!obj && obj.offset && obj.width && obj.height && this.isFunction(obj.getContext);\r\n    }\r\n\r\n    public static isEqual(target1: any, target2: any) {\r\n        if ((!target1 && target2) || (target1 && !target2)) {\r\n            return false;\r\n        }\r\n\r\n        if (target1.uid && target2.uid) {\r\n            return target1.uid === target2.uid;\r\n        }\r\n\r\n        return target1 === target2;\r\n    }\r\n\r\n    public static isPowerOfTwo(value: number) {\r\n        return (value & (value - 1)) === 0 && value !== 0;\r\n    }\r\n\r\n    public static isFloatArray(data: any) {\r\n        return Object.prototype.toString.call(data) === \"[object Float32Array]\" || Object.prototype.toString.call(data) === \"[object Float16Array]\";\r\n    }\r\n\r\n    /*!\r\n    can't use \"target instanceof interface\"!\r\n\r\n    refer to:\r\n    http://stackoverflow.com/questions/14425568/interface-type-check-with-typescript\r\n     https://typescript.codeplex.com/discussions/401501\r\n     */\r\n    public static isInterface(target: any, memberOfInterface: string) {\r\n        return !!target[memberOfInterface];\r\n    }\r\n\r\n    // public static isSpacePartitionObject(entityObject:EntityObject){\r\n    //     return ClassUtils.hasComponent(entityObject, \"SpacePartition\");\r\n    // }\r\n\r\n    public static isSelf(self: Entity, entityObject: Entity) {\r\n        return self.uid === entityObject.uid;\r\n    }\r\n\r\n    public static isComponenet(component: Component) {\r\n        return component.entityObject !== void 0;\r\n    }\r\n\r\n    public static isDom(obj) {\r\n        return Object.prototype.toString.call(obj).match(/\\[object HTML\\w+/) !== null;\r\n    }\r\n\r\n    public static isCollection(list: Collection<any>) {\r\n        return list instanceof Collection;\r\n    }\r\n\r\n    public static isClass(objInstance: any, className: string) {\r\n        return objInstance.constructor.name === className;\r\n    }\r\n}","import { ClassUtils } from \"../../../utils/ClassUtils\";\r\nimport { assert, requireCheck } from \"./contract\";\r\nimport { Log } from \"../../../utils/Log\";\r\nimport { registerClass } from \"./registerClass\";\r\nimport { JudgeUtils } from \"../../../utils/JudgeUtils\";\r\nimport { EntityObject } from \"../../../core/entityObject/EntityObject\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\n\r\nconst NOT_CLONE_TAG = \"not_clone\";\r\n\r\nvar getCloneAttributeMembers = (obj: any) => {\r\n    return obj[buildMemberContainerAttributeName(obj)];\r\n};\r\n\r\nvar setCloneAttributeMembers = (obj: any, members: Collection<CloneMemberData>) => {\r\n    obj[buildMemberContainerAttributeName(obj)] = members;\r\n};\r\n\r\nvar searchCloneAttributeMembers = (obj: any) => {\r\n    const CLONE_MEMBER_PREFIX = \"__decorator_clone\";\r\n    var result = null;\r\n\r\n    for (let memberName in obj) {\r\n        if (obj.hasOwnProperty(memberName)) {\r\n            if (memberName.indexOf(CLONE_MEMBER_PREFIX) > -1) {\r\n                result = obj[memberName];\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\nvar getAllCloneAttributeMembers = (obj: any) => {\r\n    const IS_GATHERED_ATTRIBUTE_NAME = `__decorator_clone_isGathered_${ClassUtils.getClassNameByInstance(obj)}_cloneAttributeMembers`;\r\n    var result = Collection.create<CloneMemberData>();\r\n    var gather = (obj: any) => {\r\n        if (!obj) {\r\n            return;\r\n        }\r\n\r\n        if (obj[IS_GATHERED_ATTRIBUTE_NAME]) {\r\n            let members = getCloneAttributeMembers(obj);\r\n\r\n            assert(members, Log.info.FUNC_NOT_EXIST(`${buildMemberContainerAttributeName(obj)}`));\r\n\r\n            result.addChildren(members);\r\n            return;\r\n        }\r\n\r\n        gather(obj.__proto__);\r\n\r\n        /*! it should ensure the order is: parent members->child members\r\n         so here go to the top parent, then add the members to result down side\r\n         */\r\n\r\n        let members = searchCloneAttributeMembers(obj);\r\n        if (members) {\r\n            result.addChildren(members);\r\n        }\r\n    },\r\n        setGatheredResult = () => {\r\n            setCloneAttributeMembers(obj.__proto__, result);\r\n            obj.__proto__[IS_GATHERED_ATTRIBUTE_NAME] = true;\r\n        };\r\n\r\n    gather(obj.__proto__);\r\n    setGatheredResult();\r\n\r\n    return getCloneAttributeMembers(obj);\r\n};\r\n\r\nvar initCloneAttributeMembers = (obj: any) => {\r\n    setCloneAttributeMembers(obj, Collection.create<CloneMemberData>());\r\n};\r\n\r\nvar buildMemberContainerAttributeName = (obj: any) => {\r\n    return `__decorator_clone_${ClassUtils.getClassNameByInstance(obj)}_cloneAttributeMembers`;\r\n};\r\n\r\nvar generateCloneableMember = (cloneType: CloneType, ...cloneDataArr) => {\r\n    return (target: any, memberName: string | symbol) => {\r\n        if (!getCloneAttributeMembers(target)) {\r\n            initCloneAttributeMembers(target);\r\n        }\r\n\r\n        if (cloneDataArr.length === 1) {\r\n            getCloneAttributeMembers(target).addChild({\r\n                memberName: memberName,\r\n                cloneType: cloneType,\r\n                configData: cloneDataArr[0]\r\n            });\r\n        }\r\n        else if (cloneDataArr.length === 2) {\r\n\r\n            getCloneAttributeMembers(target).addChild({\r\n                memberName: memberName,\r\n                cloneType: cloneType,\r\n                cloneFunc: cloneDataArr[0],\r\n                configData: cloneDataArr[1]\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport function cloneAttributeAsBasicType(configData?: CloneAttributeAsBasicTypeConfigData) {\r\n    return generateCloneableMember(CloneType.BASIC, ExtendUtils.extend({\r\n        order: 0\r\n    }, configData));\r\n}\r\n\r\nexport function cloneAttributeAsCloneable(configData?: CloneAttributeAsCloneableConfigData) {\r\n    return generateCloneableMember(CloneType.CLONEABLE, ExtendUtils.extend({\r\n        order: 0\r\n    }, configData));\r\n}\r\n\r\nexport function cloneAttributeAsCustomType(cloneFunc: (source: any, target: any, memberName: string, cloneData: any) => void, configData?: CloneAttributeAsCustomTypeConfigData) {\r\n    return generateCloneableMember(CloneType.CUSTOM, cloneFunc, ExtendUtils.extend({\r\n        order: 0\r\n    }, configData));\r\n}\r\n\r\n@registerClass(\"CloneUtils\")\r\nexport class CloneUtils {\r\n    @requireCheck(function(source: any, cloneData: any = null, createDataArr: Array<any> = null) {\r\n        if (createDataArr) {\r\n            assert(JudgeUtils.isArrayExactly(createDataArr), Log.info.FUNC_MUST_BE(\"param:createDataArr\", \"be arr\"));\r\n        }\r\n    })\r\n    public static clone<T>(sourceInstance: T, cloneData: any = null, createDataArr: Array<any> = null, target: any = null): T {\r\n        var cloneAttributeMembers: Collection<CloneMemberData> = getAllCloneAttributeMembers(sourceInstance)\r\n            .sort((memberDataA: any, memberDataB: any) => {\r\n                return memberDataA.configData.order - memberDataB.configData.order;\r\n            }),\r\n            className = ClassUtils.getClassNameByInstance(sourceInstance);\r\n\r\n        if (target === null) {\r\n            if (createDataArr) {\r\n                let _class = ClassUtils.getClass(className);\r\n\r\n                target = _class.create.apply(_class, createDataArr);\r\n            }\r\n            else {\r\n                target = ClassUtils.getClass(className).create();\r\n            }\r\n        }\r\n\r\n        if (!cloneAttributeMembers) {\r\n            return target;\r\n        }\r\n\r\n        cloneAttributeMembers.forEach((memberData: any) => {\r\n            var cloneType = memberData.cloneType,\r\n                memberName = memberData.memberName;\r\n\r\n            switch (cloneType) {\r\n                case CloneType.CLONEABLE:\r\n                    if (sourceInstance[memberName] !== null && sourceInstance[memberName] !== void 0) {\r\n                        if (target[memberName] !== null) {\r\n                            target[memberName] = sourceInstance[memberName].clone(target[memberName]);\r\n                        }\r\n                        else {\r\n                            target[memberName] = sourceInstance[memberName].clone();\r\n                        }\r\n                    }\r\n                    break;\r\n                case CloneType.BASIC:\r\n                    target[memberName] = sourceInstance[memberName];\r\n                    break;\r\n                case CloneType.CUSTOM:\r\n                    let cloneFunc = memberData.cloneFunc;\r\n\r\n                    cloneFunc.call(target, sourceInstance, target, memberName, cloneData);\r\n                    break;\r\n            }\r\n        });\r\n\r\n        return target;\r\n    }\r\n\r\n    public static cloneArray(arr: Array<any> | null, isDeep: boolean = false) {\r\n        if (arr === null) {\r\n            return null;\r\n        }\r\n\r\n        if (isDeep) {\r\n            return ExtendUtils.extendDeep(arr);\r\n        }\r\n\r\n        return [].concat(arr);\r\n    }\r\n\r\n    public static markNotClone(entityObject: EntityObject) {\r\n        if (!entityObject.hasTag(NOT_CLONE_TAG)) {\r\n            entityObject.addTag(NOT_CLONE_TAG);\r\n        }\r\n    }\r\n\r\n    public static isNotClone(entityObject: EntityObject) {\r\n        return entityObject.hasTag(NOT_CLONE_TAG);\r\n    }\r\n}\r\n\r\ntype CloneMemberData = {\r\n    memberName: string,\r\n    cloneType: CloneType,\r\n    cloneDataArr: Array<any>\r\n}\r\n\r\nexport type CloneAttributeAsBasicTypeConfigData = {\r\n    order?: number;\r\n}\r\n\r\nexport type CloneAttributeAsCloneableConfigData = {\r\n    order?: number;\r\n}\r\n\r\nexport type CloneAttributeAsCustomTypeConfigData = {\r\n    order?: number;\r\n}\r\n\r\nexport enum CloneType {\r\n    CLONEABLE,\r\n    BASIC,\r\n    CUSTOM\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n@registerClass(\"Vector2\")\r\nexport class Vector2 {\r\n    public static create(x, y): Vector2;\r\n    public static create(): Vector2;\r\n\r\n    public static create(...args): Vector2 {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0], args[1]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(x, y);\r\n    constructor();\r\n    constructor(...args) {\r\n        this.values = new Float32Array(2);\r\n\r\n        if (args.length > 0) {\r\n            this.values[0] = args[0];\r\n            this.values[1] = args[1];\r\n        }\r\n    }\r\n\r\n    get x() {\r\n        return this.values[0];\r\n    }\r\n    set x(x: number) {\r\n        this.values[0] = x;\r\n    }\r\n\r\n    get y() {\r\n        return this.values[1];\r\n    }\r\n    set y(y: number) {\r\n        this.values[1] = y;\r\n    }\r\n\r\n    public values: Float32Array;\r\n\r\n    public set(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    public add(v: Vector2) {\r\n        this.values[0] = this.values[0] + v.values[0];\r\n        this.values[1] = this.values[1] + v.values[1];\r\n\r\n        return this;\r\n    }\r\n\r\n    public mul(v: Vector2) {\r\n        this.values[0] = this.values[0] * v.values[0];\r\n        this.values[1] = this.values[1] * v.values[1];\r\n\r\n        return this;\r\n    }\r\n\r\n    public isEqual(v: Vector2) {\r\n        return this.x === v.x && this.y === v.y;\r\n    }\r\n\r\n    public clone() {\r\n        return Vector2.create(this.x, this.y);\r\n    }\r\n}","declare var Math: any;\r\n\r\n/**\r\n * @name DEG_TO_RAD\r\n * @description Conversion factor between degrees and radians\r\n * @type Number\r\n * @example\r\n * // Convert 180 degrees to pi radians\r\n * var rad = 180 * DEG_TO_RAD;\r\n */\r\nexport const DEG_TO_RAD = Math.PI / 180;\r\n\r\n/**\r\n * @name RAD_TO_DEG\r\n * @description Conversion factor between degrees and radians\r\n * @type Number\r\n * @example\r\n * // Convert pi radians to 180 degrees\r\n * var deg = Math.PI * RAD_TO_DEG;\r\n */\r\nexport const RAD_TO_DEG = 180 / Math.PI;","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector2 } from \"./Vector2\";\r\nimport { DEG_TO_RAD } from \"./Global\";\r\n\r\n@registerClass(\"Matrix3\")\r\nexport class Matrix3 {\r\n    public static create(mat: Float32Array): Matrix3;\r\n    public static create(): Matrix3;\r\n\r\n    public static create(...args): Matrix3 {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(mat: Float32Array);\r\n    constructor();\r\n\r\n    constructor(...args) {\r\n        if (args.length === 1) {\r\n            this.values = args[0];\r\n        }\r\n        else {\r\n            this.values = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);\r\n        }\r\n    }\r\n\r\n    get a(): number {\r\n        return this.values[0];\r\n    }\r\n    set a(a: number) {\r\n        this.values[0] = a;\r\n    }\r\n\r\n    get c(): number {\r\n        return this.values[1];\r\n    }\r\n    set c(c: number) {\r\n        this.values[1] = c;\r\n    }\r\n\r\n    get b(): number {\r\n        return this.values[3];\r\n    }\r\n    set b(b: number) {\r\n        this.values[3] = b;\r\n    }\r\n\r\n    get d(): number {\r\n        return this.values[4];\r\n    }\r\n    set d(d: number) {\r\n        this.values[4] = d;\r\n    }\r\n\r\n    get tx(): number {\r\n        return this.values[6];\r\n    }\r\n    set tx(tx: number) {\r\n        this.values[6] = tx;\r\n    }\r\n\r\n    get ty(): number {\r\n        return this.values[7];\r\n    }\r\n    set ty(ty: number) {\r\n        this.values[7] = ty;\r\n    }\r\n\r\n    public values: Float32Array = null;\r\n\r\n    public setIdentity(): Matrix3 {\r\n        var e = this.values;\r\n\r\n        e[0] = 1;\r\n        e[3] = 0;\r\n        e[6] = 0;\r\n        e[1] = 0;\r\n        e[4] = 1;\r\n        e[7] = 0;\r\n        e[2] = 0;\r\n        e[5] = 0;\r\n        e[8] = 1;\r\n\r\n        return this;\r\n    }\r\n\r\n    public invert(): Matrix3 {\r\n        var a1 = this.values[0];\r\n        var b1 = this.values[1];\r\n        var c1 = this.values[3];\r\n        var d1 = this.values[4];\r\n        var tx1 = this.values[6];\r\n        var ty1 = this.values[7];\r\n        var n = a1 * d1 - b1 * c1;\r\n\r\n        this.values[0] = d1 / n;\r\n        this.values[1] = -b1 / n;\r\n        this.values[3] = -c1 / n;\r\n        this.values[4] = a1 / n;\r\n        this.values[6] = (c1 * ty1 - d1 * tx1) / n;\r\n        this.values[7] = -(a1 * ty1 - b1 * tx1) / n;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiplyScalar(s: number) {\r\n        var te = this.values;\r\n\r\n        te[0] *= s;\r\n        te[3] *= s;\r\n        te[6] *= s;\r\n        te[1] *= s;\r\n        te[4] *= s;\r\n        te[7] *= s;\r\n        te[2] *= s;\r\n        te[5] *= s;\r\n        te[8] *= s;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiplyVector2(vector: Vector2) {\r\n        var x = vector.x,\r\n            y = vector.y,\r\n            result = Vector2.create(),\r\n            e = this.values;\r\n\r\n        result.x = e[0] * x + e[3] * y;\r\n        result.y = e[1] * x + e[4] * y;\r\n\r\n        return result;\r\n    }\r\n\r\n    public multiplyPoint(vector: Vector2) {\r\n        var x = vector.x,\r\n            y = vector.y,\r\n            result = Vector2.create(),\r\n            e = this.values;\r\n\r\n        result.x = e[0] * x + e[3] * y + this.tx;\r\n        result.y = e[1] * x + e[4] * y + this.ty;\r\n\r\n        return result;\r\n    }\r\n\r\n    public multiply(matrix: Matrix3) {\r\n        var m11 = this.a * matrix.a + this.c * matrix.b;\r\n        var m12 = this.b * matrix.a + this.d * matrix.b;\r\n\r\n        var m21 = this.a * matrix.c + this.c * matrix.d;\r\n        var m22 = this.b * matrix.c + this.d * matrix.d;\r\n\r\n        var dx = this.a * matrix.tx + this.c * matrix.ty + this.tx;\r\n        var dy = this.b * matrix.tx + this.d * matrix.ty + this.ty;\r\n\r\n        this.a = m11;\r\n        this.b = m12;\r\n        this.c = m21;\r\n        this.d = m22;\r\n        this.tx = dx;\r\n        this.ty = dy;\r\n\r\n        return this;\r\n    }\r\n\r\n    public transpose(): Matrix3 {\r\n        var tmp, m = this.values;\r\n\r\n        tmp = m[1];\r\n        m[1] = m[3];\r\n        m[3] = tmp;\r\n        tmp = m[2];\r\n        m[2] = m[6];\r\n        m[6] = tmp;\r\n        tmp = m[5];\r\n        m[5] = m[7];\r\n        m[7] = tmp;\r\n\r\n        return this;\r\n    }\r\n\r\n    public clone() {\r\n        return Matrix3.create().set(this);\r\n    }\r\n\r\n    public cloneToArray(array: Float32Array, offset: number = 0): Matrix3 {\r\n        var values = this.values;\r\n\r\n        for (let index = 0; index < 9; index++) {\r\n            array[offset + index] = values[index];\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public set(matrix: Matrix3) {\r\n        var te = this.values,\r\n            values = matrix.values;\r\n\r\n        te[0] = values[0]; te[3] = values[3]; te[6] = values[6];\r\n        te[1] = values[1]; te[4] = values[4]; te[7] = values[7];\r\n        te[2] = values[2]; te[5] = values[5]; te[8] = values[8];\r\n\r\n        return this;\r\n    }\r\n\r\n    public setTS(t: Vector2, s: Vector2) {\r\n        this.setPosition(t.x, t.y);\r\n        this.setScale(s.x, s.y);\r\n    }\r\n\r\n    public rotate(angle: number) {\r\n        var rad = angle * DEG_TO_RAD;\r\n        var c = Math.cos(rad);\r\n        var s = Math.sin(rad);\r\n        var m11 = this.a * c + this.c * s;\r\n        var m12 = this.b * c + this.d * s;\r\n        var m21 = this.a * -s + this.c * c;\r\n        var m22 = this.b * -s + this.d * c;\r\n        this.a = m11;\r\n        this.b = m12;\r\n        this.c = m21;\r\n        this.d = m22;\r\n\r\n        //var rad = angle * DEG_TO_RAD;\r\n        //\r\n        //var cos_a = Math.cos(rad);\r\n        //var sin_a = Math.sin(rad);\r\n        //\r\n        //var values = this.values;\r\n        //\r\n        //\r\n        //var m00 = values[0];\r\n        //var m10 = values[1];\r\n        //var m20 = values[2];\r\n        //\r\n        //var m01 = values[3];\r\n        //var m11 = values[4];\r\n        //var m21 = values[5];\r\n        //\r\n        //var m02 = values[6];\r\n        //var m12 = values[7];\r\n        //var m22 = values[8];\r\n        //\r\n        //values[0] = cos_a * m00 - sin_a * m10;\r\n        //values[1] = sin_a * m00 + cos_a * m10;\r\n        //\r\n        //values[3] = cos_a * m01 - sin_a * m11;\r\n        //values[4] = sin_a * m01 + cos_a * m11;\r\n        //\r\n        //values[6] = cos_a * m02 - sin_a * m12;\r\n        //values[7] = sin_a * m02 + cos_a * m12;\r\n\r\n        return this;\r\n    }\r\n\r\n    public setRotation(angle: number) {\r\n        var rad = angle * DEG_TO_RAD;\r\n\r\n        var cos_a = Math.cos(rad);\r\n        var sin_a = Math.sin(rad);\r\n        var values = this.values;\r\n\r\n        //values[0] = cos_a;\r\n        //values[1] = sin_a;\r\n        //\r\n        //values[3] = -sin_a;\r\n        //values[4] = cos_a;\r\n        values[0] = cos_a;\r\n        values[1] = -sin_a;\r\n\r\n        values[3] = sin_a;\r\n        values[4] = cos_a;\r\n\r\n        return this;\r\n    }\r\n\r\n    public translate(x: number, y: number) {\r\n        this.tx += this.a * x + this.c * y;\r\n        this.ty += this.b * x + this.d * y;\r\n    }\r\n\r\n    public setPosition(x: number, y: number) {\r\n        this.tx = x;\r\n        this.ty = y;\r\n    }\r\n\r\n    public scale(x: number, y: number) {\r\n        this.a *= x;\r\n        this.b *= x;\r\n        this.c *= y;\r\n        this.d *= y;\r\n\r\n        //var values = this.values;\r\n        //\r\n        //values[0] *= x;\r\n        //values[1] *= x;\r\n        //values[2] *= x;\r\n        //\r\n        //values[3] *= y;\r\n        //values[4] *= y;\r\n        //values[5] *= y;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public setScale(x: number, y: number) {\r\n        var values = this.values;\r\n\r\n        values[0] = x;\r\n        values[4] = y;\r\n\r\n        return this;\r\n    }\r\n\r\n    public getTranslation() {\r\n        return Vector2.create(this.tx, this.ty);\r\n    }\r\n\r\n    public getScale() {\r\n        return Vector2.create(\r\n            Math.sqrt(this.a * this.a + this.b * this.b),\r\n            Math.sqrt(this.c * this.c + this.d * this.d)\r\n        );\r\n    }\r\n\r\n    public getRotation() {\r\n        return this._getSkewX();\r\n    }\r\n\r\n    public getSkew() {\r\n        return Vector2.create(\r\n            this._getSkewX(),\r\n            this._getSkewY()\r\n        );\r\n    }\r\n\r\n    private _getDeltaTransformPoint(matrix: Matrix3, point: { x: number, y: number }) {\r\n        return {\r\n            x: point.x * matrix.a + point.y * matrix.c + 0,\r\n            y: point.x * matrix.b + point.y * matrix.d + 0\r\n        };\r\n    }\r\n\r\n    private _getSkewX() {\r\n        var px = this._getDeltaTransformPoint(this, { x: 0, y: 1 });\r\n\r\n        return ((180 / Math.PI) * Math.atan2(px.y, px.x) - 90);\r\n    }\r\n\r\n    private _getSkewY() {\r\n        var py = this._getDeltaTransformPoint(this, { x: 1, y: 0 });\r\n\r\n        return ((180 / Math.PI) * Math.atan2(py.y, py.x));\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector3 } from \"./Vector3\";\r\n\r\ndeclare var Math: any;\r\n\r\n@registerClass(\"Vector4\")\r\nexport class Vector4 {\r\n    public static create(x, y, z, w);\r\n    public static create();\r\n\r\n    public static create(...args) {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0], args[1], args[2], args[3]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(x, y, z, w);\r\n    constructor();\r\n\r\n    constructor(...args) {\r\n        this.values = new Float32Array(4);\r\n\r\n        if (args.length > 0) {\r\n            this.values[0] = args[0];\r\n            this.values[1] = args[1];\r\n            this.values[2] = args[2];\r\n            this.values[3] = args[3];\r\n        }\r\n    }\r\n\r\n    get x() {\r\n        return this.values[0];\r\n    }\r\n    set x(x: number) {\r\n        this.values[0] = x;\r\n    }\r\n\r\n    get y() {\r\n        return this.values[1];\r\n    }\r\n    set y(y: number) {\r\n        this.values[1] = y;\r\n    }\r\n\r\n    get z() {\r\n        return this.values[2];\r\n    }\r\n    set z(z: number) {\r\n        this.values[2] = z;\r\n    }\r\n\r\n    get w() {\r\n        return this.values[3];\r\n    }\r\n    set w(w: number) {\r\n        this.values[3] = w;\r\n    }\r\n\r\n    public values: Float32Array;\r\n\r\n    public normalize(): Vector4 {\r\n        var v = this.values;\r\n        var d = Math.sqrt(\r\n            v[0] * v[0] + v[1] * v[1] + v[2] * v[2] + v[3] * v[3]\r\n        );\r\n\r\n        if (d === 0) {\r\n            return Vector4.create(0, 0, 0, 0);\r\n        }\r\n\r\n        v[0] = v[0] / d;\r\n        v[1] = v[1] / d;\r\n        v[2] = v[2] / d;\r\n        v[3] = v[3] / d;\r\n\r\n        return this;\r\n    }\r\n\r\n    public isEqual(v: Vector4) {\r\n        return this.x === v.x && this.y === v.y && this.z === v.z && this.w === v.w;\r\n    }\r\n\r\n    public clone(): Vector4 {\r\n        return this.copyHelper(Vector4.create());\r\n    }\r\n\r\n    public toVector3(): Vector3 {\r\n        return Vector3.create(this.values[0], this.values[1], this.values[2]);\r\n    }\r\n\r\n    public lengthManhattan() {\r\n        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);\r\n    }\r\n\r\n    public multiplyScalar(scalar: number) {\r\n        this.x *= scalar;\r\n        this.y *= scalar;\r\n        this.z *= scalar;\r\n        this.w *= scalar;\r\n\r\n        return this;\r\n    }\r\n\r\n    public dot(v: Vector4) {\r\n        return this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n    }\r\n\r\n    public set(x: number, y: number, z: number, w: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n    }\r\n\r\n\r\n\r\n    protected copyHelper(vector4: Vector4): any {\r\n        var result = vector4,\r\n            i = 0,\r\n            len = this.values.length;\r\n\r\n        for (i = 0; i < len; i++) {\r\n            result.values[i] = this.values[i];\r\n        }\r\n\r\n        return result;\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector4 } from \"./Vector4\";\r\nimport { Matrix3 } from \"./Matrix3\";\r\nimport { Matrix4 } from \"./Matrix4\";\r\n\r\ndeclare var Math: any;\r\n\r\n@registerClass(\"Vector3\")\r\nexport class Vector3 {\r\n    public static up = null;\r\n    public static forward = null;\r\n    public static right = null;\r\n\r\n    public static create(x: number, y: number, z: number): Vector3;\r\n    public static create(): Vector3;\r\n\r\n    public static create(...args): Vector3 {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0], args[1], args[2]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(x: number, y: number, z: number);\r\n    constructor();\r\n\r\n    constructor(...args) {\r\n        this.values = new Float32Array(3);\r\n\r\n        if (args.length > 0) {\r\n            this.values[0] = args[0];\r\n            this.values[1] = args[1];\r\n            this.values[2] = args[2];\r\n        }\r\n    }\r\n\r\n    get x() {\r\n        return this.values[0];\r\n    }\r\n    set x(x: number) {\r\n        this.values[0] = x;\r\n    }\r\n\r\n    get y() {\r\n        return this.values[1];\r\n    }\r\n    set y(y: number) {\r\n        this.values[1] = y;\r\n    }\r\n\r\n    get z() {\r\n        return this.values[2];\r\n    }\r\n    set z(z: number) {\r\n        this.values[2] = z;\r\n    }\r\n\r\n    public values: Float32Array = null;\r\n\r\n    public normalize(): Vector3 {\r\n        var v = this.values;\r\n        var d = Math.sqrt(\r\n            v[0] * v[0] + v[1] * v[1] + v[2] * v[2]\r\n        );\r\n\r\n        if (d === 0) {\r\n            v[0] = 0;\r\n            v[1] = 0;\r\n            v[2] = 0;\r\n            return this;\r\n        }\r\n\r\n        v[0] = v[0] / d;\r\n        v[1] = v[1] / d;\r\n        v[2] = v[2] / d;\r\n\r\n        // for jasmine test:\r\n        // -0.isEqual(0);//not pass, so here change -0 to 0\r\n        if (v[0] === -0) {\r\n            v[0] = 0;\r\n        }\r\n        if (v[1] === -0) {\r\n            v[1] = 0;\r\n        }\r\n        if (v[2] === -0) {\r\n            v[2] = 0;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public isZero() {\r\n        var v = this.values;\r\n\r\n        return v[0] === 0 && v[1] === 0 && v[2] === 0;\r\n    }\r\n\r\n    public scale(scalar: number);\r\n    public scale(x: number, y: number, z: number);\r\n\r\n    public scale(...args) {\r\n        var v = this.values;\r\n\r\n        if (args.length === 1) {\r\n            let scalar = args[0];\r\n\r\n            v[0] *= scalar;\r\n            v[1] *= scalar;\r\n            v[2] *= scalar;\r\n        }\r\n        else if (args.length === 3) {\r\n            let x = args[0],\r\n                y = args[1],\r\n                z = args[2];\r\n\r\n            v[0] *= x;\r\n            v[1] *= y;\r\n            v[2] *= z;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public set(v: Vector3);\r\n    public set(x: number, y: number, z: number);\r\n\r\n    public set(...args) {\r\n        if (args.length === 3) {\r\n            this.x = args[0];\r\n            this.y = args[1];\r\n            this.z = args[2];\r\n        }\r\n        else {\r\n            let v: Vector3 = args[0];\r\n\r\n            this.x = v.x;\r\n            this.y = v.y;\r\n            this.z = v.z;\r\n        }\r\n    }\r\n\r\n    public sub(v: Vector3): Vector3 {\r\n        this.values[0] = this.values[0] - v.values[0];\r\n        this.values[1] = this.values[1] - v.values[1];\r\n        this.values[2] = this.values[2] - v.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public sub2(v1: Vector3, v2: Vector3) {\r\n        this.values[0] = v1.values[0] - v2.values[0];\r\n        this.values[1] = v1.values[1] - v2.values[1];\r\n        this.values[2] = v1.values[2] - v2.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public add(v: Vector3) {\r\n        this.values[0] = this.values[0] + v.values[0];\r\n        this.values[1] = this.values[1] + v.values[1];\r\n        this.values[2] = this.values[2] + v.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public add2(v1: Vector3, v2: Vector3) {\r\n        this.values[0] = v1.values[0] + v2.values[0];\r\n        this.values[1] = v1.values[1] + v2.values[1];\r\n        this.values[2] = v1.values[2] + v2.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public mul(v: Vector3) {\r\n        this.values[0] = this.values[0] * v.values[0];\r\n        this.values[1] = this.values[1] * v.values[1];\r\n        this.values[2] = this.values[2] * v.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public mul2(v1: Vector3, v2: Vector3) {\r\n        this.values[0] = v1.values[0] * v2.values[0];\r\n        this.values[1] = v1.values[1] * v2.values[1];\r\n        this.values[2] = v1.values[2] * v2.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public reverse(): Vector3 {\r\n        this.values[0] = -this.values[0];\r\n        this.values[1] = -this.values[1];\r\n        this.values[2] = -this.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public clone(): Vector3 {\r\n        var result = Vector3.create(),\r\n            i = 0,\r\n            len = this.values.length;\r\n\r\n        for (i = 0; i < len; i++) {\r\n            result.values[i] = this.values[i];\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public toVector4(): Vector4 {\r\n        return Vector4.create(this.values[0], this.values[1], this.values[2], 1.0);\r\n    }\r\n\r\n    public length() {\r\n        var v = this.values;\r\n\r\n        return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name cross\r\n     * @description Returns the result of a cross product operation performed on the two specified 3-dimensional vectors.\r\n     * @param {Vec3} lhs The first 3-dimensional vector operand of the cross product.\r\n     * @param {Vec3} rhs The second 3-dimensional vector operand of the cross product.\r\n     * @returns {Vec3} Self for chaining.\r\n     * @example\r\n     * var back = new Vec3().cross(Vec3.RIGHT, Vec3.UP);\r\n     *\r\n     * // Should print the Z axis (i.e. [0, 0, 1])\r\n     * console.log(\"The result of the cross product is: \" + back.toString());\r\n     */\r\n    public cross(lhs: Vector3, rhs: Vector3) {\r\n        var a, b, r, ax, ay, az, bx, by, bz;\r\n\r\n        a = lhs.values;\r\n        b = rhs.values;\r\n        r = this.values;\r\n\r\n        ax = a[0];\r\n        ay = a[1];\r\n        az = a[2];\r\n        bx = b[0];\r\n        by = b[1];\r\n        bz = b[2];\r\n\r\n        r[0] = ay * bz - by * az;\r\n        r[1] = az * bx - bz * ax;\r\n        r[2] = ax * by - bx * ay;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name lerp\r\n     * @description Returns the result of a linear interpolation between two specified 3-dimensional vectors.\r\n     * @param {Vec3} lhs The 3-dimensional to interpolate from.\r\n     * @param {Vec3} rhs The 3-dimensional to interpolate to.\r\n     * @param {Number} alpha The value controlling the point of interpolation. Between 0 and 1, the linear interpolant\r\n     * will occur on a straight line between lhs and rhs. Outside of this range, the linear interpolant will occur on\r\n     * a ray extrapolated from this line.\r\n     * @returns {Vec3} Self for chaining.\r\n     * @example\r\n     * var a = new Vec3(0, 0, 0);\r\n     * var b = new Vec3(10, 10, 10);\r\n     * var r = new Vec3();\r\n     *\r\n     * r.lerp(a, b, 0);   // r is equal to a\r\n     * r.lerp(a, b, 0.5); // r is 5, 5, 5\r\n     * r.lerp(a, b, 1);   // r is equal to b\r\n     */\r\n    public lerp(lhs: Vector3, rhs: Vector3, alpha: number) {\r\n        var a = lhs.values,\r\n            b = rhs.values,\r\n            r = this.values;\r\n\r\n        r[0] = a[0] + alpha * (b[0] - a[0]);\r\n        r[1] = a[1] + alpha * (b[1] - a[1]);\r\n        r[2] = a[2] + alpha * (b[2] - a[2]);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name dot\r\n     * @description Returns the result of a dot product operation performed on the two specified 3-dimensional vectors.\r\n     * @param {Vec3} rhs The second 3-dimensional vector operand of the dot product.\r\n     * @returns {Number} The result of the dot product operation.\r\n     * @example\r\n     * var v1 = new Vec3(5, 10, 20);\r\n     * var v2 = new Vec3(10, 20, 40);\r\n     * var v1dotv2 = v1.dot(v2);\r\n     * console.log(\"The result of the dot product is: \" + v1dotv2);\r\n     */\r\n    public dot(rhs) {\r\n        var a = this.values,\r\n            b = rhs.values;\r\n\r\n        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\r\n    }\r\n\r\n    public calAngleCos(v1: Vector3) {\r\n        var l = this.length() * v1.length();\r\n\r\n        if (l === 0) {\r\n            return NaN;\r\n        }\r\n\r\n        return this.dot(v1) / l;\r\n    }\r\n\r\n    public min(v: Vector3) {\r\n        if (this.x > v.x) {\r\n            this.x = v.x;\r\n        }\r\n        if (this.y > v.y) {\r\n            this.y = v.y;\r\n        }\r\n        if (this.z > v.z) {\r\n            this.z = v.z;\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public max(v: Vector3) {\r\n        if (this.x < v.x) {\r\n            this.x = v.x;\r\n        }\r\n        if (this.y < v.y) {\r\n            this.y = v.y;\r\n        }\r\n        if (this.z < v.z) {\r\n            this.z = v.z;\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public isEqual(v: Vector3) {\r\n        return this.x === v.x && this.y === v.y && this.z === v.z;\r\n    }\r\n\r\n    public toArray() {\r\n        return [this.x, this.y, this.z];\r\n    }\r\n\r\n    public applyMatrix3(m: Matrix3) {\r\n        var x = this.x,\r\n            y = this.y,\r\n            z = this.z,\r\n            e = m.values;\r\n\r\n        this.x = e[0] * x + e[3] * y + e[6] * z;\r\n        this.y = e[1] * x + e[4] * y + e[7] * z;\r\n        this.z = e[2] * x + e[5] * y + e[8] * z;\r\n\r\n        return this;\r\n    }\r\n\r\n    public applyMatrix4(m: Matrix4) {\r\n        var x = this.x,\r\n            y = this.y,\r\n            z = this.z,\r\n            e = m.values;\r\n\r\n        this.x = e[0] * x + e[4] * y + e[8] * z + e[12];\r\n        this.y = e[1] * x + e[5] * y + e[9] * z + e[13];\r\n        this.z = e[2] * x + e[6] * y + e[10] * z + e[14];\r\n\r\n        return this;\r\n    }\r\n\r\n    public distanceTo(v: Vector3) {\r\n        return Math.sqrt(this.distanceToSquared(v));\r\n    }\r\n\r\n    public distanceToSquared(v: Vector3) {\r\n        var dx = this.x - v.x,\r\n            dy = this.y - v.y,\r\n            dz = this.z - v.z;\r\n\r\n        return dx ** 2 + dy ** 2 + dz ** 2;\r\n    }\r\n}\r\n\r\n\r\nVector3.up = Vector3.create(0, 1, 0);\r\nVector3.forward = Vector3.create(0, 0, 1);\r\nVector3.right = Vector3.create(1, 0, 0);","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector3 } from \"./Vector3\";\r\nimport { DEG_TO_RAD, RAD_TO_DEG } from \"./Global\";\r\nimport { Matrix4 } from \"./Matrix4\";\r\n\r\ndeclare var Math: any;\r\n\r\n@registerClass(\"Quaternion\")\r\nexport class Quaternion {\r\n    public static create(x?: number, y?: number, z?: number, w?: number) {\r\n        var obj = new this(x, y, z, w);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(x: number = 0, y: number = 0, z: number = 0, w: number = 1) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n    }\r\n\r\n    public x: number = null;\r\n    public y: number = null;\r\n    public z: number = null;\r\n    public w: number = null;\r\n\r\n    /**\r\n     * @function\r\n     * @name setFromEulerAngles\r\n     * @description Sets a quaternion from Euler angles specified in XYZ order.\r\n     * @param {Number} ex Angle to rotate around X axis in degrees.\r\n     * @param {Number} ey Angle to rotate around Y axis in degrees.\r\n     * @param {Number} ez Angle to rotate around Z axis in degrees.\r\n     * @returns {Quat} Self for chaining.\r\n     * @example\r\n     * var q = new Quat();\r\n     * q.setFromEulerAngles(45, 90, 180);\r\n     */\r\n    public setFromEulerAngles(eulerAngles: Vector3) {\r\n        var sx, cx, sy, cy, sz, cz, halfToRad,\r\n            ex = eulerAngles.x,\r\n            ey = eulerAngles.y,\r\n            ez = eulerAngles.z;\r\n\r\n        halfToRad = 0.5 * DEG_TO_RAD;\r\n        ex *= halfToRad;\r\n        ey *= halfToRad;\r\n        ez *= halfToRad;\r\n\r\n        sx = Math.sin(ex);\r\n        cx = Math.cos(ex);\r\n        sy = Math.sin(ey);\r\n        cy = Math.cos(ey);\r\n        sz = Math.sin(ez);\r\n        cz = Math.cos(ez);\r\n\r\n        this.x = sx * cy * cz - cx * sy * sz;\r\n        this.y = cx * sy * cz + sx * cy * sz;\r\n        this.z = cx * cy * sz - sx * sy * cz;\r\n        this.w = cx * cy * cz + sx * sy * sz;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiply(rhs: Quaternion);\r\n    public multiply(rhs1: Quaternion, rhs2: Quaternion);\r\n\r\n    public multiply(...args) {\r\n        var q1x, q1y, q1z, q1w, q2x, q2y, q2z, q2w,\r\n            rhs1, rhs2,\r\n            result = this;\r\n\r\n        if (args.length === 1) {\r\n            rhs1 = this;\r\n            rhs2 = args[0];\r\n        }\r\n        else if (args.length === 2) {\r\n            rhs1 = args[0];\r\n            rhs2 = args[1];\r\n        }\r\n\r\n        q1x = rhs1.x;\r\n        q1y = rhs1.y;\r\n        q1z = rhs1.z;\r\n        q1w = rhs1.w;\r\n\r\n        q2x = rhs2.x;\r\n        q2y = rhs2.y;\r\n        q2z = rhs2.z;\r\n        q2w = rhs2.w;\r\n\r\n        result.x = q1w * q2x + q1x * q2w + q1y * q2z - q1z * q2y;\r\n        result.y = q1w * q2y + q1y * q2w + q1z * q2x - q1x * q2z;\r\n        result.z = q1w * q2z + q1z * q2w + q1x * q2y - q1y * q2x;\r\n        result.w = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name setFromMat4\r\n     * @description Converts the specified 4x4 matrix to a quaternion. Note that since\r\n     * a quaternion is purely a representation for orientation, only the translational part\r\n     * of the matrix is lost.\r\n     * @param {Mat4} m The 4x4 matrix to convert.\r\n     * @returns {Quat} Self for chaining.\r\n     * @example\r\n     * // Create a 4x4 rotation matrix of 180 degrees around the y-axis\r\n     * var rot = new Mat4().setFromAxisAngle(Vec3.UP, 180);\r\n     *\r\n     * // Convert to a quaternion\r\n     * var q = new Quat().setFromMat4(rot);\r\n     */\r\n    public setFromMatrix(matrix: Matrix4) {\r\n        var m00, m01, m02, m10, m11, m12, m20, m21, m22,\r\n            tr, s, rs, lx, ly, lz, m;\r\n\r\n        m = matrix.values;\r\n\r\n        // Cache matrix values for super-speed\r\n        m00 = m[0];\r\n        m01 = m[1];\r\n        m02 = m[2];\r\n        m10 = m[4];\r\n        m11 = m[5];\r\n        m12 = m[6];\r\n        m20 = m[8];\r\n        m21 = m[9];\r\n        m22 = m[10];\r\n\r\n        // Remove the scale from the matrix\r\n        lx = 1 / Math.sqrt(m00 * m00 + m01 * m01 + m02 * m02);\r\n        ly = 1 / Math.sqrt(m10 * m10 + m11 * m11 + m12 * m12);\r\n        lz = 1 / Math.sqrt(m20 * m20 + m21 * m21 + m22 * m22);\r\n\r\n        m00 *= lx;\r\n        m01 *= lx;\r\n        m02 *= lx;\r\n        m10 *= ly;\r\n        m11 *= ly;\r\n        m12 *= ly;\r\n        m20 *= lz;\r\n        m21 *= lz;\r\n        m22 *= lz;\r\n\r\n        // http://www.cs.ucr.edu/~vbz/resources/quatut.pdf\r\n\r\n        tr = m00 + m11 + m22;\r\n        if (tr >= 0) {\r\n            s = Math.sqrt(tr + 1);\r\n            this.w = s * 0.5;\r\n            s = 0.5 / s;\r\n            this.x = (m12 - m21) * s;\r\n            this.y = (m20 - m02) * s;\r\n            this.z = (m01 - m10) * s;\r\n        } else {\r\n            if (m00 > m11) {\r\n                if (m00 > m22) {\r\n                    // XDiagDomMatrix\r\n                    rs = (m00 - (m11 + m22)) + 1;\r\n                    rs = Math.sqrt(rs);\r\n\r\n                    this.x = rs * 0.5;\r\n                    rs = 0.5 / rs;\r\n                    this.w = (m12 - m21) * rs;\r\n                    this.y = (m01 + m10) * rs;\r\n                    this.z = (m02 + m20) * rs;\r\n                } else {\r\n                    // ZDiagDomMatrix\r\n                    rs = (m22 - (m00 + m11)) + 1;\r\n                    rs = Math.sqrt(rs);\r\n\r\n                    this.z = rs * 0.5;\r\n                    rs = 0.5 / rs;\r\n                    this.w = (m01 - m10) * rs;\r\n                    this.x = (m20 + m02) * rs;\r\n                    this.y = (m21 + m12) * rs;\r\n                }\r\n            } else if (m11 > m22) {\r\n                // YDiagDomMatrix\r\n                rs = (m11 - (m22 + m00)) + 1;\r\n                rs = Math.sqrt(rs);\r\n\r\n                this.y = rs * 0.5;\r\n                rs = 0.5 / rs;\r\n                this.w = (m20 - m02) * rs;\r\n                this.z = (m12 + m21) * rs;\r\n                this.x = (m10 + m01) * rs;\r\n            } else {\r\n                // ZDiagDomMatrix\r\n                rs = (m22 - (m00 + m11)) + 1;\r\n                rs = Math.sqrt(rs);\r\n\r\n                this.z = rs * 0.5;\r\n                rs = 0.5 / rs;\r\n                this.w = (m01 - m10) * rs;\r\n                this.x = (m20 + m02) * rs;\r\n                this.y = (m21 + m12) * rs;\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name setFromAxisAngle\r\n     * @description Sets a quaternion from an angular rotation around an axis.\r\n     * @param {Vec3} axis World space axis around which to rotate.\r\n     * @param {Number} angle Angle to rotate around the given axis in degrees.\r\n     * @returns {Quat} Self for chaining.\r\n     * @example\r\n     * var q = new Quat();\r\n     * q.setFromAxisAngle(Vec3.UP, 90);\r\n     */\r\n    public setFromAxisAngle(angle: number, axis: Vector3) {\r\n        var sa, ca;\r\n\r\n        axis = axis.normalize();\r\n\r\n        angle *= 0.5 * DEG_TO_RAD;\r\n\r\n        sa = Math.sin(angle);\r\n        ca = Math.cos(angle);\r\n\r\n        this.x = sa * axis.x;\r\n        this.y = sa * axis.y;\r\n        this.z = sa * axis.z;\r\n        this.w = ca;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name invert\r\n     * @description Generates the inverse of the specified quaternion.\r\n     * @returns {Quat} Self for chaining.\r\n     * @example\r\n     * // Create a quaternion rotated 180 degrees around the y-axis\r\n     * var rot = new Quat().setFromEulerAngles(0, 180, 0);\r\n     *\r\n     * // Invert in place\r\n     * rot.invert();\r\n     */\r\n    public invert() {\r\n        return this.conjugate().normalize();\r\n    }\r\n\r\n    public conjugate() {\r\n        this.x *= -1;\r\n        this.y *= -1;\r\n        this.z *= -1;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name clone\r\n     * @description Returns an identical clone of the specified quaternion.\r\n     * @returns {Quat} A quaternion containing the result of the cloning.\r\n     * @example\r\n     * var q = new Quat(-0.11, -0.15, -0.46, 0.87);\r\n     * var qclone = q.clone();\r\n     *\r\n     * console.log(\"The result of the cloning is: \" + q.toString());\r\n     */\r\n    public clone() {\r\n        return Quaternion.create(this.x, this.y, this.z, this.w);\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name normalize\r\n     * @description Returns the specified quaternion converted in place to a unit quaternion.\r\n     * @returns {Quat} The result of the normalization.\r\n     * @example\r\n     * var v = new Quat(0, 0, 0, 5);\r\n     *\r\n     * v.normalize();\r\n     *\r\n     * // Should output 0, 0, 0, 1\r\n     * console.log(\"The result of the vector normalization is: \" + v.toString());\r\n     */\r\n    public normalize() {\r\n        var len = this.length();\r\n        if (len === 0) {\r\n            this.x = this.y = this.z = 0;\r\n            this.w = 1;\r\n        } else {\r\n            len = 1 / len;\r\n            this.x *= len;\r\n            this.y *= len;\r\n            this.z *= len;\r\n            this.w *= len;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name length\r\n     * @description Returns the magnitude of the specified quaternion.\r\n     * @returns {Number} The magnitude of the specified quaternion.\r\n     * @example\r\n     * var q = new Quat(0, 0, 0, 5);\r\n     * var len = q.length();\r\n     * // Should output 5\r\n     * console.log(\"The length of the quaternion is: \" + len);\r\n     */\r\n    public length() {\r\n        var x, y, z, w;\r\n\r\n        x = this.x;\r\n        y = this.y;\r\n        z = this.z;\r\n        w = this.w;\r\n\r\n        return Math.sqrt(x * x + y * y + z * z + w * w);\r\n    }\r\n\r\n\r\n    public multiplyVector3(vector: Vector3) {\r\n        var q = this;\r\n        var x = vector.x;\r\n        var y = vector.y;\r\n        var z = vector.z;\r\n\r\n        var qx = q.x;\r\n        var qy = q.y;\r\n        var qz = q.z;\r\n        var qw = q.w;\r\n\r\n        // calculate quat * vector\r\n\r\n        var ix = qw * x + qy * z - qz * y;\r\n        var iy = qw * y + qz * x - qx * z;\r\n        var iz = qw * z + qx * y - qy * x;\r\n        var iw = - qx * x - qy * y - qz * z;\r\n\r\n        // calculate result * inverse quat\r\n\r\n        return Vector3.create(\r\n            ix * qw + iw * - qx + iy * - qz - iz * - qy,\r\n            iy * qw + iw * - qy + iz * - qx - ix * - qz,\r\n            iz * qw + iw * - qz + ix * - qy - iy * - qx\r\n        );\r\n    }\r\n\r\n    public set(x: number, y: number, z: number, w: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n    }\r\n\r\n    public sub(quat: Quaternion) {\r\n        var result = quat.clone().invert().multiply(this);\r\n\r\n        this.set(result.x, result.y, result.z, result.w);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name getEulerAngles\r\n     * @description Converts the supplied quaternion to Euler angles.\r\n     * @param {Vec3} [eulers] The 3-dimensional vector to receive the Euler angles.\r\n     * @returns {Vec3} The 3-dimensional vector holding the Euler angles that\r\n     * correspond to the supplied quaternion.\r\n     */\r\n    public getEulerAngles() {\r\n        var x, y, z, qx, qy, qz, qw, a2;\r\n\r\n        qx = this.x;\r\n        qy = this.y;\r\n        qz = this.z;\r\n        qw = this.w;\r\n\r\n        a2 = 2 * (qw * qy - qx * qz);\r\n        if (a2 <= -0.99999) {\r\n            x = 2 * Math.atan2(qx, qw);\r\n            y = -Math.PI / 2;\r\n            z = 0;\r\n        } else if (a2 >= 0.99999) {\r\n            x = 2 * Math.atan2(qx, qw);\r\n            y = Math.PI / 2;\r\n            z = 0;\r\n        } else {\r\n            x = Math.atan2(2 * (qw * qx + qy * qz), 1 - 2 * (qx * qx + qy * qy));\r\n            y = Math.asin(a2);\r\n            z = Math.atan2(2 * (qw * qz + qx * qy), 1 - 2 * (qy * qy + qz * qz));\r\n        }\r\n\r\n        return Vector3.create(x, y, z).scale(RAD_TO_DEG);\r\n    }\r\n\r\n    public slerp(left: Quaternion, right: Quaternion, amount: number): Quaternion {\r\n        if (amount === 0) {\r\n            this.set(left.x, left.y, left.z, left.w);\r\n\r\n            return this;\r\n        }\r\n        else if (amount === 1) {\r\n            this.set(right.x, right.y, right.z, right.w);\r\n\r\n            return this;\r\n        }\r\n\r\n        var num2;\r\n        var num3;\r\n        var num = amount;\r\n        var num4 = (((left.x * right.x) + (left.y * right.y)) + (left.z * right.z)) + (left.w * right.w);\r\n        var flag = false;\r\n\r\n        if (num4 < 0) {\r\n            flag = true;\r\n            num4 = -num4;\r\n        }\r\n\r\n        if (num4 > 0.999999) {\r\n            num3 = 1 - num;\r\n            num2 = flag ? -num : num;\r\n        }\r\n        else {\r\n            var num5 = Math.acos(num4);\r\n            var num6 = (1.0 / Math.sin(num5));\r\n            num3 = (Math.sin((1.0 - num) * num5)) * num6;\r\n            num2 = flag ? ((-Math.sin(num * num5)) * num6) : ((Math.sin(num * num5)) * num6);\r\n        }\r\n\r\n        this.set((num3 * left.x) + (num2 * right.x), (num3 * left.y) + (num2 * right.y), (num3 * left.z) + (num2 * right.z), (num3 * left.w) + (num2 * right.w));\r\n\r\n        return this;\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Matrix3 } from \"./Matrix3\";\r\nimport { Log } from \"../utils/Log\";\r\nimport { requireCheck, it, assert } from \"../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { Vector3 } from \"./Vector3\";\r\nimport { Vector4 } from \"./Vector4\";\r\nimport { Quaternion } from \"./Quaternion\";\r\nimport { RAD_TO_DEG } from \"./Global\";\r\n\r\ndeclare var Math: any;\r\n\r\n/*!\r\n 注意：矩阵元素是按列主序存储在数组中的。\r\n */\r\n@registerClass(\"Matrix4\")\r\nexport class Matrix4 {\r\n    public static create(mat: Float32Array): Matrix4;\r\n    public static create(): Matrix4;\r\n\r\n    public static create(...args): Matrix4 {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(mat: Float32Array);\r\n    constructor();\r\n\r\n    constructor(...args) {\r\n        if (args.length === 1) {\r\n            this.values = args[0];\r\n        }\r\n        else {\r\n            this.values = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\r\n        }\r\n\r\n        this._matrixArr = [];\r\n    }\r\n\r\n    public values: Float32Array = null;\r\n\r\n    private _matrixArr: Array<Float32Array> = null;\r\n\r\n    public push() {\r\n        this._matrixArr.push(this.values);\r\n    }\r\n\r\n    public pop() {\r\n        this.values = this._matrixArr.pop();\r\n    }\r\n\r\n    public set(initialM11: number, initialM12: number, initialM13: number, initialM14: number,\r\n        initialM21: number, initialM22: number, initialM23: number, initialM24: number,\r\n        initialM31: number, initialM32: number, initialM33: number, initialM34: number,\r\n        initialM41: number, initialM42: number, initialM43: number, initialM44: number);\r\n    public set(matrix: Matrix4);\r\n\r\n    public set(...args) {\r\n        var te = this.values,\r\n            values: any = null;\r\n\r\n        if (args.length === 1) {\r\n            let matrix: Matrix4 = args[0];\r\n\r\n            values = matrix.values;\r\n        }\r\n        else {\r\n            values = [\r\n                args[0], args[1], args[2], args[3], args[4], args[5], args[6], args[7], args[8], args[9], args[10], args[11], args[12], args[13], args[14], args[15]\r\n            ];\r\n        }\r\n\r\n        te[0] = values[0];\r\n        te[1] = values[1];\r\n        te[2] = values[2];\r\n        te[3] = values[3];\r\n        te[4] = values[4];\r\n        te[5] = values[5];\r\n        te[6] = values[6];\r\n        te[7] = values[7];\r\n        te[8] = values[8];\r\n        te[9] = values[9];\r\n        te[10] = values[10];\r\n        te[11] = values[11];\r\n        te[12] = values[12];\r\n        te[13] = values[13];\r\n        te[14] = values[14];\r\n        te[15] = values[15];\r\n\r\n        return this;\r\n    }\r\n\r\n    public setIdentity(): Matrix4 {\r\n        var e = this.values;\r\n        e[0] = 1; e[4] = 0; e[8] = 0; e[12] = 0;\r\n        e[1] = 0; e[5] = 1; e[9] = 0; e[13] = 0;\r\n        e[2] = 0; e[6] = 0; e[10] = 1; e[14] = 0;\r\n        e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Calculate the inverse matrix of specified matrix, and set to this.\r\n     * @param other The source matrix\r\n     * @return this\r\n     */\r\n    public invert(): Matrix4 {\r\n        var a00, a01, a02, a03,\r\n            a10, a11, a12, a13,\r\n            a20, a21, a22, a23,\r\n            a30, a31, a32, a33,\r\n            b00, b01, b02, b03,\r\n            b04, b05, b06, b07,\r\n            b08, b09, b10, b11,\r\n            invDet, m;\r\n\r\n        m = this.values;\r\n        a00 = m[0];\r\n        a01 = m[1];\r\n        a02 = m[2];\r\n        a03 = m[3];\r\n        a10 = m[4];\r\n        a11 = m[5];\r\n        a12 = m[6];\r\n        a13 = m[7];\r\n        a20 = m[8];\r\n        a21 = m[9];\r\n        a22 = m[10];\r\n        a23 = m[11];\r\n        a30 = m[12];\r\n        a31 = m[13];\r\n        a32 = m[14];\r\n        a33 = m[15];\r\n\r\n        b00 = a00 * a11 - a01 * a10;\r\n        b01 = a00 * a12 - a02 * a10;\r\n        b02 = a00 * a13 - a03 * a10;\r\n        b03 = a01 * a12 - a02 * a11;\r\n        b04 = a01 * a13 - a03 * a11;\r\n        b05 = a02 * a13 - a03 * a12;\r\n        b06 = a20 * a31 - a21 * a30;\r\n        b07 = a20 * a32 - a22 * a30;\r\n        b08 = a20 * a33 - a23 * a30;\r\n        b09 = a21 * a32 - a22 * a31;\r\n        b10 = a21 * a33 - a23 * a31;\r\n        b11 = a22 * a33 - a23 * a32;\r\n\r\n        invDet = 1 / (b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06);\r\n\r\n        m[0] = (a11 * b11 - a12 * b10 + a13 * b09) * invDet;\r\n        m[1] = (-a01 * b11 + a02 * b10 - a03 * b09) * invDet;\r\n        m[2] = (a31 * b05 - a32 * b04 + a33 * b03) * invDet;\r\n        m[3] = (-a21 * b05 + a22 * b04 - a23 * b03) * invDet;\r\n        m[4] = (-a10 * b11 + a12 * b08 - a13 * b07) * invDet;\r\n        m[5] = (a00 * b11 - a02 * b08 + a03 * b07) * invDet;\r\n        m[6] = (-a30 * b05 + a32 * b02 - a33 * b01) * invDet;\r\n        m[7] = (a20 * b05 - a22 * b02 + a23 * b01) * invDet;\r\n        m[8] = (a10 * b10 - a11 * b08 + a13 * b06) * invDet;\r\n        m[9] = (-a00 * b10 + a01 * b08 - a03 * b06) * invDet;\r\n        m[10] = (a30 * b04 - a31 * b02 + a33 * b00) * invDet;\r\n        m[11] = (-a20 * b04 + a21 * b02 - a23 * b00) * invDet;\r\n        m[12] = (-a10 * b09 + a11 * b07 - a12 * b06) * invDet;\r\n        m[13] = (a00 * b09 - a01 * b07 + a02 * b06) * invDet;\r\n        m[14] = (-a30 * b03 + a31 * b01 - a32 * b00) * invDet;\r\n        m[15] = (a20 * b03 - a21 * b01 + a22 * b00) * invDet;\r\n\r\n        return this;\r\n    }\r\n\r\n    public invertTo3x3(): Matrix3 {\r\n        var a11, a21, a31, a12, a22, a32, a13, a23, a33,\r\n            m, r, det, idet;\r\n        var mat3 = Matrix3.create();\r\n\r\n        m = this.values;\r\n\r\n        r = mat3.values;\r\n\r\n        a11 = m[10] * m[5] - m[6] * m[9];\r\n        a21 = -m[10] * m[1] + m[2] * m[9];\r\n        a31 = m[6] * m[1] - m[2] * m[5];\r\n        a12 = -m[10] * m[4] + m[6] * m[8];\r\n        a22 = m[10] * m[0] - m[2] * m[8];\r\n        a32 = -m[6] * m[0] + m[2] * m[4];\r\n        a13 = m[9] * m[4] - m[5] * m[8];\r\n        a23 = -m[9] * m[0] + m[1] * m[8];\r\n        a33 = m[5] * m[0] - m[1] * m[4];\r\n\r\n        det = m[0] * a11 + m[1] * a12 + m[2] * a13;\r\n        if (det === 0) { // no inverse\r\n            Log.warn(\"can't invert matrix, determinant is 0\");\r\n\r\n            return mat3;\r\n        }\r\n\r\n        idet = 1 / det;\r\n\r\n        r[0] = idet * a11;\r\n        r[1] = idet * a21;\r\n        r[2] = idet * a31;\r\n        r[3] = idet * a12;\r\n        r[4] = idet * a22;\r\n        r[5] = idet * a32;\r\n        r[6] = idet * a13;\r\n        r[7] = idet * a23;\r\n        r[8] = idet * a33;\r\n\r\n        return mat3;\r\n    }\r\n\r\n    /**\r\n     * Transpose the matrix.\r\n     * @return this\r\n     */\r\n    public transpose(): Matrix4 {\r\n        var te = this.values;\r\n        var tmp;\r\n\r\n        tmp = te[1]; te[1] = te[4]; te[4] = tmp;\r\n        tmp = te[2]; te[2] = te[8]; te[8] = tmp;\r\n        tmp = te[6]; te[6] = te[9]; te[9] = tmp;\r\n\r\n        tmp = te[3]; te[3] = te[12]; te[12] = tmp;\r\n        tmp = te[7]; te[7] = te[13]; te[13] = tmp;\r\n        tmp = te[11]; te[11] = te[14]; te[14] = tmp;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Set the matrix for translation.\r\n     * @param x The X value of a translation.\r\n     * @param y The Y value of a translation.\r\n     * @param z The Z value of a translation.\r\n     * @return this\r\n     */\r\n    public setTranslate(x, y, z): Matrix4 {\r\n        var e = this.values;\r\n        e[0] = 1; e[4] = 0; e[8] = 0; e[12] = x;\r\n        e[1] = 0; e[5] = 1; e[9] = 0; e[13] = y;\r\n        e[2] = 0; e[6] = 0; e[10] = 1; e[14] = z;\r\n        e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiply the matrix for translation from the right.\r\n     * @param x The X value of a translation.\r\n     * @param y The Y value of a translation.\r\n     * @param z The Z value of a translation.\r\n     * @return this\r\n     */\r\n    public translate(x, y, z): Matrix4 {\r\n        this.applyMatrix(Matrix4.create().setTranslate(x, y, z));\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Set the matrix for rotation.\r\n     * The vector of rotation axis may not be normalized.\r\n     * @param angle The angle of rotation (degrees)\r\n     * @param x The X coordinate of vector of rotation axis.\r\n     * @param y The Y coordinate of vector of rotation axis.\r\n     * @param z The Z coordinate of vector of rotation axis.\r\n     * @return this\r\n     */\r\n    @requireCheck(function(angle: number, x: number, y: number, z: number) {\r\n        it(\"axis's component shouldn't all be zero\", () => {\r\n            expect(x === 0 && y === 0 && z === 0).false;\r\n        });\r\n    })\r\n    public setRotate(angle: number, x: number, y: number, z: number): Matrix4 {\r\n        var e, s, c, len, rlen, nc, xy, yz, zx, xs, ys, zs;\r\n\r\n        var angle = Math.PI * angle / 180;\r\n        e = this.values;\r\n\r\n        s = Math.sin(angle);\r\n        c = Math.cos(angle);\r\n\r\n        if (0 !== x && 0 === y && 0 === z) {\r\n            // Rotation around X axis\r\n            if (x < 0) {\r\n                s = -s;\r\n            }\r\n            e[0] = 1; e[4] = 0; e[8] = 0; e[12] = 0;\r\n            e[1] = 0; e[5] = c; e[9] = -s; e[13] = 0;\r\n            e[2] = 0; e[6] = s; e[10] = c; e[14] = 0;\r\n            e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        } else if (0 === x && 0 !== y && 0 === z) {\r\n            // Rotation around Y axis\r\n            if (y < 0) {\r\n                s = -s;\r\n            }\r\n            e[0] = c; e[4] = 0; e[8] = s; e[12] = 0;\r\n            e[1] = 0; e[5] = 1; e[9] = 0; e[13] = 0;\r\n            e[2] = -s; e[6] = 0; e[10] = c; e[14] = 0;\r\n            e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        } else if (0 === x && 0 === y && 0 !== z) {\r\n            // Rotation around Z axis\r\n            if (z < 0) {\r\n                s = -s;\r\n            }\r\n            e[0] = c; e[4] = -s; e[8] = 0; e[12] = 0;\r\n            e[1] = s; e[5] = c; e[9] = 0; e[13] = 0;\r\n            e[2] = 0; e[6] = 0; e[10] = 1; e[14] = 0;\r\n            e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        } else {\r\n            // Rotation around another axis\r\n            len = Math.sqrt(x * x + y * y + z * z);\r\n            if (len !== 1) {\r\n                //转换为单位向量\r\n                rlen = 1 / len;\r\n                x *= rlen;\r\n                y *= rlen;\r\n                z *= rlen;\r\n            }\r\n\r\n            nc = 1 - c;\r\n            xy = x * y;\r\n            yz = y * z;\r\n            zx = z * x;\r\n            xs = x * s;\r\n            ys = y * s;\r\n            zs = z * s;\r\n\r\n            e[0] = x * x * nc + c;\r\n            e[1] = xy * nc + zs;\r\n            e[2] = zx * nc - ys;\r\n            e[3] = 0;\r\n\r\n            e[4] = xy * nc - zs;\r\n            e[5] = y * y * nc + c;\r\n            e[6] = yz * nc + xs;\r\n            e[7] = 0;\r\n\r\n            e[8] = zx * nc + ys;\r\n            e[9] = yz * nc - xs;\r\n            e[10] = z * z * nc + c;\r\n            e[11] = 0;\r\n\r\n            e[12] = 0;\r\n            e[13] = 0;\r\n            e[14] = 0;\r\n            e[15] = 1;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiply the matrix for rotation from the right.\r\n     * The vector of rotation axis may not be normalized.\r\n     * @param angle The angle of rotation (degrees)\r\n     * @param x The X coordinate of vector of rotation axis.\r\n     * @param y The Y coordinate of vector of rotation axis.\r\n     * @param z The Z coordinate of vector of rotation axis.\r\n     * @return this\r\n     */\r\n    public rotate(angle, vector3: Vector3): Matrix4;\r\n    public rotate(angle, x, y, z): Matrix4;\r\n\r\n    public rotate(...args): Matrix4 {\r\n        var angle = args[0];\r\n\r\n        if (args.length === 2) {\r\n            let vector3 = args[1];\r\n\r\n            this.applyMatrix(Matrix4.create().setRotate(angle, vector3.values[0], vector3.values[1], vector3.values[2]));\r\n        }\r\n        else if (args.length === 4) {\r\n            let x = args[1],\r\n                y = args[2],\r\n                z = args[3];\r\n\r\n            this.applyMatrix(Matrix4.create().setRotate(angle, x, y, z));\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Set the matrix for scaling.\r\n     * @param x The scale factor along the X axis\r\n     * @param y The scale factor along the Y axis\r\n     * @param z The scale factor along the Z axis\r\n     * @return this\r\n     */\r\n    public setScale(x, y, z): Matrix4 {\r\n        var e = this.values;\r\n        e[0] = x; e[4] = 0; e[8] = 0; e[12] = 0;\r\n        e[1] = 0; e[5] = y; e[9] = 0; e[13] = 0;\r\n        e[2] = 0; e[6] = 0; e[10] = z; e[14] = 0;\r\n        e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiply the matrix for scaling from the right.\r\n     * @param x The scale factor along the X axis\r\n     * @param y The scale factor along the Y axis\r\n     * @param z The scale factor along the Z axis\r\n     * @return this\r\n     */\r\n    public scale(x, y, z): Matrix4 {\r\n        this.applyMatrix(Matrix4.create().setScale(x, y, z));\r\n\r\n        return this;\r\n    }\r\n\r\n    public setLookAt(eye: Vector3, center: Vector3, up: Vector3): Matrix4;\r\n    public setLookAt(eyeX: number, eyeY: number, eyeZ: number, centerX: number, centerY: number, centerZ: number, upX: number, upY: number, upZ: number): Matrix4;\r\n\r\n    /**\r\n     * @function\r\n     * @name setLookAt\r\n     * @description Sets the specified matrix to a viewing matrix derived from an eye point, a target point\r\n     * and an up vector. The matrix maps the target point to the negative z-axis and the eye point to the\r\n     * origin, so that when you use a typical projection matrix, the center of the scene maps to the center\r\n     * of the viewport. Similarly, the direction described by the up vector projected onto the viewing plane\r\n     * is mapped to the positive y-axis so that it points upward in the viewport. The up vector must not be\r\n     * parallel to the line of sight from the eye to the reference point.\r\n     * @param {Vec3} position 3-d vector holding view position.\r\n     * @param {Vec3} target 3-d vector holding reference point.\r\n     * @param {Vec3} up 3-d vector holding the up direction.\r\n     * @returns {Mat4} Self for chaining.\r\n     */\r\n    public setLookAt(...args) {\r\n        var x, y, z,\r\n            eye, center, up;\r\n\r\n        if (args.length === 3) {\r\n            eye = args[0];\r\n            center = args[1];\r\n            up = args[2]\r\n        }\r\n        else if (args.length === 9) {\r\n            eye = Vector3.create(args[0], args[1], args[2]);\r\n            center = Vector3.create(args[3], args[4], args[5]);\r\n            up = Vector3.create(args[6], args[7], args[8]);\r\n        }\r\n        x = Vector3.create();\r\n\r\n        z = eye.clone().sub(center).normalize();\r\n\r\n        y = up.clone().normalize();\r\n        x.cross(y, z).normalize();\r\n        y.cross(z, x);\r\n\r\n        var r = this.values;\r\n\r\n        r[0] = x.x;\r\n        r[1] = x.y;\r\n        r[2] = x.z;\r\n        r[3] = 0;\r\n        r[4] = y.x;\r\n        r[5] = y.y;\r\n        r[6] = y.z;\r\n        r[7] = 0;\r\n        r[8] = z.x;\r\n        r[9] = z.y;\r\n        r[10] = z.z;\r\n        r[11] = 0;\r\n        r[12] = eye.x;\r\n        r[13] = eye.y;\r\n        r[14] = eye.z;\r\n        r[15] = 1;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiply the viewing matrix from the right.\r\n     * @param eyeX, eyeY, eyeZ The position of the eye point.\r\n     * @param centerX, centerY, centerZ The position of the reference point.\r\n     * @param upX, upY, upZ The direction of the up vector.\r\n     * @return this\r\n     */\r\n    public lookAt(eye: Vector3, center: Vector3, up: Vector3): Matrix4;\r\n    public lookAt(eyeX: number, eyeY: number, eyeZ: number, centerX: number, centerY: number, centerZ: number, upX: number, upY: number, upZ: number): Matrix4;\r\n\r\n    public lookAt(...args): Matrix4 {\r\n        var matrix = Matrix4.create();\r\n\r\n        this.applyMatrix(matrix.setLookAt.apply(matrix, args));\r\n\r\n        return this;\r\n    }\r\n\r\n    @requireCheck(function(left: number, right: number, bottom: number, top: number, near: number, far: number) {\r\n        assert(left !== right && bottom !== top && near !== far, Log.info.FUNC_MUST_NOT_BE(\"frustum\", \"null\"));\r\n    })\r\n    public setOrtho(left: number, right: number, bottom: number, top: number, near: number, far: number): Matrix4 {\r\n        var e = this.values,\r\n            rw,\r\n            rh,\r\n            rd;\r\n\r\n        rw = 1 / (right - left);\r\n        rh = 1 / (top - bottom);\r\n        rd = 1 / (far - near);\r\n\r\n        e[0] = 2 * rw;\r\n        e[1] = 0;\r\n        e[2] = 0;\r\n        e[3] = 0;\r\n\r\n        e[4] = 0;\r\n        e[5] = 2 * rh;\r\n        e[6] = 0;\r\n        e[7] = 0;\r\n\r\n        e[8] = 0;\r\n        e[9] = 0;\r\n        e[10] = -2 * rd;\r\n        e[11] = 0;\r\n\r\n        e[12] = -(right + left) * rw;\r\n        e[13] = -(top + bottom) * rh;\r\n        e[14] = -(far + near) * rd;\r\n        e[15] = 1;\r\n\r\n        return this;\r\n    }\r\n\r\n    public ortho(left: number, right: number, bottom: number, top: number, near: number, far: number): Matrix4 {\r\n        this.applyMatrix(Matrix4.create().setOrtho(left, right, bottom, top, near, far));\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Set the perspective projection matrix by fovy and aspect.\r\n     * @param fovy The angle between the upper and lower sides of the frustum.\r\n     * @param aspect The aspect ratio of the frustum. (width/height)\r\n     * @param near The distances to the nearer depth clipping plane. This value must be plus value.\r\n     * @param far The distances to the farther depth clipping plane. This value must be plus value.\r\n     * @return this\r\n     */\r\n    @requireCheck(function(fovy: number, aspect: number, near: number, far: number) {\r\n        assert(near !== far && aspect !== 0, Log.info.FUNC_MUST_NOT_BE(\"frustum\", \"null\"));\r\n        assert(near > 0, Log.info.FUNC_MUST(\"near\", \"> 0\"));\r\n        assert(far > 0, Log.info.FUNC_MUST(\"far\", \"> 0\"));\r\n\r\n    })\r\n    public setPerspective(fovy: number, aspect: number, near: number, far: number): Matrix4 {\r\n        var e = null,\r\n            rd = null,\r\n            s = null,\r\n            ct = null,\r\n            fovy = Math.PI * fovy / 180 / 2;\r\n\r\n        s = Math.sin(fovy);\r\n        Log.error(s === 0, Log.info.FUNC_MUST_NOT_BE(\"frustum\", \"null\"));\r\n\r\n        rd = 1 / (far - near);\r\n        ct = Math.cos(fovy) / s;\r\n\r\n        e = this.values;\r\n\r\n        e[0] = ct / aspect;\r\n        e[1] = 0;\r\n        e[2] = 0;\r\n        e[3] = 0;\r\n\r\n        e[4] = 0;\r\n        e[5] = ct;\r\n        e[6] = 0;\r\n        e[7] = 0;\r\n\r\n        e[8] = 0;\r\n        e[9] = 0;\r\n        e[10] = -(far + near) * rd;\r\n        e[11] = -1;\r\n\r\n        e[12] = 0;\r\n        e[13] = 0;\r\n        e[14] = -2 * near * far * rd;\r\n        e[15] = 0;\r\n\r\n        return this;\r\n    }\r\n\r\n    public perspective(fovy: number, aspect: number, near: number, far: number): Matrix4 {\r\n        this.applyMatrix(Matrix4.create().setPerspective(fovy, aspect, near, far));\r\n\r\n        return this;\r\n    }\r\n\r\n    public applyMatrix(other: Matrix4, notChangeSelf: boolean = false): Matrix4 {\r\n        var a = this,\r\n            //todo optimize:use temp matrix4\r\n            b = other.clone();\r\n\r\n        /*!\r\n         b*a，而不是a*b\r\n         这是因为在webgl中，向量是右乘的，\r\n         此处希望坐标向量先进行this.values的变换，然后进行other.values的变换，因此要b*a，从而在右乘向量时为b*a*vec\r\n         */\r\n\r\n        if (notChangeSelf) {\r\n            return b.multiply(a);\r\n        }\r\n\r\n        this.values = b.multiply(a).values;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiply(matrix: Matrix4): Matrix4;\r\n    public multiply(matrix1: Matrix4, matrix2: Matrix4): Matrix4;\r\n\r\n    public multiply(...args): Matrix4 {\r\n        var mat1 = null,\r\n            mat2 = null,\r\n            result = null;\r\n\r\n        result = this.values;\r\n\r\n        if (args.length === 1) {\r\n            mat1 = this.values;\r\n            mat2 = args[0].values;\r\n        }\r\n        else if (args.length === 2) {\r\n            mat1 = args[0].values;\r\n            mat2 = args[1].values;\r\n\r\n        }\r\n\r\n        var a = mat1[0], b = mat1[1], c = mat1[2], d = mat1[3],\r\n            e = mat1[4], f = mat1[5], g = mat1[6], h = mat1[7],\r\n            i = mat1[8], j = mat1[9], k = mat1[10], l = mat1[11],\r\n            m = mat1[12], n = mat1[13], o = mat1[14], p = mat1[15],\r\n            A = mat2[0], B = mat2[1], C = mat2[2], D = mat2[3],\r\n            E = mat2[4], F = mat2[5], G = mat2[6], H = mat2[7],\r\n            I = mat2[8], J = mat2[9], K = mat2[10], L = mat2[11],\r\n            M = mat2[12], N = mat2[13], O = mat2[14], P = mat2[15];\r\n\r\n        result[0] = A * a + B * e + C * i + D * m;\r\n        result[1] = A * b + B * f + C * j + D * n;\r\n        result[2] = A * c + B * g + C * k + D * o;\r\n        result[3] = A * d + B * h + C * l + D * p;\r\n        result[4] = E * a + F * e + G * i + H * m;\r\n        result[5] = E * b + F * f + G * j + H * n;\r\n        result[6] = E * c + F * g + G * k + H * o;\r\n        result[7] = E * d + F * h + G * l + H * p;\r\n        result[8] = I * a + J * e + K * i + L * m;\r\n        result[9] = I * b + J * f + K * j + L * n;\r\n        result[10] = I * c + J * g + K * k + L * o;\r\n        result[11] = I * d + J * h + K * l + L * p;\r\n        result[12] = M * a + N * e + O * i + P * m;\r\n        result[13] = M * b + N * f + O * j + P * n;\r\n        result[14] = M * c + N * g + O * k + P * o;\r\n        result[15] = M * d + N * h + O * l + P * p;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiplyVector4(vector: Vector4): Vector4 {\r\n        var mat1 = this.values,\r\n            vec4 = vector.values;\r\n        var result = [];\r\n\r\n        result[0] = vec4[0] * mat1[0] + vec4[1] * mat1[4] + vec4[2] * mat1[8] + vec4[3] * mat1[12];\r\n        result[1] = vec4[0] * mat1[1] + vec4[1] * mat1[5] + vec4[2] * mat1[9] + vec4[3] * mat1[13];\r\n        result[2] = vec4[0] * mat1[2] + vec4[1] * mat1[6] + vec4[2] * mat1[10] + vec4[3] * mat1[14];\r\n        result[3] = vec4[0] * mat1[3] + vec4[1] * mat1[7] + vec4[2] * mat1[11] + vec4[3] * mat1[15];\r\n\r\n        return Vector4.create(result[0], result[1], result[2], result[3]);\r\n    }\r\n\r\n    public multiplyVector3(vector: Vector3): Vector3 {\r\n        var mat1 = this.values,\r\n            vec3 = vector.values;\r\n        var result = [];\r\n\r\n        result[0] = vec3[0] * mat1[0] + vec3[1] * mat1[4] + vec3[2] * mat1[8];\r\n        result[1] = vec3[0] * mat1[1] + vec3[1] * mat1[5] + vec3[2] * mat1[9];\r\n        result[2] = vec3[0] * mat1[2] + vec3[1] * mat1[6] + vec3[2] * mat1[10];\r\n\r\n        return Vector3.create(result[0], result[1], result[2]);\r\n    }\r\n\r\n    public multiplyPoint(vector: Vector3): Vector3 {\r\n        var mat1 = this.values,\r\n            vec3 = vector.values;\r\n        var result = [];\r\n\r\n        result[0] = vec3[0] * mat1[0] + vec3[1] * mat1[4] + vec3[2] * mat1[8] + mat1[12];\r\n        result[1] = vec3[0] * mat1[1] + vec3[1] * mat1[5] + vec3[2] * mat1[9] + mat1[13];\r\n        result[2] = vec3[0] * mat1[2] + vec3[1] * mat1[6] + vec3[2] * mat1[10] + mat1[14];\r\n\r\n        return Vector3.create(result[0], result[1], result[2]);\r\n    }\r\n\r\n    public clone(): Matrix4 {\r\n        var result = Matrix4.create(),\r\n            i = 0,\r\n            len = this.values.length;\r\n\r\n        for (i = 0; i < len; i++) {\r\n            result.values[i] = this.values[i];\r\n        }\r\n\r\n\r\n        return result;\r\n    }\r\n\r\n    public cloneToArray(array: Float32Array, offset: number = 0): Matrix4 {\r\n        var values = this.values;\r\n\r\n        for (let index = 0; index < 16; index++) {\r\n            array[offset + index] = values[index];\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public getX() {\r\n        return Vector3.create(this.values[0], this.values[1], this.values[2]);\r\n    }\r\n\r\n    public getY() {\r\n        return Vector3.create(this.values[4], this.values[5], this.values[6]);\r\n    }\r\n\r\n    public getZ() {\r\n        return Vector3.create(this.values[8], this.values[9], this.values[10]);\r\n    }\r\n\r\n    public getTranslation() {\r\n        return Vector3.create(this.values[12], this.values[13], this.values[14]);\r\n    }\r\n\r\n    public getScale() {\r\n        return Vector3.create(this.getX().length(), this.getY().length(), this.getZ().length());\r\n    }\r\n\r\n    public getRotation() {\r\n        //return Quaternion.create().setFromEulerAngles(this.getEulerAngles());\r\n        return Quaternion.create().setFromMatrix(this);\r\n    }\r\n\r\n    public getEulerAngles() {\r\n        var x, y, z, sx, sy, sz, m, halfPi;\r\n        var scale = this.getScale();\r\n\r\n        sx = scale.x;\r\n        sy = scale.y;\r\n        sz = scale.z;\r\n\r\n        m = this.values;\r\n\r\n        y = Math.asin(-m[2] / sx);\r\n        halfPi = Math.PI * 0.5;\r\n\r\n        if (y < halfPi) {\r\n            if (y > -halfPi) {\r\n                x = Math.atan2(m[6] / sy, m[10] / sz);\r\n                z = Math.atan2(m[1] / sx, m[0] / sx);\r\n            } else {\r\n                // Not a unique solution\r\n                z = 0;\r\n                x = -Math.atan2(m[4] / sy, m[5] / sy);\r\n            }\r\n        } else {\r\n            // Not a unique solution\r\n            z = 0;\r\n            x = Math.atan2(m[4] / sy, m[5] / sy);\r\n        }\r\n\r\n        return Vector3.create(x, y, z).scale(RAD_TO_DEG);\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name setTRS\r\n     * @description Sets the specified matrix to the concatenation of a translation, a\r\n     * quaternion rotation and a scale.\r\n     * @param {Vec3} t A 3-d vector translation.\r\n     * @param {Quat} r A quaternion rotation.\r\n     * @param {Vec3} s A 3-d vector scale.\r\n     * @returns {Mat4} Self for chaining.\r\n     * @example\r\n     * var t = new Vec3(10, 20, 30);\r\n     * var r = new Quat();\r\n     * var s = new Vec3(2, 2, 2);\r\n     *\r\n     * var m = new Mat4();\r\n     * m.setTRS(t, r, s);\r\n     */\r\n    public setTRS(t: Vector3, r: Quaternion, s: Vector3) {\r\n        var tx, ty, tz, qx, qy, qz, qw, sx, sy, sz,\r\n            x2, y2, z2, xx, xy, xz, yy, yz, zz, wx, wy, wz, m;\r\n\r\n        tx = t.x;\r\n        ty = t.y;\r\n        tz = t.z;\r\n\r\n        qx = r.x;\r\n        qy = r.y;\r\n        qz = r.z;\r\n        qw = r.w;\r\n\r\n        sx = s.x;\r\n        sy = s.y;\r\n        sz = s.z;\r\n\r\n        x2 = qx + qx;\r\n        y2 = qy + qy;\r\n        z2 = qz + qz;\r\n        xx = qx * x2;\r\n        xy = qx * y2;\r\n        xz = qx * z2;\r\n        yy = qy * y2;\r\n        yz = qy * z2;\r\n        zz = qz * z2;\r\n        wx = qw * x2;\r\n        wy = qw * y2;\r\n        wz = qw * z2;\r\n\r\n        m = this.values;\r\n\r\n        m[0] = (1 - (yy + zz)) * sx;\r\n        m[1] = (xy + wz) * sx;\r\n        m[2] = (xz - wy) * sx;\r\n        m[3] = 0;\r\n\r\n        m[4] = (xy - wz) * sy;\r\n        m[5] = (1 - (xx + zz)) * sy;\r\n        m[6] = (yz + wx) * sy;\r\n        m[7] = 0;\r\n\r\n        m[8] = (xz + wy) * sz;\r\n        m[9] = (yz - wx) * sz;\r\n        m[10] = (1 - (xx + yy)) * sz;\r\n        m[11] = 0;\r\n\r\n        m[12] = tx;\r\n        m[13] = ty;\r\n        m[14] = tz;\r\n        m[15] = 1;\r\n\r\n        return this;\r\n    }\r\n}","export function virtual(target, name, descriptor) {\r\n    return descriptor;\r\n}","import { requireGetter, assert } from \"../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { cloneAttributeAsCloneable, cloneAttributeAsBasicType, CloneUtils } from \"../../definition/typescript/decorator/clone\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { virtual } from \"../../definition/typescript/decorator/virtual\";\r\n\r\n//todo add backgroundColor\r\n//todo add Frustum?\r\nexport abstract class Camera {\r\n    @requireGetter(function() {\r\n        assert(this.entityObject, Log.info.FUNC_MUST_DEFINE(\"entityObject\"));\r\n    })\r\n    get cameraToWorldMatrix() {\r\n        return this.entityObject.transform.localToWorldMatrix;\r\n    }\r\n\r\n    @cloneAttributeAsCloneable()\r\n    private _worldToCameraMatrix = null;\r\n    get worldToCameraMatrix() {\r\n        if (this._worldToCameraMatrix) {\r\n            return this._worldToCameraMatrix;\r\n        }\r\n\r\n        return this.cameraToWorldMatrix.clone().invert();\r\n    }\r\n    set worldToCameraMatrix(matrix: Matrix4) {\r\n        this._worldToCameraMatrix = matrix;\r\n    }\r\n\r\n    private _near: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    get near() {\r\n        return this._near;\r\n    }\r\n    set near(near: number) {\r\n        this._near = near;\r\n        this.pMatrixDirty = true;\r\n    }\r\n\r\n    private _far: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    get far() {\r\n        return this._far;\r\n    }\r\n    set far(far: number) {\r\n        this._far = far;\r\n        this.pMatrixDirty = true;\r\n    }\r\n\r\n    private _pMatrix: Matrix4 = Matrix4.create();\r\n    @cloneAttributeAsCloneable()\r\n    get pMatrix() {\r\n        return this._pMatrix;\r\n    }\r\n    set pMatrix(pMatrix: Matrix4) {\r\n        this._isUserSpecifyThePMatrix = true;\r\n\r\n        this._pMatrix = pMatrix;\r\n    }\r\n\r\n    public entityObject: GameObject = null;\r\n\r\n    protected pMatrixDirty: boolean = false;\r\n\r\n    @cloneAttributeAsBasicType()\r\n    private _isUserSpecifyThePMatrix: boolean = false;\r\n\r\n    // /**\r\n    //  * @name convertScreenToWorld\r\n    //  * @description Convert a point from 2D canvas pixel space to 3D world space.\r\n    //  * @param {Number} screenX x coordinate on canvas element.\r\n    //  * @param {Number} screenY y coordinate on canvas element.\r\n    //  * @param {Number} distanceFromCamera The distance from the camera in world space to create the new point.\r\n    //  * @returns {Vector3} The world space coordinate.\r\n    //  */\r\n    // public abstract convertScreenToWorld(screenX:number, screenY:number, distanceFromCamera:number):Vector3;\r\n    // public abstract convertWorldToScreen(worldX:number, worldY:number, worldZ:number, screenWidth:number, screenHeight:number):Vector2;\r\n\r\n    @virtual\r\n    public init() {\r\n        if (this.pMatrixDirty) {\r\n            this._updateProjectionMatrix();\r\n            this.pMatrixDirty = false;\r\n        }\r\n    }\r\n\r\n    @virtual\r\n    public dispose() {\r\n    }\r\n\r\n    public clone() {\r\n        return CloneUtils.clone(this);\r\n    }\r\n\r\n    public update(elapsed: number) {\r\n        if (this.pMatrixDirty) {\r\n            this._updateProjectionMatrix();\r\n\r\n            this.pMatrixDirty = false;\r\n        }\r\n    }\r\n\r\n    protected abstract updateProjectionMatrix();\r\n\r\n    protected getInvViewProjMat() {\r\n        return this.pMatrix.clone().multiply(this.worldToCameraMatrix).invert();\r\n    }\r\n\r\n    private _updateProjectionMatrix() {\r\n        if (this._isUserSpecifyThePMatrix) {\r\n            return;\r\n        }\r\n\r\n        this.updateProjectionMatrix();\r\n    }\r\n}","export abstract class Entity {\r\n    public static UID: number = 1;\r\n\r\n    private _uid: string = null;\r\n    get uid() {\r\n        return this._uid;\r\n    }\r\n    set uid(uid: string) {\r\n        this._uid = uid;\r\n    }\r\n\r\n    constructor(uidPre: string) {\r\n        this._uid = uidPre + String(Entity.UID++);\r\n    }\r\n}","import { JudgeUtils as JudgeUtils$ } from \"wonder-commonlib/dist/es2015/utils/JudgeUtils\";\r\nimport { Entity } from \"./core/Entity\";\r\nimport { IObserver } from \"./observer/IObserver\";\r\n\r\nexport class JudgeUtils extends JudgeUtils$ {\r\n    public static isPromise(obj) {\r\n        return !!obj\r\n            && !super.isFunction(obj.subscribe)\r\n            && super.isFunction(obj.then);\r\n    }\r\n\r\n    public static isEqual(ob1: Entity, ob2: Entity) {\r\n        return ob1.uid === ob2.uid;\r\n    }\r\n\r\n    public static isIObserver(i: IObserver) {\r\n        return i.next && i.error && i.completed;\r\n    }\r\n}","import { IObserver } from \"./IObserver\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\n\r\nexport class SubjectObserver implements IObserver {\r\n    public observers: Collection<IObserver> = Collection.create<IObserver>();\r\n\r\n    private _disposable: IDisposable = null;\r\n\r\n    public isEmpty() {\r\n        return this.observers.getCount() === 0;\r\n    }\r\n\r\n    public next(value: any) {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.next(value);\r\n        });\r\n    }\r\n\r\n    public error(error: any) {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.error(error);\r\n        });\r\n    }\r\n\r\n    public completed() {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.completed();\r\n        });\r\n    }\r\n\r\n    public addChild(observer: Observer) {\r\n        this.observers.addChild(observer);\r\n\r\n        observer.setDisposable(this._disposable);\r\n    }\r\n\r\n    public removeChild(observer: Observer) {\r\n        this.observers.removeChild((ob: Observer) => {\r\n            return JudgeUtils.isEqual(ob, observer);\r\n        });\r\n    }\r\n\r\n    public dispose() {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.dispose();\r\n        });\r\n\r\n        this.observers.removeAllChildren();\r\n    }\r\n\r\n    public setDisposable(disposable: IDisposable) {\r\n        this.observers.forEach((observer: Observer) => {\r\n            observer.setDisposable(disposable);\r\n        });\r\n\r\n        this._disposable = disposable;\r\n    }\r\n}\r\n","import { Entity } from \"./Entity\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\n\r\nexport abstract class Observer extends Entity implements IObserver {\r\n    private _isDisposed: boolean = null;\r\n    get isDisposed() {\r\n        return this._isDisposed;\r\n    }\r\n    set isDisposed(isDisposed: boolean) {\r\n        this._isDisposed = isDisposed;\r\n    }\r\n\r\n    protected onUserNext: Function = null;\r\n    protected onUserError: Function = null;\r\n    protected onUserCompleted: Function = null;\r\n\r\n    private _isStop: boolean = false;\r\n    //private _disposeHandler:wdCb.Collection<Function> = wdCb.Collection.create<Function>();\r\n    private _disposable: IDisposable = null;\r\n\r\n\r\n    constructor(observer: IObserver);\r\n    constructor(onNext: Function, onError: Function, onCompleted: Function);\r\n\r\n    constructor(...args) {\r\n        super(\"Observer\");\r\n\r\n        if (args.length === 1) {\r\n            let observer: IObserver = args[0];\r\n\r\n            this.onUserNext = function(v) {\r\n                observer.next(v);\r\n            };\r\n            this.onUserError = function(e) {\r\n                observer.error(e);\r\n            };\r\n            this.onUserCompleted = function() {\r\n                observer.completed();\r\n            };\r\n        }\r\n        else {\r\n            let onNext = args[0],\r\n                onError = args[1],\r\n                onCompleted = args[2];\r\n\r\n            this.onUserNext = onNext || function(v) { };\r\n            this.onUserError = onError || function(e) {\r\n                throw e;\r\n            };\r\n            this.onUserCompleted = onCompleted || function() { };\r\n        }\r\n    }\r\n\r\n    public next(value: any) {\r\n        if (!this._isStop) {\r\n            return this.onNext(value);\r\n        }\r\n    }\r\n\r\n    public error(error: any) {\r\n        if (!this._isStop) {\r\n            this._isStop = true;\r\n            this.onError(error);\r\n        }\r\n    }\r\n\r\n    public completed() {\r\n        if (!this._isStop) {\r\n            this._isStop = true;\r\n            this.onCompleted();\r\n        }\r\n    }\r\n\r\n    public dispose() {\r\n        this._isStop = true;\r\n        this._isDisposed = true;\r\n\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n        }\r\n\r\n        //this._disposeHandler.forEach((handler) => {\r\n        //    handler();\r\n        //});\r\n    }\r\n\r\n    //public fail(e) {\r\n    //    if (!this._isStop) {\r\n    //        this._isStop = true;\r\n    //        this.error(e);\r\n    //        return true;\r\n    //    }\r\n    //\r\n    //    return false;\r\n    //}\r\n\r\n    public setDisposable(disposable: IDisposable) {\r\n        this._disposable = disposable;\r\n    }\r\n\r\n    protected abstract onNext(value: any);\r\n\r\n    protected abstract onError(error: any);\r\n\r\n    protected abstract onCompleted();\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Main } from \"../../../core/Main\";\r\n\r\nexport function assert(cond: boolean, message: string = \"contract error\") {\r\n    Log.error(!cond, message);\r\n}\r\n\r\nexport function requireCheck(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(...args) {\r\n            if (Main.isTest) {\r\n                InFunc.apply(this, args);\r\n            }\r\n\r\n            return value.apply(this, args);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensure(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(...args) {\r\n            var result = value.apply(this, args),\r\n                params = [result].concat(args);\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.apply(this, params);\r\n            }\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireGetter(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var getter = descriptor.get;\r\n\r\n        descriptor.get = function() {\r\n            if (Main.isTest) {\r\n                InFunc.call(this);\r\n            }\r\n\r\n            return getter.call(this);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireSetter(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var setter = descriptor.set;\r\n\r\n        descriptor.set = function(val) {\r\n            if (Main.isTest) {\r\n                InFunc.call(this, val);\r\n            }\r\n\r\n            setter.call(this, val);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureGetter(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var getter = descriptor.get;\r\n\r\n        descriptor.get = function() {\r\n            var result = getter.call(this);\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.call(this, result);\r\n            }\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureSetter(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var setter = descriptor.set;\r\n\r\n        descriptor.set = function(val) {\r\n            var result = setter.call(this, val),\r\n                params = [result, val];\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.apply(this, params);\r\n            }\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function invariant(func) {\r\n    return function(target) {\r\n        if (Main.isTest) {\r\n            func(target);\r\n        }\r\n    }\r\n}","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { requireCheck } from \"../definition/typescript/decorator/contract\";\r\nimport { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\n\r\nexport class AutoDetachObserver extends Observer {\r\n    public static create(observer: IObserver);\r\n    public static create(onNext: Function, onError: Function, onCompleted: Function);\r\n\r\n    public static create(...args) {\r\n        if (args.length === 1) {\r\n            return new this(args[0]);\r\n        }\r\n        else {\r\n            return new this(args[0], args[1], args[2]);\r\n        }\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        if (this.isDisposed) {\r\n            Log.warn(\"only can dispose once\");\r\n        }\r\n    })\r\n    public dispose() {\r\n        if (this.isDisposed) {\r\n            return;\r\n        }\r\n\r\n        super.dispose();\r\n    }\r\n\r\n    protected onNext(value: any) {\r\n        try {\r\n            this.onUserNext(value);\r\n        }\r\n        catch (e) {\r\n            this.onError(e);\r\n        }\r\n    }\r\n\r\n    protected onError(error: any) {\r\n        try {\r\n            this.onUserError(error);\r\n        }\r\n        catch (e) {\r\n            throw e;\r\n        }\r\n        finally {\r\n            this.dispose();\r\n        }\r\n    }\r\n\r\n    protected onCompleted() {\r\n        try {\r\n            this.onUserCompleted();\r\n            this.dispose();\r\n        }\r\n        catch (e) {\r\n            throw e;\r\n        }\r\n    }\r\n}","import { IDisposable } from \"./IDisposable\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { GeneratorSubject } from \"../subject/GeneratorSubject\";\r\nimport { Observer } from \"../core/Observer\";\r\n\r\nexport class InnerSubscription implements IDisposable {\r\n    public static create(subject: Subject | GeneratorSubject, observer: Observer) {\r\n        var obj = new this(subject, observer);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _subject: Subject | GeneratorSubject = null;\r\n    private _observer: Observer = null;\r\n\r\n    constructor(subject: Subject | GeneratorSubject, observer: Observer) {\r\n        this._subject = subject;\r\n        this._observer = observer;\r\n    }\r\n\r\n    public dispose() {\r\n        this._subject.remove(this._observer);\r\n\r\n        this._observer.dispose();\r\n    }\r\n}","import { IObserver } from \"../observer/IObserver\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { SubjectObserver } from \"../observer/SubjectObserver\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\nimport { InnerSubscription } from \"../Disposable/InnerSubscription\";\r\n\r\nexport class Subject implements IObserver {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    get source() {\r\n        return this._source;\r\n    }\r\n    set source(source: Stream) {\r\n        this._source = source;\r\n    }\r\n\r\n    private _observer: any = new SubjectObserver();\r\n\r\n    public subscribe(arg1?: Function | Observer, onError?: Function, onCompleted?: Function): IDisposable {\r\n        var observer: Observer = arg1 instanceof Observer\r\n            ? <AutoDetachObserver>arg1\r\n            : AutoDetachObserver.create(<Function>arg1, onError, onCompleted);\r\n\r\n        //this._source && observer.setDisposeHandler(this._source.disposeHandler);\r\n\r\n        this._observer.addChild(observer);\r\n\r\n        return InnerSubscription.create(this, observer);\r\n    }\r\n\r\n    public next(value: any) {\r\n        this._observer.next(value);\r\n    }\r\n\r\n    public error(error: any) {\r\n        this._observer.error(error);\r\n    }\r\n\r\n    public completed() {\r\n        this._observer.completed();\r\n    }\r\n\r\n    public start() {\r\n        if (!this._source) {\r\n            return;\r\n        }\r\n\r\n        this._observer.setDisposable(this._source.buildStream(this));\r\n    }\r\n\r\n    public remove(observer: Observer) {\r\n        this._observer.removeChild(observer);\r\n    }\r\n\r\n    public dispose() {\r\n        this._observer.dispose();\r\n    }\r\n}","import { Entity } from \"../core/Entity\";\r\nimport { IDisposable } from \"./IDisposable\";\r\n\r\nexport class SingleDisposable extends Entity implements IDisposable {\r\n    public static create(disposeHandler: Function = function() { }) {\r\n        var obj = new this(disposeHandler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _disposeHandler: Function = null;\r\n    private _isDisposed: boolean = false;\r\n\r\n    constructor(disposeHandler: Function) {\r\n        super(\"SingleDisposable\");\r\n\r\n        this._disposeHandler = disposeHandler;\r\n    }\r\n\r\n    public setDisposeHandler(handler: Function) {\r\n        this._disposeHandler = handler;\r\n    }\r\n\r\n    public dispose() {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n\r\n        this._isDisposed = true;\r\n\r\n        this._disposeHandler();\r\n    }\r\n}","export class ClassMapUtils {\r\n    private static _classMap: ClassMapData = {};\r\n\r\n    public static addClassMap(className: string, _class: any) {\r\n        this._classMap[className] = _class;\r\n    }\r\n\r\n    public static getClass(className: string) {\r\n        return this._classMap[className];\r\n    }\r\n}\r\n\r\ntype ClassMapData = {\r\n    [className: string]: any;\r\n}\r\n","export class FunctionUtils {\r\n    public static bind(object: any, func: Function) {\r\n        return function() {\r\n            return func.apply(object, arguments);\r\n        };\r\n    }\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Entity } from \"./Entity\";\r\nimport { Scheduler } from \"./Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { Observer } from \"./Observer\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { ClassMapUtils } from \"../utils/ClassMapUtils\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { FunctionUtils } from \"wonder-commonlib/dist/es2015/utils/FunctionUtils\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\n\r\nexport abstract class Stream extends Entity {\r\n    public scheduler: Scheduler = null;\r\n    public subscribeFunc: (observer: IObserver) => Function | void = null;\r\n\r\n    constructor(subscribeFunc) {\r\n        super(\"Stream\");\r\n\r\n        this.subscribeFunc = subscribeFunc || function() { };\r\n    }\r\n\r\n    public abstract subscribe(arg1: Function | Observer | Subject, onError?: Function, onCompleted?: Function): IDisposable;\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        return SingleDisposable.create(<Function>(this.subscribeFunc(observer) || function() { }));\r\n    }\r\n\r\n    public do(onNext?: Function, onError?: Function, onCompleted?: Function) {\r\n        return ClassMapUtils.getClass(\"DoStream\").create(this, onNext, onError, onCompleted);\r\n    }\r\n\r\n    public map(selector: Function) {\r\n        return ClassMapUtils.getClass(\"MapStream\").create(this, selector);\r\n    }\r\n\r\n    public flatMap(selector: Function) {\r\n        return this.map(selector).mergeAll();\r\n    }\r\n\r\n    public concatMap(selector: Function) {\r\n        return this.map(selector).concatAll();\r\n    }\r\n\r\n    public mergeAll() {\r\n        return ClassMapUtils.getClass(\"MergeAllStream\").create(this);\r\n    }\r\n\r\n    public concatAll() {\r\n        return this.merge(1);\r\n    }\r\n\r\n    public skipUntil(otherStream: Stream) {\r\n        return ClassMapUtils.getClass(\"SkipUntilStream\").create(this, otherStream);\r\n    }\r\n\r\n    public takeUntil(otherStream: Stream) {\r\n        return ClassMapUtils.getClass(\"TakeUntilStream\").create(this, otherStream);\r\n    }\r\n\r\n    @requireCheck(function(count: number = 1) {\r\n        assert(count >= 0, Log.info.FUNC_SHOULD(\"count\", \">= 0\"));\r\n    })\r\n    public take(count: number = 1) {\r\n        var self = this;\r\n\r\n        if (count === 0) {\r\n            return ClassMapUtils.getClass(\"Operator\").empty();\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            self.subscribe((value: any) => {\r\n                if (count > 0) {\r\n                    observer.next(value);\r\n                }\r\n\r\n                count--;\r\n\r\n                if (count <= 0) {\r\n                    observer.completed();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    @requireCheck(function(count: number = 1) {\r\n        assert(count >= 0, Log.info.FUNC_SHOULD(\"count\", \">= 0\"));\r\n    })\r\n    public takeLast(count: number = 1) {\r\n        var self = this;\r\n\r\n        if (count === 0) {\r\n            return ClassMapUtils.getClass(\"Operator\").empty();\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var queue = [];\r\n\r\n            self.subscribe((value: any) => {\r\n                queue.push(value);\r\n\r\n                if (queue.length > count) {\r\n                    queue.shift();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                while (queue.length > 0) {\r\n                    observer.next(queue.shift());\r\n                }\r\n\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public takeWhile(predicate: (value: any, index: number, source: Stream) => boolean, thisArg = this) {\r\n        var self = this,\r\n            bindPredicate = null;\r\n\r\n        bindPredicate = FunctionUtils.bind(thisArg, predicate);\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var i = 0,\r\n                isStart = false;\r\n\r\n            self.subscribe((value: any) => {\r\n                if (bindPredicate(value, i++, self)) {\r\n                    try {\r\n                        observer.next(value);\r\n                        isStart = true;\r\n                    }\r\n                    catch (e) {\r\n                        observer.error(e);\r\n                        return;\r\n                    }\r\n                }\r\n                else {\r\n                    if (isStart) {\r\n                        observer.completed();\r\n                    }\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public lastOrDefault(defaultValue: any = null) {\r\n        var self = this;\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var queue = [];\r\n\r\n            self.subscribe((value: any) => {\r\n                queue.push(value);\r\n\r\n                if (queue.length > 1) {\r\n                    queue.shift();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                if (queue.length === 0) {\r\n                    observer.next(defaultValue);\r\n                }\r\n                else {\r\n                    while (queue.length > 0) {\r\n                        observer.next(queue.shift());\r\n                    }\r\n                }\r\n\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public filter(predicate: (value: any) => boolean, thisArg = this) {\r\n        if (this instanceof ClassMapUtils.getClass(\"FilterStream\")) {\r\n            let self: any = this;\r\n\r\n            return self.internalFilter(predicate, thisArg);\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"FilterStream\").create(this, predicate, thisArg);\r\n    }\r\n\r\n    public filterWithState(predicate: (value: any) => boolean, thisArg = this) {\r\n        if (this instanceof ClassMapUtils.getClass(\"FilterStream\")) {\r\n            let self: any = this;\r\n\r\n            return self.internalFilter(predicate, thisArg);\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"FilterWithStateStream\").create(this, predicate, thisArg);\r\n    }\r\n\r\n    public concat(streamArr: Array<Stream>);\r\n    public concat(...otherStream);\r\n\r\n    public concat() {\r\n        var args: Array<Stream> = null;\r\n\r\n        if (JudgeUtils.isArray(arguments[0])) {\r\n            args = arguments[0];\r\n        }\r\n        else {\r\n            args = Array.prototype.slice.call(arguments, 0);\r\n        }\r\n\r\n        args.unshift(this);\r\n\r\n        return ClassMapUtils.getClass(\"ConcatStream\").create(args);\r\n    }\r\n\r\n    public merge(maxConcurrent: number);\r\n    public merge(streamArr: Array<Stream>);\r\n    public merge(...otherStreams);\r\n\r\n    public merge(...args) {\r\n        if (JudgeUtils.isNumber(args[0])) {\r\n            var maxConcurrent: number = args[0];\r\n\r\n            return ClassMapUtils.getClass(\"MergeStream\").create(this, maxConcurrent);\r\n        }\r\n\r\n        if (JudgeUtils.isArray(args[0])) {\r\n            args = arguments[0];\r\n        }\r\n        else {\r\n        }\r\n\r\n        let stream: Stream = null;\r\n\r\n        args.unshift(this);\r\n\r\n        stream = ClassMapUtils.getClass(\"Operator\").fromArray(args).mergeAll();\r\n\r\n        return stream;\r\n    }\r\n\r\n    public repeat(count: number = -1) {\r\n        return ClassMapUtils.getClass(\"RepeatStream\").create(this, count);\r\n    }\r\n\r\n    public ignoreElements() {\r\n        return ClassMapUtils.getClass(\"IgnoreElementsStream\").create(this);\r\n    }\r\n\r\n    protected handleSubject(subject: any) {\r\n        if (this._isSubject(subject)) {\r\n            this._setSubject(subject);\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private _isSubject(subject: Subject) {\r\n        return subject instanceof Subject;\r\n    }\r\n\r\n    private _setSubject(subject: Subject) {\r\n        subject.source = this;\r\n    }\r\n}","import { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\n\r\nexport abstract class BaseStream extends Stream {\r\n    public abstract subscribeCore(observer: IObserver): IDisposable;\r\n\r\n    public subscribe(arg1: Function | Observer | Subject, onError?, onCompleted?): IDisposable {\r\n        var observer: Observer = null;\r\n\r\n        if (this.handleSubject(arg1)) {\r\n            return;\r\n        }\r\n\r\n        observer = arg1 instanceof Observer\r\n            ? AutoDetachObserver.create(<IObserver>arg1)\r\n            : AutoDetachObserver.create(<Function>arg1, onError, onCompleted);\r\n\r\n        //observer.setDisposeHandler(this.disposeHandler);\r\n\r\n\r\n        observer.setDisposable(this.buildStream(observer));\r\n\r\n        return observer;\r\n    }\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        super.buildStream(observer);\r\n\r\n        return this.subscribeCore(observer);\r\n    }\r\n\r\n    //private _hasMultiObservers(){\r\n    //    return this.scheduler.getObservers() > 1;\r\n    //}\r\n}","import { Entity } from \"../core/Entity\";\r\nimport { IDisposable } from \"./IDisposable\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\nexport class GroupDisposable extends Entity implements IDisposable {\r\n    public static create(disposable?: IDisposable) {\r\n        var obj = new this(disposable);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _group: Collection<IDisposable> = Collection.create<IDisposable>();\r\n    private _isDisposed: boolean = false;\r\n\r\n    constructor(disposable?: IDisposable) {\r\n        super(\"GroupDisposable\");\r\n\r\n        if (disposable) {\r\n            this._group.addChild(disposable);\r\n        }\r\n    }\r\n\r\n    public add(disposable: IDisposable) {\r\n        this._group.addChild(disposable);\r\n\r\n        return this;\r\n    }\r\n\r\n    public remove(disposable: IDisposable) {\r\n        this._group.removeChild(disposable);\r\n\r\n        return this;\r\n    }\r\n\r\n    public dispose() {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n\r\n        this._isDisposed = true;\r\n\r\n        this._group.forEach((disposable: IDisposable) => {\r\n            disposable.dispose();\r\n        });\r\n    }\r\n}","import { JudgeUtils } from \"../JudgeUtils\";\r\n\r\ndeclare var global: NodeJS.Global, window: Window;\r\n\r\nexport var root: any;\r\n\r\nif (JudgeUtils.isNodeJs() && typeof global != \"undefined\") {\r\n    root = global;\r\n}\r\nelse {\r\n    root = window;\r\n}\r\n","import { IObserver } from \"../observer/IObserver\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class Scheduler {\r\n    //todo remove \"...args\"\r\n    public static create(...args) {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _requestLoopId: any = null;\r\n    get requestLoopId() {\r\n        return this._requestLoopId;\r\n    }\r\n    set requestLoopId(requestLoopId: any) {\r\n        this._requestLoopId = requestLoopId;\r\n    }\r\n\r\n    //param observer is used by TestScheduler to rewrite\r\n\r\n    public publishRecursive(observer: IObserver, initial: any, action: Function) {\r\n        action(initial);\r\n    }\r\n\r\n    public publishInterval(observer: IObserver, initial: any, interval: number, action: Function): number {\r\n        return root.setInterval(() => {\r\n            initial = action(initial);\r\n        }, interval);\r\n    }\r\n\r\n    public publishIntervalRequest(observer: IObserver, action: Function) {\r\n        var self = this,\r\n            loop = (time) => {\r\n                var isEnd = action(time);\r\n\r\n                if (isEnd) {\r\n                    return;\r\n                }\r\n\r\n                self._requestLoopId = root.requestNextAnimationFrame(loop);\r\n            };\r\n\r\n        this._requestLoopId = root.requestNextAnimationFrame(loop);\r\n    }\r\n\r\n    public publishTimeout(observer: IObserver, time: number, action: Function): number {\r\n        return root.setTimeout(() => {\r\n            action(time);\r\n            observer.completed();\r\n        }, time);\r\n    }\r\n}","import { Stream } from \"../core/Stream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class AnonymousStream extends Stream {\r\n    public static create(subscribeFunc: Function) {\r\n        var obj = new this(subscribeFunc);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(subscribeFunc: Function) {\r\n        super(subscribeFunc);\r\n\r\n        this.scheduler = Scheduler.create();\r\n    }\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        return SingleDisposable.create(<Function>(this.subscribeFunc(observer) || function() { }));\r\n    }\r\n\r\n    public subscribe(subject: Subject): IDisposable;\r\n    public subscribe(observer: IObserver): IDisposable;\r\n\r\n    public subscribe(onNext: (value: any) => void): IDisposable;\r\n    public subscribe(onNext: (value: any) => void, onError: (e: any) => void): IDisposable;\r\n    public subscribe(onNext: (value: any) => void, onError: (e: any) => void, onComplete: () => void): IDisposable;\r\n\r\n    public subscribe(...args): IDisposable {\r\n        var observer: AutoDetachObserver = null;\r\n\r\n        if (args[0] instanceof Subject) {\r\n            let subject: Subject = <Subject>args[0];\r\n\r\n            this.handleSubject(subject);\r\n\r\n            return;\r\n        }\r\n        else if (JudgeUtils.isIObserver(<IObserver>args[0])) {\r\n            observer = AutoDetachObserver.create(<IObserver>args[0]);\r\n        }\r\n        else {\r\n            let onNext: Function = <Function>args[0],\r\n                onError: Function = <Function>args[1] || null,\r\n                onCompleted: Function = <Function>args[2] || null;\r\n\r\n            observer = AutoDetachObserver.create(onNext, onError, onCompleted);\r\n        }\r\n\r\n        observer.setDisposable(this.buildStream(observer));\r\n\r\n        return observer;\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromArrayStream extends BaseStream {\r\n    public static create(array: Array<any>, scheduler: Scheduler) {\r\n        var obj = new this(array, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _array: Array<any> = null;\r\n\r\n    constructor(array: Array<any>, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._array = array;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var array = this._array,\r\n            len = array.length;\r\n\r\n        function loopRecursive(i) {\r\n            if (i < len) {\r\n                observer.next(array[i]);\r\n\r\n                loopRecursive(i + 1);\r\n            } else {\r\n                observer.completed();\r\n            }\r\n        }\r\n\r\n        this.scheduler.publishRecursive(observer, 0, loopRecursive);\r\n\r\n        return SingleDisposable.create();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromPromiseStream extends BaseStream {\r\n    public static create(promise: any, scheduler: Scheduler) {\r\n        var obj = new this(promise, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _promise: any = null;\r\n\r\n    constructor(promise: any, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._promise = promise;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        this._promise.then((data) => {\r\n            observer.next(data);\r\n            observer.completed();\r\n        }, (err) => {\r\n            observer.error(err);\r\n        }, observer);\r\n\r\n        return SingleDisposable.create();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromEventPatternStream extends BaseStream {\r\n    public static create(addHandler: Function, removeHandler: Function) {\r\n        var obj = new this(addHandler, removeHandler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _addHandler: Function = null;\r\n    private _removeHandler: Function = null;\r\n\r\n    constructor(addHandler: Function, removeHandler: Function) {\r\n        super(null);\r\n\r\n        this._addHandler = addHandler;\r\n        this._removeHandler = removeHandler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this;\r\n\r\n        function innerHandler(event) {\r\n            observer.next(event);\r\n        }\r\n\r\n        this._addHandler(innerHandler);\r\n\r\n        return SingleDisposable.create(() => {\r\n            self._removeHandler(innerHandler);\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class IntervalStream extends BaseStream {\r\n    public static create(interval: number, scheduler: Scheduler) {\r\n        var obj = new this(interval, scheduler);\r\n\r\n        obj.initWhenCreate();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _interval: number = null;\r\n\r\n    constructor(interval: number, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._interval = interval;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public initWhenCreate() {\r\n        this._interval = this._interval <= 0 ? 1 : this._interval;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this,\r\n            id = null;\r\n\r\n        id = this.scheduler.publishInterval(observer, 0, this._interval, (count) => {\r\n            //self.scheduler.next(count);\r\n            observer.next(count);\r\n\r\n            return count + 1;\r\n        });\r\n\r\n        //Disposer.addDisposeHandler(() => {\r\n        //});\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.clearInterval(id);\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class IntervalRequestStream extends BaseStream {\r\n    public static create(scheduler: Scheduler) {\r\n        var obj = new this(scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _isEnd: boolean = false;\r\n\r\n    constructor(scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this;\r\n\r\n        this.scheduler.publishIntervalRequest(observer, (time) => {\r\n            observer.next(time);\r\n\r\n            return self._isEnd;\r\n        });\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.cancelNextRequestAnimationFrame(self.scheduler.requestLoopId);\r\n            self._isEnd = true;\r\n        });\r\n    }\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { BaseStream } from \"./BaseStream\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class TimeoutStream extends BaseStream {\r\n    @requireCheck(function(time: number, scheduler: Scheduler) {\r\n        assert(time > 0, Log.info.FUNC_SHOULD(\"time\", \"> 0\"));\r\n    })\r\n    public static create(time: number, scheduler: Scheduler) {\r\n        var obj = new this(time, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _time: number = null;\r\n\r\n    constructor(time: number, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._time = time;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var id = null;\r\n\r\n        id = this.scheduler.publishTimeout(observer, this._time, (time) => {\r\n            observer.next(time);\r\n        });\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.clearTimeout(id);\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\n\r\nexport class DeferStream extends BaseStream {\r\n    public static create(buildStreamFunc: Function) {\r\n        var obj = new this(buildStreamFunc);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _buildStreamFunc: Function = null;\r\n\r\n    constructor(buildStreamFunc: Function) {\r\n        super(null);\r\n\r\n        this._buildStreamFunc = buildStreamFunc;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var group = GroupDisposable.create();\r\n\r\n        group.add(this._buildStreamFunc().buildStream(observer));\r\n\r\n        return group;\r\n    }\r\n}","import { ClassMapUtils } from \"../../../utils/ClassMapUtils\";\r\n\r\nexport function registerClass(className: string) {\r\n    return function(target) {\r\n        ClassMapUtils.addClassMap(className, target);\r\n    }\r\n}\r\n\r\n","import { AnonymousStream } from \"../stream/AnonymousStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { FromArrayStream } from \"../stream/FromArrayStream\";\r\nimport { FromPromiseStream } from \"../stream/FromPromiseStream\";\r\nimport { FromEventPatternStream } from \"../stream/FromEventPatternStream\";\r\nimport { IntervalStream } from \"../stream/IntervalStream\";\r\nimport { IntervalRequestStream } from \"../stream/IntervalRequestStream\";\r\nimport { TimeoutStream } from \"../stream/TimeoutStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { root } from \"./Variable\";\r\nimport { DeferStream } from \"../stream/DeferStream\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"Operator\")\r\nexport class Operator {\r\n    public static empty() {\r\n        return this.createStream((observer: IObserver) => {\r\n            observer.completed();\r\n        });\r\n    }\r\n\r\n    public static createStream(subscribeFunc) {\r\n        return AnonymousStream.create(subscribeFunc);\r\n    }\r\n\r\n    public static fromArray(array: Array<any>, scheduler = Scheduler.create()) {\r\n        return FromArrayStream.create(array, scheduler);\r\n    }\r\n}\r\n\r\nexport var createStream = Operator.createStream;\r\n\r\nexport var empty = Operator.empty;\r\n\r\nexport var fromArray = Operator.fromArray;\r\n\r\nexport var fromPromise = (promise: any, scheduler = Scheduler.create()) => {\r\n    return FromPromiseStream.create(promise, scheduler);\r\n};\r\n\r\nexport var fromEventPattern = (addHandler: Function, removeHandler: Function) => {\r\n    return FromEventPatternStream.create(addHandler, removeHandler);\r\n};\r\n\r\nexport var interval = (interval, scheduler = Scheduler.create()) => {\r\n    return IntervalStream.create(interval, scheduler);\r\n};\r\n\r\nexport var intervalRequest = (scheduler = Scheduler.create()) => {\r\n    return IntervalRequestStream.create(scheduler);\r\n};\r\n\r\nexport var timeout = (time, scheduler = Scheduler.create()) => {\r\n    return TimeoutStream.create(time, scheduler);\r\n};\r\nexport var callFunc = (func: Function, context = root) => {\r\n    return createStream((observer: IObserver) => {\r\n        try {\r\n            observer.next(func.call(context, null));\r\n        }\r\n        catch (e) {\r\n            observer.error(e);\r\n        }\r\n\r\n        observer.completed();\r\n    });\r\n};\r\n\r\nexport var judge = (condition: Function, thenSource: Function, elseSource: Function) => {\r\n    return condition() ? thenSource() : elseSource();\r\n};\r\n\r\nexport var defer = (buildStreamFunc: Function) => {\r\n    return DeferStream.create(buildStreamFunc);\r\n};\r\n\r\nexport var just = (returnValue: any) => {\r\n    return createStream((observer: IObserver) => {\r\n        observer.next(returnValue);\r\n        observer.completed();\r\n    });\r\n}\r\n","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { fromPromise } from \"../global/Operator\";\r\n\r\nexport class MergeAllObserver extends Observer {\r\n    public static create(currentObserver: IObserver, streamGroup: Collection<Stream>, groupDisposable: GroupDisposable) {\r\n        return new this(currentObserver, streamGroup, groupDisposable);\r\n    }\r\n\r\n    constructor(currentObserver: IObserver, streamGroup: Collection<Stream>, groupDisposable: GroupDisposable) {\r\n        super(null, null, null);\r\n\r\n        this.currentObserver = currentObserver;\r\n        this._streamGroup = streamGroup;\r\n        this._groupDisposable = groupDisposable;\r\n    }\r\n\r\n    public done: boolean = false;\r\n    public currentObserver: IObserver = null;\r\n\r\n    private _streamGroup: Collection<Stream> = null;\r\n    private _groupDisposable: GroupDisposable = null;\r\n\r\n    @requireCheck(function(innerSource: any) {\r\n        assert(innerSource instanceof Stream || JudgeUtils.isPromise(innerSource), Log.info.FUNC_MUST_BE(\"innerSource\", \"Stream or Promise\"));\r\n\r\n    })\r\n    protected onNext(innerSource: any) {\r\n        if (JudgeUtils.isPromise(innerSource)) {\r\n            innerSource = fromPromise(innerSource);\r\n        }\r\n\r\n        this._streamGroup.addChild(innerSource);\r\n\r\n        this._groupDisposable.add(innerSource.buildStream(InnerObserver.create(this, this._streamGroup, innerSource)));\r\n    }\r\n\r\n    protected onError(error) {\r\n        this.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this.done = true;\r\n\r\n        if (this._streamGroup.getCount() === 0) {\r\n            this.currentObserver.completed();\r\n        }\r\n    }\r\n}\r\n\r\nclass InnerObserver extends Observer {\r\n    public static create(parent: MergeAllObserver, streamGroup: Collection<Stream>, currentStream: Stream) {\r\n        var obj = new this(parent, streamGroup, currentStream);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(parent: MergeAllObserver, streamGroup: Collection<Stream>, currentStream: Stream) {\r\n        super(null, null, null);\r\n\r\n        this._parent = parent;\r\n        this._streamGroup = streamGroup;\r\n        this._currentStream = currentStream;\r\n    }\r\n\r\n    private _parent: MergeAllObserver = null;\r\n    private _streamGroup: Collection<Stream> = null;\r\n    private _currentStream: Stream = null;\r\n\r\n    protected onNext(value) {\r\n        this._parent.currentObserver.next(value);\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._parent.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        var currentStream = this._currentStream,\r\n            parent = this._parent;\r\n\r\n        this._streamGroup.removeChild((stream: Stream) => {\r\n            return JudgeUtils.isEqual(stream, currentStream);\r\n        });\r\n\r\n        //parent.currentObserver.completed();\r\n        //this.dispose();\r\n\r\n        /*!\r\n        if this innerSource is async stream(as promise stream),\r\n        it will first exec all parent.next and one parent.completed,\r\n        then exec all this.next and all this.completed\r\n        so in this case, it should invoke parent.currentObserver.completed after the last invokcation of this.completed(have invoked all the innerSource)\r\n        */\r\n        if (this._isAsync() && this._streamGroup.getCount() === 0) {\r\n            parent.currentObserver.completed();\r\n        }\r\n    }\r\n\r\n    private _isAsync() {\r\n        return this._parent.done;\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { MergeAllObserver } from \"../observer/MergeAllObserver\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"MergeAllStream\")\r\nexport class MergeAllStream extends BaseStream {\r\n    public static create(source: Stream) {\r\n        var obj = new this(source);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(source: Stream) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n        //this._observer = AnonymousObserver.create(onNext, onError,onCompleted);\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    private _observer: Observer = null;\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var streamGroup = Collection.create<Stream>(),\r\n            groupDisposable = GroupDisposable.create();\r\n\r\n        this._source.buildStream(MergeAllObserver.create(observer, streamGroup, groupDisposable));\r\n\r\n        return groupDisposable;\r\n    }\r\n}\r\n","import { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\nexport abstract class Entity {\r\n    private static _count: number = 1;\r\n\r\n    constructor() {\r\n        this.uid = Entity._count;\r\n        Entity._count += 1;\r\n    }\r\n\r\n    public uid: number = null;\r\n    public data: any = null;\r\n\r\n    private _tagList: Collection<string> = Collection.create<string>();\r\n\r\n\r\n    public addTag(tag: string) {\r\n        this._tagList.addChild(tag);\r\n    }\r\n\r\n    public removeTag(tag: string) {\r\n        this._tagList.removeChild(tag);\r\n    }\r\n\r\n    public getTagList() {\r\n        return this._tagList;\r\n    }\r\n\r\n    public hasTag(tag: string) {\r\n        return this._tagList.hasChild(tag);\r\n    }\r\n\r\n    public containTag(tag: string) {\r\n        return this._tagList.hasChildWithFunc((t: string) => {\r\n            return t.indexOf(tag) > -1;\r\n        })\r\n    }\r\n}","import { Entity } from \"./Entity\";\r\nimport { Transform } from \"../component/transform/Transform\";\r\nimport { EntityObject } from \"./entityObject/EntityObject\";\r\nimport { virtual } from \"../definition/typescript/decorator/virtual\";\r\nimport { CloneUtils } from \"../definition/typescript/decorator/clone\";\r\n\r\nexport abstract class Component extends Entity {\r\n    get transform(): Transform {\r\n        if (!this.entityObject) {\r\n            return null;\r\n        }\r\n\r\n        return this.entityObject.transform;\r\n    }\r\n\r\n    public entityObject: EntityObject = null;\r\n\r\n    @virtual\r\n    public init() {\r\n    }\r\n\r\n    @virtual\r\n    public dispose() {\r\n    }\r\n\r\n    @virtual\r\n    public clone(): any {\r\n        return CloneUtils.clone(this);\r\n    }\r\n\r\n    @virtual\r\n    public addToObject(entityObject: EntityObject, isShareComponent: boolean = false) {\r\n        if (isShareComponent) {\r\n            return;\r\n        }\r\n\r\n        if (this.entityObject) {\r\n            this.entityObject.removeComponent(this);\r\n        }\r\n        this.entityObject = entityObject;\r\n\r\n        this.addToComponentContainer();\r\n    }\r\n\r\n    @virtual\r\n    public addToComponentContainer() {\r\n    }\r\n\r\n    @virtual\r\n    public removeFromObject(entityObject: EntityObject) {\r\n        this.removeFromComponentContainer();\r\n    }\r\n\r\n    @virtual\r\n    public removeFromComponentContainer() {\r\n    }\r\n}","export function cacheGetter(judgeFunc: () => boolean, returnCacheValueFunc: () => any, setCacheFunc: (returnVal:any) => void) {\r\n    return function(target, name, descriptor) {\r\n        var getter = descriptor.get;\r\n\r\n        descriptor.get = function() {\r\n            var result = null;\r\n\r\n            if (judgeFunc.call(this)) {\r\n                return returnCacheValueFunc.call(this);\r\n            }\r\n\r\n            result = getter.call(this);\r\n\r\n            setCacheFunc.call(this, result);\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function cache(judgeFunc: any, returnCacheValueFunc: any, setCacheFunc: any) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(args) {\r\n            var result = null,\r\n                setArgs = null;\r\n\r\n            if (judgeFunc.apply(this, arguments)) {\r\n                return returnCacheValueFunc.apply(this, arguments);\r\n            }\r\n\r\n            result = value.apply(this, arguments);\r\n\r\n            setArgs = [result];\r\n\r\n            for (let i = 0, len = arguments.length; i < len; i++) {\r\n                setArgs[i + 1] = arguments[i];\r\n            }\r\n\r\n            setCacheFunc.apply(this, setArgs);\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function cacheBufferForBufferContainer() {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(dataName: string) {\r\n            var result = null;\r\n\r\n            if (this.container.hasChild(dataName)) {\r\n                return this.container.getChild(dataName)\r\n            }\r\n\r\n            result = value.call(this, dataName);\r\n\r\n            this.container.addChild(dataName, result);\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function cacheBufferForBufferContainerWithFuncParam(setDataNameFuncName: string) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(dataName: string) {\r\n            var result = null,\r\n                settedDataName = this[setDataNameFuncName](dataName);\r\n\r\n            if (this.container.hasChild(settedDataName)) {\r\n                return this.container.getChild(settedDataName)\r\n            }\r\n\r\n            result = value.call(this, dataName);\r\n\r\n            this.container.addChild(settedDataName, result);\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}","import { Collection } from \"./Collection\";\r\nimport { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { $BREAK, $REMOVE } from \"./global/Const\";\r\nimport { Log } from \"./Log\";\r\nimport { ExtendUtils } from \"./utils/ExtendUtils\";\r\n\r\nexport class Hash<T> {\r\n    public static create<T>(children = {}) {\r\n        var obj = new this(<{ [s: string]: T }>children);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(children: { [s: string]: T } = {}) {\r\n        this._children = children;\r\n    }\r\n\r\n    private _children: {\r\n        [s: string]: T\r\n    } = null;\r\n\r\n    public getChildren() {\r\n        return this._children;\r\n    }\r\n\r\n    public getCount() {\r\n        var result = 0,\r\n            children = this._children,\r\n            key = null;\r\n\r\n        for (key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                result++;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getKeys() {\r\n        var result = Collection.create<string>(),\r\n            children = this._children,\r\n            key = null;\r\n\r\n        for (key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                result.addChild(key);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getValues() {\r\n        var result = Collection.create<T>(),\r\n            children = this._children,\r\n            key = null;\r\n\r\n        for (key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                result.addChild(children[key]);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getChild(key: string) {\r\n        return this._children[key];\r\n    }\r\n\r\n    public setValue(key: string, value: any) {\r\n        this._children[key] = value;\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChild(key: string, value: any) {\r\n        this._children[key] = value;\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChildren(arg: {} | Hash<T>) {\r\n        var i = null,\r\n            children = null;\r\n\r\n        if (arg instanceof Hash) {\r\n            children = arg.getChildren();\r\n        }\r\n        else {\r\n            children = arg;\r\n        }\r\n\r\n        for (i in children) {\r\n            if (children.hasOwnProperty(i)) {\r\n                this.addChild(i, children[i]);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public appendChild(key: string, value: any) {\r\n        if (this._children[key] instanceof Collection) {\r\n            let c = <any>(this._children[key]);\r\n\r\n            c.addChild(<T>value);\r\n        }\r\n        else {\r\n            this._children[key] = <any>(Collection.create<any>().addChild(value));\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public setChildren(children: { [s: string]: T }) {\r\n        this._children = children;\r\n    }\r\n\r\n    public removeChild(arg: any): Collection<T> {\r\n        var result = [];\r\n\r\n        if (JudgeUtils.isString(arg)) {\r\n            let key = <string>arg;\r\n\r\n            result.push(this._children[key]);\r\n\r\n            this._children[key] = void 0;\r\n            delete this._children[key];\r\n        }\r\n        else if (JudgeUtils.isFunction(arg)) {\r\n            let func = <Function>arg,\r\n                self = this;\r\n\r\n            this.forEach((val: any, key: string) => {\r\n                if (func(val, key)) {\r\n                    result.push(self._children[key]);\r\n\r\n                    self._children[key] = void 0;\r\n                    delete self._children[key];\r\n                }\r\n            });\r\n        }\r\n\r\n        return Collection.create<T>(result);\r\n    }\r\n\r\n    public removeAllChildren() {\r\n        this._children = {};\r\n    }\r\n\r\n    public hasChild(key: string): boolean {\r\n        return this._children[key] !== void 0;\r\n    }\r\n\r\n    public hasChildWithFunc(func: Function): boolean {\r\n        var result = false;\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (func(val, key)) {\r\n                result = true;\r\n                return $BREAK;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public forEach(func: Function, context?: any) {\r\n        var children = this._children;\r\n\r\n        for (let i in children) {\r\n            if (children.hasOwnProperty(i)) {\r\n                if (func.call(context, children[i], i) === $BREAK) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public filter(func: Function): Hash<T> {\r\n        var result = {},\r\n            children = this._children,\r\n            value = null;\r\n\r\n        for (let key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                value = children[key];\r\n\r\n                if (func.call(children, value, key)) {\r\n                    result[key] = value;\r\n                }\r\n            }\r\n        }\r\n\r\n        return Hash.create<T>(result);\r\n    }\r\n\r\n    public findOne(func: Function) {\r\n        var result = [],\r\n            self = this,\r\n            scope = this._children;\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (!func.call(scope, val, key)) {\r\n                return;\r\n            }\r\n\r\n            result = [key, self.getChild(key)];\r\n            return $BREAK;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public map(func: Function): Hash<T> {\r\n        var resultMap = {};\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            var result = func(val, key);\r\n\r\n            if (result !== $REMOVE) {\r\n                Log.error(!JudgeUtils.isArray(result) || result.length !== 2, Log.info.FUNC_MUST_BE(\"iterator\", \"[key, value]\"));\r\n\r\n                resultMap[result[0]] = result[1];\r\n            }\r\n        });\r\n\r\n        return Hash.create<T>(resultMap);\r\n    }\r\n\r\n    public toCollection(): Collection<any> {\r\n        var result = Collection.create<any>();\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (val instanceof Collection) {\r\n                result.addChildren(val);\r\n            }\r\n            //else if(val instanceof Hash){\r\n            //    Log.error(true, Log.info.FUNC_NOT_SUPPORT(\"toCollection\", \"value is Hash\"));\r\n            //}\r\n            else {\r\n                result.addChild(val);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public toArray(): Array<T> {\r\n        var result = [];\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (val instanceof Collection) {\r\n                result = result.concat(val.getChildren());\r\n            }\r\n            else {\r\n                result.push(val);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public clone();\r\n    public clone(isDeep: boolean);\r\n    public clone(target: Hash<T>);\r\n    public clone(target: Hash<T>, isDeep: boolean);\r\n\r\n    public clone(...args) {\r\n        var target: Hash<T> = null,\r\n            isDeep: boolean = null;\r\n\r\n        if (args.length === 0) {\r\n            isDeep = false;\r\n            target = Hash.create<T>();\r\n        }\r\n        else if (args.length === 1) {\r\n            if (JudgeUtils.isBoolean(args[0])) {\r\n                target = Hash.create<T>();\r\n                isDeep = args[0];\r\n            }\r\n            else {\r\n                target = args[0];\r\n                isDeep = false;\r\n            }\r\n        }\r\n        else {\r\n            target = args[0];\r\n            isDeep = args[1];\r\n        }\r\n\r\n        if (isDeep === true) {\r\n            target.setChildren(ExtendUtils.extendDeep(this._children));\r\n        }\r\n        else {\r\n            target.setChildren(ExtendUtils.extend({}, this._children));\r\n        }\r\n\r\n        return target;\r\n    }\r\n}","export enum ETransformState {\r\n    ISTRANSLATE = <any>\"isTranslate\",\r\n    ISROTATE = <any>\"isRotate\",\r\n    ISSCALE = <any>\"isScale\",\r\n\r\n    ISLOCALTRANSLATE = <any>\"isLocalTranslate\",\r\n    ISLOCALROTATE = <any>\"isLocalRotate\",\r\n    ISLOCALSCALE = <any>\"isLocalScale\"\r\n}","export enum EEngineEvent {\r\n    STARTLOOP = <any>\"wd_startLoop\",\r\n    ENDLOOP = <any>\"wd_endLoop\",\r\n\r\n    POINT_TAP = <any>\"wd_pointtap\",\r\n    POINT_DOWN = <any>\"wd_pointdown\",\r\n    POINT_UP = <any>\"wd_pointup\",\r\n    POINT_MOVE = <any>\"wd_pointmove\",\r\n    POINT_OVER = <any>\"wd_pointover\",\r\n    POINT_OUT = <any>\"wd_pointout\",\r\n    POINT_SCALE = <any>\"wd_pointscale\",\r\n    POINT_DRAG = <any>\"wd_pointdrag\",\r\n\r\n    // MATERIAL_CHANGE = <any>\"wd_material_change\",\r\n\r\n    // UI_WIDTH_CHANGE = <any>\"wd_ui_width_change\",\r\n    // UI_HEIGHT_CHANGE = <any>\"wd_ui_height_change\",\r\n\r\n    TRANSFORM_TRANSLATE = <any>\"wd_transform_translate\",\r\n    TRANSFORM_ROTATE = <any>\"wd_transform_rotate\",\r\n    TRANSFORM_SCALE = <any>\"wd_transform_scale\"\r\n\r\n    // SHADOWMAP_SOFTTYPE_CHANGE = <any>\"wd_shadowMap_softType_change\",\r\n    //\r\n    // SHADOWMAP_LAYER_CHANGE = <any>\"wd_shadowMap_layer_change\",\r\n\r\n    // COMPONENT_CHANGE = <any>\"wd_component_change\",\r\n\r\n    // AFTER_SCENEGRAPH_BUILD = <any>\"wd_after_sceneGraph_build\",\r\n\r\n    // ANIMATION_STOP = <any>\"wd_animation_stop\",\r\n\r\n\r\n    // EXIT = <any>\"wd_exit\",\r\n    // ENTER = <any>\"wd_enter\"\r\n}","import { Component } from \"../../core/Component\";\r\nimport { cloneAttributeAsBasicType } from \"../../definition/typescript/decorator/clone\";\r\nimport { ETransformState } from \"./ETransformState\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { IDisposable } from \"wonder-frp/dist/es2015/Disposable/IDisposable\";\r\nimport { EventManager } from \"../../event/EventManager\";\r\nimport { EEngineEvent } from \"../../event/EEngineEvent\";\r\nimport { virtual } from \"../../definition/typescript/decorator/virtual\";\r\n\r\nexport abstract class Transform extends Component {\r\n    protected p_parent: Transform = null;\r\n    @cloneAttributeAsBasicType()\r\n    get parent() {\r\n        return this.p_parent;\r\n    }\r\n    set parent(parent: Transform) {\r\n        this.setParent(parent);\r\n    }\r\n\r\n    get isTransform() {\r\n        return this.isTranslate || this.isRotate || this.isScale;\r\n    }\r\n    set isTransform(isTransform: boolean) {\r\n        if (isTransform) {\r\n            this._setGlobalTransformState(true);\r\n        }\r\n    }\r\n\r\n    private _isTranslate: boolean = false;\r\n    get isTranslate() {\r\n        return this._isTranslate;\r\n    }\r\n    set isTranslate(isTranslate: boolean) {\r\n        this._setGlobalTransformState(ETransformState.ISTRANSLATE, isTranslate);\r\n    }\r\n\r\n    private _isRotate: boolean = false;\r\n    get isRotate() {\r\n        return this._isRotate;\r\n    }\r\n    set isRotate(isRotate: boolean) {\r\n        this._setGlobalTransformState(ETransformState.ISROTATE, isRotate);\r\n    }\r\n\r\n    private _isScale: boolean = false;\r\n    get isScale() {\r\n        return this._isScale;\r\n    }\r\n    set isScale(isScale: boolean) {\r\n        this._setGlobalTransformState(ETransformState.ISSCALE, isScale);\r\n    }\r\n\r\n    set isLocalTranslate(isTranslate: boolean) {\r\n        this._setLocalTransformState(ETransformState.ISLOCALTRANSLATE, isTranslate);\r\n    }\r\n\r\n    set isLocalRotate(isRotate: boolean) {\r\n        this._setLocalTransformState(ETransformState.ISLOCALROTATE, isRotate);\r\n    }\r\n\r\n    set isLocalScale(isScale: boolean) {\r\n        this._setLocalTransformState(ETransformState.ISLOCALSCALE, isScale);\r\n    }\r\n\r\n    public dirtyLocal: boolean = true;\r\n\r\n    protected children: Collection<Transform> = Collection.create<Transform>();\r\n\r\n    private _endLoopSubscription: IDisposable = null;\r\n\r\n    public init() {\r\n        var self = this;\r\n\r\n        this.clearCache();\r\n\r\n        this._endLoopSubscription = EventManager.fromEvent(<any>EEngineEvent.ENDLOOP)\r\n            .subscribe(() => {\r\n                self._resetTransformFlag();\r\n            });\r\n    }\r\n\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        this._endLoopSubscription && this._endLoopSubscription.dispose();\r\n    }\r\n\r\n    public addChild(child: Transform) {\r\n        this.children.addChild(child);\r\n    }\r\n\r\n    public removeChild(child: Transform) {\r\n        this.children.removeChild(child);\r\n    }\r\n\r\n\r\n    public setChildrenTransformState(state: boolean);\r\n    public setChildrenTransformState(transformState: ETransformState, state: boolean);\r\n\r\n    public setChildrenTransformState(...args) {\r\n        if (args.length === 1) {\r\n            let state: boolean = args[0];\r\n\r\n            if (state) {\r\n                this.children.forEach((child: Transform) => {\r\n                    child.isTransform = true;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            let transformState: ETransformState = args[0],\r\n                state: boolean = args[1];\r\n\r\n            if (state) {\r\n                this.children.forEach((child: Transform) => {\r\n                    child[transformState] = true;\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    protected abstract clearCache(): void;\r\n\r\n    @virtual\r\n    protected handleWhenSetTransformState(transformState?: ETransformState): void {\r\n    }\r\n\r\n    protected setParent(parent: Transform) {\r\n        if (this.p_parent) {\r\n            this.p_parent.removeChild(this);\r\n        }\r\n\r\n        if (!parent) {\r\n            this.p_parent = null;\r\n\r\n            return;\r\n        }\r\n\r\n        this.p_parent = parent;\r\n        this.p_parent.addChild(this);\r\n\r\n        //todo can has multi parent?\r\n    }\r\n\r\n    protected getMatrix<T>(syncMethod: string, matrixAttriName: string): T {\r\n        var syncList = Collection.create<Transform>(),\r\n            current = this.p_parent;\r\n\r\n        syncList.addChild(this);\r\n\r\n        while (current !== null) {\r\n            syncList.addChild(current);\r\n            current = current.parent;\r\n        }\r\n\r\n        syncList.reverse().forEach((transform: Transform) => {\r\n            transform[syncMethod]();\r\n        });\r\n\r\n        return this[matrixAttriName];\r\n    }\r\n\r\n\r\n    private _setGlobalTransformState(state: boolean);\r\n    private _setGlobalTransformState(transformState: ETransformState, state: boolean);\r\n\r\n    private _setGlobalTransformState(...args) {\r\n        if (args.length === 1) {\r\n            let state: boolean = args[0];\r\n\r\n            if (!state) {\r\n                return;\r\n            }\r\n\r\n            this._isTranslate = true;\r\n            this._isRotate = true;\r\n            this._isScale = true;\r\n\r\n            this.dirtyLocal = true;\r\n            this.clearCache();\r\n            this.handleWhenSetTransformState();\r\n\r\n            this.setChildrenTransformState(state);\r\n        }\r\n        else {\r\n            let transformState: ETransformState = args[0],\r\n                state: boolean = args[1];\r\n\r\n            this[`_${transformState}`] = state;\r\n\r\n            if (state) {\r\n                this.dirtyLocal = true;\r\n                this.clearCache();\r\n                this.handleWhenSetTransformState(transformState);\r\n            }\r\n\r\n            if (state) {\r\n                this.setChildrenTransformState(transformState, state);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _setLocalTransformState(transformState: ETransformState, state: boolean) {\r\n        if (state) {\r\n            this.dirtyLocal = true;\r\n            this.clearCache();\r\n        }\r\n\r\n        if (state) {\r\n            this.setChildrenTransformState(transformState, state);\r\n        }\r\n    }\r\n\r\n    private _resetTransformFlag() {\r\n        this.isTranslate = false;\r\n        this.isScale = false;\r\n        this.isRotate = false;\r\n    }\r\n}","import { Component } from \"../../core/Component\";\r\nimport { Renderer } from \"../../renderer/renderer/Renderer\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\n\r\nexport abstract class RendererComponent extends Component {\r\n    public abstract render(renderer: Renderer, target: EntityObject, camera: GameObject);\r\n}","export enum EDrawMode {\r\n    POINTS = <any>\"POINTS\",\r\n    LINES = <any>\"LINES\",\r\n    LINE_LOOP = <any>\"LINE_LOOP\",\r\n    LINE_STRIP = <any>\"LINE_STRIP\",\r\n    TRIANGLES = <any>\"TRIANGLES\",\r\n    TRIANGLE_STRIP = <any>\"TRIANGLE_STRIP\",\r\n    TRANGLE_FAN = <any>\"TRIANGLE_FAN\"\r\n}","export function execOnlyOnce(flagName: string) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(...args) {\r\n            var result = null;\r\n\r\n            if (this[flagName]) {\r\n                return;\r\n            }\r\n\r\n            this[flagName] = true;\r\n\r\n            return value.apply(this, args);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}","export function singleton(isInitWhenCreate: boolean = false) {\r\n    return (target: any) => {\r\n        target._instance = null;\r\n\r\n        if (isInitWhenCreate) {\r\n            target.getInstance = () => {\r\n                if (target._instance === null) {\r\n                    let instance = new target();\r\n\r\n                    target._instance = instance;\r\n\r\n                    instance.initWhenCreate();\r\n                }\r\n\r\n                return target._instance;\r\n            };\r\n        }\r\n        else {\r\n            target.getInstance = () => {\r\n                if (target._instance === null) {\r\n                    target._instance = new target();\r\n                }\r\n\r\n                return target._instance;\r\n            };\r\n        }\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { ContextConfigData } from \"../core/data/MainData\";\r\n\r\n@registerClass(\"ViewWebGL\")\r\nexport class ViewWebGL implements IView {\r\n    public static create(view: any) {\r\n        var obj = new this(view);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(dom: any) {\r\n        this._dom = dom;\r\n    }\r\n\r\n    get offset() {\r\n        var view = this._dom,\r\n            offset = { x: view.offsetLeft, y: view.offsetTop };\r\n\r\n        while (view = view.offsetParent) {\r\n            offset.x += view.offsetLeft;\r\n            offset.y += view.offsetTop;\r\n        }\r\n\r\n        return offset;\r\n    }\r\n\r\n    private _dom: any = null;\r\n    get dom() {\r\n        return this._dom;\r\n    }\r\n\r\n    get width() {\r\n        return this._dom.clientWidth;\r\n    }\r\n    set width(width: number) {\r\n        this._dom.width = width;\r\n    }\r\n\r\n    get height() {\r\n        return this._dom.clientHeight;\r\n    }\r\n    set height(height: number) {\r\n        this._dom.height = height;\r\n    }\r\n\r\n    get styleWidth() {\r\n        return this._dom.style.width;\r\n    }\r\n    set styleWidth(styleWidth: string) {\r\n        this._dom.style.width = styleWidth;\r\n    }\r\n\r\n    get styleHeight() {\r\n        return this._dom.style.height;\r\n    }\r\n    set styleHeight(styleHeight: string) {\r\n        this._dom.style.height = styleHeight;\r\n    }\r\n\r\n    get x() {\r\n        return Number(this._dom.style.left.slice(0, -2));\r\n    }\r\n    set x(x: number) {\r\n        this._dom.style.left = `${x}px`;\r\n    }\r\n\r\n    get y() {\r\n        return Number(this._dom.style.top.slice(0, -2));\r\n    }\r\n    set y(y: number) {\r\n        this._dom.style.top = `${y}px`;\r\n    }\r\n\r\n    public initCanvas() {\r\n        this._dom.style.cssText = \"position:absolute;left:0;top:0;\";\r\n    }\r\n\r\n    public getContext(contextConfig: ContextConfigData): WebGLRenderingContext {\r\n        return this._dom.getContext(\"webgl\", contextConfig.options) || this._dom.getContext(\"experimental-webgl\", contextConfig.options);\r\n    }\r\n}\r\n\r\nexport interface IView {\r\n    offset: { x: number, y: number };\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n    styleWidth: string;\r\n    styleHeight: string;\r\n    dom: any;\r\n    getContext(contextConfig: ContextConfigData): WebGLRenderingContext;\r\n    initCanvas(): void;\r\n}\r\n","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector4 } from \"../math/Vector4\";\r\n\r\n@registerClass(\"RectRegion\")\r\nexport class RectRegion extends Vector4 {\r\n    get width() {\r\n        return this.z;\r\n    }\r\n    set width(width: number) {\r\n        this.z = width;\r\n    }\r\n\r\n    get height() {\r\n        return this.w;\r\n    }\r\n    set height(height: number) {\r\n        this.w = height;\r\n    }\r\n\r\n    public clone(): RectRegion {\r\n        return this.copyHelper(RectRegion.create());\r\n    }\r\n\r\n    public isNotEmpty() {\r\n        return this.x !== 0\r\n            || this.y !== 0\r\n            || this.width !== 0\r\n            || this.height !== 0;\r\n    }\r\n}","import { JudgeUtils } from \"./JudgeUtils\";\r\n\r\ndeclare var document: any;\r\n\r\nexport class DomQuery {\r\n    public static create(eleStr: string);\r\n    public static create(dom: HTMLElement);\r\n\r\n    public static create(...args) {\r\n        var obj = new this(args[0]);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _doms: Array<HTMLElement> = null;\r\n\r\n    constructor(eleStr: string);\r\n    constructor(dom: HTMLElement);\r\n\r\n    constructor(...args) {\r\n        if (JudgeUtils.isDom(args[0])) {\r\n            this._doms = [args[0]];\r\n        }\r\n        else if (this._isDomEleStr(args[0])) {\r\n            this._doms = [this._buildDom(args[0])];\r\n        }\r\n        else {\r\n            this._doms = document.querySelectorAll(args[0]);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public get(index) {\r\n        return this._doms[index];\r\n    }\r\n\r\n\r\n    public prepend(eleStr: string);\r\n    public prepend(dom: HTMLElement);\r\n\r\n    public prepend(...args) {\r\n        var targetDom: HTMLElement = null;\r\n\r\n        targetDom = this._buildDom(args[0]);\r\n\r\n        for (let dom of this._doms) {\r\n            if (dom.nodeType === 1) {\r\n                dom.insertBefore(targetDom, dom.firstChild);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public prependTo(eleStr: string) {\r\n        var targetDom: DomQuery = null;\r\n\r\n        targetDom = DomQuery.create(eleStr);\r\n\r\n        for (let dom of this._doms) {\r\n            if (dom.nodeType === 1) {\r\n                targetDom.prepend(dom);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public remove() {\r\n        for (let dom of this._doms) {\r\n            if (dom && dom.parentNode && dom.tagName != 'BODY') {\r\n                dom.parentNode.removeChild(dom);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public css(property: string, value: string) {\r\n        for (let dom of this._doms) {\r\n            dom.style[property] = value;\r\n        }\r\n    }\r\n\r\n    public attr(name: string);\r\n    public attr(name: string, value: string);\r\n\r\n    public attr(...args) {\r\n        if (args.length === 1) {\r\n            let name = args[0];\r\n\r\n            return this.get(0).getAttribute(name);\r\n        }\r\n        else {\r\n            let name = args[0],\r\n                value = args[1];\r\n\r\n            for (let dom of this._doms) {\r\n                dom.setAttribute(name, value);\r\n            }\r\n        }\r\n    }\r\n\r\n    public text(str?: string) {\r\n        var dom = this.get(0);\r\n\r\n        if (str !== void 0) {\r\n            if (dom.textContent !== void 0) {\r\n                dom.textContent = str;\r\n            }\r\n            else {\r\n                dom.innerText = str;\r\n            }\r\n        }\r\n        else {\r\n            return dom.textContent !== void 0 ? dom.textContent : dom.innerText;\r\n        }\r\n    }\r\n\r\n    private _isDomEleStr(eleStr: string) {\r\n        return eleStr.match(/<(\\w+)[^>]*><\\/\\1>/) !== null;\r\n    }\r\n\r\n    private _buildDom(eleStr: string): HTMLElement;\r\n    private _buildDom(dom: HTMLHtmlElement): HTMLElement;\r\n\r\n    private _buildDom(...args): HTMLElement {\r\n        if (JudgeUtils.isString(args[0])) {\r\n            let div = this._createElement(\"div\"),\r\n                eleStr: string = args[0];\r\n\r\n            div.innerHTML = eleStr;\r\n\r\n            return div.firstChild;\r\n        }\r\n\r\n        return args[0];\r\n    }\r\n\r\n    private _createElement(eleStr) {\r\n        return document.createElement(eleStr);\r\n    }\r\n}","import { JudgeUtils } from \"../utils/JudgeUtils\";\r\n\r\ndeclare var global: NodeJS.Global, window: Window;\r\nexport var root: any;\r\n\r\nif (JudgeUtils.isNodeJs() && typeof global != \"undefined\") {\r\n    root = global;\r\n}\r\nelse {\r\n    root = window;\r\n}","export enum EScreenSize {\r\n    FULL\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../definition/typescript/decorator/singleton\";\r\nimport { Log } from \"../utils/Log\";\r\nimport { Vector2 } from \"../math/Vector2\";\r\nimport { IView, ViewWebGL } from \"../structure/View\";\r\nimport { ContextConfigData, MainData } from \"../core/data/MainData\";\r\nimport { RectRegion } from \"../structure/RectRegion\";\r\nimport { Color } from \"../structure/Color\";\r\nimport { DomQuery } from \"wonder-commonlib/dist/es2015/utils/DomQuery\";\r\nimport { root } from \"../definition/Variable\";\r\nimport { requireCheck, it, ensure } from \"../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { EScreenSize } from \"./EScreenSize\";\r\n\r\n/*!\r\n DeviceManager is responsible for global setting of gl\r\n */\r\n@singleton()\r\n@registerClass(\"DeviceManager\")\r\nexport class DeviceManager {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { }\r\n\r\n    /*!\r\n     test order:\r\n     scissor test -> depth test -> stencil test -> specular add -> fog -> alpha blend -> write mask\r\n     */\r\n\r\n    /*!\r\n     The scissor test culls pixels that are outside of the scissor rectangle, a user-defined rectangular sub-section of the render target.\r\n     The scissor rectangle could be used to indicate the area of the render target where the game world is drawn. The area outside the rectangle is culled and could be devoted to a game's GUI. The scissor test cannot cull non-rectangular areas.\r\n     Scissor rectangles cannot be set larger than the render target, but they can be set larger than the viewport.\r\n     The scissor rectangle is managed by a device render state. A scissor test is enabled or disabled by setting the renderstate to TRUE or FALSE. This test is performed after the fragment color is computed but before alpha testing. IDirect3DDevice9\r\n     */\r\n    private _scissorTest: boolean = false;\r\n    get scissorTest() {\r\n        return this._scissorTest;\r\n    }\r\n    set scissorTest(scissorTest: boolean) {\r\n        var gl = this.gl;\r\n\r\n        if (this._scissorTest === scissorTest) {\r\n            return;\r\n        }\r\n\r\n        if (scissorTest) {\r\n            gl.enable(gl.SCISSOR_TEST);\r\n        }\r\n        else {\r\n            gl.disable(gl.SCISSOR_TEST);\r\n        }\r\n\r\n        this._scissorTest = scissorTest;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name setScissor\r\n     * @description Set the active scissor rectangle on the specified device.\r\n     * @param {Number} x The pixel space x-coordinate of the bottom left corner of the scissor rectangle.\r\n     * @param {Number} y The pixel space y-coordinate of the bottom left corner of the scissor rectangle.\r\n     * @param {Number} w The width of the scissor rectangle in pixels.\r\n     * @param {Number} h The height of the scissor rectangle in pixels.\r\n     */\r\n    public setScissor(x: number, y: number, width: number, height: number) {\r\n        if (this._scissorRegion.y === y && this._scissorRegion.width === width && this._scissorRegion.height === height) {\r\n            return;\r\n        }\r\n\r\n        this.gl.scissor(x, y, width, height);\r\n\r\n        this._scissorRegion.set(x, y, width, height);\r\n\r\n        this.scissorTest = true;\r\n    }\r\n\r\n    /*! Difference between viewports and scissor rectangles\r\n\r\n     Viewports are basically scaled views, the left side is 0 and the right side is 1. The entire view will be scaled down into that viewport after everything is projected.\r\n\r\n     Scissor tests clip to a rectangle inside that viewport. Instead of rendering from 0 to 1, you render from .2 to .8, with black bars on the outside. This actually cuts off a portion of what would normally be visible (if you used a viewport of the same size, you'd see the same amount but shrunk slightly).\r\n\r\n     Viewports are used for full views (consider 3D Studio Max, each viewport is the full view from that angle, but fit into a single square). Scissor tests are used to cut out extra pixels that you don't want/need to be affected (lights in deferred rendering, for instance, everything outside the range is not affected, so why bother calculating that if you already know it's not lit, just scissor around the projected sphere and forget about everything beyond that).\r\n     */\r\n\r\n    /**\r\n     * @function\r\n     * @name setViewport\r\n     * @description Set the active rectangle for rendering on the specified device.\r\n     * @param {Number} x The pixel space x-coordinate of the bottom left corner of the viewport.\r\n     * @param {Number} y The pixel space y-coordinate of the bottom left corner of the viewport.\r\n     * @param {Number} w The width of the viewport in pixels.\r\n     * @param {Number} h The height of the viewport in pixels.\r\n     */\r\n    public setViewport(x: number, y: number, width: number, height: number) {\r\n        if (this._viewport.x === x && this._viewport.y === y && this._viewport.width === width && this._viewport.height === height) {\r\n            return;\r\n        }\r\n\r\n        this._viewport.set(x, y, width, height);\r\n        this.gl.viewport(x, y, width, height);\r\n    }\r\n\r\n    public getViewport() {\r\n        return this._viewport;\r\n    }\r\n\r\n\r\n    //todo set depth func?\r\n    /*! 默认情况是将需要绘制的新像素的z值与深度缓冲区中对应位置的z值进行比较，如果比深度缓存中的值小，那么用新像素的颜色值更新帧缓存中对应像素的颜色值。\r\n     但是可以使用glDepthFunc(func)来对这种默认测试方式进行修改。\r\n     其中参数func的值可以为GL_NEVER（没有处理）、GL_ALWAYS（处理所有）、GL_LESS（小于）、GL_LEQUAL（小于等于）、GL_EQUAL（等于）、GL_GEQUAL（大于等于）、GL_GREATER（大于）或GL_NOTEQUAL（不等于），其中默认值是GL_LESS。\r\n\r\n     gl.depthFunc(gl.LEQUAL);\r\n     */\r\n\r\n    private _depthTest: boolean = null;\r\n    get depthTest() {\r\n        return this._depthTest;\r\n    }\r\n\r\n    set depthTest(depthTest: boolean) {\r\n        var gl = this.gl;\r\n\r\n        if (this._depthTest !== depthTest) {\r\n            if (depthTest) {\r\n                gl.enable(gl.DEPTH_TEST);\r\n            }\r\n            else {\r\n                gl.disable(gl.DEPTH_TEST);\r\n            }\r\n\r\n            this._depthTest = depthTest;\r\n        }\r\n    }\r\n\r\n    private _depthFunc: EDepthFunction = null;\r\n    get depthFunc() {\r\n        return this._depthFunc;\r\n    }\r\n    set depthFunc(depthFunc: EDepthFunction) {\r\n        var gl = this.gl;\r\n\r\n        if (this._depthFunc !== depthFunc) {\r\n            gl.depthFunc(gl[depthFunc]);\r\n\r\n            this._depthFunc = depthFunc;\r\n        }\r\n    }\r\n\r\n\r\n    private _side: ESide = null;\r\n    get side() {\r\n        return this._side;\r\n    }\r\n\r\n    set side(side: ESide) {\r\n        var gl = this.gl;\r\n\r\n        if (this._side !== side) {\r\n            switch (side) {\r\n                case ESide.NONE:\r\n                    gl.enable(gl.CULL_FACE);\r\n                    gl.cullFace(gl.FRONT_AND_BACK);\r\n                    break;\r\n                case ESide.BOTH:\r\n                    gl.disable(gl.CULL_FACE);\r\n                    break;\r\n                case ESide.FRONT:\r\n                    gl.enable(gl.CULL_FACE);\r\n                    gl.cullFace(gl.BACK);\r\n                    break;\r\n                case ESide.BACK:\r\n                    gl.enable(gl.CULL_FACE);\r\n                    gl.cullFace(gl.FRONT);\r\n                    break;\r\n                default:\r\n                    Log.error(true, Log.info.FUNC_UNEXPECT(\"side\", side));\r\n                    break;\r\n            }\r\n\r\n            this._side = side;\r\n        }\r\n    }\r\n\r\n    /*!\r\n     偏移值是在z值计算后、深度检测之前加上的，此时坐标已经被映射到Normalized Device Coordinates中了，\r\n     而此时的z轴是向内的（opengl的z轴是向外的），因此多边形偏移量为正值的话，意味着往远处移动，否则往近处移动。\r\n     可参考下面的说明：\r\n     The results are summed to produce the depth offset. This offset is applied in screen space, typically with positive Z pointing into the screen.\r\n     the offset is calculated after the normal Z calculations, but applied before the depth test and before being written to the depth buffer.\r\n     */\r\n    public polygonOffset: Vector2 = null;\r\n\r\n    private _polygonOffsetMode: EPolygonOffsetMode = null;\r\n    get polygonOffsetMode() {\r\n        return this._polygonOffsetMode;\r\n    }\r\n    set polygonOffsetMode(polygonOffsetMode: EPolygonOffsetMode) {\r\n        var gl = this.gl;\r\n\r\n        if (this._polygonOffsetMode !== polygonOffsetMode) {\r\n            switch (polygonOffsetMode) {\r\n                case EPolygonOffsetMode.NONE:\r\n                    gl.polygonOffset(0.0, 0.0);\r\n                    gl.disable(gl.POLYGON_OFFSET_FILL);\r\n                    break;\r\n                case EPolygonOffsetMode.IN:\r\n                    gl.enable(gl.POLYGON_OFFSET_FILL);\r\n                    gl.polygonOffset(1.0, 1.0);\r\n                    break;\r\n                case EPolygonOffsetMode.OUT:\r\n                    gl.enable(gl.POLYGON_OFFSET_FILL);\r\n                    gl.polygonOffset(-1.0, -1.0);\r\n                    break;\r\n                case EPolygonOffsetMode.CUSTOM:\r\n                    gl.enable(gl.POLYGON_OFFSET_FILL);\r\n                    Log.error(!this.polygonOffset, Log.info.FUNC_MUST_DEFINE(\"polygonOffset\"));\r\n                    gl.polygonOffset(this.polygonOffset.x, this.polygonOffset.y);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            this._polygonOffsetMode = polygonOffsetMode;\r\n        }\r\n    }\r\n\r\n    private _depthWrite: boolean = null;\r\n    get depthWrite() {\r\n        return this._depthWrite;\r\n    }\r\n    set depthWrite(depthWrite: boolean) {\r\n        if (this._depthWrite !== depthWrite) {\r\n            this.gl.depthMask(depthWrite);\r\n\r\n            this._depthWrite = depthWrite;\r\n        }\r\n    }\r\n\r\n    /*! blend record\r\n     所谓源颜色和目标颜色，是跟绘制的顺序有关的。假如先绘制了一个红色的物体，再在其上绘制绿色的物体。则绿色是源颜色，红色是目标颜色。如果顺序反过来，则 红色就是源颜色，绿色才是目标颜色。在绘制时，应该注意顺序，使得绘制的源颜色与设置的源因子对应，目标颜色与设置的目标因子对应。不要被混乱的顺序搞晕 了。\r\n\r\n\r\n     也许你迫不及待的想要绘制一个三维的带有半透明物体的场景了。但是现在恐怕还不行，还有一点是在进行三维场景的混合时必须注意的，那就是深度缓冲。\r\n     总结起来，绘制顺序就是：首先绘制所有不透明的物体。如果两个物体都是不透明的，则谁先谁后 都没有关系。然后，将深度缓冲区设置为只读。接下来，绘制所有半透明的物体。如果两个物体都是半透明的，则谁先谁后只需要根据自己的意愿（注意了，先绘制 的将成为“目标颜色”，后绘制的将成为“源颜色”，所以绘制的顺序将会对结果造成一些影响）。最后，将深度缓冲区设置为可读可写形式。\r\n\r\n     在进行混合时，绘制的顺序十分重要。因为在绘制时，正要绘制上去的是源颜色，原来存在的是目标颜色，因此先绘制的物体就成为目标颜色，后来绘制的则成为源颜色。绘制的顺序要考虑清楚，将目标颜色和设置的目标因子相对应，源颜色和设置的源因子相对应。\r\n     在进行三维混合时，不仅要考虑源因子和目标因子，还应该考虑深度缓冲区。必须先绘制所有不透明的物体，再绘制半透明的物体。在绘制半透明物体时前，还需要将深度缓冲区设置为只读形式，否则可能出现画面错误。\r\n     */\r\n\r\n    private _blend: boolean = null;\r\n    get blend() {\r\n        return this._blend;\r\n    }\r\n    set blend(blend: boolean) {\r\n        var gl = this.gl;\r\n\r\n        if (this._blend !== blend) {\r\n            if (blend) {\r\n                gl.enable(gl.BLEND);\r\n            }\r\n            else {\r\n                gl.disable(gl.BLEND);\r\n            }\r\n\r\n            this._blend = blend;\r\n        }\r\n    }\r\n\r\n    private _alphaToCoverage: boolean = null;\r\n    get alphaToCoverage() {\r\n        return this._alphaToCoverage;\r\n    }\r\n    set alphaToCoverage(alphaToCoverage: boolean) {\r\n        var gl = this.gl;\r\n\r\n        if (this._alphaToCoverage !== alphaToCoverage) {\r\n            if (alphaToCoverage) {\r\n                gl.enable(gl.SAMPLE_ALPHA_TO_COVERAGE);\r\n            }\r\n            else {\r\n                gl.disable(gl.SAMPLE_ALPHA_TO_COVERAGE);\r\n            }\r\n\r\n            this._alphaToCoverage = alphaToCoverage;\r\n        }\r\n    }\r\n\r\n    public view: IView = null;\r\n    public gl: WebGLRenderingContext = null;\r\n    public contextConfig: ContextConfigData = null;\r\n\r\n    private _writeRed: boolean = null;\r\n    private _writeGreen: boolean = null;\r\n    private _writeBlue: boolean = null;\r\n    private _writeAlpha: boolean = null;\r\n    private _blendSrc: EBlendFunc = null;\r\n    private _blendDst: EBlendFunc = null;\r\n    private _blendEquation: EBlendEquation = null;\r\n    private _blendFuncSeparate: Array<EBlendFunc> = null;\r\n    private _blendEquationSeparate: Array<EBlendEquation> = null;\r\n    private _scissorRegion: RectRegion = RectRegion.create();\r\n    private _viewport: RectRegion = RectRegion.create();\r\n    private _clearColor: Color = null;\r\n    private _pixelRatio: number = null;\r\n\r\n    /**\r\n     * @function\r\n     * @name setBlendFunction\r\n     * @description Configures blending operations.\r\n     * @param {pc.BLENDMODE} blendSrc The source blend function.\r\n     * @param {pc.BLENDMODE} blendDst The destination blend function.\r\n     */\r\n    public setBlendFunc(blendSrc: EBlendFunc, blendDst: EBlendFunc) {\r\n        if ((this._blendSrc !== blendSrc) || (this._blendDst !== blendDst)) {\r\n            this._blend && this.gl.blendFunc(this.gl[blendSrc], this.gl[blendDst]);\r\n            this._blendSrc = blendSrc;\r\n            this._blendDst = blendDst;\r\n        }\r\n    }\r\n    /*!\r\n     OpenGL gives us even more flexibility by allowing us to change the operator between the source and destination part of the equation. Right now, the source and destination components are added together, but we could also subtract them if we want. glBlendEquation(GLenum mode) allows us to set this operation and has 3 possible options:\r\n\r\n     GL_FUNC_ADD: the default, adds both components to each other: C¯result=Src+Dst.\r\n     GL_FUNC_SUBTRACT: subtracts both components from each other: C¯result=Src−Dst.\r\n     GL_FUNC_REVERSE_SUBTRAThe default blend equation is\r\n\r\n     default is FUNC_ADD\r\n     */\r\n\r\n    /**\r\n     * @function\r\n     * @name setBlendEquation\r\n     * @description Configures the blending equation. .\r\n     * @param blendEquation The blend equation.\r\n     */\r\n    public setBlendEquation(blendEquation: EBlendEquation) {\r\n        if (this._blendEquation !== blendEquation) {\r\n            this._blend && this.gl.blendEquation(this.gl[blendEquation]);\r\n            this._blendEquation = blendEquation;\r\n        }\r\n    }\r\n\r\n    public setBlendFuncSeparate(blendFuncSeparate: Array<EBlendFunc>) {\r\n        var gl = this.gl;\r\n\r\n        if (!this._blendFuncSeparate || this._blendFuncSeparate[0] !== blendFuncSeparate[0] || this._blendFuncSeparate[1] !== blendFuncSeparate[1]) {\r\n            this._blend && gl.blendFuncSeparate(gl[blendFuncSeparate[0]], gl[blendFuncSeparate[1]], gl[blendFuncSeparate[2]], gl[blendFuncSeparate[3]]);\r\n            this._blendFuncSeparate = blendFuncSeparate;\r\n        }\r\n    }\r\n\r\n    public setBlendEquationSeparate(blendEquationSeparate: Array<EBlendEquation>) {\r\n        var gl = this.gl;\r\n\r\n        if (!this._blendEquationSeparate || this._blendEquationSeparate[0] !== blendEquationSeparate[0] || this._blendEquationSeparate[1] !== blendEquationSeparate[1]) {\r\n            this._blend && gl.blendEquationSeparate(gl[blendEquationSeparate[0]], gl[blendEquationSeparate[1]]);\r\n            this._blendEquationSeparate = blendEquationSeparate;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * @function\r\n     * @name setColorWrite\r\n     * @description Enables or disables writes to the color buffer. Once this state\r\n     * is set, it persists until it is changed. By default, color writes are enabled\r\n     * for all color channels.\r\n     * @param {Boolean} writeRed true to enable writing  of the red channel and false otherwise.\r\n     * @param {Boolean} writeGreen true to enable writing  of the green channel and false otherwise.\r\n     * @param {Boolean} writeBlue true to enable writing  of the blue channel and false otherwise.\r\n     * @param {Boolean} writeAlpha true to enable writing  of the alpha channel and false otherwise.\r\n     * @example\r\n     * // Just write alpha into the frame buffer\r\n     * device.setColorWrite(false, false, false, true);\r\n     */\r\n    public setColorWrite(writeRed, writeGreen, writeBlue, writeAlpha) {\r\n        if (this._writeRed !== writeRed\r\n            || this._writeGreen !== writeGreen\r\n            || this._writeBlue !== writeBlue\r\n            || this._writeAlpha !== writeAlpha) {\r\n            this.gl.colorMask(writeRed, writeGreen, writeBlue, writeAlpha);\r\n\r\n            this._writeRed = writeRed;\r\n            this._writeGreen = writeGreen;\r\n            this._writeBlue = writeBlue;\r\n            this._writeAlpha = writeAlpha;\r\n        }\r\n    }\r\n\r\n    public clear(options: any) {\r\n        var gl = this.gl,\r\n            color = options.color;\r\n\r\n        this._setClearColor(color);\r\n\r\n        this.setColorWrite(true, true, true, true);\r\n\r\n        /*! optimize in ANGLE:\r\n         (need more verify:set color mask all false before clear?\r\n         so here not do the recommendation)\r\n\r\n\r\n         Recommendation: Do Not Perform Clears with Scissors or Masks Enabled\r\n         (<<WebGL Insights>> -> chapter 1)\r\n\r\n         One of the subtle differences between the Direct3D APIs and the GL APIs is that in the former, clear calls ignore scissors and masks, while the latter applies both to clears [Koch 12]. This means that if a clear is performed with the scissors test enabled, or with a color or stencil mask in use, ANGLE must draw a quad with the requested clear values, rather than using clear. This introduces some state management overhead, as ANGLE must switch out all the cached state such as shaders, sampler and texture bindings, and vertex data related to the draw call stream. It then must set up all the appropriate state for the clear, perform the clear itself, and then reset all of the affected state back to its prior settings once the clear is complete. If multiple draw buffers are currently in use, using WEBGL_draw_ buffers, then the performance implications of this emulated clear are com- pounded, as the draw must be performed once for each target. Clearing buffers without scissors or masks enabled avoids this overhead.\r\n         */\r\n\r\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT | gl.STENCIL_BUFFER_BIT);\r\n    }\r\n\r\n    public createGL(canvasId: string, contextConfig: ContextConfigData, useDevicePixelRatio: boolean) {\r\n        var canvas = null;\r\n\r\n        this.contextConfig = contextConfig;\r\n\r\n        if (!!canvasId) {\r\n            canvas = DomQuery.create(this._getCanvasId(canvasId)).get(0);\r\n        }\r\n        else {\r\n            canvas = DomQuery.create(\"<canvas></canvas>\").prependTo(\"body\").get(0);\r\n        }\r\n\r\n        this.view = ViewWebGL.create(canvas);\r\n\r\n        if (useDevicePixelRatio) {\r\n            this.setPixelRatio(root.devicePixelRatio);\r\n        }\r\n\r\n        this.gl = this.view.getContext(contextConfig);\r\n\r\n        if (!this.gl) {\r\n            DomQuery.create(\"<p class='not-support-webgl'></p>\").prependTo(\"body\").text(\"Your device doesn't support WebGL\");\r\n        }\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        it(\"should exist MainData.screenSize\", () => {\r\n            expect(MainData.screenSize).exist;\r\n        });\r\n    })\r\n    public setScreen() {\r\n        var screenSize = MainData.screenSize,\r\n            x = null,\r\n            y = null,\r\n            width = null,\r\n            height = null,\r\n            styleWidth = null,\r\n            styleHeight = null;\r\n\r\n        if (screenSize === EScreenSize.FULL) {\r\n            x = 0;\r\n            y = 0;\r\n            width = root.innerWidth;\r\n            height = root.innerHeight;\r\n            styleWidth = \"100%\";\r\n            styleHeight = \"100%\";\r\n\r\n            DomQuery.create(\"body\").css(\"margin\", \"0\");\r\n        }\r\n        else {\r\n            x = screenSize.x || 0;\r\n            y = screenSize.y || 0;\r\n            width = screenSize.width || root.innerWidth;\r\n            height = screenSize.height || root.innerHeight;\r\n            styleWidth = `${width}px`;\r\n            styleHeight = `${height}px`;\r\n        }\r\n\r\n        this.view.initCanvas();\r\n\r\n        this.view.x = x;\r\n        this.view.y = y;\r\n        this.view.width = width;\r\n        this.view.height = height;\r\n        this.view.styleWidth = styleWidth;\r\n        this.view.styleHeight = styleHeight;\r\n\r\n        this.setViewport(0, 0, width, height);\r\n    }\r\n\r\n    @requireCheck(function(level: number) {\r\n        it(`level should > 0, but actual is ${level}`, () => {\r\n            expect(level).greaterThan(0);\r\n        });\r\n    })\r\n    public setHardwareScaling(level: number) {\r\n        var width = this.view.width / level,\r\n            height = this.view.height / level;\r\n\r\n        this.view.width = width;\r\n        this.view.height = height;\r\n\r\n        this.setViewport(0, 0, width, height);\r\n    }\r\n\r\n    public setPixelRatio(pixelRatio: number) {\r\n        this.view.width = Math.round(this.view.width * pixelRatio);\r\n        this.view.height = Math.round(this.view.height * pixelRatio);\r\n\r\n        this._pixelRatio = pixelRatio;\r\n    }\r\n\r\n    public getPixelRatio() {\r\n        return this._pixelRatio;\r\n    }\r\n\r\n    private _setClearColor(color: Color) {\r\n        if (this._clearColor && this._clearColor.isEqual(color)) {\r\n            return;\r\n        }\r\n\r\n        this.gl.clearColor(color.r, color.g, color.b, color.a);\r\n\r\n        this._clearColor = color;\r\n    }\r\n\r\n    @ensure(function(id: string) {\r\n        it(\"canvas id should be #xxx\", () => {\r\n            expect(/#[^#]+/.test(id)).true;\r\n        });\r\n    })\r\n    private _getCanvasId(canvasId: string) {\r\n        if (canvasId.indexOf('#') > -1) {\r\n            return canvasId;\r\n        }\r\n\r\n        return `#${canvasId}`;\r\n    }\r\n}\r\n\r\nexport enum EDepthFunction {\r\n    NEVER = <any>\"NEVER\",\r\n    ALWAYS = <any>\"ALWAYS\",\r\n    LESS = <any>\"LESS\",\r\n    LEQUAL = <any>\"LEQUAL\",\r\n    EQUAL = <any>\"EQUAL\",\r\n    GEQUAL = <any>\"GEQUAL\",\r\n    GREATER = <any>\"GREATER\",\r\n    NOTEQUAL = <any>\"NOTEQUAL\"\r\n}\r\n\r\nexport enum ESide {\r\n    NONE,\r\n    BOTH,\r\n    //CCW\r\n    BACK,\r\n    //CW\r\n    FRONT\r\n}\r\n\r\nexport enum EPolygonOffsetMode {\r\n    NONE,\r\n    IN,\r\n    OUT,\r\n    CUSTOM\r\n}\r\n\r\nexport enum EBlendFunc {\r\n    ZERO = <any>\"ZEOR\",\r\n    ONE = <any>\"ONE\",\r\n    SRC_COLOR = <any>\"SRC_COLOR\",\r\n    ONE_MINUS_SRC_COLOR = <any>\"ONE_MINUS_SRC_COLOR\",\r\n    DST_COLOR = <any>\"DST_COLOR\",\r\n    ONE_MINUS_DST_COLOR = <any>\"ONE_MINUS_DST_COLOR\",\r\n    SRC_ALPHA = <any>\"SRC_ALPHA\",\r\n    SRC_ALPHA_SATURATE = <any>\"SRC_ALPHA_SATURATE\",\r\n    ONE_MINUS_SRC_ALPHA = <any>\"ONE_MINUS_SRC_ALPHA\",\r\n    DST_ALPHA = <any>\"DST_ALPHA\",\r\n    ONE_MINUS_DST_ALPH = <any>\"ONE_MINUS_DST_ALPHA\"\r\n}\r\n\r\nexport enum EBlendEquation {\r\n    ADD = <any>\"FUNC_ADD\",\r\n    SUBTRACT = <any>\"FUNC_SUBTRACT\",\r\n    REVERSE_SUBTRAC = <any>\"FUNC_REVERSE_SUBTRACT\"\r\n}\r\n\r\nexport enum EBlendType {\r\n    NONE,\r\n    NORMAL,\r\n    ADDITIVE,\r\n    ADDITIVEALPHA,\r\n    MULTIPLICATIVE,\r\n    PREMULTIPLIED\r\n}\r\n\r\nexport enum ECanvasType {\r\n    TwoDUI = <any>\"TwoDUI\"\r\n}\r\n\r\nexport type CanvasMapData = {\r\n    canvas: HTMLCanvasElement,\r\n    context: CanvasRenderingContext2D\r\n}","import { Entity } from \"../../core/Entity\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\n\r\nexport abstract class Buffer extends Entity {\r\n    public buffer: any = null;\r\n\r\n    public abstract resetData(data: any, ...args): void;\r\n\r\n    public dispose() {\r\n        DeviceManager.getInstance().gl.deleteBuffer(this.buffer);\r\n        delete this.buffer;\r\n    }\r\n}","export enum EBufferUsage {\r\n    STREAM_DRAW = <any>\"STREAM_DRAW\",\r\n    STATIC_DRAW = <any>\"STATIC_DRAW\",\r\n    DYNAMIC_DRAW = <any>\"DYNAMIC_DRAW\"\r\n}","import { Buffer } from \"./Buffer\";\r\nimport { EBufferType } from \"./EBufferType\";\r\nimport { EBufferUsage } from \"./EBufferUsage\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\n\r\nexport abstract class CommonBuffer extends Buffer {\r\n    public type: EBufferType = null;\r\n    public count: number = null;\r\n    public usage: EBufferUsage = null;\r\n\r\n    protected resetBufferData(glBufferTargetStr: string, typedData: any, offset: number = 0) {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        if (this.usage === EBufferUsage.STATIC_DRAW && offset === 0) {\r\n            /*!\r\n             change to DYNAMIC_DRAW\r\n             */\r\n            gl.bufferData(gl[glBufferTargetStr], typedData, gl.DYNAMIC_DRAW);\r\n\r\n            return;\r\n        }\r\n\r\n        gl.bufferSubData(gl[glBufferTargetStr], offset, typedData);\r\n    }\r\n}","export enum EBufferType {\r\n    BYTE = <any>\"BYTE\",\r\n    UNSIGNED_BYTE = <any>\"UNSIGNED_BYTE\",\r\n    SHORT = <any>\"SHORT\",\r\n    UNSIGNED_SHORT = <any>\"UNSIGNED_SHORT\",\r\n    INT = <any>\"INT\",\r\n    UNSIGNED_INT = <any>\"UNSIGNED_INT\",\r\n    FLOAT = <any>\"FLOAT\"\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { ElementBuffer } from \"../../../../renderer/buffer/ElementBuffer\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { Buffer } from \"../../../../renderer/buffer/Buffer\";\r\nimport { DeviceManager } from \"../../../../device/DeviceManager\";\r\n\r\n@registerClass(\"BufferTable\")\r\nexport class BufferTable {\r\n    public static lastBindedArrayBufferListUidStr: string = null;\r\n    public static lastBindedElementBuffer: ElementBuffer = null;\r\n\r\n    private static _table: Hash<Buffer> = Hash.create<Buffer>();\r\n\r\n    public static bindIndexBuffer(indexBuffer: ElementBuffer) {\r\n        var gl: any = null;\r\n\r\n        if (this.lastBindedElementBuffer === indexBuffer) {\r\n            return;\r\n        }\r\n\r\n        this.lastBindedElementBuffer = indexBuffer;\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer.buffer);\r\n    }\r\n\r\n    public static hasBuffer(key: string) {\r\n        return this._table.hasChild(key);\r\n    }\r\n\r\n    public static addBuffer(key: string, buffer: Buffer) {\r\n        this._table.addChild(key, buffer);\r\n    }\r\n\r\n    public static getBuffer<T>(key: string): T {\r\n        return <any>this._table.getChild(key);\r\n    }\r\n\r\n    public static dispose() {\r\n        this._table.forEach((buffer: Buffer) => {\r\n            buffer.dispose();\r\n        });\r\n\r\n        this.lastBindedArrayBufferListUidStr = null;\r\n        this.lastBindedElementBuffer = null;\r\n    }\r\n\r\n    public static clearAll() {\r\n        this._table.removeAllChildren();\r\n\r\n        this.lastBindedArrayBufferListUidStr = null;\r\n        this.lastBindedElementBuffer = null;\r\n    }\r\n\r\n    public static resetBindedArrayBuffer() {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\r\n        this.lastBindedArrayBufferListUidStr = null;\r\n    }\r\n\r\n    public static resetBindedElementBuffer() {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\r\n\r\n        this.lastBindedElementBuffer = null;\r\n    }\r\n}\r\n\r\nexport enum BufferTableKey {\r\n    PROCEDURAL_VERTEX = <any>\"PROCEDURAL_VERTEX\",\r\n    PROCEDURAL_INDEX = <any>\"PROCEDURAL_INDEX\"\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../definition/typescript/decorator/singleton\";\r\nimport { DeviceManager } from \"./DeviceManager\";\r\nimport { Log } from \"../utils/Log\";\r\n\r\n@singleton()\r\n@registerClass(\"GPUDetector\")\r\nexport class GPUDetector {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { }\r\n\r\n    get gl() {\r\n        return DeviceManager.getInstance().gl;\r\n    }\r\n\r\n    public maxTextureUnit: number = null;\r\n    public maxTextureSize: number = null;\r\n    public maxCubemapTextureSize: number = null;\r\n    public maxAnisotropy: number = null;\r\n    public maxBoneCount: number = null;\r\n    public extensionCompressedTextureS3TC: any = null;\r\n    public extensionTextureFilterAnisotropic: any = null;\r\n    public extensionInstancedArrays: any = null;\r\n    public extensionUintIndices: boolean = null;\r\n    public extensionDepthTexture: boolean = null;\r\n    public extensionVAO: any = null;\r\n    public extensionStandardDerivatives: boolean = null;\r\n    public precision: number = null;\r\n\r\n    private _isDetected: boolean = false;\r\n\r\n    //todo test\r\n    public detect() {\r\n        this._isDetected = true;\r\n\r\n        this._detectExtension();\r\n        this._detectCapabilty();\r\n    }\r\n\r\n    private _detectExtension() {\r\n        this.extensionCompressedTextureS3TC = this._getExtension(\"WEBGL_compressed_texture_s3tc\");\r\n        this.extensionTextureFilterAnisotropic = this._getExtension(\"EXT_texture_filter_anisotropic\");\r\n        this.extensionInstancedArrays = this._getExtension(\"ANGLE_instanced_arrays\");\r\n        this.extensionUintIndices = this._getExtension(\"element_index_uint\");\r\n        this.extensionDepthTexture = this._getExtension(\"depth_texture\");\r\n        this.extensionVAO = this._getExtension(\"vao\");\r\n        this.extensionStandardDerivatives = this._getExtension(\"standard_derivatives\");\r\n    }\r\n\r\n    private _detectCapabilty() {\r\n        var gl = this.gl;\r\n\r\n        this.maxTextureUnit = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\r\n        this.maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\r\n        this.maxCubemapTextureSize = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\r\n        this.maxAnisotropy = this._getMaxAnisotropy();\r\n\r\n        this.maxBoneCount = this._getMaxBoneCount();\r\n\r\n        //todo use map instead\r\n        // alert(\"maxBoneCount:\" + this.maxBoneCount);\r\n\r\n        this._detectPrecision();\r\n    }\r\n\r\n    private _getExtension(name: string) {\r\n        var extension,\r\n            gl = this.gl;\r\n\r\n        switch (name) {\r\n            case \"EXT_texture_filter_anisotropic\":\r\n                extension = gl.getExtension(\"EXT_texture_filter_anisotropic\") || gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") || gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");\r\n                break;\r\n            case \"WEBGL_compressed_texture_s3tc\":\r\n                extension = gl.getExtension(\"WEBGL_compressed_texture_s3tc\") || gl.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\") || gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");\r\n                break;\r\n            case \"WEBGL_compressed_texture_pvrtc\":\r\n                extension = gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") || gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");\r\n                break;\r\n            case \"ANGLE_instanced_arrays\":\r\n                extension = gl.getExtension(\"ANGLE_instanced_arrays\");\r\n                break;\r\n            case \"element_index_uint\":\r\n                extension = gl.getExtension(\"OES_element_index_uint\") !== null;\r\n                break;\r\n            case \"depth_texture\":\r\n                extension = gl.getExtension(\"WEBKIT_WEBGL_depth_texture\") !== null || gl.getExtension(\"WEBGL_depth_texture\") !== null;\r\n                break;\r\n            case \"vao\":\r\n                extension = gl.getExtension(\"OES_vertex_array_object\");\r\n                break;\r\n            case \"standard_derivatives\":\r\n                extension = gl.getExtension(\"OES_standard_derivatives\");\r\n                break;\r\n            default:\r\n                extension = gl.getExtension(name);\r\n                break;\r\n        }\r\n\r\n        return extension;\r\n    }\r\n\r\n    private _getMaxBoneCount() {\r\n        var gl = this.gl,\r\n            numUniforms: number = null,\r\n            maxBoneCount: number = null;\r\n\r\n        // Calculate a estimate of the maximum number of bones that can be uploaded to the GPU\r\n        // based on the number of available uniforms and the number of uniforms required for non-\r\n        // bone data.  This is based off of the Standard shader.  A user defined shader may have\r\n        // even less space available for bones so this calculated value can be overridden via\r\n        numUniforms = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);\r\n        numUniforms -= 4 * 4; // Model, view, projection and shadow matrices\r\n        // numUniforms -= 8;     // 8 lights max, each specifying a position vector\r\n        numUniforms -= 1;     // Eye position\r\n        numUniforms -= 4 * 4; // Up to 4 texture transforms\r\n\r\n        maxBoneCount = Math.floor(numUniforms / 4);\r\n\r\n        // Put a limit on the number of supported bones before skin partitioning must be performed\r\n        // Some GPUs have demonstrated performance issues if the number of vectors allocated to the\r\n        // skin matrix palette is left unbounded\r\n        return Math.min(maxBoneCount, 128);\r\n    }\r\n\r\n    private _getMaxAnisotropy() {\r\n        var extension = this.extensionTextureFilterAnisotropic,\r\n            gl = this.gl;\r\n\r\n        return extension !== null ? gl.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0;\r\n    }\r\n\r\n    private _detectPrecision() {\r\n        var gl = this.gl;\r\n\r\n        if (!gl.getShaderPrecisionFormat) {\r\n            this.precision = EGPUPrecision.HIGHP;\r\n\r\n            return;\r\n        }\r\n\r\n        let vertexShaderPrecisionHighpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT),\r\n            vertexShaderPrecisionMediumpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT),\r\n            //vertexShaderPrecisionLowpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_FLOAT),\r\n            fragmentShaderPrecisionHighpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT),\r\n            fragmentShaderPrecisionMediumpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT),\r\n            //fragmentShaderPrecisionLowpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_FLOAT),\r\n            highpAvailable = vertexShaderPrecisionHighpFloat.precision > 0 && fragmentShaderPrecisionHighpFloat.precision > 0,\r\n            mediumpAvailable = vertexShaderPrecisionMediumpFloat.precision > 0 && fragmentShaderPrecisionMediumpFloat.precision > 0;\r\n\r\n        if (!highpAvailable) {\r\n            if (mediumpAvailable) {\r\n                this.precision = EGPUPrecision.MEDIUMP;\r\n                Log.warn(Log.info.FUNC_NOT_SUPPORT(\"gpu\", \"highp, using mediump\"));\r\n            }\r\n            else {\r\n                this.precision = EGPUPrecision.LOWP;\r\n                Log.warn(Log.info.FUNC_NOT_SUPPORT(\"gpu\", \"highp and mediump, using lowp\"));\r\n            }\r\n        }\r\n        else {\r\n            this.precision = EGPUPrecision.HIGHP;\r\n        }\r\n    }\r\n}\r\n\r\nexport enum EGPUPrecision {\r\n    HIGHP,\r\n    MEDIUMP,\r\n    LOWP\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { CommonBuffer } from \"./CommonBuffer\";\r\nimport { EBufferType } from \"./EBufferType\";\r\nimport { EBufferUsage } from \"./EBufferUsage\";\r\nimport { ensureGetter, assert, requireCheck } from \"../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\nimport { BufferTable } from \"../../core/entityObject/scene/cache/BufferTable\";\r\nimport { GPUDetector } from \"../../device/GPUDetector\";\r\n\r\n@registerClass(\"ElementBuffer\")\r\nexport class ElementBuffer extends CommonBuffer {\r\n    public static create(data: Array<number>, type: EBufferType = null, usage: EBufferUsage = EBufferUsage.STATIC_DRAW): ElementBuffer {\r\n        var obj = new this();\r\n\r\n        obj.initWhenCreate(data, type, usage);\r\n\r\n        return obj;\r\n    }\r\n\r\n    @ensureGetter(function(typeSize: number) {\r\n        assert(typeSize > 0, Log.info.FUNC_SHOULD(\"typeSize\", `> 0, but actual is ${typeSize}`));\r\n    })\r\n    get typeSize() {\r\n        return this.data.BYTES_PER_ELEMENT;\r\n    }\r\n\r\n    public data: Uint16Array | Uint32Array = null;\r\n\r\n\r\n    public initWhenCreate(data: Array<number>, type: EBufferType, usage: EBufferUsage) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            isNeed32Bits: boolean = null,\r\n            typedData: Uint16Array | Uint32Array = null;\r\n\r\n        this.buffer = gl.createBuffer();\r\n\r\n        if (!this.buffer) {\r\n            Log.warn('Failed to create the this.buffer object');\r\n            return null;\r\n        }\r\n\r\n        if (!data) {\r\n            return null;\r\n        }\r\n\r\n        isNeed32Bits = this._checkIsNeed32Bits(data, type);\r\n        typedData = this._convertToTypedArray(isNeed32Bits, data);\r\n\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\r\n\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, typedData, gl[usage]);\r\n\r\n        BufferTable.resetBindedElementBuffer();\r\n\r\n        this._saveData(typedData, this._getType(isNeed32Bits, type), usage);\r\n\r\n        return this.buffer;\r\n    }\r\n\r\n    @requireCheck(function(data: Array<number>, type: EBufferType = null, offset: number = 0) {\r\n        assert(this.buffer, Log.info.FUNC_MUST(\"create gl buffer\"));\r\n    })\r\n    public resetData(data: Array<number>, type: EBufferType = null, offset: number = 0) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            isNeed32Bits = this._checkIsNeed32Bits(data, type),\r\n            typedData: Uint16Array | Uint32Array = this._convertToTypedArray(isNeed32Bits, data);\r\n\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\r\n\r\n        this.resetBufferData(\"ELEMENT_ARRAY_BUFFER\", typedData, offset);\r\n\r\n        //BufferTable.resetBindedElementBuffer();\r\n\r\n        this._saveData(typedData, this._getType(isNeed32Bits, type), EBufferUsage.DYNAMIC_DRAW);\r\n\r\n        return this;\r\n    }\r\n\r\n    private _convertToTypedArray(isNeed32Bits: boolean, data: Array<number>) {\r\n        return isNeed32Bits ? new Uint32Array(data) : new Uint16Array(data);\r\n    }\r\n\r\n    private _checkIsNeed32Bits(indices: Array<number>, type: EBufferType) {\r\n        var isNeed32Bits = false;\r\n\r\n        if (type !== null) {\r\n            if (type === EBufferType.UNSIGNED_INT) {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        //todo optimize?\r\n        if (GPUDetector.getInstance().extensionUintIndices) {\r\n            for (let indice of indices) {\r\n                if (indice > 65535) {\r\n                    isNeed32Bits = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            isNeed32Bits = false;\r\n        }\r\n\r\n        return isNeed32Bits;\r\n    }\r\n\r\n    @requireCheck(function(isNeed32Bits: boolean, type: EBufferType) {\r\n        if (type !== null) {\r\n            if (isNeed32Bits) {\r\n                assert(type === EBufferType.UNSIGNED_INT, Log.info.FUNC_MUST_BE(\"type\", `UNSIGNED_SHORT, but actual is ${type}`));\r\n            }\r\n            else {\r\n                assert(type === EBufferType.UNSIGNED_SHORT || type === EBufferType.UNSIGNED_INT, Log.info.FUNC_MUST_BE(\"type\", `UNSIGNED_SHORT or UNSIGNED_INT, but actual is ${type}`));\r\n            }\r\n        }\r\n    })\r\n    private _getType(isNeed32Bits: boolean, type: EBufferType) {\r\n        return type === null ? (isNeed32Bits ? EBufferType.UNSIGNED_INT : EBufferType.UNSIGNED_SHORT) : type;\r\n    }\r\n\r\n    private _saveData(data: Uint16Array | Uint32Array, type: EBufferType, usage: EBufferUsage) {\r\n        this.type = type;\r\n        this.count = data.length;\r\n        this.data = data;\r\n        this.usage = usage;\r\n    }\r\n}","export enum EBufferDataType {\r\n    VERTICE = <any>\"VERTICE\",\r\n    INDICE = <any>\"INDICE\"\r\n    // NORMAL = <any>\"NORMAL\",\r\n    // TEXCOORD = <any>\"TEXCOORD\",\r\n    // TANGENT = <any>\"TANGENT\",\r\n    // COLOR = <any>\"COLOR\",\r\n    //\r\n    // JOINT_INDICE = <any>\"JOINT_INDICE\",\r\n    // JOINT_WEIGHT = <any>\"JOINT_WEIGHT\",\r\n    //\r\n    // CUSTOM = <any>\"CUSTOM\"\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { CommonBuffer } from \"./CommonBuffer\";\r\nimport { EBufferType } from \"./EBufferType\";\r\nimport { EBufferUsage } from \"./EBufferUsage\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { BufferTable } from \"../../core/entityObject/scene/cache/BufferTable\";\r\nimport { requireCheck, assert } from \"../../definition/typescript/decorator/contract\";\r\n\r\n@registerClass(\"ArrayBuffer\")\r\nexport class ArrayBuffer extends CommonBuffer {\r\n    public static create(data: Array<number>, size: number, type: EBufferType = EBufferType.FLOAT, usage: EBufferUsage = EBufferUsage.STATIC_DRAW): ArrayBuffer {\r\n        var obj = new this();\r\n\r\n        obj.initWhenCreate(data, size, type, usage);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public size: number = null;\r\n    public data: Float32Array = null;\r\n\r\n\r\n    public initWhenCreate(data: Array<number>, size: number, type: EBufferType, usage: EBufferUsage) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            typedData: Float32Array = null;\r\n\r\n        this.buffer = gl.createBuffer();\r\n\r\n        if (!this.buffer) {\r\n            Log.warn('Failed to create the this.buffer object');\r\n            return null;\r\n        }\r\n\r\n        if (!data) {\r\n            return null;\r\n        }\r\n\r\n        typedData = this._convertToTypedArray(data, type);\r\n\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\r\n\r\n        gl.bufferData(gl.ARRAY_BUFFER, typedData, gl[usage]);\r\n\r\n        BufferTable.resetBindedArrayBuffer();\r\n\r\n        this._saveData(typedData, size, type, usage);\r\n\r\n        return this.buffer;\r\n    }\r\n\r\n    @requireCheck(function(data: Array<number>, size: number = this.size, type: EBufferType = this.type, offset: number = 0) {\r\n        assert(this.buffer, Log.info.FUNC_MUST(\"create gl buffer\"));\r\n    })\r\n    public resetData(data: Array<number>, size: number = this.size, type: EBufferType = this.type, offset: number = 0) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            typedData: Float32Array = this._convertToTypedArray(data, type);\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\r\n\r\n        this.resetBufferData(\"ARRAY_BUFFER\", typedData, offset);\r\n\r\n        //BufferTable.resetBindedArrayBuffer();\r\n\r\n        this._saveData(typedData, size, type, EBufferUsage.DYNAMIC_DRAW);\r\n\r\n        return this;\r\n    }\r\n\r\n    private _convertToTypedArray(data: Array<number>, type: EBufferType) {\r\n        return new Float32Array(data);\r\n    }\r\n\r\n    private _saveData(data: Float32Array, size: number, type: EBufferType, usage: EBufferUsage) {\r\n        this.size = size;\r\n        this.type = type;\r\n        this.count = data.length / size;\r\n        this.usage = usage;\r\n\r\n        this.data = data;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { EBufferDataType } from \"./EBufferDataType\";\r\nimport { ensure } from \"../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../../utils/Log\";\r\n\r\nconst _table = Hash.create<string>();\r\n\r\n//todo remove <any>\r\n_table.addChild(<any>EBufferDataType.VERTICE, \"vertices\");\r\n_table.addChild(<any>EBufferDataType.INDICE, \"indices\");\r\n// _table.addChild(<any>EBufferDataType.NORMAL, \"normals\");\r\n// _table.addChild(<any>EBufferDataType.TEXCOORD, \"texCoords\");\r\n// _table.addChild(<any>EBufferDataType.COLOR, \"colors\");\r\n// _table.addChild(<any>EBufferDataType.TANGENT, \"tangents\");\r\n// _table.addChild(<any>EBufferDataType.JOINT_INDICE, \"jointIndices\");\r\n// _table.addChild(<any>EBufferDataType.JOINT_WEIGHT, \"jointWeights\");\r\n\r\n@registerClass(\"BufferDataTable\")\r\nexport class BufferDataTable {\r\n    @ensure(function(result, type: EBufferDataType) {\r\n        Log.error(result === void 0, Log.info.FUNC_NOT_EXIST(type, \"in BufferDataTable\"));\r\n    })\r\n    public static getGeometryDataName(type: EBufferDataType) {\r\n        //todo remove <any>\r\n        var result = _table.getChild(<any>type);\r\n\r\n        return result;\r\n    }\r\n}","import { GameObject } from \"../../../core/entityObject/gameObject/GameObject\";\r\nimport { GeometryData } from \"./GeometryData\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { Buffer } from \"../../../renderer/buffer/Buffer\";\r\nimport { ElementBuffer } from \"../../../renderer/buffer/ElementBuffer\";\r\nimport { virtual } from \"../../../definition/typescript/decorator/virtual\";\r\nimport { EBufferDataType } from \"../../../renderer/buffer/EBufferDataType\";\r\nimport { requireCheck, it } from \"../../../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { EBufferType } from \"../../../renderer/buffer/EBufferType\";\r\nimport { EBufferUsage } from \"../../../renderer/buffer/EBufferUsage\";\r\nimport { ArrayBuffer } from \"../../../renderer/buffer/ArrayBuffer\";\r\nimport { cache } from \"../../../definition/typescript/decorator/cache\";\r\nimport { BufferDataTable } from \"../../../renderer/buffer/BufferDataTable\";\r\n\r\nexport abstract class BufferContainer {\r\n    constructor(entityObject: GameObject) {\r\n        this.entityObject = entityObject;\r\n    }\r\n\r\n    public geometryData: GeometryData = null;\r\n\r\n    protected entityObject: GameObject = null;\r\n    protected container: Hash<Buffer> = Hash.create<Buffer>();\r\n\r\n    // private _colorBuffer:ArrayBuffer = null;\r\n    // private _texCoordBuffer:ArrayBuffer = null;\r\n    // private _tangentBuffer:ArrayBuffer = null;\r\n    private _indiceBuffer: ElementBuffer = null;\r\n\r\n    // public abstract getBufferForRenderSort():Buffer;\r\n\r\n    @virtual\r\n    public createBuffersFromGeometryData() {\r\n        this.getChild(EBufferDataType.VERTICE);\r\n        // this.getChild(EBufferDataType.NORMAL);\r\n        // this.getChild(EBufferDataType.TANGENT);\r\n        // this.getChild(EBufferDataType.COLOR);\r\n        this.getChild(EBufferDataType.INDICE);\r\n        // this.getChild(EBufferDataType.TEXCOORD);\r\n    }\r\n\r\n    public removeCache(type: EBufferDataType);\r\n    public removeCache(name: string);\r\n\r\n    public removeCache(...args) {\r\n        this.container.removeChild(args[0]);\r\n    }\r\n\r\n\r\n    public getChild(type: EBufferDataType);\r\n    public getChild(type: EBufferDataType, dataName: string);\r\n\r\n    @requireCheck(function(...args) {\r\n        it(\"test arguments\", function() {\r\n            if (args.length === 2) {\r\n                let dataName = args[1];\r\n\r\n                expect(dataName).exist;\r\n                expect(dataName).be.a(\"string\");\r\n            }\r\n        });\r\n    })\r\n    public getChild(...args) {\r\n        var type = args[0],\r\n            result: any = null;\r\n\r\n        switch (type) {\r\n            case EBufferDataType.VERTICE:\r\n                result = this.getVertice(type);\r\n                break;\r\n            // case EBufferDataType.NORMAL:\r\n            //     result = this.getNormal(type);\r\n            //     break;\r\n            // case EBufferDataType.TANGENT:\r\n            //     result = this._getTangent(type);\r\n            //     break;\r\n            // case EBufferDataType.COLOR:\r\n            //     result = this._getColor(type);\r\n            //     break;\r\n            case EBufferDataType.INDICE:\r\n                result = this._getIndice(type);\r\n                break;\r\n            // case EBufferDataType.TEXCOORD:\r\n            //     result = this._getTexCoord(type);\r\n            //     break;\r\n            // case EBufferDataType.CUSTOM:\r\n            //     result = this.getCustomData(args[1]);\r\n            //     break;\r\n            default:\r\n                // result = this.getBuffer(type);\r\n                break;\r\n        }\r\n\r\n        return result;\r\n\r\n    }\r\n\r\n    public init() {\r\n    }\r\n\r\n    public dispose() {\r\n        this.container.forEach((buffer: Buffer) => {\r\n            buffer.dispose();\r\n        });\r\n\r\n        this.geometryData.dispose();\r\n    }\r\n\r\n    protected abstract getVertice(type: EBufferDataType);\r\n    // protected abstract getNormal(type:EBufferDataType);\r\n\r\n    // @virtual\r\n    // protected getCustomData(dataName:string){\r\n    //     return null;\r\n    // }\r\n\r\n    // @virtual\r\n    // protected getBuffer(type:EBufferDataType){\r\n    //     Log.error(true, wdCb.Log.info.FUNC_UNKNOW(`EBufferDataType: ${type}`));\r\n    //\r\n    //     return null;\r\n    // }\r\n\r\n    protected createOnlyOnceAndUpdateArrayBuffer(bufferAttriName: string, data: Array<number>, size: number, type: EBufferType = EBufferType.FLOAT, offset: number = 0, usage: EBufferUsage = EBufferUsage.STATIC_DRAW) {\r\n        var buffer: ArrayBuffer = this[bufferAttriName];\r\n\r\n        if (buffer) {\r\n            buffer.resetData(data, size, type, offset);\r\n\r\n            return;\r\n        }\r\n\r\n        this[bufferAttriName] = ArrayBuffer.create(data, size, type, usage);\r\n    }\r\n\r\n    protected createOnlyOnceAndUpdateElememntBuffer(bufferAttriName: string, data: Array<number>, type: EBufferType = null, offset: number = 0, usage: EBufferUsage = EBufferUsage.STATIC_DRAW) {\r\n        var buffer: ElementBuffer = this[bufferAttriName];\r\n\r\n        if (buffer) {\r\n            buffer.resetData(data, type, offset);\r\n\r\n            return;\r\n        }\r\n\r\n        this[bufferAttriName] = ElementBuffer.create(data, type, usage);\r\n    }\r\n\r\n    //protected createBufferOnlyOnce(bufferAttriName:string, bufferClass:any, data:Float32Array, size:number, type:EBufferType, usage:EBufferUsage = EBufferUsage.STATIC_DRAW):boolean{\r\n    //    if(this[bufferAttriName]){\r\n    //        return false;\r\n    //    }\r\n    //\r\n    //    this[bufferAttriName] = bufferClass.create(data, size, type,usage);\r\n    //\r\n    //    return true;\r\n    //}\r\n\r\n    protected hasData(data: Array<number> | null) {\r\n        return !!data && data.length > 0;\r\n    }\r\n\r\n    // @cache(function(type:EBufferDataType){\r\n    //     return this.container.hasChild(<any>type) && !this._needReCalcuteTangent(type);\r\n    // }, function(type){\r\n    //     return this.container.getChild(<any>type)\r\n    // }, function(result, type){\r\n    //     this.container.addChild(<any>type, result);\r\n    // })\r\n    // private _getTangent(type){\r\n    //     var geometryData = null;\r\n    //\r\n    //     geometryData = this.geometryData[BufferDataTable.getGeometryDataName(type)];\r\n    //\r\n    //     if(!this.hasData(geometryData)){\r\n    //         return null;\r\n    //     }\r\n    //\r\n    //     this.createOnlyOnceAndUpdateArrayBuffer(\"_tangentBuffer\", geometryData, 3);\r\n    //\r\n    //     return this._tangentBuffer;\r\n    // }\r\n    //\r\n    // @cache(function(type:EBufferDataType){\r\n    //     return this.container.hasChild(<any>type);\r\n    // }, function(type){\r\n    //     return this.container.getChild(<any>type)\r\n    // }, function(result, type){\r\n    //     this.container.addChild(<any>type, result);\r\n    // })\r\n    // private _getColor(type) {\r\n    //     var geometryData = null;\r\n    //\r\n    //     geometryData = this.geometryData[BufferDataTable.getGeometryDataName(type)];\r\n    //\r\n    //     if(!this.hasData(geometryData)){\r\n    //         return null;\r\n    //     }\r\n    //\r\n    //     this.createOnlyOnceAndUpdateArrayBuffer(\"_colorBuffer\", geometryData, 3);\r\n    //\r\n    //     return this._colorBuffer;\r\n    // }\r\n\r\n    @cache(function(type: EBufferDataType) {\r\n        return this.container.hasChild(<any>type);\r\n    }, function(type) {\r\n        return this.container.getChild(<any>type)\r\n    }, function(result, type) {\r\n        this.container.addChild(<any>type, result);\r\n    })\r\n    private _getIndice(type) {\r\n        var geometryData = null;\r\n\r\n        geometryData = this.geometryData[BufferDataTable.getGeometryDataName(type)];\r\n\r\n        if (!this.hasData(geometryData)) {\r\n            return null;\r\n        }\r\n\r\n        this.createOnlyOnceAndUpdateElememntBuffer(\"_indiceBuffer\", geometryData);\r\n\r\n        return this._indiceBuffer;\r\n    }\r\n\r\n    // @cache(function(type:EBufferDataType){\r\n    //     return this.container.hasChild(<any>type);\r\n    // }, function(type){\r\n    //     return this.container.getChild(<any>type)\r\n    // }, function(result, type){\r\n    //     this.container.addChild(<any>type, result);\r\n    // })\r\n    // private _getTexCoord(type){\r\n    //     var geometryData = null,\r\n    //         isCreatBuffer:boolean = null;\r\n    //\r\n    //     geometryData = this.geometryData[BufferDataTable.getGeometryDataName(type)];\r\n    //\r\n    //     if(!this.hasData(geometryData)){\r\n    //         return null;\r\n    //     }\r\n    //\r\n    //     this.createOnlyOnceAndUpdateArrayBuffer(\"_texCoordBuffer\", geometryData, 2);\r\n    //\r\n    //     return this._texCoordBuffer;\r\n    // }\r\n    //\r\n    // private _needReCalcuteTangent(type:EBufferDataType){\r\n    //     return this.geometryData.tangentDirty && type === EBufferDataType.TANGENT;\r\n    // }\r\n}","import { BufferContainer } from \"./BufferContainer\";\r\nimport { BasicGeometryData } from \"./BasicGeometryData\";\r\nimport { ArrayBuffer } from \"../../../renderer/buffer/ArrayBuffer\";\r\nimport { cacheBufferForBufferContainer } from \"../../../definition/typescript/decorator/cache\";\r\nimport { EBufferDataType } from \"../../../renderer/buffer/EBufferDataType\";\r\nimport { BufferDataTable } from \"../../../renderer/buffer/BufferDataTable\";\r\n\r\nexport abstract class CommonBufferContainer extends BufferContainer {\r\n    public geometryData: BasicGeometryData;\r\n\r\n    private _verticeBuffer: ArrayBuffer = null;\r\n    // private _normalBuffer:ArrayBuffer = null;\r\n\r\n\r\n    // public getBufferForRenderSort():Buffer{\r\n    //     var buffer = this.getChild(EBufferDataType.VERTICE);\r\n    //\r\n    //     if(!buffer){\r\n    //         return null;\r\n    //     }\r\n    //\r\n    //     return buffer;\r\n    // }\r\n\r\n    @cacheBufferForBufferContainer()\r\n    protected getVertice(type: EBufferDataType) {\r\n        var geometryData = this.geometryData[BufferDataTable.getGeometryDataName(type)];\r\n\r\n        if (!this.hasData(geometryData)) {\r\n            return null;\r\n        }\r\n\r\n        this.createOnlyOnceAndUpdateArrayBuffer(\"_verticeBuffer\", geometryData, 3);\r\n\r\n        return this._verticeBuffer;\r\n    }\r\n\r\n    // @cacheBufferForBufferContainer()\r\n    // protected getNormal(type:EBufferDataType) {\r\n    //     var geometryData= this.geometryData[BufferDataTable.getGeometryDataName(type)];\r\n    //\r\n    //     if(!this.hasData(geometryData)){\r\n    //         return null;\r\n    //     }\r\n    //\r\n    //     this.createOnlyOnceAndUpdateArrayBuffer(\"_normalBuffer\", geometryData, 3);\r\n    //\r\n    //     return this._normalBuffer;\r\n    // }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { CommonBufferContainer } from \"./CommonBufferContainer\";\r\nimport { GameObject } from \"../../../core/entityObject/gameObject/GameObject\";\r\n\r\n@registerClass(\"BasicBufferContainer\")\r\nexport class BasicBufferContainer extends CommonBufferContainer {\r\n    public static create(entityObject: GameObject) {\r\n        var obj = new this(entityObject);\r\n\r\n        return obj;\r\n    }\r\n}","import { Geometry } from \"../Geometry\";\r\nimport { EBufferDataType } from \"../../../renderer/buffer/EBufferDataType\";\r\nimport { cacheGetter } from \"../../../definition/typescript/decorator/cache\";\r\nimport { Face3 } from \"../../../structure/Face3\";\r\nimport { virtual } from \"../../../definition/typescript/decorator/virtual\";\r\n\r\nexport abstract class GeometryData {\r\n    constructor(geometry: Geometry) {\r\n        this.geometry = geometry;\r\n    }\r\n\r\n    private _vertices: Array<number> = null;\r\n    get vertices() {\r\n        return this._vertices;\r\n    }\r\n    set vertices(vertices: Array<number>) {\r\n        this._vertices = vertices;\r\n        // this.tangentDirty = true;\r\n\r\n        this.geometry.buffers.removeCache(EBufferDataType.VERTICE);\r\n    }\r\n\r\n    @cacheGetter(function() {\r\n        return !this._indiceDirty && this._indiceCache;\r\n    }, function() {\r\n        return this._indiceCache;\r\n    }, function(result) {\r\n        this._indiceCache = result;\r\n        this._indiceDirty = false;\r\n    })\r\n    get indices(): Array<number> {\r\n        var indices = [];\r\n\r\n        for (let face of this._faces) {\r\n            indices.push(face.aIndex, face.bIndex, face.cIndex);\r\n        }\r\n\r\n        return indices;\r\n    }\r\n\r\n    private _faces: Array<Face3> = null;\r\n    get faces() {\r\n        return this._faces;\r\n    }\r\n    set faces(faces: Array<Face3>) {\r\n        this._faces = faces;\r\n\r\n        // this.geometry.buffers.removeCache(EBufferDataType.NORMAL);\r\n        this.geometry.buffers.removeCache(EBufferDataType.INDICE);\r\n\r\n        this.onChangeFace();\r\n    }\r\n\r\n    protected geometry: Geometry = null;\r\n\r\n    private _indiceCache: Array<number> = null;\r\n    private _indiceDirty: boolean = true;\r\n\r\n    public dispose() {\r\n    }\r\n\r\n    @virtual\r\n    protected onChangeFace() {\r\n        // this.tangentDirty = true;\r\n        // this._normalDirty = true;\r\n        this._indiceDirty = true;\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { GeometryData } from \"./GeometryData\";\r\nimport { Geometry } from \"../Geometry\";\r\n\r\n@registerClass(\"BasicGeometryData\")\r\nexport class BasicGeometryData extends GeometryData {\r\n    public static create(geometry: Geometry) {\r\n        var obj = new this(geometry);\r\n\r\n        return obj;\r\n    }\r\n}","import { Component } from \"../../core/Component\";\r\nimport { Material } from \"../../material/Material\";\r\nimport { cloneAttributeAsCloneable, cloneAttributeAsBasicType } from \"../../definition/typescript/decorator/clone\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { BufferContainer } from \"./data/BufferContainer\";\r\nimport { EDrawMode } from \"../../renderer/EDrawMode\";\r\nimport { ensure, it, requireCheck } from \"../../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { execOnlyOnce } from \"../../definition/typescript/decorator/control\";\r\nimport { virtual } from \"../../definition/typescript/decorator/virtual\";\r\nimport { BasicBufferContainer } from \"./data/BasicBufferContainer\";\r\nimport { GeometryData } from \"./data/GeometryData\";\r\nimport { BasicGeometryData } from \"./data/BasicGeometryData\";\r\nimport { Face3 } from \"../../structure/Face3\";\r\n\r\nexport abstract class Geometry extends Component {\r\n    private _material: Material = null;\r\n    @cloneAttributeAsCloneable()\r\n    get material() {\r\n        return this._material;\r\n    }\r\n    set material(material: Material) {\r\n        if (!JudgeUtils.isEqual(material, this._material)) {\r\n            this._material = material;\r\n            this._material.geometry = this;\r\n\r\n            // if(this.entityObject){\r\n            // EventManager.trigger(this.entityObject, CustomEvent.create(<any>EEngineEvent.MATERIAL_CHANGE));\r\n            // }\r\n        }\r\n    }\r\n\r\n    get geometryData() {\r\n        if (this.buffers === null) {\r\n            return null;\r\n        }\r\n\r\n        return this.buffers.geometryData;\r\n    }\r\n\r\n    public entityObject: GameObject;\r\n    public buffers: BufferContainer = null;\r\n    // public vaoManager:VAOManager = !!GPUDetector.getInstance().extensionVAO ? VAOManager.create() : null;\r\n    @cloneAttributeAsBasicType()\r\n    public drawMode: EDrawMode = EDrawMode.TRIANGLES;\r\n\r\n    public abstract computeData(): GeometryDataType;\r\n\r\n    @ensure(function() {\r\n        var geometryData = this.buffers.geometryData;\r\n\r\n        it(`faces.count should be be ${geometryData.indices.length / 3}, but actual is ${geometryData.faces.length}`, () => {\r\n            expect(geometryData.faces.length * 3).equal(geometryData.indices.length);\r\n        });\r\n    })\r\n    @execOnlyOnce(\"_isInit\")\r\n    public init() {\r\n        var geometryData = null,\r\n            // {\r\n            //     vertices,\r\n            //     faces = [],\r\n            //     texCoords,\r\n            //     colors,\r\n            //     morphVertices\r\n            //     } = this.computeData();\r\n            computedData = this.computeData();\r\n\r\n        this.buffers = this.createBufferContainer();\r\n\r\n        geometryData = this.createGeometryData(computedData);\r\n\r\n        this.buffers.geometryData = geometryData;\r\n\r\n        this.buffers.init();\r\n\r\n        this._material.init();\r\n\r\n        // this.computeNormals();\r\n\r\n        // this.vaoManager && this.vaoManager.init();\r\n    }\r\n\r\n    // @requireCheck(function(){\r\n    //     it(\"must define buffers->geometryData\", () => {\r\n    //         expect(this.buffers).exist;\r\n    //         expect(this.buffers.geometryData).exist;\r\n    //     });\r\n    // })\r\n    // public hasFaceNormals(){\r\n    //     return this.buffers.geometryData.hasFaceNormals();\r\n    // }\r\n\r\n    // @requireCheck(function(){\r\n    //     it(\"must define buffers->geometryData\", () => {\r\n    //         expect(this.buffers).exist;\r\n    //         expect(this.buffers.geometryData).exist;\r\n    //     });\r\n    // })\r\n    // public hasVertexNormals(){\r\n    //     return this.buffers.geometryData.hasVertexNormals();\r\n    // }\r\n    //\r\n    // public hasColors(){\r\n    //     return this.buffers.geometryData.hasColors();\r\n    // }\r\n    //\r\n    // public isSmoothShading(){\r\n    //     return (<StandardLightMaterial>this._material).shading === EShading.SMOOTH;\r\n    // }\r\n\r\n    public dispose() {\r\n        this.buffers.dispose();\r\n\r\n        this._material.dispose();\r\n\r\n        // this.vaoManager && this.vaoManager.dispose();\r\n    }\r\n\r\n    // @requireCheck(function(){\r\n    //     it(\"must define buffers->geometryData\", () => {\r\n    //         expect(this.buffers).exist;\r\n    //         expect(this.buffers.geometryData).exist;\r\n    //     });\r\n    // })\r\n    // public computeFaceNormals() {\r\n    //     this.buffers.geometryData.computeFaceNormals();\r\n    // }\r\n    //\r\n    // public computeVertexNormals(){\r\n    //     this.buffers.geometryData.computeVertexNormals();\r\n    // }\r\n\r\n    @requireCheck(function() {\r\n        it(\"not exist buffers\", () => {\r\n            expect(this.buffers).exist;\r\n        });\r\n    })\r\n    public createBuffersFromGeometryData() {\r\n        this.buffers.createBuffersFromGeometryData();\r\n    }\r\n\r\n    // @virtual\r\n    // protected computeNormals(){\r\n    //     if(this.isSmoothShading()){\r\n    //         if(!this.hasVertexNormals()){\r\n    //             this.computeVertexNormals();\r\n    //         }\r\n    //     }\r\n    //     else{\r\n    //         if(!this.hasFaceNormals()){\r\n    //             this.computeFaceNormals();\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    @virtual\r\n    protected createBufferContainer(): BufferContainer {\r\n        return BasicBufferContainer.create(this.entityObject);\r\n    }\r\n\r\n    @virtual\r\n    protected createGeometryData(computedData: GeometryDataType): GeometryData {\r\n        return this.createBasicGeometryData(computedData);\r\n    }\r\n\r\n    protected createBasicGeometryData(computedData: GeometryDataType) {\r\n        var {\r\n                    vertices,\r\n            faces = []\r\n            // texCoords,\r\n            // colors\r\n        } = computedData,\r\n            geometryData = BasicGeometryData.create(this);\r\n\r\n        geometryData.vertices = vertices;\r\n        geometryData.faces = faces;\r\n        // geometryData.texCoords = texCoords;\r\n        // geometryData.colors = colors;\r\n\r\n        return geometryData;\r\n    }\r\n}\r\n\r\nexport type GeometryDataType = {\r\n    vertices: Array<number>;\r\n    faces?: Array<Face3>;\r\n    // texCoords?:Array<number>;\r\n    // colors?:Array<number>;\r\n};","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\n\r\n@registerClass(\"SortUtils\")\r\nexport class SortUtils {\r\n    public static insertSort(targetArr: Array<any>, compareFunc: (a: any, b: any) => boolean, isChangeSelf = false): Array<any> {\r\n        var resultArr: Array<any> = isChangeSelf ? targetArr : ExtendUtils.extend([], targetArr);\r\n\r\n        for (let i = 1, len = resultArr.length; i < len; i++) {\r\n            for (let j = i; j > 0 && compareFunc(resultArr[j], resultArr[j - 1]); j--) {\r\n                this._swap(resultArr, j - 1, j);\r\n            }\r\n        }\r\n\r\n        return resultArr;\r\n    }\r\n\r\n    public static quickSort(targetArr: Array<any>, compareFunc: (a: any, b: any) => boolean, isChangeSelf = false): Array<any> {\r\n        var resultArr: Array<any> = isChangeSelf ? targetArr : ExtendUtils.extend([], targetArr);\r\n        var sort = (l: number, r: number) => {\r\n            if (l >= r) {\r\n                return;\r\n            }\r\n\r\n            let i = l, j = r, x = resultArr[l];\r\n\r\n            while (i < j) {\r\n                while (i < j && compareFunc(x, resultArr[j])) {\r\n                    j--;\r\n                }\r\n\r\n                if (i < j) {\r\n                    resultArr[i++] = resultArr[j];\r\n                }\r\n\r\n                while (i < j && compareFunc(resultArr[i], x)) {\r\n                    i++;\r\n                }\r\n\r\n                if (i < j) {\r\n                    resultArr[j--] = resultArr[i];\r\n                }\r\n            }\r\n\r\n            resultArr[i] = x;\r\n\r\n            sort(l, i - 1);\r\n            sort(i + 1, r);\r\n        };\r\n\r\n        sort(0, resultArr.length - 1);\r\n\r\n        return resultArr;\r\n    }\r\n\r\n\r\n    private static _swap(children: Array<any>, i: number, j: number) {\r\n        var t: any = null;\r\n\r\n        t = children[i];\r\n        children[i] = children[j];\r\n        children[j] = t;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Component } from \"../../core/Component\";\r\nimport { Geometry } from \"../geometry/Geometry\";\r\n\r\n//todo optimize:Component add \"initOrder\" attri\r\n@registerClass(\"ComponentInitOrderTable\")\r\nexport class ComponentInitOrderTable {\r\n    public static getOrder(component: Component) {\r\n        // if(component instanceof SourceInstance){\r\n        //     return 1;\r\n        // }\r\n        // if(JudgeUtils.isClass(component, \"Shadow\")){\r\n        //     return 2;\r\n        // }\r\n        // if(JudgeUtils.isClass(component, \"ThreeDBitmapFont\")){\r\n        //     return 3;\r\n        // }\r\n        if (component instanceof Geometry) {\r\n            return 4;\r\n        }\r\n\r\n        return 5;\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { EntityObject } from \"../EntityObject\";\r\nimport { Transform } from \"../../../component/transform/Transform\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { RendererComponent } from \"../../../component/renderer/RendererComponent\";\r\nimport { Geometry } from \"../../../component/geometry/Geometry\";\r\nimport { SortUtils } from \"../../../utils/SortUtils\";\r\nimport { Component } from \"../../Component\";\r\nimport { ComponentInitOrderTable } from \"../../../component/data/ComponentInitOrderTable\";\r\nimport { JudgeUtils } from \"../../../utils/JudgeUtils\";\r\nimport { requireCheck, it } from \"../../../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\n\r\n@registerClass(\"ComponentManager\")\r\nexport class ComponentManager {\r\n    public static create(entityObject: EntityObject) {\r\n        var obj = new this(entityObject);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(entityObject: EntityObject) {\r\n        this._entityObject = entityObject;\r\n    }\r\n\r\n    public transform: Transform = null;\r\n\r\n    private _entityObject: EntityObject = null;\r\n    private _components: Collection<any> = Collection.create<any>();\r\n    private _rendererComponent: RendererComponent = null;\r\n    private _geometry: Geometry = null;\r\n\r\n    public init() {\r\n        for (let component of SortUtils.insertSort(this._components.getChildren(), (a: Component, b: Component) => {\r\n            return ComponentInitOrderTable.getOrder(a) < ComponentInitOrderTable.getOrder(b);\r\n        })) {\r\n            component.init();\r\n        }\r\n    }\r\n\r\n    public dispose() {\r\n        var components = this.removeAllComponent();\r\n\r\n        components.forEach((component: Component) => {\r\n            component.dispose();\r\n        });\r\n\r\n        this._components.removeAllChildren();\r\n    }\r\n\r\n    public removeAllComponent() {\r\n        var result = Collection.create<Component>();\r\n\r\n        this._components.forEach((component: Component) => {\r\n            this._removeComponentHandler(component);\r\n\r\n            result.addChild(component)\r\n        }, this);\r\n\r\n        //this._componentDirty = true;\r\n\r\n        return result;\r\n    }\r\n\r\n    public getComponent<T>(_class: any): T {\r\n        return this._components.findOne((component: Component) => {\r\n            return component instanceof _class;\r\n        });\r\n    }\r\n\r\n    public getComponents() {\r\n        return this._components;\r\n    }\r\n\r\n    public findComponentByUid(uid: number) {\r\n        return this._components.findOne((component: Component) => {\r\n            return component.uid === uid;\r\n        });\r\n    }\r\n\r\n    public forEachComponent(func: (component: Component) => void) {\r\n        this._components.forEach(func);\r\n\r\n        return this;\r\n    }\r\n\r\n    public hasComponent(component: Component): boolean;\r\n    public hasComponent(_class: Function): boolean;\r\n\r\n    public hasComponent(...args) {\r\n        var result: boolean = null;\r\n\r\n        if (JudgeUtils.isComponenet(args[0])) {\r\n            let component = args[0];\r\n\r\n            result = this._components.hasChild(component);\r\n        }\r\n        else {\r\n            let _class = args[0];\r\n\r\n            result = this._components.hasChildWithFunc((component) => {\r\n                return component instanceof _class;\r\n            });\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    @requireCheck(function(component: Component, isShareComponent: boolean = false) {\r\n        if (!component) {\r\n            return;\r\n        }\r\n\r\n        it(\"should not add the component which is already added\", () => {\r\n            expect(this.hasComponent(component)).false;\r\n        });\r\n    })\r\n    public addComponent(component: Component, isShareComponent: boolean = false) {\r\n        if (!component) {\r\n            return;\r\n        }\r\n\r\n        if (component instanceof RendererComponent) {\r\n            this._rendererComponent = component;\r\n        }\r\n        else if (component instanceof Geometry) {\r\n            this._geometry = component;\r\n        }\r\n        else if (component instanceof Transform) {\r\n            if (this.transform) {\r\n                this.removeComponent(this.transform);\r\n            }\r\n\r\n            this.transform = component;\r\n        }\r\n\r\n        component.addToObject(this._entityObject, isShareComponent);\r\n\r\n        this._components.addChild(component);\r\n\r\n        return this;\r\n    }\r\n\r\n    public removeComponent(component: Component);\r\n    public removeComponent(_class: Function);\r\n\r\n    public removeComponent(...args) {\r\n        var component: Component = null;\r\n\r\n        if (args[0] instanceof Component) {\r\n            component = <Component>args[0];\r\n        }\r\n        else {\r\n            component = this.getComponent<any>(<Function>args[0]);\r\n        }\r\n\r\n        if (component) {\r\n            this._components.removeChild(component);\r\n\r\n            this._removeComponentHandler(component);\r\n        }\r\n\r\n        //this._componentDirty = true;\r\n\r\n        return this;\r\n    }\r\n\r\n    // public addAllComponentToComponentContainer(){\r\n    //     this._components.forEach((component:Component) => component.addToComponentContainer());\r\n    // }\r\n    //\r\n    // public removeAllComponentFromComponentContainer(){\r\n    //     this._components.forEach((component:Component) => component.removeFromComponentContainer());\r\n    // }\r\n\r\n    public getComponentCount(_class: Function) {\r\n        return this._components.filter((component: Component) => {\r\n            return component instanceof _class;\r\n        }).getCount();\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        it(\"entityObject shouldn't contain more than 1 geometry component\", () => {\r\n            expect(this.getComponentCount(Geometry)).lessThan(2);\r\n        });\r\n    })\r\n    public getGeometry(): Geometry {\r\n        return this._geometry;\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        it(\"entityObject shouldn't contain more than 1 rendererComponent\", () => {\r\n            expect(this.getComponentCount(RendererComponent)).lessThan(2);\r\n        });\r\n    })\r\n    public getRendererComponent(): RendererComponent {\r\n        return this._rendererComponent;\r\n    }\r\n\r\n    private _removeComponentHandler(component: Component) {\r\n        component.removeFromObject(this._entityObject);\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { EntityObject } from \"../EntityObject\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { JudgeUtils } from \"../../../utils/JudgeUtils\";\r\n\r\n@registerClass(\"EntityObjectManager\")\r\nexport class EntityObjectManager {\r\n    public static create(entityObject: EntityObject) {\r\n        var obj = new this(entityObject);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(entityObject: EntityObject) {\r\n        this._entityObject = entityObject;\r\n    }\r\n\r\n    private _entityObject: EntityObject = null;\r\n    private _children: Collection<any> = Collection.create<any>();\r\n\r\n    public init() {\r\n        this.forEach((child: EntityObject) => {\r\n            child.init();\r\n        });\r\n    }\r\n\r\n    public dispose() {\r\n        this.forEach((child: EntityObject) => {\r\n            child.dispose();\r\n        });\r\n    }\r\n\r\n    public hasChild(child: EntityObject): boolean {\r\n        return this._children.hasChild(child);\r\n    }\r\n\r\n    public addChild(child: EntityObject) {\r\n        if (child.parent) {\r\n            child.parent.removeChild(child);\r\n        }\r\n\r\n        child.parent = this._entityObject;\r\n\r\n        child.transform.parent = this._entityObject.transform;\r\n\r\n        this._children.addChild(child);\r\n\r\n        /*!\r\n         no need to sort!\r\n         because WebGLRenderer enable depth test, it will sort when needed(just as WebGLRenderer->renderSortedTransparentCommands sort the commands)\r\n         */\r\n\r\n        // child.onEnter();\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChildren(children: EntityObject);\r\n    public addChildren(children: Array<EntityObject>);\r\n    public addChildren(children: Collection<EntityObject>);\r\n\r\n    public addChildren(...args) {\r\n        if (JudgeUtils.isArray(args[0])) {\r\n            let children: Array<EntityObject> = args[0];\r\n\r\n            for (let child of children) {\r\n                this.addChild(child);\r\n            }\r\n        }\r\n        else if (JudgeUtils.isCollection(args[0])) {\r\n            let children: Collection<EntityObject> = args[0];\r\n\r\n            children.forEach((child: EntityObject) => {\r\n                this.addChild(child);\r\n            });\r\n        }\r\n        else {\r\n            this.addChild(args[0]);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public forEach(func: (entityObject: EntityObject, index: number) => void) {\r\n        this._children.forEach(func);\r\n\r\n        return this;\r\n    }\r\n\r\n    public filter(func: (entityObject: EntityObject) => boolean) {\r\n        return this._children.filter(func);\r\n    }\r\n\r\n    public sort(func: (a: EntityObject, b: EntityObject) => any, isSortSelf = false) {\r\n        return this._children.sort(func, isSortSelf);\r\n    }\r\n\r\n    public getChildren() {\r\n        return this._children;\r\n    }\r\n\r\n    public getAllChildren() {\r\n        var result = Collection.create<EntityObject>();\r\n        var getChildren = (entityObject: EntityObject) => {\r\n            result.addChildren(entityObject.getChildren());\r\n\r\n            entityObject.forEach((child: EntityObject) => {\r\n                getChildren(child);\r\n            });\r\n        }\r\n\r\n        getChildren(this._entityObject);\r\n\r\n        return result;\r\n    }\r\n\r\n    public getChild(index: number) {\r\n        return this._children.getChild(index);\r\n    }\r\n\r\n    public findChildByUid(uid: number) {\r\n        return this._children.findOne((child: EntityObject) => {\r\n            return child.uid === uid;\r\n        });\r\n    }\r\n\r\n    public findChildByTag(tag: string) {\r\n        return this._children.findOne((child: EntityObject) => {\r\n            return child.hasTag(tag);\r\n        });\r\n    }\r\n\r\n    public findChildByName(name: string) {\r\n        return this._children.findOne((child: EntityObject) => {\r\n            return child.name.search(name) > -1;\r\n        });\r\n    }\r\n\r\n    public findChildrenByName(name: string): Collection<EntityObject> {\r\n        return this._children.filter((child: EntityObject) => {\r\n            return child.name.search(name) > -1;\r\n        });\r\n    }\r\n\r\n    public removeChild(child: EntityObject) {\r\n        // child.onExit();\r\n\r\n        this._children.removeChild(child);\r\n\r\n        child.parent = null;\r\n\r\n        return this;\r\n    }\r\n\r\n    public removeAllChildren() {\r\n        this._children.forEach((child: EntityObject) => {\r\n            this.removeChild(child);\r\n        }, this);\r\n    }\r\n}","import { Entity } from \"../Entity\";\r\nimport { cloneAttributeAsBasicType, CloneUtils } from \"../../definition/typescript/decorator/clone\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { CustomEventRegisterData } from \"../../event/binder/CustomEventRegister\";\r\nimport { ComponentManager } from \"./manager/ComponentManager\";\r\nimport { IDisposable } from \"wonder-frp/dist/es2015/Disposable/IDisposable\";\r\nimport { EntityObjectManager } from \"./manager/EntityObjectManager\";\r\nimport { virtual } from \"../../definition/typescript/decorator/virtual\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\nimport { Component } from \"../Component\";\r\nimport { Geometry } from \"../../component/geometry/Geometry\";\r\nimport { EventManager } from \"../../event/EventManager\";\r\nimport { cache } from \"../../definition/typescript/decorator/cache\";\r\nimport { Renderer } from \"../../renderer/renderer/Renderer\";\r\nimport { GameObject } from \"./gameObject/GameObject\";\r\nimport { Transform } from \"../../component/transform/Transform\";\r\nimport { ensure, it } from \"../../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\n\r\nexport abstract class EntityObject extends Entity {\r\n    private _bubbleParent: EntityObject = null;\r\n    @cloneAttributeAsBasicType()\r\n    get bubbleParent() {\r\n        return this._bubbleParent ? this._bubbleParent : this.parent;\r\n    }\r\n    set bubbleParent(bubbleParent: EntityObject) {\r\n        this._bubbleParent = bubbleParent;\r\n    }\r\n\r\n    set componentDirty(componentDirty: boolean) {\r\n        if (componentDirty === true) {\r\n            this.clearCache();\r\n        }\r\n    }\r\n\r\n    get transform() {\r\n        return this.componentManager.transform;\r\n    }\r\n\r\n    @cloneAttributeAsBasicType()\r\n    public name: string = null;\r\n    @cloneAttributeAsBasicType()\r\n    public parent: EntityObject = null;\r\n\r\n    public customEventMap: Hash<Collection<CustomEventRegisterData>> = Hash.create<Collection<CustomEventRegisterData>>();\r\n\r\n    protected componentManager: ComponentManager = ComponentManager.create(this);\r\n\r\n    private _hasComponentCache: Hash<boolean> = Hash.create<boolean>();\r\n    private _getComponentCache: Hash<boolean> = Hash.create<boolean>();\r\n    private _componentChangeSubscription: IDisposable = null;\r\n    private _entityObjectManager: EntityObjectManager = EntityObjectManager.create(this);\r\n\r\n    @virtual\r\n    public initWhenCreate() {\r\n        this.addComponent(this.createTransform());\r\n    }\r\n\r\n    // @requireCheck(function(config:CloneEntityObjectConfigData = <any>{}){\r\n    //     it(\"if has OneToManySourceInstance component, not support share geometry\", () => {\r\n    //         if(config.shareGeometry){\r\n    //             expect(this.hasComponent(OneToManySourceInstance)).false;\r\n    //         }\r\n    //     });\r\n    // })\r\n    public clone(config: CloneEntityObjectConfigData = <any>{}) {\r\n        var result = null;\r\n\r\n        if (CloneUtils.isNotClone((this))) {\r\n            return null;\r\n        }\r\n\r\n        config = ExtendUtils.extend({\r\n            cloneChildren: true,\r\n            shareGeometry: false,\r\n            cloneGeometry: true\r\n        }, config);\r\n\r\n        result = CloneUtils.clone<EntityObject>(this);\r\n\r\n        this.forEachComponent((component: Component) => {\r\n            if (!config.cloneGeometry && component instanceof Geometry) {\r\n                return;\r\n            }\r\n\r\n            if (config.shareGeometry && component instanceof Geometry) {\r\n                result.addComponent(component, true);\r\n                return;\r\n            }\r\n\r\n            result.addComponent(component.clone());\r\n        });\r\n\r\n        if (config.cloneChildren) {\r\n            this._cloneChildren(result);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public init() {\r\n        var self = this;\r\n\r\n        // this._componentChangeSubscription = EventManager.fromEvent(this, <any>EEngineEvent.COMPONENT_CHANGE)\r\n        //     .subscribe(() => {\r\n        //         self._onComponentChange();\r\n        //     });\r\n\r\n        this.componentManager.init();\r\n        this._entityObjectManager.init();\r\n\r\n        this.afterInitChildren();\r\n\r\n        // ScriptComponentContainer.getInstance().execEntityObjectScriptOnlyOnce(this, \"init\");\r\n\r\n        return this;\r\n    }\r\n\r\n    public dispose() {\r\n        // this.onDispose();\r\n\r\n        if (this.parent) {\r\n            this.parent.removeChild(this);\r\n            this.parent = null;\r\n        }\r\n\r\n        // EventManager.off(this);\r\n\r\n        // this._componentChangeSubscription && this._componentChangeSubscription.dispose();\r\n\r\n        this.componentManager.dispose();\r\n        this._entityObjectManager.dispose();\r\n\r\n        EventManager.off(this);\r\n    }\r\n\r\n    public hasChild(child: EntityObject): boolean {\r\n        return this._entityObjectManager.hasChild(child);\r\n    }\r\n\r\n    public addChild(child: EntityObject): EntityObject {\r\n        this._entityObjectManager.addChild(child);\r\n\r\n        return this;\r\n    }\r\n\r\n    public getChildren() {\r\n        return this._entityObjectManager.getChildren();\r\n    }\r\n\r\n    public removeChild(child: EntityObject): EntityObject {\r\n        this._entityObjectManager.removeChild(child);\r\n\r\n        return this;\r\n    }\r\n\r\n    public forEach(func: (entityObject: EntityObject, index: number) => void) {\r\n        this._entityObjectManager.forEach(func);\r\n\r\n        return this;\r\n    }\r\n\r\n    @cache(function(_class: any) {\r\n        return this._getComponentCache.hasChild(_class.name);\r\n    }, function(_class: any) {\r\n        return this._getComponentCache.getChild(_class.name);\r\n    }, function(result, _class: any) {\r\n        this._getComponentCache.addChild(_class.name, result);\r\n    })\r\n    public getComponent<T>(_class: any): T {\r\n        return this.componentManager.getComponent<T>(_class);\r\n    }\r\n\r\n    public hasComponent(component: Component): boolean;\r\n    public hasComponent(_class: Function): boolean;\r\n\r\n    /*!\r\n     not use @cache,\r\n     here judge return data of \"getChild\", so it don't need to invoke \"hasChild\"\r\n     */\r\n    public hasComponent(...args) {\r\n        var key = this._getHasComponentCacheKey(args[0]),\r\n            result = this._hasComponentCache.getChild(key);\r\n\r\n        if (result !== void 0) {\r\n            return result;\r\n        }\r\n\r\n        result = this.componentManager.hasComponent(args[0]);\r\n\r\n        this._hasComponentCache.addChild(key, result);\r\n\r\n        return result;\r\n    }\r\n\r\n    public addComponent(component: Component, isShareComponent: boolean = false) {\r\n        this.componentManager.addComponent(component, isShareComponent);\r\n\r\n        this.componentDirty = true;\r\n\r\n        return this;\r\n    }\r\n\r\n    public removeComponent(component: Component);\r\n    public removeComponent(_class: Function);\r\n\r\n    public removeComponent(...args) {\r\n        this.componentManager.removeComponent(args[0]);\r\n\r\n        this.componentDirty = true;\r\n\r\n        return this;\r\n    }\r\n\r\n    public forEachComponent(func: (component: Component) => void) {\r\n        this.componentManager.forEachComponent(func);\r\n\r\n        return this;\r\n    }\r\n\r\n    @virtual\r\n    public render(renderer: Renderer, camera: GameObject): void {\r\n        var rendererComponent = null;\r\n\r\n        rendererComponent = this.componentManager.getRendererComponent();\r\n\r\n        if (rendererComponent) {\r\n            rendererComponent.render(renderer, this, camera);\r\n        }\r\n\r\n        this.getRenderList().forEach((child: EntityObject) => {\r\n            child.render(renderer, camera);\r\n        });\r\n    }\r\n\r\n    public update(elapsed: number): void {\r\n        this.forEach((child: EntityObject) => {\r\n            child.update(elapsed);\r\n        });\r\n    }\r\n\r\n    public clearCache() {\r\n        this._hasComponentCache.removeAllChildren();\r\n        this._getComponentCache.removeAllChildren();\r\n    }\r\n\r\n    @virtual\r\n    public getGeometry() {\r\n        return this.componentManager.getGeometry();\r\n    }\r\n\r\n    protected abstract createTransform(): Transform;\r\n\r\n    @virtual\r\n    protected afterInitChildren() {\r\n    }\r\n\r\n    @virtual\r\n    protected getRenderList() {\r\n        return this.getChildren();\r\n    }\r\n\r\n    @ensure(function(key: string) {\r\n        it(`key:${key} be string`, () => {\r\n            expect(JudgeUtils.isString(key)).true;\r\n        });\r\n    })\r\n    private _getHasComponentCacheKey(...args) {\r\n        if (JudgeUtils.isComponenet(args[0])) {\r\n            let component: Component = args[0];\r\n\r\n            return String(component.uid);\r\n        }\r\n        else {\r\n            let _class: any = args[0];\r\n\r\n            return _class.name;\r\n        }\r\n    }\r\n\r\n    private _cloneChildren(result: EntityObject) {\r\n        this.forEach((child: EntityObject) => {\r\n            var resultChild = child.clone();\r\n\r\n            if (resultChild !== null) {\r\n                result.addChild(resultChild);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport type CloneEntityObjectConfigData = {\r\n    cloneChildren?: boolean;\r\n    shareGeometry?: boolean;\r\n    cloneGeometry?: boolean;\r\n}","export enum EEventType {\r\n    MOUSE,\r\n    TOUCH,\r\n    POINT,\r\n    KEYBOARD,\r\n    CUSTOM\r\n}","/*!\n * Bowser - a browser detector\n * https://github.com/ded/bowser\n * MIT License | (c) Dustin Diaz 2015\n */\n\n!function (root, name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(name, definition)\n  else root[name] = definition()\n}(this, 'bowser', function () {\n  /**\n    * See useragents.js for examples of navigator.userAgent\n    */\n\n  var t = true\n\n  function detect(ua) {\n\n    function getFirstMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[1]) || '';\n    }\n\n    function getSecondMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[2]) || '';\n    }\n\n    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n      , likeAndroid = /like android/i.test(ua)\n      , android = !likeAndroid && /android/i.test(ua)\n      , nexusMobile = /nexus\\s*[0-6]\\s*/i.test(ua)\n      , nexusTablet = !nexusMobile && /nexus\\s*[0-9]+/i.test(ua)\n      , chromeos = /CrOS/.test(ua)\n      , silk = /silk/i.test(ua)\n      , sailfish = /sailfish/i.test(ua)\n      , tizen = /tizen/i.test(ua)\n      , webos = /(web|hpw)os/i.test(ua)\n      , windowsphone = /windows phone/i.test(ua)\n      , samsungBrowser = /SamsungBrowser/i.test(ua)\n      , windows = !windowsphone && /windows/i.test(ua)\n      , mac = !iosdevice && !silk && /macintosh/i.test(ua)\n      , linux = !android && !sailfish && !tizen && !webos && /linux/i.test(ua)\n      , edgeVersion = getFirstMatch(/edge\\/(\\d+(\\.\\d+)?)/i)\n      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n      , tablet = /tablet/i.test(ua)\n      , mobile = !tablet && /[^-]mobi/i.test(ua)\n      , xbox = /xbox/i.test(ua)\n      , result\n\n    if (/opera/i.test(ua)) {\n      //  an old Opera\n      result = {\n        name: 'Opera'\n      , opera: t\n      , version: versionIdentifier || getFirstMatch(/(?:opera|opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/opr|opios/i.test(ua)) {\n      // a new Opera\n      result = {\n        name: 'Opera'\n        , opera: t\n        , version: getFirstMatch(/(?:opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/SamsungBrowser/i.test(ua)) {\n      result = {\n        name: 'Samsung Internet for Android'\n        , samsungBrowser: t\n        , version: versionIdentifier || getFirstMatch(/(?:SamsungBrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/coast/i.test(ua)) {\n      result = {\n        name: 'Opera Coast'\n        , coast: t\n        , version: versionIdentifier || getFirstMatch(/(?:coast)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/yabrowser/i.test(ua)) {\n      result = {\n        name: 'Yandex Browser'\n      , yandexbrowser: t\n      , version: versionIdentifier || getFirstMatch(/(?:yabrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/ucbrowser/i.test(ua)) {\n      result = {\n          name: 'UC Browser'\n        , ucbrowser: t\n        , version: getFirstMatch(/(?:ucbrowser)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/mxios/i.test(ua)) {\n      result = {\n        name: 'Maxthon'\n        , maxthon: t\n        , version: getFirstMatch(/(?:mxios)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/epiphany/i.test(ua)) {\n      result = {\n        name: 'Epiphany'\n        , epiphany: t\n        , version: getFirstMatch(/(?:epiphany)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/puffin/i.test(ua)) {\n      result = {\n        name: 'Puffin'\n        , puffin: t\n        , version: getFirstMatch(/(?:puffin)[\\s\\/](\\d+(?:\\.\\d+)?)/i)\n      }\n    }\n    else if (/sleipnir/i.test(ua)) {\n      result = {\n        name: 'Sleipnir'\n        , sleipnir: t\n        , version: getFirstMatch(/(?:sleipnir)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/k-meleon/i.test(ua)) {\n      result = {\n        name: 'K-Meleon'\n        , kMeleon: t\n        , version: getFirstMatch(/(?:k-meleon)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (windowsphone) {\n      result = {\n        name: 'Windows Phone'\n      , windowsphone: t\n      }\n      if (edgeVersion) {\n        result.msedge = t\n        result.version = edgeVersion\n      }\n      else {\n        result.msie = t\n        result.version = getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/msie|trident/i.test(ua)) {\n      result = {\n        name: 'Internet Explorer'\n      , msie: t\n      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (chromeos) {\n      result = {\n        name: 'Chrome'\n      , chromeos: t\n      , chromeBook: t\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/chrome.+? edge/i.test(ua)) {\n      result = {\n        name: 'Microsoft Edge'\n      , msedge: t\n      , version: edgeVersion\n      }\n    }\n    else if (/vivaldi/i.test(ua)) {\n      result = {\n        name: 'Vivaldi'\n        , vivaldi: t\n        , version: getFirstMatch(/vivaldi\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (sailfish) {\n      result = {\n        name: 'Sailfish'\n      , sailfish: t\n      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/seamonkey\\//i.test(ua)) {\n      result = {\n        name: 'SeaMonkey'\n      , seamonkey: t\n      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/firefox|iceweasel|fxios/i.test(ua)) {\n      result = {\n        name: 'Firefox'\n      , firefox: t\n      , version: getFirstMatch(/(?:firefox|iceweasel|fxios)[ \\/](\\d+(\\.\\d+)?)/i)\n      }\n      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n        result.firefoxos = t\n      }\n    }\n    else if (silk) {\n      result =  {\n        name: 'Amazon Silk'\n      , silk: t\n      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/phantom/i.test(ua)) {\n      result = {\n        name: 'PhantomJS'\n      , phantom: t\n      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/slimerjs/i.test(ua)) {\n      result = {\n        name: 'SlimerJS'\n        , slimer: t\n        , version: getFirstMatch(/slimerjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n      result = {\n        name: 'BlackBerry'\n      , blackberry: t\n      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (webos) {\n      result = {\n        name: 'WebOS'\n      , webos: t\n      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n      };\n      /touchpad\\//i.test(ua) && (result.touchpad = t)\n    }\n    else if (/bada/i.test(ua)) {\n      result = {\n        name: 'Bada'\n      , bada: t\n      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n      };\n    }\n    else if (tizen) {\n      result = {\n        name: 'Tizen'\n      , tizen: t\n      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      };\n    }\n    else if (/qupzilla/i.test(ua)) {\n      result = {\n        name: 'QupZilla'\n        , qupzilla: t\n        , version: getFirstMatch(/(?:qupzilla)[\\s\\/](\\d+(?:\\.\\d+)+)/i) || versionIdentifier\n      }\n    }\n    else if (/chromium/i.test(ua)) {\n      result = {\n        name: 'Chromium'\n        , chromium: t\n        , version: getFirstMatch(/(?:chromium)[\\s\\/](\\d+(?:\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/chrome|crios|crmo/i.test(ua)) {\n      result = {\n        name: 'Chrome'\n        , chrome: t\n        , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (android) {\n      result = {\n        name: 'Android'\n        , version: versionIdentifier\n      }\n    }\n    else if (/safari|applewebkit/i.test(ua)) {\n      result = {\n        name: 'Safari'\n      , safari: t\n      }\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if (iosdevice) {\n      result = {\n        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n      }\n      // WTF: version is not part of user agent in web apps\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if(/googlebot/i.test(ua)) {\n      result = {\n        name: 'Googlebot'\n      , googlebot: t\n      , version: getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i) || versionIdentifier\n      }\n    }\n    else {\n      result = {\n        name: getFirstMatch(/^(.*)\\/(.*) /),\n        version: getSecondMatch(/^(.*)\\/(.*) /)\n     };\n   }\n\n    // set webkit or gecko flag for browsers based on these engines\n    if (!result.msedge && /(apple)?webkit/i.test(ua)) {\n      if (/(apple)?webkit\\/537\\.36/i.test(ua)) {\n        result.name = result.name || \"Blink\"\n        result.blink = t\n      } else {\n        result.name = result.name || \"Webkit\"\n        result.webkit = t\n      }\n      if (!result.version && versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    } else if (!result.opera && /gecko\\//i.test(ua)) {\n      result.name = result.name || \"Gecko\"\n      result.gecko = t\n      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n    }\n\n    // set OS flags for platforms that have multiple browsers\n    if (!result.windowsphone && !result.msedge && (android || result.silk)) {\n      result.android = t\n    } else if (!result.windowsphone && !result.msedge && iosdevice) {\n      result[iosdevice] = t\n      result.ios = t\n    } else if (mac) {\n      result.mac = t\n    } else if (xbox) {\n      result.xbox = t\n    } else if (windows) {\n      result.windows = t\n    } else if (linux) {\n      result.linux = t\n    }\n\n    // OS version extraction\n    var osVersion = '';\n    if (result.windowsphone) {\n      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n    } else if (iosdevice) {\n      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (android) {\n      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n    } else if (result.webos) {\n      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.blackberry) {\n      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n    } else if (result.bada) {\n      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.tizen) {\n      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n    }\n    if (osVersion) {\n      result.osversion = osVersion;\n    }\n\n    // device type extraction\n    var osMajorVersion = osVersion.split('.')[0];\n    if (\n         tablet\n      || nexusTablet\n      || iosdevice == 'ipad'\n      || (android && (osMajorVersion == 3 || (osMajorVersion >= 4 && !mobile)))\n      || result.silk\n    ) {\n      result.tablet = t\n    } else if (\n         mobile\n      || iosdevice == 'iphone'\n      || iosdevice == 'ipod'\n      || android\n      || nexusMobile\n      || result.blackberry\n      || result.webos\n      || result.bada\n    ) {\n      result.mobile = t\n    }\n\n    // Graded Browser Support\n    // http://developer.yahoo.com/yui/articles/gbs\n    if (result.msedge ||\n        (result.msie && result.version >= 10) ||\n        (result.yandexbrowser && result.version >= 15) ||\n\t\t    (result.vivaldi && result.version >= 1.0) ||\n        (result.chrome && result.version >= 20) ||\n        (result.samsungBrowser && result.version >= 4) ||\n        (result.firefox && result.version >= 20.0) ||\n        (result.safari && result.version >= 6) ||\n        (result.opera && result.version >= 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n        (result.blackberry && result.version >= 10.1)\n        || (result.chromium && result.version >= 20)\n        ) {\n      result.a = t;\n    }\n    else if ((result.msie && result.version < 10) ||\n        (result.chrome && result.version < 20) ||\n        (result.firefox && result.version < 20.0) ||\n        (result.safari && result.version < 6) ||\n        (result.opera && result.version < 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n        || (result.chromium && result.version < 20)\n        ) {\n      result.c = t\n    } else result.x = t\n\n    return result\n  }\n\n  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent || '' : '')\n\n  bowser.test = function (browserList) {\n    for (var i = 0; i < browserList.length; ++i) {\n      var browserItem = browserList[i];\n      if (typeof browserItem=== 'string') {\n        if (browserItem in bowser) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Get version precisions count\n   *\n   * @example\n   *   getVersionPrecision(\"1.10.3\") // 3\n   *\n   * @param  {string} version\n   * @return {number}\n   */\n  function getVersionPrecision(version) {\n    return version.split(\".\").length;\n  }\n\n  /**\n   * Array::map polyfill\n   *\n   * @param  {Array} arr\n   * @param  {Function} iterator\n   * @return {Array}\n   */\n  function map(arr, iterator) {\n    var result = [], i;\n    if (Array.prototype.map) {\n      return Array.prototype.map.call(arr, iterator);\n    }\n    for (i = 0; i < arr.length; i++) {\n      result.push(iterator(arr[i]));\n    }\n    return result;\n  }\n\n  /**\n   * Calculate browser version weight\n   *\n   * @example\n   *   compareVersions(['1.10.2.1',  '1.8.2.1.90'])    // 1\n   *   compareVersions(['1.010.2.1', '1.09.2.1.90']);  // 1\n   *   compareVersions(['1.10.2.1',  '1.10.2.1']);     // 0\n   *   compareVersions(['1.10.2.1',  '1.0800.2']);     // -1\n   *\n   * @param  {Array<String>} versions versions to compare\n   * @return {Number} comparison result\n   */\n  function compareVersions(versions) {\n    // 1) get common precision for both versions, for example for \"10.0\" and \"9\" it should be 2\n    var precision = Math.max(getVersionPrecision(versions[0]), getVersionPrecision(versions[1]));\n    var chunks = map(versions, function (version) {\n      var delta = precision - getVersionPrecision(version);\n\n      // 2) \"9\" -> \"9.0\" (for precision = 2)\n      version = version + new Array(delta + 1).join(\".0\");\n\n      // 3) \"9.0\" -> [\"000000000\"\", \"000000009\"]\n      return map(version.split(\".\"), function (chunk) {\n        return new Array(20 - chunk.length).join(\"0\") + chunk;\n      }).reverse();\n    });\n\n    // iterate in reverse order by reversed chunks array\n    while (--precision >= 0) {\n      // 4) compare: \"000000009\" > \"000000010\" = false (but \"9\" > \"10\" = true)\n      if (chunks[0][precision] > chunks[1][precision]) {\n        return 1;\n      }\n      else if (chunks[0][precision] === chunks[1][precision]) {\n        if (precision === 0) {\n          // all version chunks are same\n          return 0;\n        }\n      }\n      else {\n        return -1;\n      }\n    }\n  }\n\n  /**\n   * Check if browser is unsupported\n   *\n   * @example\n   *   bowser.isUnsupportedBrowser({\n   *     msie: \"10\",\n   *     firefox: \"23\",\n   *     chrome: \"29\",\n   *     safari: \"5.1\",\n   *     opera: \"16\",\n   *     phantom: \"534\"\n   *   });\n   *\n   * @param  {Object}  minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function isUnsupportedBrowser(minVersions, strictMode, ua) {\n    var _bowser = bowser;\n\n    // make strictMode param optional with ua param usage\n    if (typeof strictMode === 'string') {\n      ua = strictMode;\n      strictMode = void(0);\n    }\n\n    if (strictMode === void(0)) {\n      strictMode = false;\n    }\n    if (ua) {\n      _bowser = detect(ua);\n    }\n\n    var version = \"\" + _bowser.version;\n    for (var browser in minVersions) {\n      if (minVersions.hasOwnProperty(browser)) {\n        if (_bowser[browser]) {\n          if (typeof minVersions[browser] !== 'string') {\n            throw new Error('Browser version in the minVersion map should be a string: ' + browser + ': ' + String(minVersions));\n          }\n\n          // browser version and min supported version.\n          return compareVersions([version, minVersions[browser]]) < 0;\n        }\n      }\n    }\n\n    return strictMode; // not found\n  }\n\n  /**\n   * Check if browser is supported\n   *\n   * @param  {Object} minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function check(minVersions, strictMode, ua) {\n    return !isUnsupportedBrowser(minVersions, strictMode, ua);\n  }\n\n  bowser.isUnsupportedBrowser = isUnsupportedBrowser;\n  bowser.compareVersions = compareVersions;\n  bowser.check = check;\n\n  /*\n   * Set our detect method to the main bowser object so we can\n   * reuse it to test other user agents.\n   * This is needed to implement future tests.\n   */\n  bowser._detect = detect;\n\n  return bowser\n});\n// module.exports.chrome = \"a\";\n// module.exports.firefox = \"a\";\n// module.exports.msie = \"a\";\n// module.exports.version = \"a\";\n// module.exports.mobile = \"a\";\n","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { chrome, firefox } from \"bowser\";\r\n\r\nenum EBrowserIdentifier {\r\n    FALLBACK = <any>\"fallback\",\r\n    FIREFOX = <any>\"firefox\",\r\n    CHROME = <any>\"chrome\"\r\n}\r\n\r\nexport enum EEventName {\r\n    CLICK = <any>\"click\",\r\n    MOUSEOVER = <any>\"mouseover\",\r\n    MOUSEUP = <any>\"mouseup\",\r\n    MOUSEOUT = <any>\"mouseout\",\r\n    MOUSEMOVE = <any>\"mousemove\",\r\n    MOUSEDOWN = <any>\"mousedown\",\r\n    MOUSEWHEEL = <any>`mousewheel|DOMMouseScroll*${EBrowserIdentifier.FIREFOX}`,\r\n    MOUSEDRAG = <any>\"mousedrag\",\r\n\r\n    TOUCHUP = <any>\"touchend\",\r\n    TOUCHMOVE = <any>\"touchmove\",\r\n    TOUCHDOWN = <any>\"touchstart\",\r\n\r\n\r\n    KEYDOWN = <any>\"keydown\",\r\n    KEYUP = <any>\"keyup\",\r\n    KEYPRESS = <any>\"keypress\"\r\n}\r\n\r\nconst EVENTNAME_SPLITTER = '|',\r\n    BROWSER_IDENTIFIER = '*';\r\n\r\n@registerClass(\"EventNameHandler\")\r\nexport class EventNameHandler {\r\n    public static handleEventName(domEventName: EEventName) {\r\n        var eventName: string = <any>domEventName,\r\n            fallbackEventName = null,\r\n            specifyBrowserEventNameArr = [],\r\n            result: string = null;\r\n\r\n        for (let name of eventName.split(EVENTNAME_SPLITTER)) {\r\n\r\n            if (this._isFallbackEventName(name)) {\r\n                fallbackEventName = name;\r\n            }\r\n            else {\r\n                specifyBrowserEventNameArr.push(name);\r\n            }\r\n        }\r\n\r\n        result = this._getSpecifyBrowserEventName(specifyBrowserEventNameArr);\r\n\r\n        return result !== null ? result : fallbackEventName;\r\n    }\r\n\r\n    private static _isFallbackEventName(eventName: string) {\r\n        return eventName.split(BROWSER_IDENTIFIER).length === 1;\r\n    }\r\n\r\n    private static _getSpecifyBrowserEventName(specifyBrowserEventNameArr: Array<string>) {\r\n        var result = null;\r\n\r\n        for (let eventName of specifyBrowserEventNameArr) {\r\n            let [domEventName, browserIdentifier] = eventName.split(BROWSER_IDENTIFIER);\r\n\r\n            switch (<any>browserIdentifier) {\r\n                case EBrowserIdentifier.CHROME:\r\n                    if (chrome) {\r\n                        result = domEventName;\r\n                    }\r\n                    break;\r\n                case EBrowserIdentifier.FIREFOX:\r\n                    if (firefox) {\r\n                        result = domEventName;\r\n                    }\r\n                    break;\r\n                default:\r\n                    //todo judge IE\r\n                    break;\r\n            }\r\n\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { EEventType } from \"./EEventType\";\r\nimport { EEventName } from \"./EventNameHandler\";\r\nimport { EEngineEvent } from \"../EEngineEvent\";\r\n\r\nconst _table = Hash.create<EEventType>();\r\n\r\n//todo not declare \"<any>\"!\r\n_table.addChild(<any>EEventName.CLICK, EEventType.MOUSE);\r\n_table.addChild(<any>EEventName.MOUSEMOVE, EEventType.MOUSE);\r\n_table.addChild(<any>EEventName.MOUSEDOWN, EEventType.MOUSE);\r\n_table.addChild(<any>EEventName.MOUSEDRAG, EEventType.MOUSE);\r\n_table.addChild(<any>EEventName.MOUSEOUT, EEventType.MOUSE);\r\n_table.addChild(<any>EEventName.MOUSEOVER, EEventType.MOUSE);\r\n_table.addChild(<any>EEventName.MOUSEUP, EEventType.MOUSE);\r\n_table.addChild(<any>EEventName.MOUSEWHEEL, EEventType.MOUSE);\r\n\r\n_table.addChild(<any>EEventName.TOUCHMOVE, EEventType.TOUCH);\r\n_table.addChild(<any>EEventName.TOUCHDOWN, EEventType.TOUCH);\r\n_table.addChild(<any>EEventName.TOUCHUP, EEventType.TOUCH);\r\n\r\n_table.addChild(<any>EEngineEvent.POINT_TAP, EEventType.POINT);\r\n_table.addChild(<any>EEngineEvent.POINT_OVER, EEventType.POINT);\r\n_table.addChild(<any>EEngineEvent.POINT_OUT, EEventType.POINT);\r\n_table.addChild(<any>EEngineEvent.POINT_MOVE, EEventType.POINT);\r\n_table.addChild(<any>EEngineEvent.POINT_DOWN, EEventType.POINT);\r\n_table.addChild(<any>EEngineEvent.POINT_UP, EEventType.POINT);\r\n_table.addChild(<any>EEngineEvent.POINT_SCALE, EEventType.POINT);\r\n_table.addChild(<any>EEngineEvent.POINT_DRAG, EEventType.POINT);\r\n\r\n\r\n_table.addChild(<any>EEventName.KEYDOWN, EEventType.KEYBOARD);\r\n_table.addChild(<any>EEventName.KEYPRESS, EEventType.KEYBOARD);\r\n_table.addChild(<any>EEventName.KEYUP, EEventType.KEYBOARD);\r\n\r\n@registerClass(\"EventTable\")\r\nexport class EventTable {\r\n    public static getEventType(eventName: EEventName): EEventType {\r\n        var result = _table.getChild(<any>eventName);\r\n\r\n        if (result === void 0) {\r\n            result = EEventType.CUSTOM;\r\n        }\r\n\r\n        return result;\r\n    }\r\n}","export abstract class EventBinder {\r\n    public abstract on(...args): void;\r\n    public abstract off(...args): void;\r\n}","export abstract class EventHandler {\r\n    public abstract on(...args);\r\n    public abstract off(...args);\r\n    public abstract trigger(...args);\r\n}","import { EventListenerMap } from \"../structure/EventListenerMap\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\nexport abstract class EventRegister {\r\n    protected abstract listenerMap: EventListenerMap;\r\n\r\n    public abstract register(...args): void;\r\n    public abstract remove(...args): any;\r\n\r\n    public getEventRegisterDataList(eventName: EEventName): any;\r\n\r\n    public getEventRegisterDataList(currentTarget: EntityObject, eventName: EEventName): any;\r\n    public getEventRegisterDataList(dom: HTMLElement, eventName: EEventName): any;\r\n\r\n    public getEventRegisterDataList(...args) {\r\n        var result: Collection<EventRegisterData> = this.listenerMap.getChild.apply(this.listenerMap, args);\r\n\r\n        if (!result) {\r\n            return null;\r\n        }\r\n\r\n        return result.sort(function(dataA, dataB) {\r\n            return dataB.priority - dataA.priority;\r\n        }, true);\r\n    }\r\n\r\n    public forEachAll(func: (list: Collection<any>, eventName: EEventName) => void) {\r\n        return this.listenerMap.forEachAll(func);\r\n    }\r\n\r\n    public forEachEventName(func: (list: Collection<EventRegisterData>, eventName: EEventName) => void) {\r\n        this.listenerMap.forEachEventName(func);\r\n    }\r\n\r\n    public clear() {\r\n        return this.listenerMap.clear();\r\n    }\r\n\r\n    public getChild(target: EntityObject);\r\n    public getChild(dom: HTMLElement);\r\n\r\n    public getChild(target: EntityObject, eventName: EEventName);\r\n    public getChild(dom: HTMLElement, eventName: EEventName);\r\n\r\n    public getChild(...args) {\r\n        return this.listenerMap.getChild.apply(\r\n            this.listenerMap,\r\n            Array.prototype.slice.call(arguments, 0)\r\n        );\r\n    }\r\n}\r\n\r\nexport type EventRegisterData = {\r\n    //user's event handler\r\n    originHandler: Function,\r\n    //wraped user's event handler\r\n    handler: Function,\r\n    //dom event handler\r\n    domHandler: Function,\r\n    priority: number\r\n};","import { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\n\r\nexport abstract class EventListenerMap {\r\n    public abstract getChild(...args): Collection<any>;\r\n    public abstract removeChild(...args): any;\r\n    public abstract hasChild(...args): boolean;\r\n    public abstract appendChild(...args): void;\r\n\r\n    public abstract forEachAll(func: (list: Collection<any>, eventName: EEventName) => void): void;\r\n    public abstract forEachEventName(func: (list: Collection<any>, eventName: EEventName) => void): void;\r\n    public abstract clear(): void;\r\n\r\n    protected abstract buildFirstLevelKey(target: EntityObject | HTMLElement): string;\r\n\r\n    protected buildSecondLevelKey(eventName: EEventName): string {\r\n        return <any>eventName;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { EventListenerMap } from \"./EventListenerMap\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { DomEventRegisterData } from \"../binder/DomEventRegister\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { EventRegisterData } from \"../binder/EventRegister\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\n\r\n@registerClass(\"DomEventListenerMap\")\r\nexport class DomEventListenerMap extends EventListenerMap {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _targetListenerMap: Hash<Hash<Collection<DomEventRegisterData>>> = Hash.create<Hash<Collection<DomEventRegisterData>>>();\r\n\r\n    public hasChild(dom: HTMLElement, eventName: EEventName): boolean {\r\n        var list: any = this._targetListenerMap.getChild(this.buildFirstLevelKey(dom));\r\n\r\n        if (!list) {\r\n            return false;\r\n        }\r\n\r\n        list = list.getChild(eventName);\r\n\r\n        return list && list.getCount() > 0;\r\n    }\r\n\r\n    public appendChild(dom: HTMLElement, eventName: EEventName, data: any) {\r\n        var firstLevelKey = this.buildFirstLevelKey(dom);\r\n\r\n        if (!this._targetListenerMap.hasChild(firstLevelKey)) {\r\n            let secondMap = Hash.create<Collection<EventRegisterData>>();\r\n\r\n            secondMap.addChild(this.buildSecondLevelKey(eventName), Collection.create<EventRegisterData>([data]));\r\n\r\n            this._targetListenerMap.addChild(firstLevelKey, secondMap);\r\n\r\n            return;\r\n        }\r\n\r\n        this._targetListenerMap.getChild(firstLevelKey).appendChild(this.buildSecondLevelKey(eventName), data);\r\n    }\r\n\r\n    public forEachAll(func: (list: Collection<DomEventRegisterData>, eventName: EEventName) => void) {\r\n        this._targetListenerMap.forEach((secondMap: Collection<EventRegisterData>) => {\r\n            secondMap.forEach(func);\r\n        });\r\n    }\r\n\r\n    public forEachEventName(func: (list: Collection<DomEventRegisterData>, eventName: EEventName) => void) {\r\n        this.forEachAll(func);\r\n    }\r\n\r\n    public clear() {\r\n        this._targetListenerMap.removeAllChildren();\r\n    }\r\n\r\n    public getChild(dom: HTMLElement): Collection<DomEventRegisterData>;\r\n    public getChild(dom: HTMLElement, eventName: EEventName): Collection<DomEventRegisterData>;\r\n\r\n    public getChild(...args): any {\r\n        if (args.length === 1) {\r\n            let dom = args[0];\r\n\r\n            return this._targetListenerMap.getChild(this.buildFirstLevelKey(dom));\r\n        }\r\n        else if (args.length === 2) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                secondMap = null;\r\n\r\n            secondMap = this._targetListenerMap.getChild(this.buildFirstLevelKey(dom));\r\n\r\n            if (!secondMap) {\r\n                return null;\r\n            }\r\n\r\n            return secondMap.getChild(this.buildSecondLevelKey(eventName));\r\n        }\r\n    }\r\n\r\n    public removeChild(eventName: EEventName): Collection<DomEventOffData>;\r\n    public removeChild(eventName: EEventName, handler: Function): Collection<DomEventOffData>;\r\n    public removeChild(dom: HTMLElement, eventName: EEventName): Collection<DomEventOffData>;\r\n    public removeChild(dom: HTMLElement, eventName: EEventName, handler: Function): Collection<DomEventOffData>;\r\n\r\n    public removeChild(...args) {\r\n        var result: any = null;\r\n\r\n        if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                arr: Array<Collection<DomEventRegisterData>> = [];\r\n\r\n            this._targetListenerMap.forEach((secondMap: Hash<Collection<DomEventRegisterData>>, firstLevelKey: string) => {\r\n                var secondLevelKey = this.buildSecondLevelKey(eventName);\r\n\r\n                if (secondMap.hasChild(secondLevelKey)) {\r\n                    arr.push(secondMap.removeChild(secondLevelKey).getChild(0));\r\n                }\r\n            });\r\n\r\n            let l = Collection.create<DomEventRegisterData>();\r\n\r\n            for (let list of arr) {\r\n                l.addChildren(list);\r\n            }\r\n\r\n            result = this._getEventDataOffDataList(eventName, l);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                arr: Array<Collection<DomEventRegisterData>> = [];\r\n\r\n            this._targetListenerMap.forEach((secondMap: Hash<Collection<DomEventRegisterData>>, firstLevelKey: string) => {\r\n                let list = secondMap.getChild(this.buildSecondLevelKey(eventName));\r\n\r\n                if (list) {\r\n                    arr.push(list.removeChild((data: DomEventRegisterData) => {\r\n                        return data.originHandler === handler\r\n                    }));\r\n                }\r\n            });\r\n\r\n            let l = Collection.create<DomEventRegisterData>();\r\n\r\n            for (let list of arr) {\r\n                l.addChildren(list);\r\n            }\r\n\r\n            result = this._getEventDataOffDataList(eventName, l);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                secondMap = null;\r\n\r\n            secondMap = this._targetListenerMap.getChild(this.buildFirstLevelKey(dom));\r\n\r\n            if (!secondMap) {\r\n                result = Collection.create<DomEventOffData>();\r\n            }\r\n            else {\r\n                result = this._getEventDataOffDataList(eventName, secondMap.removeChild(this.buildSecondLevelKey(eventName)).getChild(0));\r\n            }\r\n        }\r\n        else if (args.length === 3 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                secondMap = null;\r\n\r\n            secondMap = this._targetListenerMap.getChild(this.buildFirstLevelKey(dom));\r\n\r\n            if (!secondMap) {\r\n                result = Collection.create<DomEventOffData>();\r\n            }\r\n            else {\r\n                let list = secondMap.getChild(this.buildSecondLevelKey(eventName));\r\n\r\n                if (!list) {\r\n                    result = Collection.create<DomEventOffData>();\r\n                }\r\n                else {\r\n                    result = this._getEventDataOffDataList(eventName, list.removeChild((val: DomEventRegisterData) => {\r\n                        return val.originHandler === handler;\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    protected buildFirstLevelKey(dom: HTMLElement) {\r\n        if (dom.id) {\r\n            return `${dom.tagName}${dom.id}`;\r\n        }\r\n\r\n        if (dom.nodeName) {\r\n            return `${dom.nodeName}`;\r\n        }\r\n\r\n        return `${dom.tagName}`;\r\n    }\r\n\r\n    private _getEventDataOffDataList(eventName: string, result: Collection<DomEventRegisterData>): any {\r\n        if (!result) {\r\n            return Collection.create<DomEventRegisterData>();\r\n        }\r\n\r\n        return result.map((data: DomEventRegisterData) => {\r\n            return {\r\n                dom: data.dom,\r\n                eventName: eventName,\r\n                domHandler: data.domHandler\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport type DomEventOffData = {\r\n    dom: HTMLElement,\r\n    eventName: EEventName,\r\n    domHandler: Function\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { EventRegister } from \"./EventRegister\";\r\nimport { DomEventListenerMap } from \"../structure/DomEventListenerMap\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\n\r\n@singleton()\r\n@registerClass(\"DomEventRegister\")\r\nexport class DomEventRegister extends EventRegister {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    protected listenerMap: DomEventListenerMap = DomEventListenerMap.create();\r\n\r\n    public register(dom: HTMLElement, eventName: EEventName, eventData: Hash<any>, handler: Function, originHandler: Function, domHandler: Function, priority: number) {\r\n        this.listenerMap.appendChild(dom, eventName, <DomEventRegisterData>{\r\n            dom: dom,\r\n            eventName: eventName,\r\n            eventData: eventData,\r\n            handler: handler,\r\n            originHandler: originHandler,\r\n            domHandler: domHandler,\r\n            priority: priority\r\n        });\r\n    }\r\n\r\n    public remove(eventName: EEventName);\r\n\r\n    public remove(eventName: EEventName, handler: Function);\r\n    public remove(dom: HTMLElement, eventName: EEventName);\r\n\r\n    public remove(dom: HTMLElement, eventName: EEventName, handler: Function);\r\n\r\n\r\n    public remove(...args) {\r\n        var result = null;\r\n\r\n        if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0];\r\n\r\n            result = this.listenerMap.removeChild(eventName);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isFunction(args[1])) {\r\n            let eventName = args[0],\r\n                handler = args[1];\r\n\r\n            result = this.listenerMap.removeChild(eventName, handler);\r\n        }\r\n        else if ((args.length === 2 && JudgeUtils.isDom(args[0])) || args.length === 3) {\r\n            result = this.listenerMap.removeChild.apply(this.listenerMap, args);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public isBinded(dom: HTMLElement, eventName: EEventName) {\r\n        return this.listenerMap.hasChild(dom, eventName);\r\n    }\r\n\r\n    public getDomHandler(dom: HTMLElement, eventName: EEventName) {\r\n        var list: Collection<DomEventRegisterData> = this.getChild(dom, eventName);\r\n\r\n        if (list && list.getCount() > 0) {\r\n            return list.getChild(0).domHandler;\r\n        }\r\n    }\r\n}\r\n\r\nexport type DomEventRegisterData = {\r\n    dom?: HTMLElement,\r\n    target?: EntityObject,\r\n    eventData: Hash<any>,\r\n    //user's event handler\r\n    originHandler: Function,\r\n    //wraped user's event handler\r\n    handler: Function,\r\n    //dom event handler\r\n    domHandler: Function,\r\n    priority: number\r\n};","import { JudgeUtils } from \"./JudgeUtils\";\r\n\r\nexport class EventUtils {\r\n    public static bindEvent(context, func) {\r\n        //var args = Array.prototype.slice.call(arguments, 2),\r\n        //    self = this;\r\n\r\n        return function(event) {\r\n            //return fun.apply(object, [self.wrapEvent(event)].concat(args)); //对事件对象进行包装\r\n            return func.call(context, event);\r\n        }\r\n    }\r\n\r\n    public static addEvent(dom, eventName, handler) {\r\n        if (JudgeUtils.isHostMethod(dom, \"addEventListener\")) {\r\n            dom.addEventListener(eventName, handler, false);\r\n        }\r\n        else if (JudgeUtils.isHostMethod(dom, \"attachEvent\")) {\r\n            dom.attachEvent(\"on\" + eventName, handler);\r\n        }\r\n        else {\r\n            dom[\"on\" + eventName] = handler;\r\n        }\r\n    }\r\n\r\n    public static removeEvent(dom, eventName, handler) {\r\n        if (JudgeUtils.isHostMethod(dom, \"removeEventListener\")) {\r\n            dom.removeEventListener(eventName, handler, false);\r\n        }\r\n        else if (JudgeUtils.isHostMethod(dom, \"detachEvent\")) {\r\n            dom.detachEvent(\"on\" + eventName, handler);\r\n        }\r\n        else {\r\n            dom[\"on\" + eventName] = null;\r\n        }\r\n    }\r\n}","import { EventHandler } from \"./EventHandler\";\r\nimport { EEventName, EventNameHandler } from \"../object/EventNameHandler\";\r\nimport { DomEventRegister, DomEventRegisterData } from \"../binder/DomEventRegister\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { DomEventOffData } from \"../structure/DomEventListenerMap\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { Event } from \"../object/Event\";\r\nimport { IEventData } from \"../interface/IEventData\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { virtual } from \"../../definition/typescript/decorator/virtual\";\r\nimport { root } from \"../../definition/Variable\";\r\nimport { EventUtils } from \"wonder-commonlib/dist/es2015/utils/EventUtils\";\r\n\r\nexport abstract class DomEventHandler extends EventHandler {\r\n    public off(): void;\r\n    public off(eventName: EEventName): void;\r\n\r\n    public off(eventName: EEventName, handler: Function): void;\r\n    public off(dom: HTMLElement, eventName: EEventName): void;\r\n\r\n    public off(dom: HTMLElement, eventName: EEventName, handler: Function): void;\r\n\r\n    public off(...args) {\r\n        var self = this,\r\n            eventName: EEventName = null,\r\n            dom: HTMLElement = null,\r\n            eventRegister = DomEventRegister.getInstance(),\r\n            eventOffDataList: Collection<DomEventOffData> = null;\r\n\r\n        if (args.length === 1) {\r\n            eventName = args[0];\r\n\r\n            dom = this.getDefaultDom();\r\n\r\n            eventOffDataList = eventRegister.remove(eventName);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isDom(args[0])) {\r\n            dom = args[0];\r\n            eventName = args[1];\r\n\r\n            eventOffDataList = eventRegister.remove(dom, eventName);\r\n        }\r\n        else if (args.length === 2) {\r\n            let handler = args[1];\r\n\r\n            eventName = args[0];\r\n            dom = this.getDefaultDom();\r\n\r\n            eventOffDataList = eventRegister.remove(eventName, handler);\r\n        }\r\n        else {\r\n            let handler = args[2];\r\n\r\n            dom = args[0];\r\n            eventName = args[1];\r\n\r\n            eventOffDataList = eventRegister.remove(dom, eventName, handler);\r\n        }\r\n\r\n\r\n        if (eventOffDataList && !eventRegister.isBinded(dom, eventName)) {\r\n            eventOffDataList.forEach((eventOffData: DomEventOffData) => {\r\n                self._unBind(eventOffData.dom, eventOffData.eventName, eventOffData.domHandler);\r\n            })\r\n        }\r\n    }\r\n\r\n    public trigger(event: Event): void;\r\n    public trigger(dom: HTMLElement, event: Event): void;\r\n\r\n    public trigger(...args): void {\r\n        var dom = null,\r\n            event = null,\r\n            eventName = null,\r\n            registerDataList: Collection<DomEventRegisterData> = null;\r\n\r\n        if (args.length === 1) {\r\n            event = args[0];\r\n            dom = this.getDefaultDom();\r\n        }\r\n        else {\r\n            dom = args[0];\r\n            event = args[1];\r\n        }\r\n\r\n        eventName = event.name;\r\n\r\n        registerDataList = DomEventRegister.getInstance().getEventRegisterDataList(dom, eventName);\r\n\r\n        if (registerDataList === null || registerDataList.getCount() === 0) {\r\n            return;\r\n        }\r\n\r\n        registerDataList.forEach((registerData: DomEventRegisterData) => {\r\n            var eventCopy = event.clone();\r\n\r\n            registerData.handler(eventCopy, registerData.eventData);\r\n        });\r\n    }\r\n\r\n    protected abstract triggerDomEvent(dom: HTMLElement, event: IEventData, eventName: EEventName);\r\n    protected abstract addEngineHandler(eventName: EEventName, handler: Function);\r\n    protected abstract getDefaultDom(): HTMLElement;\r\n    protected abstract createEventData(): Hash<any>;\r\n\r\n    @virtual\r\n    protected clearHandler() {\r\n    }\r\n\r\n    protected buildDomHandler(dom: HTMLElement, eventName: EEventName) {\r\n        var self = this,\r\n            context = root;\r\n\r\n        return EventUtils.bindEvent(context, function(event) {\r\n            self.triggerDomEvent(dom, event, eventName);\r\n        });\r\n    }\r\n\r\n    protected handler(dom: HTMLElement, eventName: EEventName, handler: Function, priority: number) {\r\n        var domHandler = null,\r\n            originHandler = handler;\r\n\r\n        handler = this.addEngineHandler(eventName, handler);\r\n\r\n        if (!DomEventRegister.getInstance().isBinded(dom, eventName)) {\r\n            domHandler = this._bind(dom, eventName);\r\n        }\r\n        else {\r\n            domHandler = DomEventRegister.getInstance().getDomHandler(dom, eventName);\r\n        }\r\n\r\n        DomEventRegister.getInstance().register(\r\n            dom,\r\n            eventName,\r\n            this.createEventData(),\r\n            handler,\r\n            originHandler,\r\n            domHandler,\r\n            priority\r\n        );\r\n    }\r\n\r\n    private _bind(dom: HTMLElement, eventName: EEventName) {\r\n        var domHandler = null;\r\n\r\n        domHandler = this.buildDomHandler(dom, eventName);\r\n\r\n        EventUtils.addEvent(\r\n            dom,\r\n            EventNameHandler.handleEventName(eventName),\r\n            domHandler\r\n        );\r\n\r\n        return domHandler;\r\n    }\r\n\r\n    private _unBind(dom, eventName, handler) {\r\n        EventUtils.removeEvent(dom, EventNameHandler.handleEventName(eventName), handler);\r\n    }\r\n}","import { DomEventHandler } from \"./DomEventHandler\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { DomEvent } from \"../object/DomEvent\";\r\nimport { requireCheck, it } from \"../../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { IEventData } from \"../interface/IEventData\";\r\nimport { EventManager } from \"../EventManager\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { MouseEvent } from \"../object/MouseEvent\";\r\nimport { TouchEvent } from \"../object/TouchEvent\";\r\n\r\nexport abstract class PointEventHandler extends DomEventHandler {\r\n    public on(eventName: EEventName, handler: (event: DomEvent) => void, priority: number);\r\n    public on(dom: HTMLElement, eventName: EEventName, handler: (event: DomEvent) => void, priority: number);\r\n\r\n    @requireCheck(function(...args) {\r\n        if (args.length === 4) {\r\n            let dom = args[0];\r\n\r\n            it(\"first param should be HTMLElement\", () => {\r\n                expect(JudgeUtils.isDom(dom)).true;\r\n            });\r\n        }\r\n    })\r\n    public on(...args) {\r\n        var dom: HTMLElement = null,\r\n            eventName = null,\r\n            handler = null,\r\n            priority = null;\r\n\r\n        if (args.length === 3) {\r\n            dom = this.getDefaultDom();\r\n\r\n            eventName = args[0];\r\n            handler = args[1];\r\n            priority = args[2];\r\n        }\r\n        else {\r\n            dom = args[0];\r\n            eventName = args[1];\r\n            handler = args[2];\r\n            priority = args[3];\r\n        }\r\n\r\n        this.handler(dom, eventName, handler, priority);\r\n    }\r\n\r\n    protected abstract createEventObject(dom: HTMLElement, event: IEventData, eventName: EEventName): DomEvent;\r\n\r\n    protected getDefaultDom(): HTMLElement {\r\n        return document.body;\r\n    }\r\n\r\n    protected triggerDomEvent(dom: HTMLElement, event: IEventData, eventName: EEventName) {\r\n        var eventObj = this.createEventObject(dom, event, eventName);\r\n\r\n        EventManager.trigger(dom, eventObj);\r\n    }\r\n\r\n    protected createEventData(): Hash<any> {\r\n        var eventData = Hash.create<any>();\r\n\r\n        eventData.addChild(\"lastX\", null);\r\n        eventData.addChild(\"lastY\", null);\r\n\r\n        return eventData;\r\n    }\r\n\r\n    protected handleMove(handler: (event: MouseEvent | TouchEvent) => void) {\r\n        var self = this;\r\n\r\n        return (event: MouseEvent | TouchEvent, eventData: Hash<any>) => {\r\n            self._copyEventDataToEventObject(event, eventData);\r\n\r\n            handler(event);\r\n\r\n            self._saveLocation(event, eventData);\r\n        };\r\n    }\r\n\r\n    private _copyEventDataToEventObject(event: MouseEvent | TouchEvent, eventData: Hash<any>) {\r\n        event.lastX = eventData.getChild(\"lastX\");\r\n        event.lastY = eventData.getChild(\"lastY\");\r\n    }\r\n\r\n    private _saveLocation(event: MouseEvent | TouchEvent, eventData: Hash<any>) {\r\n        var location = event.location;\r\n\r\n        eventData.setValue(\"lastX\", location.x);\r\n        eventData.setValue(\"lastY\", location.y);\r\n    }\r\n}","import { EEventName } from \"./EventNameHandler\";\r\nimport { EEventType } from \"./EEventType\";\r\nimport { EEngineEvent } from \"../EEngineEvent\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { EEventPhase } from \"./EEventPhase\";\r\n\r\nexport abstract class Event {\r\n    protected constructor(eventName: EEventName) {\r\n        this.name = eventName;\r\n    }\r\n\r\n    public readonly abstract type: EEventType;\r\n\r\n    public name: string | EEventName | EEngineEvent = null;\r\n    //target is the actual target that received the event.\r\n    public target: HTMLElement | EntityObject;\r\n    //currentTarget is always the object listening for the event\r\n    public currentTarget: HTMLElement | EntityObject = null;\r\n    public isStopPropagation: boolean = false;\r\n    public phase: EEventPhase = null;\r\n\r\n    public abstract clone();\r\n\r\n    public stopPropagation() {\r\n        this.isStopPropagation = true;\r\n    }\r\n\r\n    protected copyMember(destination: Event, source: Event, memberArr: [any]) {\r\n        memberArr.forEach((member) => {\r\n            destination[member] = source[member];\r\n        });\r\n\r\n        return destination;\r\n    }\r\n}","import { Event } from \"./Event\";\r\nimport { EEventName } from \"./EventNameHandler\";\r\nimport { root } from \"../../definition/Variable\";\r\nimport { msie, version } from \"bowser\";\r\nimport { CustomEvent } from \"./CustomEvent\";\r\n\r\nexport abstract class DomEvent extends Event {\r\n    constructor(event: any, eventName: EEventName) {\r\n        super(eventName);\r\n\r\n        this.event = event;\r\n    }\r\n\r\n    private _event: any = null;\r\n    get event() {\r\n        return this._event;\r\n    }\r\n    set event(event: any) {\r\n        this._event = event || root.event;\r\n    }\r\n\r\n    public preventDefault() {\r\n        var e = this._event;\r\n\r\n        if (msie && Number(version) <= 8) {\r\n            e.returnValue = false;\r\n        }\r\n        else {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    public getDataFromCustomEvent(event: CustomEvent) {\r\n        this.target = event.target;\r\n        this.currentTarget = event.currentTarget;\r\n        this.isStopPropagation = event.isStopPropagation;\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n@registerClass(\"Point\")\r\nexport class Point {\r\n    public x: number = null;\r\n    public y: number = null;\r\n\r\n    constructor(x: number = null, y: number = null) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    public static create(x: number = null, y: number = null) {\r\n        var obj = new this(x, y);\r\n\r\n        return obj;\r\n    }\r\n}","export enum EMouseButton {\r\n    LEFT,\r\n    RIGHT,\r\n    CENTER\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { DomEvent } from \"./DomEvent\";\r\nimport { IMouseEventData } from \"../interface/IEventData\";\r\nimport { EEventName } from \"./EventNameHandler\";\r\nimport { Point } from \"../../structure/Point\";\r\nimport { msie, mobile } from \"bowser\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\nimport { EMouseButton } from \"./EMouseButton\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { EEventType } from \"./EEventType\";\r\n\r\ndeclare var document: any;\r\n\r\n@registerClass(\"MouseEvent\")\r\nexport class MouseEvent extends DomEvent {\r\n    public static create(event: IMouseEventData, eventName: EEventName) {\r\n        var obj = new this(event, eventName);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public event: IMouseEventData;\r\n\r\n    private _location: Point = null;\r\n    get location(): Point {\r\n        var point: Point = null,\r\n            e = this.event;\r\n\r\n        if (this._location) {\r\n            return this._location;\r\n        }\r\n\r\n        point = Point.create();\r\n\r\n        if (msie) {\r\n            point.x = e.clientX + document.body.scrollLeft || document.documentElement.scrollLeft;\r\n            point.y = e.clientY + document.body.scrollTop || document.documentElement.scrollTop;\r\n        }\r\n        else {\r\n            point.x = e.pageX;\r\n            point.y = e.pageY;\r\n        }\r\n\r\n        return point;\r\n    }\r\n    set location(point: Point) {\r\n        this._location = point;\r\n    }\r\n\r\n\r\n    private _locationInView: Point = null;\r\n    get locationInView(): Point {\r\n        var point: Point = null,\r\n            viewOffset: any = null;\r\n\r\n        if (this._locationInView) {\r\n            return this._locationInView;\r\n        }\r\n\r\n        point = this.location;\r\n\r\n\r\n        viewOffset = DeviceManager.getInstance().view.offset;\r\n\r\n        return Point.create(point.x - viewOffset.x, point.y - viewOffset.y);\r\n    }\r\n    set locationInView(locationInView: Point) {\r\n        this._locationInView = locationInView;\r\n    }\r\n\r\n    private _button: number = null;\r\n    get button() {\r\n        var e = this.event,\r\n            mouseButton: number = null;\r\n\r\n        if (mobile) {\r\n            return null;\r\n        }\r\n\r\n        if (this._button !== null) {\r\n            return this._button;\r\n        }\r\n\r\n        if (msie) {\r\n            switch (e.button) {\r\n                case 1:\r\n                    mouseButton = EMouseButton.LEFT;\r\n                    break;\r\n                case 4:\r\n                    mouseButton = EMouseButton.RIGHT;\r\n                    break;\r\n                case 2:\r\n                    mouseButton = EMouseButton.CENTER;\r\n                    break;\r\n                default:\r\n                    Log.error(true, Log.info.FUNC_NOT_SUPPORT(\"multi mouse button\"));\r\n                    break;\r\n            }\r\n        }\r\n        else {\r\n            switch (e.button) {\r\n                case 0:\r\n                    mouseButton = EMouseButton.LEFT;\r\n                    break;\r\n                case 1:\r\n                    mouseButton = EMouseButton.RIGHT;\r\n                    break;\r\n                case 2:\r\n                    mouseButton = EMouseButton.CENTER;\r\n                    break;\r\n                default:\r\n                    Log.error(true, Log.info.FUNC_NOT_SUPPORT(\"multi mouse button\"));\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return mouseButton;\r\n    }\r\n    set button(button: number) {\r\n        this._button = button;\r\n    }\r\n\r\n    get wheel() {\r\n        /*!\r\n         FF uses 'detail' and returns a value in 'no. of lines' to scroll\r\n         WebKit and Opera use 'wheelDelta', WebKit goes in multiples of 120 per wheel notch\r\n         */\r\n        var e = this.event;\r\n\r\n        if (mobile) {\r\n            return null;\r\n        }\r\n\r\n        if (e.detail) {\r\n            return -1 * e.detail;\r\n        }\r\n\r\n        if (e.wheelDelta) {\r\n            return e.wheelDelta / 120;\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    get movementDelta() {\r\n        var e = this.event,\r\n            dx = null,\r\n            dy = null;\r\n\r\n        if (this._isPointerLocked()) {\r\n            dx = e.movementX || e.webkitMovementX || e.mozMovementX || 0;\r\n            dy = e.movementY || e.webkitMovementY || e.mozMovementY || 0;\r\n        }\r\n        else {\r\n            let location = this.location,\r\n                lastX = this.lastX,\r\n                lastY = this.lastY;\r\n\r\n            if (lastX === null && lastY === null) {\r\n                dx = 0;\r\n                dy = 0;\r\n            }\r\n            else {\r\n                dx = location.x - lastX;\r\n                dy = location.y - lastY;\r\n            }\r\n        }\r\n\r\n        return {\r\n            x: dx,\r\n            y: dy\r\n        }\r\n    }\r\n\r\n    public readonly type: EEventType = EEventType.MOUSE;\r\n\r\n    public lastX: number = null;\r\n    public lastY: number = null;\r\n\r\n    public clone(): MouseEvent {\r\n        var eventObj = MouseEvent.create(this.event, <EEventName>this.name);\r\n\r\n        return <MouseEvent>this.copyMember(eventObj, this, [\"target\", \"currentTarget\", \"isStopPropagation\", \"phase\", \"lastX\", \"lastY\"]);\r\n    }\r\n\r\n    private _isPointerLocked() {\r\n        return !!(document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement);\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { PointEventHandler } from \"./PointEventHandler\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { MouseEvent } from \"../object/MouseEvent\";\r\nimport { IMouseEventData } from \"../interface/IEventData\";\r\nimport { root } from \"../../definition/Variable\";\r\n\r\n@singleton()\r\n@registerClass(\"MouseEventHandler\")\r\nexport class MouseEventHandler extends PointEventHandler {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    protected addEngineHandler(eventName: EEventName, handler: (event: MouseEvent) => void) {\r\n        var resultHandler = null;\r\n\r\n        switch (eventName) {\r\n            case EEventName.MOUSEMOVE:\r\n                resultHandler = this.handleMove(handler);\r\n                break;\r\n            default:\r\n                resultHandler = handler;\r\n                break;\r\n        }\r\n\r\n        return resultHandler;\r\n    }\r\n\r\n    protected createEventObject(dom: HTMLElement, event: IMouseEventData, eventName: EEventName) {\r\n        var obj = MouseEvent.create(event ? event : root.event, eventName);\r\n\r\n        obj.target = dom;\r\n\r\n        return obj;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { DomEvent } from \"./DomEvent\";\r\nimport { ITouchEventData, ITouchData } from \"../interface/IEventData\";\r\nimport { EEventName } from \"./EventNameHandler\";\r\nimport { Point } from \"../../structure/Point\";\r\nimport { ensureGetter, it } from \"../../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\nimport { EEventType } from \"./EEventType\";\r\n\r\n@registerClass(\"TouchEvent\")\r\nexport class TouchEvent extends DomEvent {\r\n    public static create(event: ITouchEventData, eventName: EEventName) {\r\n        var obj = new this(event, eventName);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public event: ITouchEventData;\r\n\r\n    private _location: Point = null;\r\n    get location(): Point {\r\n        var point: Point = null;\r\n\r\n        if (this._location) {\r\n            return this._location;\r\n        }\r\n\r\n        let touchData = this.touchData;\r\n\r\n        point = Point.create();\r\n\r\n        point.x = touchData.pageX;\r\n        point.y = touchData.pageY;\r\n\r\n        return point;\r\n    }\r\n    set location(point: Point) {\r\n        this._location = point;\r\n    }\r\n\r\n    @ensureGetter(function(touchData: ITouchData) {\r\n        it(\"should exist touch data\", () => {\r\n            expect(touchData).exist;\r\n        }, this);\r\n    })\r\n    get touchData(): ITouchData {\r\n        var touches = this.event.changedTouches;\r\n\r\n        return touches[0];\r\n    }\r\n\r\n    private _locationInView: Point = null;\r\n    get locationInView(): Point {\r\n        var point: Point = null,\r\n            viewOffset: any = null;\r\n\r\n        if (this._locationInView) {\r\n            return this._locationInView;\r\n        }\r\n\r\n        point = this.location;\r\n\r\n\r\n        viewOffset = DeviceManager.getInstance().view.offset;\r\n\r\n        return Point.create(point.x - viewOffset.x, point.y - viewOffset.y);\r\n    }\r\n    set locationInView(locationInView: Point) {\r\n        this._locationInView = locationInView;\r\n    }\r\n\r\n    get movementDelta() {\r\n        var dx = null,\r\n            dy = null,\r\n            location = this.location,\r\n            lastX = this.lastX,\r\n            lastY = this.lastY;\r\n\r\n        if (lastX === null && lastY === null) {\r\n            dx = 0;\r\n            dy = 0;\r\n        }\r\n        else {\r\n            dx = location.x - lastX;\r\n            dy = location.y - lastY;\r\n        }\r\n\r\n        return {\r\n            x: dx,\r\n            y: dy\r\n        }\r\n    }\r\n\r\n    public readonly type: EEventType = EEventType.TOUCH;\r\n\r\n    public lastX: number = null;\r\n    public lastY: number = null;\r\n\r\n    public clone(): TouchEvent {\r\n        var eventObj = TouchEvent.create(this.event, <EEventName>this.name);\r\n\r\n        return <TouchEvent>this.copyMember(eventObj, this, [\"target\", \"currentTarget\", \"isStopPropagation\", \"phase\", \"lastX\", \"lastY\"]);\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { PointEventHandler } from \"./PointEventHandler\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { TouchEvent } from \"../object/TouchEvent\";\r\nimport { ITouchEventData } from \"../interface/IEventData\";\r\nimport { root } from \"../../definition/Variable\";\r\n\r\n@singleton()\r\n@registerClass(\"TouchEventHandler\")\r\nexport class TouchEventHandler extends PointEventHandler {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    protected addEngineHandler(eventName: EEventName, handler: (event: TouchEvent) => void) {\r\n        var resultHandler = null;\r\n\r\n        switch (eventName) {\r\n            case EEventName.TOUCHMOVE:\r\n                resultHandler = this.handleMove(handler);\r\n                break;\r\n            default:\r\n                resultHandler = handler;\r\n                break;\r\n        }\r\n\r\n        return resultHandler;\r\n    }\r\n\r\n    protected createEventObject(dom: HTMLElement, event: ITouchEventData, eventName: EEventName) {\r\n        var obj = TouchEvent.create(event ? event : root.event, eventName);\r\n\r\n        obj.target = dom;\r\n\r\n        return obj;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { DomEvent } from \"./DomEvent\";\r\nimport { EEventName } from \"./EventNameHandler\";\r\nimport { IKeyboardEventData } from \"../interface/IEventData\";\r\nimport { EEventType } from \"./EEventType\";\r\n\r\nconst SPECIAL_KEY_MAP = {\r\n    8: \"backspace\",\r\n    9: \"tab\",\r\n    10: \"return\",\r\n    13: \"return\",\r\n    16: \"shift\",\r\n    17: \"ctrl\",\r\n    18: \"alt\",\r\n    19: \"pause\",\r\n    20: \"capslock\",\r\n    27: \"esc\",\r\n    32: \"space\",\r\n    33: \"pageup\",\r\n    34: \"pagedown\",\r\n    35: \"end\",\r\n    36: \"home\",\r\n    37: \"left\",\r\n    38: \"up\",\r\n    39: \"right\",\r\n    40: \"down\",\r\n    45: \"insert\",\r\n    46: \"del\",\r\n    59: \";\",\r\n    61: \"=\",\r\n    65: \"a\",\r\n    66: \"b\",\r\n    67: \"c\",\r\n    68: \"d\",\r\n    69: \"e\",\r\n    70: \"f\",\r\n    71: \"g\",\r\n    72: \"h\",\r\n    73: \"i\",\r\n    74: \"j\",\r\n    75: \"k\",\r\n    76: \"l\",\r\n    77: \"m\",\r\n    78: \"n\",\r\n    79: \"o\",\r\n    80: \"p\",\r\n    81: \"q\",\r\n    82: \"r\",\r\n    83: \"s\",\r\n    84: \"t\",\r\n    85: \"u\",\r\n    86: \"v\",\r\n    87: \"w\",\r\n    88: \"x\",\r\n    89: \"y\",\r\n    90: \"z\",\r\n    96: \"0\",\r\n    97: \"1\",\r\n    98: \"2\",\r\n    99: \"3\",\r\n    100: \"4\",\r\n    101: \"5\",\r\n    102: \"6\",\r\n    103: \"7\",\r\n    104: \"8\",\r\n    105: \"9\",\r\n    106: \"*\",\r\n    107: \"+\",\r\n    109: \"-\",\r\n    110: \".\",\r\n    111: \"/\",\r\n    112: \"f1\",\r\n    113: \"f2\",\r\n    114: \"f3\",\r\n    115: \"f4\",\r\n    116: \"f5\",\r\n    117: \"f6\",\r\n    118: \"f7\",\r\n    119: \"f8\",\r\n    120: \"f9\",\r\n    121: \"f10\",\r\n    122: \"f11\",\r\n    123: \"f12\",\r\n    144: \"numlock\",\r\n    145: \"scroll\",\r\n    173: \"-\",\r\n    186: \";\",\r\n    187: \"=\",\r\n    188: \",\",\r\n    189: \"-\",\r\n    190: \".\",\r\n    191: \"/\",\r\n    192: \"`\",\r\n    219: \"[\",\r\n    220: \"\\\\\",\r\n    221: \"]\",\r\n    222: \"'\"\r\n},\r\n    SHIFT_KEY_MAP = {\r\n        \"`\": \"~\",\r\n        \"1\": \"!\",\r\n        \"2\": \"@\",\r\n        \"3\": \"#\",\r\n        \"4\": \"$\",\r\n        \"5\": \"%\",\r\n        \"6\": \"^\",\r\n        \"7\": \"&\",\r\n        \"8\": \"*\",\r\n        \"9\": \"(\",\r\n        \"0\": \")\",\r\n        \"-\": \"_\",\r\n        \"=\": \"+\",\r\n        \";\": \": \",\r\n        \"'\": \"\\\"\",\r\n        \",\": \"<\",\r\n        \".\": \">\",\r\n        \"/\": \"?\",\r\n        \"\\\\\": \"|\"\r\n    };\r\n\r\n@registerClass(\"KeyboardEvent\")\r\nexport class KeyboardEvent extends DomEvent {\r\n    public static create(event: any, eventName: EEventName) {\r\n        var obj = new this(event, eventName);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public event: IKeyboardEventData;\r\n\r\n    get ctrlKey() {\r\n        return this.event.ctrlKey;\r\n    }\r\n\r\n    get altKey() {\r\n        return this.event.altKey;\r\n    }\r\n\r\n    get shiftKey() {\r\n        return this.event.shiftKey;\r\n    }\r\n\r\n    get metaKey() {\r\n        //return this.event.metaKey && !this.ctrlKey;\r\n        return this.event.metaKey;\r\n    }\r\n\r\n    get keyCode() {\r\n        return this.event.keyCode;\r\n    }\r\n\r\n    get key() {\r\n        var key = SPECIAL_KEY_MAP[this.keyCode],\r\n            char = null;\r\n\r\n        if (!key) {\r\n            char = String.fromCharCode(this.keyCode).toLowerCase();\r\n\r\n            if (this.shiftKey) {\r\n                return SHIFT_KEY_MAP[char];\r\n            }\r\n\r\n            return char;\r\n        }\r\n\r\n        return key;\r\n    }\r\n\r\n    public readonly type: EEventType = EEventType.KEYBOARD;\r\n\r\n    public keyState: any = null;\r\n\r\n    public clone(): KeyboardEvent {\r\n        var eventObj = KeyboardEvent.create(this.event, <EEventName>this.name);\r\n\r\n        return <KeyboardEvent>this.copyMember(eventObj, this, [\"target\", \"currentTarget\", \"isStopPropagation\", \"phase\"]);\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { DomEventHandler } from \"./DomEventHandler\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { KeyboardEvent } from \"../object/KeyboardEvent\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { IKeyboardEventData } from \"../interface/IEventData\";\r\nimport { EventManager } from \"../EventManager\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { root } from \"../../definition/Variable\";\r\n\r\ndeclare var document: any;\r\n\r\n//todo bind on EntityObject which has the focus\r\n@singleton()\r\n@registerClass(\"KeyboardEventHandler\")\r\nexport class KeyboardEventHandler extends DomEventHandler {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    //public keyState:any = {};\r\n\r\n    public on(eventName: EEventName, handler: (event: KeyboardEvent) => void, priority: number);\r\n    public on(dom: HTMLElement, eventName: EEventName, handler: (event: KeyboardEvent) => void, priority: number);\r\n\r\n    public on(...args) {\r\n        var eventName = null,\r\n            handler = null,\r\n            priority = null;\r\n\r\n        if (args.length === 3) {\r\n            eventName = args[0];\r\n            handler = args[1];\r\n            priority = args[2];\r\n        }\r\n        else {\r\n            Log.warn(\"keyboard event can only bind on document.body\");\r\n\r\n            eventName = args[1];\r\n            handler = args[2];\r\n            priority = args[3];\r\n        }\r\n\r\n        this.handler(this.getDefaultDom(), eventName, handler, priority);\r\n    }\r\n\r\n    protected triggerDomEvent(dom: HTMLElement, event: IKeyboardEventData, eventName: EEventName) {\r\n        var eventObj = this._createEventObject(dom, event, eventName);\r\n\r\n        EventManager.trigger(dom, eventObj);\r\n    }\r\n\r\n    protected getDefaultDom(): HTMLElement {\r\n        return document.body;\r\n    }\r\n\r\n    protected addEngineHandler(eventName: EEventName, handler: (event: KeyboardEvent) => void) {\r\n        var resultHandler = null;\r\n\r\n        switch (eventName) {\r\n            case EEventName.KEYDOWN:\r\n                resultHandler = this._handleKeyDown(handler);\r\n                break;\r\n            case EEventName.KEYUP:\r\n                resultHandler = this._handleKeyUp(handler);\r\n                break;\r\n            default:\r\n                resultHandler = handler;\r\n                break;\r\n        }\r\n\r\n        return resultHandler;\r\n    }\r\n\r\n    protected createEventData(): Hash<any> {\r\n        var eventData = Hash.create<any>();\r\n\r\n        eventData.addChild(\"keyState\", {});\r\n\r\n        return eventData;\r\n    }\r\n\r\n    private _handleKeyDown(handler: (event: KeyboardEvent) => void) {\r\n        var self = this;\r\n\r\n        return (event: KeyboardEvent, eventData: Hash<any>) => {\r\n            var keyState: any = eventData.getChild(\"keyState\");\r\n\r\n            self._setKeyStateAllFalse(keyState);\r\n            keyState[event.key] = true;\r\n\r\n            self._copyEventDataToEventObject(event, eventData);\r\n\r\n            handler(event);\r\n        };\r\n    }\r\n\r\n    private _handleKeyUp(handler: (event: KeyboardEvent) => void) {\r\n        var self = this;\r\n\r\n        return (event: KeyboardEvent, eventData: Hash<any>) => {\r\n            self._setKeyStateAllFalse(eventData.getChild(\"keyState\"));\r\n\r\n            self._copyEventDataToEventObject(event, eventData);\r\n\r\n            handler(event);\r\n        };\r\n    }\r\n\r\n    private _copyEventDataToEventObject(event: KeyboardEvent, eventData: Hash<any>) {\r\n        event.keyState = eventData.getChild(\"keyState\");\r\n    }\r\n\r\n    private _setKeyStateAllFalse(keyState: any) {\r\n        for (let i in keyState) {\r\n            if (keyState.hasOwnProperty(i)) {\r\n                keyState[i] = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _createEventObject(dom: HTMLElement, event: any, eventName: EEventName) {\r\n        var obj = KeyboardEvent.create(event ? event : root.event, eventName);\r\n\r\n        obj.target = dom;\r\n\r\n        return obj;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { EventListenerMap } from \"./EventListenerMap\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { CustomEventRegisterData } from \"../binder/CustomEventRegister\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\n\r\n@registerClass(\"CustomEventListenerMap\")\r\nexport class CustomEventListenerMap extends EventListenerMap {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _globalListenerMap: Hash<Collection<CustomEventRegisterData>> = Hash.create<Collection<CustomEventRegisterData>>();\r\n    private _targetRecordMap: Hash<EntityObject> = Hash.create<EntityObject>();\r\n\r\n    public hasChild(target: EntityObject) {\r\n        return target.customEventMap.getCount() > 0;\r\n    }\r\n\r\n    public appendChild(eventName: EEventName, data: any);\r\n    public appendChild(target: EntityObject, eventName: EEventName, data: any);\r\n\r\n    public appendChild(...args) {\r\n        if (args.length === 2) {\r\n            let eventName: EEventName = args[0],\r\n                data: any = args[1];\r\n\r\n            this._globalListenerMap.appendChild(<any>eventName, data);\r\n        }\r\n        else {\r\n            let target: EntityObject = args[0],\r\n                eventName: EEventName = args[1],\r\n                data: any = args[2];\r\n\r\n            this._targetRecordMap.addChild(this.buildFirstLevelKey(target), target);\r\n\r\n            target.customEventMap.appendChild(this.buildSecondLevelKey(eventName), data);\r\n        }\r\n    }\r\n\r\n    public forEachAll(func: (list: Collection<CustomEventRegisterData>, eventName: EEventName) => void) {\r\n        this._globalListenerMap.forEach(func);\r\n\r\n        this._targetRecordMap.forEach((target: EntityObject) => {\r\n            target.customEventMap.forEach(func);\r\n        });\r\n    }\r\n\r\n    public forEachEventName(func: (list: Collection<CustomEventRegisterData>, eventName: EEventName) => void) {\r\n        this._globalListenerMap.forEach(func);\r\n    }\r\n\r\n    public clear() {\r\n        this._globalListenerMap.removeAllChildren();\r\n\r\n        this._targetRecordMap.forEach((target: EntityObject) => {\r\n            target.customEventMap.removeAllChildren();\r\n        });\r\n        this._targetRecordMap.removeAllChildren();\r\n    }\r\n\r\n    public getChild(eventName: EEventName): Collection<CustomEventRegisterData>;\r\n    public getChild(target: EntityObject): Collection<CustomEventRegisterData>;\r\n    public getChild(target: EntityObject, eventName: EEventName): Collection<CustomEventRegisterData>;\r\n\r\n    public getChild(...args): any {\r\n        if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0];\r\n\r\n            return this._globalListenerMap.getChild(eventName);\r\n        }\r\n        else if (args.length === 1 && args[0] instanceof EntityObject) {\r\n            let target = args[0];\r\n\r\n            return target.customEventMap;\r\n        }\r\n        else if (args.length === 2) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                secondMap = null;\r\n\r\n            secondMap = target.customEventMap;\r\n\r\n            if (!secondMap) {\r\n                return null;\r\n            }\r\n\r\n            return secondMap.getChild(this.buildSecondLevelKey(eventName));\r\n        }\r\n    }\r\n\r\n    public removeChild(eventName: EEventName): void;\r\n    public removeChild(target: EntityObject): void;\r\n\r\n    public removeChild(eventName: EEventName, handler: Function): void;\r\n    public removeChild(uid: number, eventName: EEventName): void;\r\n    public removeChild(target: EntityObject, eventName: EEventName): void;\r\n\r\n    public removeChild(target: EntityObject, eventName: EEventName, handler: Function): void;\r\n\r\n\r\n    public removeChild(...args): void {\r\n        if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0];\r\n\r\n            this._globalListenerMap.removeChild(eventName);\r\n        }\r\n        else if (args.length === 1 && args[0] instanceof EntityObject) {\r\n            let target = args[0];\r\n\r\n            target.customEventMap.removeAllChildren();\r\n            this._targetRecordMap.removeChild(this.buildFirstLevelKey(target));\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                list = null;\r\n\r\n            list = this._globalListenerMap.getChild(eventName);\r\n\r\n            if (!!list) {\r\n                list.removeChild((val: CustomEventRegisterData) => {\r\n                    return val.originHandler === handler;\r\n                });\r\n\r\n                if (list.getCount() === 0) {\r\n                    this._globalListenerMap.removeChild(eventName);\r\n                }\r\n            }\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isNumber(args[0])) {\r\n            let uid = args[0],\r\n                eventName = args[1],\r\n                secondMap = null;\r\n\r\n            secondMap = <any>(this._targetRecordMap.getChild(this.buildFirstLevelKey(uid)));\r\n\r\n            if (!!secondMap) {\r\n                secondMap.removeChild(this.buildSecondLevelKey(eventName));\r\n            }\r\n        }\r\n        else if (args.length === 2 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                secondMap = null;\r\n\r\n            secondMap = target.customEventMap;\r\n\r\n            if (!!secondMap) {\r\n                secondMap.removeChild(this.buildSecondLevelKey(eventName));\r\n            }\r\n        }\r\n        else if (args.length === 3 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                secondMap = null;\r\n\r\n            secondMap = target.customEventMap;\r\n\r\n            if (!!secondMap) {\r\n                let secondList = secondMap.getChild(eventName);\r\n\r\n                if (!!secondList) {\r\n                    secondList.removeChild((val: CustomEventRegisterData) => {\r\n                        return val.originHandler === handler;\r\n                    });\r\n\r\n                    if (secondList.getCount() === 0) {\r\n                        secondMap.removeChild(eventName);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected buildFirstLevelKey(target: EntityObject);\r\n    protected buildFirstLevelKey(uid: number);\r\n\r\n    protected buildFirstLevelKey(...args) {\r\n        var v = args[0],\r\n            uid = v.uid;\r\n\r\n        if (uid) {\r\n            return String(uid);\r\n        }\r\n\r\n        return v;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { EventRegister } from \"./EventRegister\";\r\nimport { CustomEventListenerMap } from \"../structure/CustomEventListenerMap\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\n\r\n@singleton()\r\n@registerClass(\"CustomEventRegister\")\r\nexport class CustomEventRegister extends EventRegister {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    protected listenerMap: CustomEventListenerMap = CustomEventListenerMap.create();\r\n\r\n    public register(eventName: EEventName, handler: Function, originHandler: Function, domHandler: Function, priority: number);\r\n    public register(target: EntityObject, eventName: EEventName, handler: Function, originHandler: Function, domHandler: Function, priority: number);\r\n\r\n    public register(...args) {\r\n        if (args.length === 5) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                originHandler = args[2],\r\n                domHandler = args[3],\r\n                priority = args[4];\r\n\r\n            this.listenerMap.appendChild(eventName, <CustomEventRegisterData>{\r\n                target: null,\r\n                eventName: eventName,\r\n                handler: handler,\r\n                originHandler: originHandler,\r\n                domHandler: domHandler,\r\n                priority: priority\r\n            });\r\n        }\r\n        else {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                originHandler = args[3],\r\n                domHandler = args[4],\r\n                priority = args[5];\r\n\r\n            this.listenerMap.appendChild(target, eventName, <CustomEventRegisterData>{\r\n                target: target,\r\n                eventName: eventName,\r\n                handler: handler,\r\n                originHandler: originHandler,\r\n                domHandler: domHandler,\r\n                priority: priority\r\n            });\r\n        }\r\n    }\r\n\r\n    public remove(eventName: EEventName);\r\n    public remove(target: EntityObject);\r\n\r\n    public remove(eventName: EEventName, handler: Function);\r\n    public remove(uid: number, eventName: EEventName);\r\n    public remove(target: EntityObject, eventName: EEventName);\r\n\r\n    public remove(target: EntityObject, eventName: EEventName, handler: Function);\r\n\r\n\r\n    public remove(...args) {\r\n        var target = args[0];\r\n\r\n        if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0];\r\n\r\n            this.listenerMap.removeChild(eventName);\r\n        }\r\n        else if (args.length === 1 && args[0] instanceof EntityObject) {\r\n            this.listenerMap.removeChild(target);\r\n\r\n            this._handleAfterAllEventHandlerRemoved(target);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isFunction(args[1])) {\r\n            let eventName = args[0],\r\n                handler = args[1];\r\n\r\n            this.listenerMap.removeChild(eventName, handler);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isNumber(args[0])) {\r\n            let uid = args[0],\r\n                eventName = args[1];\r\n\r\n            this.listenerMap.removeChild(uid, eventName);\r\n        }\r\n        else if ((args.length === 2 && args[0] instanceof EntityObject) || args.length === 3) {\r\n            this.listenerMap.removeChild.apply(this.listenerMap, args);\r\n\r\n            if (this._isAllEventHandlerRemoved(target)) {\r\n                this._handleAfterAllEventHandlerRemoved(target);\r\n            }\r\n        }\r\n    }\r\n\r\n    public setBubbleParent(target: EntityObject, parent: EntityObject) {\r\n        target.bubbleParent = parent;\r\n    }\r\n\r\n    private _isAllEventHandlerRemoved(target: EntityObject) {\r\n        return !this.listenerMap.hasChild(target);\r\n    }\r\n\r\n    private _handleAfterAllEventHandlerRemoved(target: EntityObject) {\r\n        this.setBubbleParent(target, null);\r\n    }\r\n}\r\n\r\nexport type CustomEventRegisterData = {\r\n    target: EntityObject,\r\n    //user's event handler\r\n    originHandler: Function,\r\n    //wraped user's event handler\r\n    handler: Function,\r\n    //dom event handler\r\n    domHandler: Function,\r\n    priority: number\r\n};","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { EventHandler } from \"./EventHandler\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { CustomEventRegister, CustomEventRegisterData } from \"../binder/CustomEventRegister\";\r\nimport { Event } from \"../object/Event\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { CustomEvent } from \"../object/CustomEvent\";\r\n\r\n@singleton()\r\n@registerClass(\"CustomEventHandler\")\r\nexport class CustomEventHandler extends EventHandler {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    public on(eventName: string, handler: Function, priority: number): void;\r\n    public on(target: EntityObject, eventName: string, handler: Function, priority: number): void;\r\n\r\n    public on(...args) {\r\n        if (args.length === 3) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                originHandler = handler,\r\n                priority = args[2];\r\n\r\n            CustomEventRegister.getInstance().register(\r\n                <any>eventName,\r\n                handler,\r\n                originHandler,\r\n                null,\r\n                priority\r\n            );\r\n        }\r\n        else if (args.length === 4) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                originHandler = handler,\r\n                priority = args[3];\r\n\r\n            CustomEventRegister.getInstance().register(\r\n                target,\r\n                <any>eventName,\r\n                handler,\r\n                originHandler,\r\n                null,\r\n                priority\r\n            );\r\n        }\r\n    }\r\n\r\n    public off(eventName: string): void;\r\n    public off(uid: number, eventName: string): void;\r\n    public off(eventName: string, handler: Function): void;\r\n    public off(target: EntityObject, eventName: string, handler: Function): void;\r\n\r\n    public off(...args) {\r\n        var eventRegister = CustomEventRegister.getInstance();\r\n\r\n        eventRegister.remove.apply(eventRegister, args);\r\n    }\r\n\r\n    public trigger(event: Event): boolean;\r\n    public trigger(event: Event, userData: any): boolean;\r\n    public trigger(target: EntityObject, event: Event, notSetTarget: boolean): boolean;\r\n    public trigger(target: EntityObject, event: Event, userData: any, notSetTarget: boolean): boolean;\r\n\r\n    public trigger(...args): boolean {\r\n        var event: Event = null;\r\n\r\n        if (args.length === 1 || args.length === 2) {\r\n            let userData = null;\r\n\r\n            if (args.length === 1) {\r\n                event = args[0];\r\n            }\r\n            else {\r\n                event = args[0];\r\n                userData = args[1];\r\n            }\r\n\r\n            return this._triggerEventHandler(event, userData);\r\n        }\r\n        else if (args.length === 3 || args.length === 4) {\r\n            let target = null,\r\n                userData = null,\r\n                notSetTarget = null;\r\n\r\n            if (args.length === 3) {\r\n                target = args[0];\r\n                event = args[1];\r\n                notSetTarget = args[2];\r\n            }\r\n            else {\r\n                target = args[0];\r\n                event = args[1];\r\n                userData = args[2];\r\n                notSetTarget = args[3];\r\n            }\r\n\r\n            return this._triggerTargetAndEventHandler(target, event, userData, notSetTarget);\r\n        }\r\n\r\n    }\r\n\r\n    private _triggerEventHandler(event, userData) {\r\n        var registerDataList: Collection<CustomEventRegisterData> = null,\r\n            self = this;\r\n\r\n        registerDataList = CustomEventRegister.getInstance().getEventRegisterDataList(event.name);\r\n\r\n        if (registerDataList === null || registerDataList.getCount() === 0) {\r\n            return false;\r\n        }\r\n\r\n        registerDataList.forEach((registerData: CustomEventRegisterData) => {\r\n            //var eventCopy = event.clone();\r\n            //\r\n            //eventCopy.currentTarget = registerData.target;\r\n            //eventCopy.target = registerData.target;\r\n            //\r\n            //self._setUserData(eventCopy, userData);\r\n            //\r\n            //registerData.handler(eventCopy);\r\n            event.currentTarget = registerData.target;\r\n            event.target = registerData.target;\r\n\r\n            self._setUserData(event, userData);\r\n\r\n            registerData.handler(event);\r\n        });\r\n\r\n        return true;\r\n    }\r\n\r\n    private _triggerTargetAndEventHandler(target, event, userData, notSetTarget) {\r\n        var registerDataList: Collection<CustomEventRegisterData> = null,\r\n            isStopPropagation = false,\r\n            self = this;\r\n\r\n        if (!notSetTarget) {\r\n            event.target = target;\r\n        }\r\n\r\n        registerDataList = CustomEventRegister.getInstance().getEventRegisterDataList(target, event.name);\r\n\r\n        if (registerDataList === null || registerDataList.getCount() === 0) {\r\n            return false;\r\n        }\r\n\r\n        registerDataList.forEach((registerData: CustomEventRegisterData) => {\r\n            event.currentTarget = registerData.target;\r\n\r\n            self._setUserData(event, userData);\r\n\r\n            registerData.handler(event);\r\n\r\n            if (event.isStopPropagation) {\r\n                isStopPropagation = true;\r\n            }\r\n        });\r\n\r\n        return isStopPropagation;\r\n    }\r\n\r\n    private _setUserData(event: CustomEvent, userData) {\r\n        if (userData) {\r\n            event.userData = userData;\r\n        }\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { EEventType } from \"../object/EEventType\";\r\nimport { MouseEventHandler } from \"../handler/MouseEventHandler\";\r\nimport { TouchEventHandler } from \"../handler/TouchEventHandler\";\r\nimport { KeyboardEventHandler } from \"../handler/KeyboardEventHandler\";\r\nimport { CustomEventHandler } from \"../handler/CustomEventHandler\";\r\nimport { Log } from \"../../utils/Log\";\r\n\r\n@registerClass(\"EventHandlerFactory\")\r\nexport class EventHandlerFactory {\r\n    public static createEventHandler(eventType: EEventType) {\r\n        let handler = null;\r\n\r\n        switch (eventType) {\r\n            case EEventType.MOUSE:\r\n                handler = MouseEventHandler.getInstance();\r\n                break;\r\n            case EEventType.TOUCH:\r\n                handler = TouchEventHandler.getInstance();\r\n                break;\r\n            case EEventType.KEYBOARD:\r\n                handler = KeyboardEventHandler.getInstance();\r\n                break;\r\n            case EEventType.CUSTOM:\r\n            case EEventType.POINT:\r\n                handler = CustomEventHandler.getInstance();\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_INVALID(\"eventType\"));\r\n                break;\r\n        }\r\n\r\n        return handler;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { EventBinder } from \"./EventBinder\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { EventHandlerFactory } from \"../factory/EventHandlerFactory\";\r\nimport { EventTable } from \"../object/EventTable\";\r\nimport { DomEventRegister, DomEventRegisterData } from \"./DomEventRegister\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\n@singleton()\r\n@registerClass(\"DomEventBinder\")\r\nexport class DomEventBinder extends EventBinder {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    public on(eventName: EEventName | string, handler: Function): void;\r\n\r\n    public on(eventName: EEventName | string, handler: Function, priority: number): void;\r\n    public on(dom: HTMLElement, eventName: EEventName | string, handler: Function): void;\r\n\r\n    public on(dom: HTMLElement, eventName: EEventName | string, handler: Function, priority: number): void;\r\n\r\n    public on(...args) {\r\n        if (args.length === 2 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(eventName, handler);\r\n        }\r\n        else if (args.length === 3 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                priority = args[2];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(eventName, handler, priority);\r\n        }\r\n        else if (args.length === 3 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                handler = args[2];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(dom, eventName, handler);\r\n        }\r\n        else if (args.length === 4) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                priority = args[3];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(dom, eventName, handler, priority);\r\n        }\r\n    }\r\n\r\n    public off(): void;\r\n\r\n    public off(eventName: EEventName | string): void;\r\n    public off(dom: HTMLElement): void;\r\n\r\n    public off(eventName: EEventName | string, handler: Function): void;\r\n    public off(dom: HTMLElement, eventName: EEventName): void;\r\n\r\n    public off(dom: HTMLElement, eventName: EEventName, handler: Function): void;\r\n\r\n    public off(...args) {\r\n        var eventRegister = DomEventRegister.getInstance();\r\n\r\n        if (args.length === 0) {\r\n            eventRegister.forEachAll((list: Collection<DomEventRegisterData>, eventName: EEventName) => {\r\n                EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                    .off(eventName);\r\n            });\r\n\r\n            eventRegister.clear();\r\n        }\r\n        else if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0];\r\n\r\n            eventRegister.forEachEventName((list: Collection<DomEventRegisterData>, registeredEventName: string) => {\r\n                if (registeredEventName === eventName) {\r\n                    EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                        .off(eventName);\r\n                }\r\n            });\r\n        }\r\n        else if (args.length === 1 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                secondMap = null;\r\n\r\n            secondMap = eventRegister.getChild(dom);\r\n\r\n            if (!!secondMap) {\r\n                secondMap.forEach((list: Collection<DomEventRegisterData>, eventName: EEventName) => {\r\n                    EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                        .off(dom, eventName);\r\n                });\r\n            }\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .off(eventName, handler);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .off(dom, eventName);\r\n        }\r\n        else if (args.length === 3) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                handler = args[2];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .off(dom, eventName, handler);\r\n        }\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { EventBinder } from \"./EventBinder\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { EventHandlerFactory } from \"../factory/EventHandlerFactory\";\r\nimport { EventTable } from \"../object/EventTable\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { CustomEventRegister, CustomEventRegisterData } from \"./CustomEventRegister\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\n@singleton()\r\n@registerClass(\"CustomEventBinder\")\r\nexport class CustomEventBinder extends EventBinder {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    public on(eventName: EEventName | string, handler: Function): void;\r\n\r\n    public on(eventName: EEventName | string, handler: Function, priority: number): void;\r\n    public on(target: EntityObject, eventName: EEventName | string, handler: Function): void;\r\n\r\n    public on(target: EntityObject, eventName: EEventName | string, handler: Function, priority: number): void;\r\n\r\n    public on(...args) {\r\n        if (args.length === 2) {\r\n            let eventName = args[0],\r\n                handler = args[1];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(eventName, handler);\r\n        }\r\n        else if (args.length === 3 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                priority = args[2];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(eventName, handler, priority);\r\n        }\r\n        else if (args.length === 3 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(target, eventName, handler);\r\n        }\r\n        else if (args.length === 4) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                priority = args[3];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .on(target, eventName, handler, priority);\r\n        }\r\n    }\r\n\r\n    public off(): void;\r\n\r\n    public off(eventName: EEventName | string): void;\r\n    public off(target: EntityObject): void;\r\n\r\n    public off(eventName: EEventName | string, handler: Function): void;\r\n    public off(target: EntityObject, eventName: EEventName | string): void;\r\n\r\n    public off(target: EntityObject, eventName: EEventName | string, handler: Function): void;\r\n\r\n    public off(...args) {\r\n        var eventRegister = CustomEventRegister.getInstance();\r\n\r\n        if (args.length === 0) {\r\n            eventRegister.forEachAll((list: Collection<CustomEventRegisterData>, eventName: EEventName) => {\r\n                EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                    .off(eventName);\r\n            });\r\n\r\n            eventRegister.clear();\r\n        }\r\n        else if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0];\r\n\r\n            eventRegister.forEachEventName((list: Collection<CustomEventRegisterData>, registeredEventName: string) => {\r\n                if (registeredEventName === eventName) {\r\n                    EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                        .off(eventName);\r\n                }\r\n            });\r\n        }\r\n        else if (args.length === 1 && args[0] instanceof EntityObject) {\r\n            let target: EntityObject = args[0],\r\n                secondMap = null;\r\n\r\n            secondMap = eventRegister.getChild(target);\r\n\r\n            if (!!secondMap) {\r\n                secondMap.forEach((list: Collection<CustomEventRegisterData>, eventName: EEventName) => {\r\n                    EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                        .off(target, eventName);\r\n                });\r\n            }\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .off(eventName, handler);\r\n        }\r\n        else if (args.length === 2 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .off(target, eventName);\r\n        }\r\n        else if (args.length === 3 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2];\r\n\r\n            EventHandlerFactory.createEventHandler(EventTable.getEventType(eventName))\r\n                .off(target, eventName, handler);\r\n        }\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { EEventName } from \"../object/EventNameHandler\";\r\nimport { EventTable } from \"../object/EventTable\";\r\nimport { EEventType } from \"../object/EEventType\";\r\nimport { DomEventBinder } from \"../binder/DomEventBinder\";\r\nimport { CustomEventBinder } from \"../binder/CustomEventBinder\";\r\nimport { Log } from \"../../utils/Log\";\r\n\r\n@registerClass(\"EventBinderFactory\")\r\nexport class EventBinderFactory {\r\n    public static createEventBinder(eventName: EEventName) {\r\n        let binder = null,\r\n            eventType = EventTable.getEventType(eventName);\r\n\r\n        switch (eventType) {\r\n            case EEventType.MOUSE:\r\n            case EEventType.TOUCH:\r\n            case EEventType.KEYBOARD:\r\n                binder = DomEventBinder.getInstance();\r\n                break;\r\n            case EEventType.CUSTOM:\r\n            case EEventType.POINT:\r\n                binder = CustomEventBinder.getInstance();\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_INVALID(`eventName:${eventName}`));\r\n                break;\r\n        }\r\n\r\n        return binder;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Event } from \"./Event\";\r\nimport { EEventType } from \"./EEventType\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { DomEvent } from \"./DomEvent\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\n\r\n@registerClass(\"CustomEvent\")\r\nexport class CustomEvent extends Event {\r\n    public static create(eventName: string);\r\n    public static create(eventName: string, userData: any);\r\n\r\n    public static create(...args) {\r\n        var obj = null;\r\n\r\n        if (args.length === 1) {\r\n            obj = new this(args[0]);\r\n        }\r\n        else {\r\n            obj = new this(args[0], args[1]);\r\n        }\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(eventName: string);\r\n    constructor(eventName: string, userData: any);\r\n\r\n    constructor(...args) {\r\n        super(args[0]);\r\n\r\n        if (args.length === 2) {\r\n            let userData = args[1];\r\n\r\n            this.userData = userData;\r\n        }\r\n    }\r\n\r\n    public readonly type: EEventType = EEventType.CUSTOM;\r\n\r\n    public userData: any = null;\r\n\r\n\r\n    public copyPublicAttri(destination, source: any) {\r\n        var property = null;\r\n\r\n        ExtendUtils.extend(destination, function(item, property) {\r\n            return property.slice(0, 1) !== \"_\"\r\n                && !JudgeUtils.isFunction(item);\r\n        });\r\n\r\n        return destination;\r\n    }\r\n\r\n    public clone(): CustomEvent {\r\n        var eventObj = CustomEvent.create(<any>this.name);\r\n\r\n        return <CustomEvent>this.copyMember(eventObj, this, [\"target\", \"currentTarget\", \"isStopPropagation\", \"phase\"]);\r\n    }\r\n\r\n    //@requireCheck(function(event:PointEvent){\r\n    //    if(event.target){\r\n    //        assert(event.target instanceof EntityObject, Log.info.FUNC_MUST_BE(\"target\", \"EntityObject\"));\r\n    //    }\r\n    //})\r\n    public getDataFromDomEvent(event: DomEvent) {\r\n        this.target = <EntityObject>event.target;\r\n        this.currentTarget = event.currentTarget;\r\n        this.isStopPropagation = event.isStopPropagation;\r\n    }\r\n}","export abstract class EventDispatcher {\r\n    public abstract trigger(...args): any;\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { EventDispatcher } from \"./EventDispatcher\";\r\nimport { Event } from \"../object/Event\";\r\nimport { EventHandlerFactory } from \"../factory/EventHandlerFactory\";\r\n\r\n@singleton()\r\n@registerClass(\"DomEventDispatcher\")\r\nexport class DomEventDispatcher extends EventDispatcher {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    public trigger(event: Event): void;\r\n    public trigger(dom: HTMLElement, event: Event): void;\r\n\r\n    public trigger(...args): any {\r\n        if (args.length === 1) {\r\n            let event = args[0],\r\n                eventType = event.type;\r\n\r\n            EventHandlerFactory.createEventHandler(eventType)\r\n                .trigger(event);\r\n        }\r\n        else if (args.length === 2) {\r\n            let dom = args[0],\r\n                event = args[1],\r\n                eventType = event.type;\r\n\r\n            EventHandlerFactory.createEventHandler(eventType)\r\n                .trigger(dom, event);\r\n        }\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { ensure, assert } from \"../../definition/typescript/decorator/contract\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { Log } from \"../../utils/Log\";\r\n\r\n@registerClass(\"EventUtils\")\r\nexport class EventUtils {\r\n    public static isEvent(arg: any) {\r\n        return arg && arg.currentTarget !== void 0;\r\n    }\r\n\r\n    @ensure(function(isEntityObject: boolean, arg: EntityObject) {\r\n        if (isEntityObject) {\r\n            assert(arg instanceof EntityObject, Log.info.FUNC_MUST_BE(`EntityObject, but actual is ${arg}`));\r\n        }\r\n    })\r\n    public static isEntityObject(arg: EntityObject) {\r\n        return arg && arg.bubbleParent !== void 0;\r\n    }\r\n}","export enum EEventPhase {\r\n    BROADCAST,\r\n    EMIT\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../../definition/typescript/decorator/singleton\";\r\nimport { EventDispatcher } from \"./EventDispatcher\";\r\nimport { Event } from \"../object/Event\";\r\nimport { EntityObject } from \"../../core/entityObject/EntityObject\";\r\nimport { EventHandlerFactory } from \"../factory/EventHandlerFactory\";\r\nimport { EventUtils } from \"../utils/EventUtils\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { EEventPhase } from \"../object/EEventPhase\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\n@singleton()\r\n@registerClass(\"CustomEventDispatcher\")\r\nexport class CustomEventDispatcher extends EventDispatcher {\r\n    public static getInstance(): any { }\r\n\r\n    private constructor() { super(); }\r\n\r\n    public trigger(event: Event): boolean;\r\n\r\n    public trigger(event: Event, userData: any): boolean;\r\n    public trigger(target: EntityObject, event: Event): boolean;\r\n\r\n    public trigger(target: EntityObject, event: Event, notSetTarget: boolean): boolean;\r\n    public trigger(target: EntityObject, event: Event, userData: any): boolean;\r\n\r\n    public trigger(target: EntityObject, event: Event, userData: any, notSetTarget: boolean): boolean;\r\n\r\n    public trigger(...args): boolean {\r\n        var length = args.length;\r\n\r\n        if (length === 1) {\r\n            let event = args[0],\r\n                eventType = event.type;\r\n\r\n            return EventHandlerFactory.createEventHandler(eventType)\r\n                .trigger(event);\r\n        }\r\n        else if (length === 2 && EventUtils.isEvent(args[0])) {\r\n            let event = args[0],\r\n                userData = args[1],\r\n                eventType = event.type;\r\n\r\n            return EventHandlerFactory.createEventHandler(eventType)\r\n                .trigger(event, userData);\r\n        }\r\n        else if ((length === 2 && EventUtils.isEntityObject(args[0])) || (length === 3 && JudgeUtils.isBoolean(args[2]))) {\r\n            //else if((length === 2 && args[0] instanceof EntityObject) || (length === 3 && JudgeUtils.isBoolean(args[2]))){\r\n            let target = args[0],\r\n                event = args[1],\r\n                notSetTarget = args[2] === void 0 ? false : args[2],\r\n                eventType = event.type;\r\n\r\n            return EventHandlerFactory.createEventHandler(eventType)\r\n                .trigger(target, event, notSetTarget);\r\n        }\r\n        else if (length === 3 || length === 4) {\r\n            let target = args[0],\r\n                event = args[1],\r\n                userData = args[2],\r\n                notSetTarget = args[3] === void 0 ? false : args[3],\r\n                eventType = event.type;\r\n\r\n            return EventHandlerFactory.createEventHandler(eventType)\r\n                .trigger(target, event, userData, notSetTarget);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * transfer event up\r\n     * @param target\r\n     * @param eventObject\r\n     */\r\n    public emit(target: EntityObject, eventObject: Event, userData?: any) {\r\n        var isStopPropagation = false;\r\n\r\n        if (!target) {\r\n            return;\r\n        }\r\n\r\n        eventObject.phase = EEventPhase.EMIT;\r\n        eventObject.target = target;\r\n\r\n        do {\r\n            isStopPropagation = this._triggerWithUserData(target, eventObject, userData, true);\r\n\r\n            if (isStopPropagation) {\r\n                break;\r\n            }\r\n            target = target.bubbleParent;\r\n        } while (target);\r\n    }\r\n\r\n    /**\r\n     * transfer event down\r\n     * @param target\r\n     * @param eventObject\r\n     */\r\n    public broadcast(target: EntityObject, eventObject: Event, userData?: any) {\r\n        var self = this;\r\n        var iterator = (obj: EntityObject) => {\r\n            var children: Collection<EntityObject> = obj.getChildren();\r\n\r\n            if (children.getCount() === 0) {\r\n                return;\r\n            }\r\n\r\n            children.forEach((child: EntityObject) => {\r\n                self._triggerWithUserData(child, eventObject, userData, true);\r\n\r\n                iterator(child);\r\n            });\r\n        }\r\n\r\n        if (!target) {\r\n            return;\r\n        }\r\n\r\n        eventObject.phase = EEventPhase.BROADCAST;\r\n        eventObject.target = target;\r\n\r\n        this._triggerWithUserData(target, eventObject, userData, true);\r\n\r\n        iterator(target);\r\n    }\r\n\r\n    private _triggerWithUserData(target, event, userData, notSetTarget) {\r\n        return userData ? this.trigger(target, event, userData, notSetTarget)\r\n            : this.trigger(target, event, notSetTarget);\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Event } from \"../object/Event\";\r\nimport { EEventType } from \"../object/EEventType\";\r\nimport { DomEventDispatcher } from \"../dispatcher/DomEventDispatcher\";\r\nimport { CustomEventDispatcher } from \"../dispatcher/CustomEventDispatcher\";\r\nimport { Log } from \"../../utils/Log\";\r\n\r\n@registerClass(\"EventDispatcherFactory\")\r\nexport class EventDispatcherFactory {\r\n    public static createEventDispatcher(event: Event) {\r\n        let dispatcher = null,\r\n            eventType = event.type;\r\n\r\n        switch (eventType) {\r\n            case EEventType.MOUSE:\r\n            case EEventType.TOUCH:\r\n            case EEventType.KEYBOARD:\r\n                dispatcher = DomEventDispatcher.getInstance();\r\n                break;\r\n            case EEventType.CUSTOM:\r\n            case EEventType.POINT:\r\n                dispatcher = CustomEventDispatcher.getInstance();\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_INVALID(`event:${event}`));\r\n                break;\r\n        }\r\n\r\n        return dispatcher;\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { EEventName } from \"./object/EventNameHandler\";\r\nimport { EEngineEvent } from \"./EEngineEvent\";\r\nimport { EntityObject } from \"../core/entityObject/EntityObject\";\r\nimport { requireCheck, it, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { EventTable } from \"./object/EventTable\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { EEventType } from \"./object/EEventType\";\r\nimport { JudgeUtils } from \"../utils/JudgeUtils\";\r\nimport { EventBinderFactory } from \"./factory/EventBinderFactory\";\r\nimport { CustomEventBinder } from \"./binder/CustomEventBinder\";\r\nimport { DomEventBinder } from \"./binder/DomEventBinder\";\r\nimport { Event } from \"./object/Event\";\r\nimport { CustomEvent } from \"./object/CustomEvent\";\r\nimport { Log } from \"../utils/Log\";\r\nimport { EventDispatcherFactory } from \"./factory/EventDispatcherFactory\";\r\nimport { EventUtils } from \"./utils/EventUtils\";\r\nimport { CustomEventDispatcher } from \"./dispatcher/CustomEventDispatcher\";\r\nimport { DomEventDispatcher } from \"./dispatcher/DomEventDispatcher\";\r\nimport { FromEventPatternStream } from \"wonder-frp/dist/es2015/stream/FromEventPatternStream\";\r\nimport { fromEventPattern } from \"wonder-frp/dist/es2015/global/Operator\";\r\nimport { CustomEventRegister } from \"./binder/CustomEventRegister\";\r\n\r\n@registerClass(\"EventManager\")\r\nexport class EventManager {\r\n    public static on(eventName: EEventName | EEngineEvent | string, handler: Function): void;\r\n\r\n    public static on(eventName: EEventName | EEngineEvent | string, handler: Function, priority: number): void;\r\n    public static on(target: EntityObject, eventName: EEventName | EEngineEvent | string, handler: Function): void;\r\n    public static on(dom: HTMLElement, eventName: EEventName | EEngineEvent | string, handler: Function): void;\r\n\r\n    public static on(target: EntityObject, eventName: EEventName | EEngineEvent | string, handler: Function, priority: number): void;\r\n    public static on(dom: HTMLElement, eventName: EEventName | EEngineEvent | string, handler: Function, priority: number): void;\r\n\r\n    @requireCheck(function(...args) {\r\n        if (args[0] instanceof EntityObject) {\r\n            let eventName = args[1];\r\n\r\n            it(\"event must be custom event\", () => {\r\n                var eventType = EventTable.getEventType(eventName);\r\n\r\n                expect(eventType === EEventType.CUSTOM || eventType === EEventType.POINT).true;\r\n            });\r\n        }\r\n        else if (JudgeUtils.isDom(args[0])) {\r\n            let eventName = args[1],\r\n                eventType = EventTable.getEventType(eventName);\r\n\r\n            it(\"event must be dom event\", () => {\r\n                expect(eventType === EEventType.TOUCH || eventType === EEventType.MOUSE || eventType === EEventType.KEYBOARD).true;\r\n            });\r\n        }\r\n    })\r\n    public static on(...args) {\r\n        if (args.length === 2 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                priority = 1,\r\n                eventBinder = EventBinderFactory.createEventBinder(eventName);\r\n\r\n            eventBinder.on(eventName, handler, priority);\r\n        }\r\n        else if (args.length === 3 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                priority = args[2],\r\n                eventBinder = EventBinderFactory.createEventBinder(eventName);\r\n\r\n            eventBinder.on(eventName, handler, priority);\r\n        }\r\n        else if (args.length === 3 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                priority = 1,\r\n                eventBinder = CustomEventBinder.getInstance();\r\n\r\n            eventBinder.on(target, eventName, handler, priority);\r\n        }\r\n        else if (args.length === 3 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                priority = 1,\r\n                eventBinder = DomEventBinder.getInstance();\r\n\r\n            eventBinder.on(dom, eventName, handler, priority);\r\n        }\r\n        else if (args.length === 4 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                priority = args[3],\r\n                eventBinder = CustomEventBinder.getInstance();\r\n\r\n            eventBinder.on(target, eventName, handler, priority);\r\n        }\r\n        else if (args.length === 4 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                priority = args[3],\r\n                eventBinder = DomEventBinder.getInstance();\r\n\r\n            eventBinder.on(dom, eventName, handler, priority);\r\n        }\r\n    }\r\n\r\n    public static off(): void;\r\n\r\n    public static off(eventName: EEventName | EEngineEvent | string): void;\r\n    public static off(target: EntityObject): void;\r\n    public static off(dom: HTMLElement): void;\r\n\r\n    public static off(eventName: EEventName | EEngineEvent | string, handler: Function): void;\r\n    public static off(target: EntityObject, eventName: EEventName | EEngineEvent | string): void;\r\n    public static off(dom: HTMLElement, eventName: EEventName): void;\r\n\r\n    public static off(target: EntityObject, eventName: EEventName | EEngineEvent | string, handler: Function): void;\r\n    public static off(dom: HTMLElement, eventName: EEventName, handler: Function): void;\r\n\r\n\r\n    @requireCheck(function(...args) {\r\n        if (args.length > 2 && args[0] instanceof EntityObject) {\r\n            let eventName = args[1],\r\n                eventType = EventTable.getEventType(eventName);\r\n\r\n            it(\"event must be custom or point event\", () => {\r\n                expect(eventType === EEventType.CUSTOM || eventType === EEventType.POINT).true;\r\n            });\r\n        }\r\n        else if (args.length > 2 && JudgeUtils.isDom(args[0])) {\r\n            let eventName = args[1],\r\n                eventType = EventTable.getEventType(eventName);\r\n\r\n            it(\"event must be keyboard event\", () => {\r\n                expect(eventType === EEventType.KEYBOARD).true;\r\n            });\r\n        }\r\n    })\r\n    public static off(...args) {\r\n        if (args.length === 0) {\r\n            let customEventBinder = CustomEventBinder.getInstance(),\r\n                domEventBinder = DomEventBinder.getInstance();\r\n\r\n            customEventBinder.off();\r\n            domEventBinder.off();\r\n        }\r\n        else if (args.length === 1 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                eventBinder = EventBinderFactory.createEventBinder(eventName);\r\n\r\n            eventBinder.off(eventName);\r\n        }\r\n        else if (args.length === 1 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventBinder = CustomEventBinder.getInstance();\r\n\r\n            eventBinder.off(target);\r\n        }\r\n        else if (args.length === 1 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventBinder = DomEventBinder.getInstance();\r\n\r\n            eventBinder.off(dom);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isString(args[0])) {\r\n            let eventName = args[0],\r\n                handler = args[1],\r\n                eventBinder = EventBinderFactory.createEventBinder(eventName);\r\n\r\n            eventBinder.off(eventName, handler);\r\n        }\r\n        else if (args.length === 2 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                eventBinder = CustomEventBinder.getInstance();\r\n\r\n            eventBinder.off(target, eventName);\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                eventBinder = DomEventBinder.getInstance();\r\n\r\n            eventBinder.off(dom, eventName);\r\n        }\r\n        else if (args.length === 3 && args[0] instanceof EntityObject) {\r\n            let target = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                eventBinder = CustomEventBinder.getInstance();\r\n\r\n            eventBinder.off(target, eventName, handler);\r\n        }\r\n        else if (args.length === 3 && JudgeUtils.isDom(args[0])) {\r\n            let dom = args[0],\r\n                eventName = args[1],\r\n                handler = args[2],\r\n                eventBinder = DomEventBinder.getInstance();\r\n\r\n            eventBinder.off(dom, eventName, handler);\r\n        }\r\n    }\r\n\r\n    public static trigger(event: Event): void;\r\n\r\n    public static trigger(event: Event, userData: any): void;\r\n    public static trigger(target: EntityObject, event: Event): void;\r\n    public static trigger(dom: HTMLElement, event: Event): void;\r\n\r\n    public static trigger(target: EntityObject, event: Event, userData: any): void;\r\n\r\n    public static trigger(target: EntityObject, event: Event, userData: any, notSetTarget: boolean): void;\r\n\r\n\r\n    @requireCheck(function(...args) {\r\n        if (args.length === 2 && args[0] instanceof Event) {\r\n            let event = args[0];\r\n\r\n            assert(event instanceof CustomEvent, Log.info.FUNC_MUST_BE(\"event type\", \"CUSTOM\"));\r\n        }\r\n        else if (args.length === 2 && args[0] instanceof EntityObject) {\r\n        }\r\n        else if (args.length === 2) {\r\n            if (args[0]) {\r\n                assert(JudgeUtils.isDom(args[0]), Log.info.FUNC_MUST_BE(\"the first param\", \"dom\"));\r\n            }\r\n        }\r\n        else if (args[0] instanceof EntityObject) {\r\n            let event = args[1];\r\n\r\n            assert(event instanceof CustomEvent, Log.info.FUNC_MUST_BE(\"event type\", \"CUSTOM\"));\r\n        }\r\n    })\r\n    public static trigger(...args) {\r\n        var length = args.length;\r\n\r\n        if (length === 1) {\r\n            let event = args[0],\r\n                eventDispatcher = EventDispatcherFactory.createEventDispatcher(event);\r\n\r\n            eventDispatcher.trigger(event);\r\n        }\r\n        else if (length === 2 && EventUtils.isEvent(args[0])) {\r\n            let event = args[0],\r\n                userData = args[1],\r\n                eventDispatcher = CustomEventDispatcher.getInstance();\r\n\r\n            eventDispatcher.trigger(event, userData);\r\n        }\r\n        else if (length === 2 && EventUtils.isEntityObject(args[0])) {\r\n            let target = args[0],\r\n                event = args[1],\r\n                eventDispatcher = CustomEventDispatcher.getInstance();\r\n\r\n            if (!target) {\r\n                return;\r\n            }\r\n\r\n            eventDispatcher.trigger(target, event);\r\n        }\r\n        else if (length === 2) {\r\n            let dom = args[0],\r\n                event = args[1],\r\n                eventDispatcher = DomEventDispatcher.getInstance();\r\n\r\n            if (!dom) {\r\n                return;\r\n            }\r\n\r\n            eventDispatcher.trigger(dom, event);\r\n        }\r\n        else if (length === 3) {\r\n            let target = args[0],\r\n                event = args[1],\r\n                userData = args[2],\r\n                eventDispatcher = CustomEventDispatcher.getInstance();\r\n\r\n            if (!target) {\r\n                return;\r\n            }\r\n\r\n            eventDispatcher.trigger(target, event, userData);\r\n        }\r\n        else if (length === 4) {\r\n            let target = args[0],\r\n                event = args[1],\r\n                userData = args[2],\r\n                notSetTarget = args[3],\r\n                eventDispatcher = CustomEventDispatcher.getInstance();\r\n\r\n            if (!target) {\r\n                return;\r\n            }\r\n\r\n            eventDispatcher.trigger(target, event, userData, notSetTarget);\r\n        }\r\n    }\r\n\r\n    public static broadcast(target: EntityObject, event: Event);\r\n    public static broadcast(target: EntityObject, event: Event, userData: any);\r\n\r\n    @requireCheck(function(target: EntityObject, eventObject: Event, userData?: any) {\r\n        assert(eventObject instanceof CustomEvent, Log.info.FUNC_MUST_BE(\"eventObject\", \"CustomEvent\"));\r\n    })\r\n    public static broadcast(...args) {\r\n        var eventDispatcher = CustomEventDispatcher.getInstance();\r\n\r\n        eventDispatcher.broadcast.apply(eventDispatcher, args);\r\n    }\r\n\r\n    public static emit(target: EntityObject, event: Event);\r\n    public static emit(target: EntityObject, event: Event, userData: any);\r\n\r\n    @requireCheck(function(target: EntityObject, eventObject: Event, userData?: any) {\r\n        assert(eventObject instanceof CustomEvent, Log.info.FUNC_MUST_BE(\"eventObject\", \"CustomEvent\"));\r\n    })\r\n    public static emit(...args) {\r\n        var eventDispatcher = CustomEventDispatcher.getInstance();\r\n\r\n        eventDispatcher.emit.apply(eventDispatcher, args);\r\n    }\r\n\r\n    public static fromEvent(eventName: EEventName | EEngineEvent | string): FromEventPatternStream;\r\n\r\n    public static fromEvent(eventName: EEventName | EEngineEvent | string, priority: number): FromEventPatternStream;\r\n    public static fromEvent(target: EntityObject, eventName: EEventName | EEngineEvent | string): FromEventPatternStream;\r\n    public static fromEvent(dom: HTMLElement, eventName: EEventName | EEngineEvent | string): FromEventPatternStream;\r\n\r\n    public static fromEvent(target: EntityObject, eventName: EEventName | EEngineEvent | string, priority: number): FromEventPatternStream;\r\n    public static fromEvent(dom: HTMLElement, eventName: EEventName | EEngineEvent | string, priority: number): FromEventPatternStream;\r\n\r\n    public static fromEvent(...args): any {\r\n        var addHandler = null,\r\n            removeHandler = null;\r\n\r\n        if (args.length === 1) {\r\n            let eventName = args[0];\r\n\r\n            addHandler = function(handler) {\r\n                EventManager.on(eventName, handler);\r\n            };\r\n            removeHandler = function(handler) {\r\n                EventManager.off(eventName, handler);\r\n            };\r\n        }\r\n        else if (args.length === 2 && JudgeUtils.isNumber(args[1])) {\r\n            let eventName = args[0],\r\n                priority = args[1];\r\n\r\n            addHandler = function(handler) {\r\n                EventManager.on(eventName, handler, priority);\r\n            };\r\n            removeHandler = function(handler) {\r\n                EventManager.off(eventName, handler);\r\n            };\r\n        }\r\n        else if (args.length === 2) {\r\n            let eventName = args[1];\r\n\r\n            addHandler = function(handler) {\r\n                EventManager.on(args[0], eventName, handler);\r\n            };\r\n            removeHandler = function(handler) {\r\n                EventManager.off(args[0], eventName, handler);\r\n            };\r\n        }\r\n        else if (args.length === 3) {\r\n            let eventName = args[1],\r\n                priority = args[2];\r\n\r\n            addHandler = function(handler) {\r\n                EventManager.on(args[0], eventName, handler, priority);\r\n            };\r\n            removeHandler = function(handler) {\r\n                EventManager.off(args[0], eventName, handler);\r\n            };\r\n        }\r\n\r\n        return fromEventPattern(addHandler, removeHandler);\r\n    }\r\n\r\n    @requireCheck(function(target: EntityObject, parent: any) {\r\n        assert(target instanceof EntityObject, \"only EntityObject can setBubleParent\");\r\n    })\r\n    public static setBubbleParent(target: EntityObject, parent: any) {\r\n        CustomEventRegister.getInstance().setBubbleParent(target, parent);\r\n    }\r\n}","import \"wonder-frp/dist/es2015/stream/MergeAllStream\";\r\nimport { Component } from \"../../../core/Component\";\r\nimport { Camera } from \"../Camera\";\r\nimport { cacheGetter } from \"../../../definition/typescript/decorator/cache\";\r\nimport { Matrix4 } from \"../../../math/Matrix4\";\r\nimport { GameObject } from \"../../../core/entityObject/gameObject/GameObject\";\r\nimport { cloneAttributeAsCloneable, CloneUtils } from \"../../../definition/typescript/decorator/clone\";\r\nimport { IDisposable } from \"wonder-frp/dist/es2015/Disposable/IDisposable\";\r\nimport { virtual } from \"../../../definition/typescript/decorator/virtual\";\r\nimport { fromArray } from \"wonder-frp/dist/es2015/global/Operator\";\r\nimport { EventManager } from \"../../../event/EventManager\";\r\nimport { EEngineEvent } from \"../../../event/EEngineEvent\";\r\n\r\nexport abstract class CameraController extends Component {\r\n    constructor(cameraComponent: Camera) {\r\n        super();\r\n\r\n        this.camera = cameraComponent;\r\n    }\r\n\r\n    get cameraToWorldMatrix() {\r\n        return this.camera.cameraToWorldMatrix;\r\n    }\r\n\r\n    @cacheGetter(function() {\r\n        return this._worldToCameraMatrixCache !== null;\r\n    }, function() {\r\n        return this._worldToCameraMatrixCache;\r\n    }, function(result) {\r\n        this._worldToCameraMatrixCache = result;\r\n    })\r\n    get worldToCameraMatrix() {\r\n        return this._getWorldToCameraMatrix();\r\n    }\r\n\r\n    get pMatrix() {\r\n        return this.camera.pMatrix;\r\n    }\r\n    set pMatrix(pMatrix: Matrix4) {\r\n        this.camera.pMatrix = pMatrix;\r\n    }\r\n\r\n\r\n    public entityObject: GameObject;\r\n    @cloneAttributeAsCloneable()\r\n    public camera: Camera = null;\r\n\r\n    private _worldToCameraMatrixCache: Matrix4 = null;\r\n    private _clearCacheSubscription: IDisposable = null;\r\n\r\n    public init() {\r\n        this.camera.entityObject = <GameObject>this.entityObject;\r\n        this.camera.init();\r\n\r\n        this.bindClearCacheEvent();\r\n    }\r\n\r\n    public update(elapsed: number) {\r\n        this.camera.update(elapsed);\r\n    }\r\n\r\n    public dispose() {\r\n        this.camera.dispose();\r\n\r\n        this.disposeClearCacheEvent();\r\n    }\r\n\r\n    public clone() {\r\n        return CloneUtils.clone(this);\r\n    }\r\n\r\n    // public isIntersectWithRay(entityObject:GameObject, screenX:number, screenY:number):boolean{\r\n    //     var shape = null;\r\n    //\r\n    //     if(!entityObject.hasComponent(Collider)){\r\n    //         return false;\r\n    //     }\r\n    //\r\n    //     shape = entityObject.getComponent<Collider>(Collider).shape;\r\n    //\r\n    //     return shape.isIntersectWithRay(this.createRay(screenX, screenY));\r\n    // }\r\n    //\r\n    // public createRay(screenX:number, screenY:number){\r\n    //     var from = this.convertScreenToWorld(screenX, screenY, this.camera.near),\r\n    //         to = this.convertScreenToWorld(screenX, screenY, this.camera.far);\r\n    //\r\n    //     return Ray.create(from, to.sub(from));\r\n    // }\r\n    //\r\n    // public convertScreenToWorld(screenX:number, screenY:number, distanceFromCamera:number):Vector3{\r\n    //     return this.camera.convertScreenToWorld(screenX, screenY, distanceFromCamera);\r\n    // }\r\n    //\r\n    // public convertWorldToScreen(worldX:number, worldY:number, worldZ:number, screenWidth:number, screenHeight:number):Vector2{\r\n    //     return this.camera.convertWorldToScreen(worldX, worldY, worldZ, screenWidth, screenHeight);\r\n    // }\r\n    //\r\n    // public getPlanes():Array<Plane> {\r\n    //     var frustumPlanes = [],\r\n    //         transform = this.worldToCameraMatrix.applyMatrix(this.pMatrix, true);\r\n    //\r\n    //     for (var index = 0; index < 6; index++) {\r\n    //         frustumPlanes.push(Plane.create(0, 0, 0, 0));\r\n    //     }\r\n    //\r\n    //     this._setPlanes(transform, frustumPlanes);\r\n    //\r\n    //     return frustumPlanes;\r\n    // }\r\n\r\n    @virtual\r\n    protected bindClearCacheEvent() {\r\n        var self = this;\r\n\r\n        this._clearCacheSubscription = fromArray([\r\n            EventManager.fromEvent(<any>EEngineEvent.ENDLOOP),\r\n            EventManager.fromEvent(this.entityObject, <any>EEngineEvent.TRANSFORM_TRANSLATE),\r\n            EventManager.fromEvent(this.entityObject, <any>EEngineEvent.TRANSFORM_ROTATE),\r\n            EventManager.fromEvent(this.entityObject, <any>EEngineEvent.TRANSFORM_SCALE)\r\n        ])\r\n            .mergeAll()\r\n            .subscribe(() => {\r\n                self._clearCache();\r\n            });\r\n    }\r\n\r\n    @virtual\r\n    protected disposeClearCacheEvent() {\r\n        this._clearCacheSubscription && this._clearCacheSubscription.dispose();\r\n    }\r\n\r\n    // private _setPlanes(transform:Matrix4, frustumPlanes: Array<Plane>): void {\r\n    //     /*!\r\n    //      refer to http://gamedevs.org/uploads/fast-extraction-viewing-frustum-planes-from-world-view-projection-matrix.pdf\r\n    //      */\r\n    //\r\n    //     // Near\r\n    //     frustumPlanes[0].normal.x = transform.values[3] + transform.values[2];\r\n    //     frustumPlanes[0].normal.y = transform.values[7] + transform.values[6];\r\n    //     frustumPlanes[0].normal.z = transform.values[11] + transform.values[10];\r\n    //     frustumPlanes[0].d = transform.values[15] + transform.values[14];\r\n    //     frustumPlanes[0].normalize();\r\n    //\r\n    //     // Far\r\n    //     frustumPlanes[1].normal.x = transform.values[3] - transform.values[2];\r\n    //     frustumPlanes[1].normal.y = transform.values[7] - transform.values[6];\r\n    //     frustumPlanes[1].normal.z = transform.values[11] - transform.values[10];\r\n    //     frustumPlanes[1].d = transform.values[15] - transform.values[14];\r\n    //     frustumPlanes[1].normalize();\r\n    //\r\n    //     // Left\r\n    //     frustumPlanes[2].normal.x = transform.values[3] + transform.values[0];\r\n    //     frustumPlanes[2].normal.y = transform.values[7] + transform.values[4];\r\n    //     frustumPlanes[2].normal.z = transform.values[11] + transform.values[8];\r\n    //     frustumPlanes[2].d = transform.values[15] + transform.values[12];\r\n    //     frustumPlanes[2].normalize();\r\n    //\r\n    //     // Right\r\n    //     frustumPlanes[3].normal.x = transform.values[3] - transform.values[0];\r\n    //     frustumPlanes[3].normal.y = transform.values[7] - transform.values[4];\r\n    //     frustumPlanes[3].normal.z = transform.values[11] - transform.values[8];\r\n    //     frustumPlanes[3].d = transform.values[15] - transform.values[12];\r\n    //     frustumPlanes[3].normalize();\r\n    //\r\n    //     // Top\r\n    //     frustumPlanes[4].normal.x = transform.values[3] - transform.values[1];\r\n    //     frustumPlanes[4].normal.y = transform.values[7] - transform.values[5];\r\n    //     frustumPlanes[4].normal.z = transform.values[11] - transform.values[9];\r\n    //     frustumPlanes[4].d = transform.values[15] - transform.values[13];\r\n    //     frustumPlanes[4].normalize();\r\n    //\r\n    //     // Bottom\r\n    //     frustumPlanes[5].normal.x = transform.values[3] + transform.values[1];\r\n    //     frustumPlanes[5].normal.y = transform.values[7] + transform.values[5];\r\n    //     frustumPlanes[5].normal.z = transform.values[11] + transform.values[9];\r\n    //     frustumPlanes[5].d = transform.values[15] + transform.values[13];\r\n    //     frustumPlanes[5].normalize();\r\n    // }\r\n\r\n    private _clearCache() {\r\n        this._worldToCameraMatrixCache = null;\r\n    }\r\n\r\n    private _getWorldToCameraMatrix() {\r\n        return this.camera.worldToCameraMatrix;\r\n    }\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { CameraController } from \"../CameraController\";\r\nimport { Camera } from \"../../Camera\";\r\n\r\n@registerClass(\"BasicCameraController\")\r\nexport class BasicCameraController extends CameraController {\r\n    public static create(cameraComponent: Camera) {\r\n        var obj = new this(cameraComponent);\r\n\r\n        return obj;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Camera } from \"./Camera\";\r\nimport { cloneAttributeAsBasicType } from \"../../definition/typescript/decorator/clone\";\r\n\r\ndeclare var Math: any;\r\n\r\n@registerClass(\"PerspectiveCamera\")\r\nexport class PerspectiveCamera extends Camera {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _fovy: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    get fovy() {\r\n        return this._fovy;\r\n    }\r\n    set fovy(fovy: number) {\r\n        this._fovy = fovy;\r\n        this.pMatrixDirty = true;\r\n    }\r\n\r\n    private _aspect: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    get aspect() {\r\n        return this._aspect;\r\n    }\r\n    set aspect(aspect: number) {\r\n        this._aspect = aspect;\r\n        this.pMatrixDirty = true;\r\n    }\r\n\r\n    public zoomIn(speed: number, min: number = 1) {\r\n        this.fovy = Math.max(this.fovy - speed, min);\r\n    }\r\n    public zoomOut(speed: number, max: number = 179) {\r\n        this.fovy = Math.min(this.fovy + speed, max);\r\n    }\r\n\r\n    // public convertScreenToWorld(screenX:number, screenY:number, distanceFromCamera:number):Vector3{\r\n    //     var device:DeviceManager = DeviceManager.getInstance(),\r\n    //         width = device.view.width,\r\n    //         height = device.view.height,\r\n    //         normalizedDeviceCoordinate = Vector3.create(2 * screenX / width - 1, 1 - 2 * screenY / height, 1),\r\n    //         invViewProjMat = this.getInvViewProjMat(),\r\n    //         point = null,\r\n    //         w = null;\r\n    //\r\n    //     point = invViewProjMat.multiplyPoint(normalizedDeviceCoordinate);\r\n    //\r\n    //     w = normalizedDeviceCoordinate.x * invViewProjMat.values[3] +\r\n    //         normalizedDeviceCoordinate.y * invViewProjMat.values[7] +\r\n    //         normalizedDeviceCoordinate.z * invViewProjMat.values[11] +\r\n    //         invViewProjMat.values[15];\r\n    //\r\n    //     point.scale(1 / w);\r\n    //\r\n    //     return Vector3.create().lerp(this.entityObject.transform.position, point, distanceFromCamera / this.far);\r\n    // }\r\n    //\r\n    // public convertWorldToScreen(worldX:number, worldY:number, worldZ:number, screenWidth:number, screenHeight:number):Vector2{\r\n    //     var viewProjectionMatrix:Matrix4 = this.worldToCameraMatrix.clone().applyMatrix(this.pMatrix),\r\n    //         //todo optimize:use temp Vector3, Vector4\r\n    //         normalizedDeviceCoordinate:Vector4 = viewProjectionMatrix.multiplyVector4(Vector4.create(worldX, worldY, worldZ, 1.0)),\r\n    //         ndcSpacePos:Vector3 = Vector3.create(normalizedDeviceCoordinate.x / normalizedDeviceCoordinate.w, normalizedDeviceCoordinate.y / normalizedDeviceCoordinate.w, normalizedDeviceCoordinate.z / normalizedDeviceCoordinate.w);\r\n    //\r\n    //     return Vector2.create(\r\n    //         Math.round((ndcSpacePos.x + 1) / 2.0 * screenWidth),\r\n    //         Math.round((1 - ndcSpacePos.y) / 2.0 * screenHeight)\r\n    //     );\r\n    // }\r\n\r\n    protected updateProjectionMatrix() {\r\n        this.pMatrix.setPerspective(this._fovy, this._aspect, this.near, this.far);\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector3 } from \"../math/Vector3\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { cloneAttributeAsCloneable, cloneAttributeAsBasicType, cloneAttributeAsCustomType, CloneUtils } from \"../definition/typescript/decorator/clone\";\r\n\r\n@registerClass(\"Face3\")\r\nexport class Face3 {\r\n    public static create(aIndex: number, bIndex: number, cIndex: number, faceNormal: Vector3 = null, vertexNormals: Collection<Vector3> = Collection.create<Vector3>()) {\r\n        var obj = new this(aIndex, bIndex, cIndex, faceNormal, vertexNormals);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(aIndex: number, bIndex: number, cIndex: number, faceNormal: Vector3, vertexNormals: Collection<Vector3>) {\r\n        this.aIndex = aIndex;\r\n        this.bIndex = bIndex;\r\n        this.cIndex = cIndex;\r\n        this._faceNormal = faceNormal;\r\n        this.vertexNormals = vertexNormals;\r\n    }\r\n\r\n    @cloneAttributeAsCloneable()\r\n    private _faceNormal: Vector3 = null;\r\n    get faceNormal() {\r\n        return this._faceNormal !== null ? this._faceNormal : Vector3.create(0, 0, 0);\r\n    }\r\n    set faceNormal(faceNormal: Vector3) {\r\n        this._faceNormal = faceNormal;\r\n    }\r\n\r\n    @cloneAttributeAsBasicType()\r\n    public aIndex: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    public bIndex: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    public cIndex: number = null;\r\n    @cloneAttributeAsCustomType(function(source: Face3, target: Face3, memberName: string) {\r\n        target[memberName] = source[memberName].clone(true);\r\n    })\r\n    public vertexNormals: Collection<Vector3> = null;\r\n\r\n    public clone() {\r\n        return CloneUtils.clone(this);\r\n    }\r\n\r\n    public hasFaceNormal() {\r\n        return this._faceNormal !== null;\r\n    }\r\n\r\n    public hasVertexNormal() {\r\n        return this.vertexNormals.getCount() > 0;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Face3 } from \"../../structure/Face3\";\r\nimport { requireCheck, assert } from \"../../definition/typescript/decorator/contract\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { Vector3 } from \"../../math/Vector3\";\r\n\r\n@registerClass(\"GeometryUtils\")\r\nexport class GeometryUtils {\r\n    public static convertToFaces(indices: Array<number>, normals?: Array<number>): Array<Face3> {\r\n        var hasNormals = this.hasData(normals),\r\n            faces = [];\r\n\r\n        for (let i = 0, len = indices.length; i < len; i += 3) {\r\n            let a = indices[i],\r\n                b = indices[i + 1],\r\n                c = indices[i + 2],\r\n                face = Face3.create(a, b, c);\r\n\r\n            if (hasNormals) {\r\n                face.vertexNormals.addChildren([\r\n                    this.getThreeComponent(normals, a),\r\n                    this.getThreeComponent(normals, b),\r\n                    this.getThreeComponent(normals, c)\r\n                ]);\r\n                face.faceNormal = face.vertexNormals.getChild(0).clone();\r\n            }\r\n\r\n            faces.push(face);\r\n        }\r\n\r\n        return faces;\r\n    }\r\n\r\n    @requireCheck(function(data) {\r\n        if (data) {\r\n            assert(data instanceof Collection || data instanceof Hash || JudgeUtils.isArrayExactly(data), Log.info.FUNC_SHOULD(\"data\", \"be Array or Collection or Hash\"));\r\n        }\r\n    })\r\n    public static hasData(data: any) {\r\n        return data && ((data.length && data.length > 0) || (data.getCount && data.getCount() > 0));\r\n    }\r\n\r\n    public static getThreeComponent(sourceData: Array<number>, index: number) {\r\n        var startIndex = 3 * index;\r\n\r\n        return Vector3.create(\r\n            sourceData[startIndex],\r\n            sourceData[startIndex + 1],\r\n            sourceData[startIndex + 2]\r\n        );\r\n    }\r\n\r\n    @requireCheck(function(dataArr: Array<number>, iterator: (v: Vector3) => void) {\r\n        assert(dataArr.length % 3 === 0, Log.info.FUNC_SHOULD(\"dataArr.length\", \"times of three\"));\r\n    })\r\n    public static iterateThreeComponent(dataArr: Array<number>, iterator: (v: Vector3) => void) {\r\n        for (let i = 0, len = dataArr.length; i < len; i += 3) {\r\n            iterator(Vector3.create(dataArr[i], dataArr[i + 1], dataArr[i + 2]));\r\n        }\r\n    }\r\n\r\n    public static setThreeComponent(targetData: Array<number>, sourceData: Vector3, index: number);\r\n    public static setThreeComponent(targetData: Array<number>, sourceData: Array<number>, index: number);\r\n\r\n    public static setThreeComponent(targetData: Array<number>, sourceData: any, index: number) {\r\n        if (sourceData instanceof Vector3) {\r\n            targetData[index * 3] = sourceData.x;\r\n            targetData[index * 3 + 1] = sourceData.y;\r\n            targetData[index * 3 + 2] = sourceData.z;\r\n        }\r\n        else {\r\n            targetData[index * 3] = sourceData[0];\r\n            targetData[index * 3 + 1] = sourceData[1];\r\n            targetData[index * 3 + 2] = sourceData[2];\r\n        }\r\n    }\r\n\r\n    // public static mergeFace(source:Array<Face3>, target:Array<Face3>){\r\n    //     if(!target){\r\n    //         return source;\r\n    //     }\r\n    //\r\n    //     for(let face of target){\r\n    //         source.push(face.clone());\r\n    //     }\r\n    //\r\n    //     return source;\r\n    // }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Geometry } from \"./Geometry\";\r\nimport { cloneAttributeAsBasicType } from \"../../definition/typescript/decorator/clone\";\r\nimport { Vector3 } from \"../../math/Vector3\";\r\nimport { GeometryUtils } from \"./GeometryUtils\";\r\nimport { Face3 } from \"../../structure/Face3\";\r\n\r\n@registerClass(\"BoxGeometry\")\r\nexport class BoxGeometry extends Geometry {\r\n    public static create() {\r\n        var geom = new this();\r\n\r\n        return geom;\r\n    }\r\n\r\n    @cloneAttributeAsBasicType()\r\n    public width: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    public height: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    public depth: number = null;\r\n    @cloneAttributeAsBasicType()\r\n    public widthSegments: number = 1;\r\n    @cloneAttributeAsBasicType()\r\n    public heightSegments: number = 1;\r\n    @cloneAttributeAsBasicType()\r\n    public depthSegments: number = 1;\r\n\r\n    public computeData() {\r\n        var width = this.width,\r\n            height = this.height,\r\n            depth = this.depth,\r\n            widthSegments = this.widthSegments,\r\n            heightSegments = this.heightSegments,\r\n            depthSegments = this.depthSegments,\r\n            sides = {\r\n                FRONT: 0,\r\n                BACK: 1,\r\n                TOP: 2,\r\n                BOTTOM: 3,\r\n                RIGHT: 4,\r\n                LEFT: 5\r\n            };\r\n        var faceAxes = [\r\n            [0, 1, 3], // FRONT\r\n            [4, 5, 7], // BACK\r\n            [3, 2, 6], // TOP\r\n            [1, 0, 4], // BOTTOM\r\n            [1, 4, 2], // RIGHT\r\n            [5, 0, 6]  // LEFT\r\n        ];\r\n\r\n        // var faceNormals = [\r\n        //     [  0,  0,  1 ], // FRONT\r\n        //     [  0,  0, -1 ], // BACK\r\n        //     [  0,  1,  0 ], // TOP\r\n        //     [  0, -1,  0 ], // BOTTOM\r\n        //     [  1,  0,  0 ], // RIGHT\r\n        //     [ -1,  0,  0 ]  // LEFT\r\n        // ];\r\n        var corners = [\r\n            Vector3.create(-width, -height, depth),\r\n            Vector3.create(width, -height, depth),\r\n            Vector3.create(width, height, depth),\r\n            Vector3.create(-width, height, depth),\r\n            Vector3.create(width, -height, -depth),\r\n            Vector3.create(-width, -height, -depth),\r\n            Vector3.create(-width, height, -depth),\r\n            Vector3.create(width, height, -depth)\r\n        ];\r\n\r\n        var vertices = [];\r\n        // var normals = [];\r\n        // var texCoords = [];\r\n        var indices = [];\r\n\r\n        function generateFace(side, uSegments, vSegments) {\r\n            var x, y, z, u, v;\r\n            var i, j;\r\n            var offset = vertices.length / 3;\r\n\r\n            for (i = 0; i <= uSegments; i++) {\r\n                for (j = 0; j <= vSegments; j++) {\r\n                    let temp1 = Vector3.create()\r\n                    var temp2 = Vector3.create();\r\n                    var temp3 = Vector3.create();\r\n                    var r = Vector3.create();\r\n                    temp1.lerp(corners[faceAxes[side][0]], corners[faceAxes[side][1]], i / uSegments);\r\n                    temp2.lerp(corners[faceAxes[side][0]], corners[faceAxes[side][2]], j / vSegments);\r\n                    temp3.sub2(temp2, corners[faceAxes[side][0]]);\r\n                    r.add2(temp1, temp3);\r\n                    u = i / uSegments;\r\n                    v = j / vSegments;\r\n\r\n                    vertices.push(r.x, r.y, r.z);\r\n                    // normals.push(faceNormals[side][0], faceNormals[side][1], faceNormals[side][2]);\r\n                    // texCoords.push(u, v);\r\n\r\n                    if ((i < uSegments) && (j < vSegments)) {\r\n                        indices.push(offset + j + i * (uSegments + 1), offset + j + (i + 1) * (uSegments + 1), offset + j + i * (uSegments + 1) + 1);\r\n                        indices.push(offset + j + (i + 1) * (uSegments + 1), offset + j + (i + 1) * (uSegments + 1) + 1, offset + j + i * (uSegments + 1) + 1);\r\n\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        generateFace(sides.FRONT, widthSegments, heightSegments);\r\n        generateFace(sides.BACK, widthSegments, heightSegments);\r\n        generateFace(sides.TOP, widthSegments, depthSegments);\r\n        generateFace(sides.BOTTOM, widthSegments, depthSegments);\r\n        generateFace(sides.RIGHT, depthSegments, heightSegments);\r\n        generateFace(sides.LEFT, depthSegments, heightSegments);\r\n\r\n        return {\r\n            vertices: vertices,\r\n            //todo direct add to faces, remove indices,normals\r\n            // faces: GeometryUtils.convertToFaces(indices, normals)\r\n            faces: GeometryUtils.convertToFaces(indices)\r\n            // texCoords: texCoords\r\n        };\r\n    }\r\n}","import { Material } from \"../../material/Material\";\r\n\r\nexport abstract class WebGLState {\r\n    public abstract setState(material: Material): void;\r\n\r\n    // protected getSide(material:Material){\r\n    //     var scene:SceneDispatcher = Director.getInstance().scene;\r\n    //\r\n    //     return scene.side ? scene.side : material.side;\r\n    // }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { WebGLState } from \"./WebGLState\";\r\nimport { Material } from \"../../material/Material\";\r\n\r\n@registerClass(\"BasicState\")\r\nexport class BasicState extends WebGLState {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    // @requireCheck(function(material:Material){\r\n    //     if(material.blendFuncSeparate && material.blendEquationSeparate){\r\n    //     }\r\n    //     else{\r\n    //         assert(!!material.blendSrc && !!material.blendDst && !!material.blendEquation, wdCb.Log.info.FUNC_MUST(\"material.blendSrc && material.blendDst && material.blendEquation\", \"be set\"));\r\n    //     }\r\n    // })\r\n    public setState(material: Material): void {\r\n        // var deviceManager = DeviceManager.getInstance();\r\n\r\n        // deviceManager.setColorWrite(material.redWrite, material.greenWrite, material.blueWrite, material.alphaWrite);\r\n        // deviceManager.polygonOffsetMode = material.polygonOffsetMode;\r\n\r\n        // deviceManager.side = this.getSide(material);\r\n\r\n        // deviceManager.blend = material.blend;\r\n        //\r\n        // if(material.blendFuncSeparate && material.blendEquationSeparate){\r\n        //     deviceManager.setBlendFuncSeparate(material.blendFuncSeparate);\r\n        //     deviceManager.setBlendEquationSeparate(material.blendEquationSeparate);\r\n        // }\r\n        // else{\r\n        //     deviceManager.setBlendFunc(material.blendSrc, material.blendDst);\r\n        //     deviceManager.setBlendEquation(material.blendEquation);\r\n        // }\r\n        //\r\n        // if(material.alphaToCoverage){\r\n        //     deviceManager.alphaToCoverage = material.alphaToCoverage;\r\n        // }\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { DeviceManager } from \"../device/DeviceManager\";\r\n\r\n@registerClass(\"GlUtils\")\r\nexport class GlUtils {\r\n    public static drawElements(mode: any, count: number, type: any, offset: number) {\r\n        // var DebugStatistics = ClassUtils.getClassOrEmpty(\"DebugStatistics\", \"EmptyDebugStatistics\");\r\n\r\n        // DebugStatistics.count.drawCalls++;\r\n        // DebugStatistics.count.renderGameObjects++;\r\n\r\n        this._getGl().drawElements(mode, count, type, offset);\r\n    }\r\n\r\n    public static drawArrays(mode: any, first: number, count: number) {\r\n        // var DebugStatistics = ClassUtils.getClassOrEmpty(\"DebugStatistics\", \"EmptyDebugStatistics\");\r\n\r\n        // DebugStatistics.count.drawCalls++;\r\n        // DebugStatistics.count.renderGameObjects++;\r\n\r\n        this._getGl().drawArrays(mode, first, count);\r\n    }\r\n\r\n    // public static drawElementsInstancedANGLE(mode:any, count:number, type:any, offset:number, instancesCount:number){\r\n    //     var extension = GPUDetector.getInstance().extensionInstancedArrays;\r\n    //         // DebugStatistics = ClassUtils.getClassOrEmpty(\"DebugStatistics\", \"EmptyDebugStatistics\");\r\n    //\r\n    //     // DebugStatistics.count.drawCalls++;\r\n    //     // DebugStatistics.count.renderGameObjects += instancesCount;\r\n    //\r\n    //     extension.drawElementsInstancedANGLE(mode, count, type, offset, instancesCount);\r\n    // }\r\n\r\n    // public static drawArraysInstancedANGLE(mode:any, startOffset:number, count:number, instancesCount:number){\r\n    //     var extension = GPUDetector.getInstance().extensionInstancedArrays,\r\n    //         DebugStatistics = ClassUtils.getClassOrEmpty(\"DebugStatistics\", \"EmptyDebugStatistics\");\r\n    //\r\n    //     DebugStatistics.count.drawCalls++;\r\n    //     DebugStatistics.count.renderGameObjects += instancesCount;\r\n    //\r\n    //     extension.drawArraysInstancedANGLE(mode, startOffset, count, instancesCount);\r\n    // }\r\n\r\n    private static _getGl() {\r\n        return DeviceManager.getInstance().gl;\r\n    }\r\n}","import { WebGLState } from \"../state/WebGLState\";\r\nimport { BasicState } from \"../state/BasicState\";\r\nimport { EDrawMode } from \"../EDrawMode\";\r\nimport { virtual } from \"../../definition/typescript/decorator/virtual\";\r\nimport { ElementBuffer } from \"../buffer/ElementBuffer\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\nimport { BufferTable } from \"../../core/entityObject/scene/cache/BufferTable\";\r\nimport { GlUtils } from \"../GlUtils\";\r\nimport { ArrayBuffer } from \"../buffer/ArrayBuffer\";\r\n\r\nexport abstract class RenderCommand {\r\n    private _webglState: WebGLState = null;\r\n    get webglState() {\r\n        return this._webglState ? this._webglState : BasicState.create();\r\n    }\r\n    set webglState(webglState: WebGLState) {\r\n        this._webglState = webglState;\r\n    }\r\n\r\n    public drawMode: EDrawMode = EDrawMode.TRIANGLES;\r\n    // public blend:boolean = false;\r\n    // public vaoManager:VAOManager = null;\r\n\r\n    public abstract execute(): void;\r\n\r\n    @virtual\r\n    public init() {\r\n    }\r\n\r\n    @virtual\r\n    public dispose() {\r\n    }\r\n\r\n    protected drawElements(indexBuffer: ElementBuffer) {\r\n        var startOffset: number = 0,\r\n            gl = DeviceManager.getInstance().gl;\r\n\r\n        BufferTable.bindIndexBuffer(indexBuffer);\r\n\r\n        GlUtils.drawElements(gl[this.drawMode], indexBuffer.count, gl[indexBuffer.type], indexBuffer.typeSize * startOffset);\r\n    }\r\n\r\n    protected drawArray(vertexBuffer: ArrayBuffer) {\r\n        var startOffset: number = 0,\r\n            gl = DeviceManager.getInstance().gl;\r\n\r\n        GlUtils.drawArrays(gl[this.drawMode], startOffset, vertexBuffer.count);\r\n    }\r\n}","import { RenderCommand } from \"./RenderCommand\";\r\nimport { requireGetter, assert } from \"../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\nimport { BufferContainer } from \"../../component/geometry/data/BufferContainer\";\r\nimport { Material } from \"../../material/Material\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { Program } from \"../program/Program\";\r\n\r\nexport abstract class QuadCommand extends RenderCommand {\r\n    get program() {\r\n        return this.material.program;\r\n    }\r\n\r\n    @requireGetter(function() {\r\n        assert(!!this.mMatrix && !!this.vMatrix && !!this.pMatrix, Log.info.FUNC_NOT_EXIST(\"mMatrix or vMatrix or pMatrix\"));\r\n    })\r\n    get mvpMatrix() {\r\n        return this.mMatrix.applyMatrix(this.vMatrix, true).applyMatrix(this.pMatrix, false);\r\n    }\r\n\r\n    @requireGetter(function() {\r\n        assert(!!this.vMatrix && !!this.pMatrix, Log.info.FUNC_NOT_EXIST(\"vMatrix or pMatrix\"));\r\n    })\r\n    get vpMatrix() {\r\n        return this.vMatrix.applyMatrix(this.pMatrix, true);\r\n    }\r\n\r\n    public mMatrix: Matrix4 = null;\r\n    public vMatrix: Matrix4 = null;\r\n    public pMatrix: Matrix4 = null;\r\n    public buffers: BufferContainer = null;\r\n    public material: Material = null;\r\n    public target: GameObject = null;\r\n\r\n    public sortId: number = null;\r\n\r\n    public execute() {\r\n        var material = this.material;\r\n\r\n        material.updateShader(this);\r\n\r\n        this.draw(material);\r\n    }\r\n\r\n    protected abstract draw(material: Material): void;\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { QuadCommand } from \"./QuadCommand\";\r\nimport { Matrix3 } from \"../../math/Matrix3\";\r\nimport { Material } from \"../../material/Material\";\r\nimport { ArrayBuffer } from \"../buffer/ArrayBuffer\";\r\nimport { ElementBuffer } from \"../buffer/ElementBuffer\";\r\nimport { EBufferDataType } from \"../buffer/EBufferDataType\";\r\n\r\n@registerClass(\"SingleDrawCommand\")\r\nexport class SingleDrawCommand extends QuadCommand {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public normalMatrix: Matrix3 = null;\r\n\r\n    protected draw(material: Material) {\r\n        var vertexBuffer: ArrayBuffer = null,\r\n            indexBuffer: ElementBuffer = this.buffers.getChild(EBufferDataType.INDICE);\r\n\r\n        this.webglState.setState(material);\r\n\r\n        if (indexBuffer) {\r\n            this.drawElements(indexBuffer);\r\n        }\r\n        else {\r\n            vertexBuffer = this.buffers.getChild(EBufferDataType.VERTICE);\r\n\r\n            this.drawArray(vertexBuffer);\r\n        }\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { RendererComponent } from \"./RendererComponent\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { Renderer } from \"../../renderer/renderer/Renderer\";\r\nimport { requireCheck, it } from \"../../definition/typescript/decorator/contract\";\r\nimport { Geometry } from \"../geometry/Geometry\";\r\nimport { CameraController } from \"../camera/controller/CameraController\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { QuadCommand } from \"../../renderer/command/QuadCommand\";\r\nimport { Material } from \"../../material/Material\";\r\nimport { SingleDrawCommand } from \"../../renderer/command/SingleDrawCommand\";\r\n\r\n@registerClass(\"MeshRenderer\")\r\nexport class MeshRenderer extends RendererComponent {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public entityObject: GameObject;\r\n\r\n    public render(renderer: Renderer, target: GameObject, camera: GameObject) {\r\n        var geometry = target.getGeometry();\r\n\r\n        if (!geometry) {\r\n            return;\r\n        }\r\n\r\n        renderer.addCommand(this.createDrawCommand(target, geometry, camera));\r\n    }\r\n\r\n    @requireCheck(function(target: GameObject, geometry: Geometry, camera: GameObject) {\r\n        var controller = camera.getComponent<CameraController>(CameraController);\r\n\r\n        it(\"camera must add Camera Component\", () => {\r\n            expect(!!controller && !!controller.camera).true;\r\n        });\r\n        it(\"Mesh must add geometry component\", () => {\r\n            expect(!!geometry).true;\r\n        });\r\n    })\r\n    protected createDrawCommand(target: GameObject, geometry: Geometry, camera: GameObject) {\r\n        var cmd: QuadCommand = null,\r\n            cameraComponent = camera.getComponent<CameraController>(CameraController),\r\n            material: Material = geometry.material;\r\n\r\n        cmd = this._createCommand(target, material);\r\n\r\n        cmd.target = target;\r\n\r\n        cmd.buffers = geometry.buffers;\r\n\r\n        // cmd.vaoManager = geometry.vaoManager;\r\n\r\n        cmd.drawMode = geometry.drawMode;\r\n\r\n        cmd.mMatrix = target.transform.localToWorldMatrix;\r\n\r\n\r\n        if (target.data && target.data.vMatrix) {\r\n            cmd.vMatrix = target.data.vMatrix;\r\n        }\r\n        else {\r\n            cmd.vMatrix = cameraComponent.worldToCameraMatrix;\r\n        }\r\n\r\n        if (target.data && target.data.pMatrix) {\r\n            cmd.pMatrix = target.data.pMatrix;\r\n        }\r\n        else {\r\n            cmd.pMatrix = cameraComponent.pMatrix;\r\n        }\r\n\r\n        cmd.material = material;\r\n\r\n\r\n        // cmd.blend = material.blend;\r\n\r\n        return cmd;\r\n    }\r\n\r\n    private _createCommand(target: GameObject, material: Material) {\r\n        var cmd: any = null;\r\n\r\n        // if(isHardwareInstance){\r\n        //     if(isOneToManyInstance){\r\n        //         cmd = this._createOneToManyHardwareInstanceCommand(target, material, glslData);\r\n        //     }\r\n        //     else{\r\n        //         cmd = this._createOneToOneHardwareInstanceCommand(target, material, glslData);\r\n        //     }\r\n        // }\r\n        // else if(isBatchInstance){\r\n        //     if(isOneToManyInstance){\r\n        //         cmd = this._createOneToManyBatchInstanceCommand(target, material, glslData);\r\n        //     }\r\n        //     else{\r\n        //         cmd = this._createOneToOneBatchInstanceCommand(target, material, glslData);\r\n        //     }\r\n        // }\r\n        // else{\r\n        cmd = SingleDrawCommand.create();\r\n\r\n        cmd.normalMatrix = this.entityObject.transform.normalMatrix;\r\n        // }\r\n\r\n        return cmd;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Transform } from \"./Transform\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\nimport { cacheGetter } from \"../../definition/typescript/decorator/cache\";\r\nimport { Vector3 } from \"../../math/Vector3\";\r\nimport { cloneAttributeAsCloneable, cloneAttributeAsBasicType } from \"../../definition/typescript/decorator/clone\";\r\nimport { Quaternion } from \"../../math/Quaternion\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { Matrix3 } from \"../../math/Matrix3\";\r\nimport { ETransformState } from \"./ETransformState\";\r\nimport { EventManager } from \"../../event/EventManager\";\r\nimport { CustomEvent } from \"../../event/object/CustomEvent\";\r\nimport { EEngineEvent } from \"../../event/EEngineEvent\";\r\nimport { Log } from \"../../utils/Log\";\r\n\r\n@registerClass(\"ThreeDTransform\")\r\nexport class ThreeDTransform extends Transform {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _localToWorldMatrix: Matrix4 = null;\r\n    @cacheGetter(function() {\r\n        return this._localToWorldMatrixCache !== null;\r\n    }, function() {\r\n        return this._localToWorldMatrixCache;\r\n    }, function(result) {\r\n        this._localToWorldMatrixCache = result;\r\n    })\r\n    get localToWorldMatrix() {\r\n        if (this._isUserSpecifyTheLocalToWorldMatrix) {\r\n            return this._userLocalToWorldMatrix;\r\n        }\r\n\r\n        return this.getMatrix<Matrix4>(\"sync\", \"_localToWorldMatrix\");\r\n    }\r\n    set localToWorldMatrix(matrix: Matrix4) {\r\n        this._isUserSpecifyTheLocalToWorldMatrix = true;\r\n\r\n        this._userLocalToWorldMatrix = matrix;\r\n\r\n        this.isTransform = true;\r\n    }\r\n\r\n    @cacheGetter(function() {\r\n        return this._normalMatrixCache !== null;\r\n    }, function() {\r\n        return this._normalMatrixCache;\r\n    }, function(result) {\r\n        this._normalMatrixCache = result;\r\n    })\r\n    get normalMatrix() {\r\n        return this.localToWorldMatrix.invertTo3x3().transpose();\r\n    }\r\n\r\n    private _position: Vector3 = Vector3.create();\r\n    @cloneAttributeAsCloneable()\r\n    @cacheGetter(function() {\r\n        return this._positionCache !== null;\r\n    }, function() {\r\n        return this._positionCache;\r\n    }, function(result) {\r\n        this._positionCache = result;\r\n    })\r\n    get position() {\r\n        this._position = this.localToWorldMatrix.getTranslation();\r\n\r\n        return this._position;\r\n    }\r\n    set position(position: Vector3) {\r\n        if (this.p_parent === null) {\r\n            this._localPosition = position;\r\n        }\r\n        else {\r\n            this._localPosition = this.p_parent.localToWorldMatrix.clone().invert().multiplyPoint(position);\r\n        }\r\n\r\n        this.isTranslate = true;\r\n    }\r\n\r\n    private _rotation: Quaternion = Quaternion.create(0, 0, 0, 1);\r\n    @cloneAttributeAsCloneable()\r\n    @cacheGetter(function() {\r\n        return this._rotationCache !== null;\r\n    }, function() {\r\n        return this._rotationCache;\r\n    }, function(result) {\r\n        this._rotationCache = result;\r\n    })\r\n    get rotation() {\r\n        this._rotation.setFromMatrix(this.localToWorldMatrix);\r\n\r\n        return this._rotation;\r\n    }\r\n    set rotation(rotation: Quaternion) {\r\n        if (this.p_parent === null) {\r\n            this._localRotation = rotation;\r\n        }\r\n        else {\r\n            this._localRotation = this.p_parent.rotation.clone().invert().multiply(rotation);\r\n        }\r\n\r\n        this.isRotate = true;\r\n    }\r\n\r\n    private _scale: Vector3 = Vector3.create(1, 1, 1);\r\n    @cloneAttributeAsCloneable()\r\n    @cacheGetter(function() {\r\n        return this._scaleCache !== null;\r\n    }, function() {\r\n        return this._scaleCache;\r\n    }, function(result) {\r\n        this._scaleCache = result;\r\n    })\r\n    get scale() {\r\n        this._scale = this.localToWorldMatrix.getScale();\r\n\r\n        return this._scale;\r\n    }\r\n    set scale(scale: Vector3) {\r\n        if (this.p_parent === null) {\r\n            this._localScale = scale;\r\n        }\r\n        else {\r\n            this._localScale = this.p_parent.localToWorldMatrix.clone().invert().multiplyVector3(scale);\r\n        }\r\n\r\n        this.isScale = true;\r\n    }\r\n\r\n    private _eulerAngles: Vector3 = null;\r\n    @cacheGetter(function() {\r\n        return this._eulerAnglesCache !== null;\r\n    }, function() {\r\n        return this._eulerAnglesCache;\r\n    }, function(result) {\r\n        this._eulerAnglesCache = result;\r\n    })\r\n    get eulerAngles() {\r\n        this._eulerAngles = this.localToWorldMatrix.getEulerAngles();\r\n        return this._eulerAngles;\r\n    }\r\n    set eulerAngles(eulerAngles: Vector3) {\r\n        this._localRotation.setFromEulerAngles(eulerAngles);\r\n\r\n        if (this.p_parent !== null) {\r\n            this._localRotation = this.p_parent.rotation.clone().invert().multiply(this._localRotation);\r\n        }\r\n\r\n        this.isRotate = true;\r\n    }\r\n\r\n    private _localPosition: Vector3 = Vector3.create(0, 0, 0);\r\n    @cloneAttributeAsCloneable()\r\n    get localPosition() {\r\n        return this._localPosition;\r\n    }\r\n    set localPosition(position: Vector3) {\r\n        this._localPosition = position;\r\n\r\n        this.isLocalTranslate = true;\r\n    }\r\n\r\n    private _localRotation: Quaternion = Quaternion.create(0, 0, 0, 1);\r\n    @cloneAttributeAsCloneable()\r\n    get localRotation() {\r\n        return this._localRotation;\r\n    }\r\n    set localRotation(rotation: Quaternion) {\r\n        this._localRotation = rotation;\r\n\r\n        this.isLocalRotate = true;\r\n    }\r\n\r\n    private _localEulerAngles: Vector3 = null;\r\n    @cacheGetter(function() {\r\n        return this._localEulerAnglesCache !== null;\r\n    }, function() {\r\n        return this._localEulerAnglesCache;\r\n    }, function(result) {\r\n        this._localEulerAnglesCache = result;\r\n    })\r\n    get localEulerAngles() {\r\n        this._localEulerAngles = this._localRotation.getEulerAngles();\r\n\r\n        return this._localEulerAngles;\r\n    }\r\n    set localEulerAngles(localEulerAngles: Vector3) {\r\n        this._localRotation.setFromEulerAngles(localEulerAngles);\r\n\r\n        this.isLocalRotate = true;\r\n    }\r\n\r\n    private _localScale: Vector3 = Vector3.create(1, 1, 1);\r\n    @cloneAttributeAsCloneable()\r\n    get localScale() {\r\n        return this._localScale;\r\n    }\r\n    set localScale(scale: Vector3) {\r\n        this._localScale = scale;\r\n\r\n        this.isLocalScale = true;\r\n    }\r\n\r\n    get up() {\r\n        return this.localToWorldMatrix.getY().normalize();\r\n    }\r\n\r\n    get right() {\r\n        return this.localToWorldMatrix.getX().normalize();\r\n    }\r\n\r\n    get forward() {\r\n        //todo why scale(-1)?\r\n        //return this.localToWorldMatrix.getZ().normalize();\r\n        return this.localToWorldMatrix.getZ().normalize().scale(-1);\r\n    }\r\n\r\n\r\n    public dirtyWorld: boolean = null;\r\n\r\n    protected p_parent: ThreeDTransform;\r\n    protected children: Collection<ThreeDTransform>;\r\n\r\n    private _localToParentMatrix: Matrix4 = Matrix4.create();\r\n    private _localToWorldMatrixCache: Matrix4 = null;\r\n    private _positionCache: Vector3 = null;\r\n    private _rotationCache: Vector3 = null;\r\n    private _scaleCache: Vector3 = null;\r\n    private _eulerAnglesCache: Vector3 = null;\r\n    private _localEulerAnglesCache: Vector3 = null;\r\n    private _normalMatrixCache: Matrix3 = null;\r\n    @cloneAttributeAsBasicType()\r\n    private _isUserSpecifyTheLocalToWorldMatrix: boolean = false;\r\n    @cloneAttributeAsCloneable()\r\n    private _userLocalToWorldMatrix = null;\r\n\r\n    public sync() {\r\n        if (this.dirtyLocal) {\r\n            this._localToParentMatrix.setTRS(this._localPosition, this._localRotation, this._localScale);\r\n\r\n            this.dirtyLocal = false;\r\n            this.dirtyWorld = true;\r\n        }\r\n\r\n        if (this.dirtyWorld) {\r\n            if (this.p_parent === null) {\r\n                this._localToWorldMatrix = this._localToParentMatrix.clone();\r\n            }\r\n            else {\r\n                this._localToWorldMatrix = this.p_parent.localToWorldMatrix.clone().multiply(this._localToParentMatrix);\r\n            }\r\n\r\n            this.dirtyWorld = false;\r\n\r\n            this.children.forEach((child: ThreeDTransform) => {\r\n                child.dirtyWorld = true;\r\n            });\r\n        }\r\n    }\r\n\r\n    public translateLocal(translation: Vector3);\r\n    public translateLocal(x: number, y: number, z: number);\r\n\r\n\r\n    public translateLocal(...args) {\r\n        var translation = null;\r\n\r\n        if (args.length === 3) {\r\n            translation = Vector3.create(args[0], args[1], args[2]);\r\n        }\r\n        else {\r\n            translation = args[0];\r\n        }\r\n\r\n        this._localPosition = this._localPosition.add(this._localRotation.multiplyVector3(translation));\r\n\r\n        this.isTranslate = true;\r\n\r\n        return this;\r\n    }\r\n\r\n    public translate(translation: Vector3);\r\n    public translate(x: number, y: number, z: number);\r\n\r\n    public translate(...args) {\r\n        var translation = null;\r\n\r\n        if (args.length === 3) {\r\n            translation = Vector3.create(args[0], args[1], args[2]);\r\n        }\r\n        else {\r\n            translation = args[0];\r\n        }\r\n\r\n        this.position = translation.add(this.position);\r\n\r\n        return this;\r\n    }\r\n\r\n    public rotate(eulerAngles: Vector3);\r\n    public rotate(x: number, y: number, z: number);\r\n\r\n    public rotate(...args) {\r\n        var eulerAngles = null,\r\n            quaternion = Quaternion.create();\r\n\r\n        if (args.length === 3) {\r\n            eulerAngles = Vector3.create(args[0], args[1], args[2]);\r\n        }\r\n        else {\r\n            eulerAngles = args[0];\r\n        }\r\n\r\n        quaternion.setFromEulerAngles(eulerAngles);\r\n\r\n        if (this.p_parent === null) {\r\n            this._localRotation = quaternion.multiply(this._localRotation);\r\n        }\r\n        else {\r\n            //todo why?\r\n            quaternion = this.p_parent.rotation.clone().invert().multiply(quaternion);\r\n            this._localRotation = quaternion.multiply(this.rotation);\r\n        }\r\n\r\n        this.isRotate = true;\r\n\r\n        return this;\r\n    }\r\n\r\n    public rotateLocal(eulerAngles: Vector3);\r\n    public rotateLocal(x: number, y: number, z: number);\r\n\r\n    public rotateLocal(...args) {\r\n        var eulerAngles = null,\r\n            quaternion = Quaternion.create();\r\n\r\n        if (args.length === 3) {\r\n            eulerAngles = Vector3.create(args[0], args[1], args[2]);\r\n        }\r\n        else {\r\n            eulerAngles = args[0];\r\n        }\r\n\r\n        quaternion.setFromEulerAngles(eulerAngles);\r\n\r\n        this._localRotation.multiply(quaternion);\r\n\r\n        this.isRotate = true;\r\n\r\n        return this;\r\n    }\r\n\r\n    public rotateAround(angle: number, center: Vector3, axis: Vector3);\r\n    public rotateAround(angle: number, centerX: number, centerY: number, centerZ: number, axisX: number, axisY: number, axisZ: number);\r\n\r\n    public rotateAround(...args) {\r\n        var angle = null,\r\n            center = null,\r\n            axis = null,\r\n            rot: Quaternion = null,\r\n            dir: Vector3 = null;\r\n\r\n        if (args.length === 3) {\r\n            angle = args[0];\r\n            center = args[1];\r\n            axis = args[2];\r\n        }\r\n        else {\r\n            angle = args[0];\r\n            center = Vector3.create(args[1], args[2], args[3]);\r\n            axis = Vector3.create(args[4], args[5], args[6]);\r\n        }\r\n\r\n        rot = Quaternion.create().setFromAxisAngle(angle, axis);\r\n        // find current direction relative to center\r\n        dir = this.position.clone().sub(center);\r\n\r\n        // rotate the direction\r\n        dir = rot.multiplyVector3(dir);\r\n\r\n        // define new position\r\n        this.position = center.add(dir);\r\n        //todo why \"this.rotation = this.rotation.multiply(rot)\" will cause entityObject rotate direction around self?\r\n        this.rotation = rot.multiply(this.rotation);\r\n\r\n        return this;\r\n    }\r\n\r\n    public lookAt(target: Vector3);\r\n    public lookAt(targetX: number, targetY: number, targetZ: number);\r\n    public lookAt(target: Vector3, up: Vector3);\r\n    public lookAt(targetX: number, targetY: number, targetZ: number, upX: number, upY: number, upZ: number);\r\n\r\n    public lookAt(...args) {\r\n        var target = null,\r\n            up = null;\r\n\r\n        if (args.length === 1) {\r\n            target = args[0];\r\n            up = Vector3.up;\r\n        }\r\n        else if (args.length === 2) {\r\n            target = args[0];\r\n            up = args[1];\r\n        }\r\n        else if (args.length === 3) {\r\n            target = Vector3.create(args[0], args[1], args[2]);\r\n            up = Vector3.up;\r\n        }\r\n        else {\r\n            target = Vector3.create(args[0], args[1], args[2]);\r\n            up = Vector3.create(args[3], args[4], args[5]);\r\n        }\r\n\r\n        this.rotation = Quaternion.create().setFromMatrix(Matrix4.create().setLookAt(this.position, target, up));\r\n\r\n        return this;\r\n    }\r\n\r\n    protected clearCache() {\r\n        this._localToWorldMatrixCache = null;\r\n        this._normalMatrixCache = null;\r\n        this._positionCache = null;\r\n        this._rotationCache = null;\r\n        this._scaleCache = null;\r\n        this._eulerAnglesCache = null;\r\n        this._localEulerAnglesCache = null;\r\n    }\r\n\r\n    protected handleWhenSetTransformState(transformState?: ETransformState): void {\r\n        var eventName: string = null;\r\n\r\n        if (transformState === void 0) {\r\n            EventManager.trigger(this.entityObject, CustomEvent.create(<any>EEngineEvent.TRANSFORM_TRANSLATE));\r\n            EventManager.trigger(this.entityObject, CustomEvent.create(<any>EEngineEvent.TRANSFORM_ROTATE));\r\n            EventManager.trigger(this.entityObject, CustomEvent.create(<any>EEngineEvent.TRANSFORM_SCALE));\r\n\r\n            return;\r\n        }\r\n\r\n        switch (transformState) {\r\n            case ETransformState.ISTRANSLATE:\r\n                eventName = <any>EEngineEvent.TRANSFORM_TRANSLATE;\r\n                break;\r\n            case ETransformState.ISROTATE:\r\n                eventName = <any>EEngineEvent.TRANSFORM_ROTATE;\r\n                break;\r\n            case ETransformState.ISSCALE:\r\n                eventName = <any>EEngineEvent.TRANSFORM_SCALE;\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_UNKNOW(`transformState:${transformState}`));\r\n                break;\r\n        }\r\n\r\n        EventManager.trigger(this.entityObject, CustomEvent.create(eventName));\r\n    }\r\n}","export var DebugConfig = {\r\n    isTest: false,\r\n    debugCollision: false,\r\n    showDebugPanel: false\r\n}","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\n\r\nexport class ConcatObserver extends Observer {\r\n    public static create(currentObserver: IObserver, startNextStream: Function) {\r\n        return new this(currentObserver, startNextStream);\r\n    }\r\n\r\n    //private currentObserver:IObserver = null;\r\n    protected currentObserver: any = null;\r\n    private _startNextStream: Function = null;\r\n\r\n    constructor(currentObserver: IObserver, startNextStream: Function) {\r\n        super(null, null, null);\r\n\r\n        this.currentObserver = currentObserver;\r\n        this._startNextStream = startNextStream;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        /*!\r\n        if \"this.currentObserver.next\" error, it will pase to this.currentObserver->onError.\r\n        so it shouldn't invoke this.currentObserver.error here again!\r\n         */\r\n        //try{\r\n        this.currentObserver.next(value);\r\n        //}\r\n        //catch(e){\r\n        //    this.currentObserver.error(e);\r\n        //}\r\n    }\r\n\r\n    protected onError(error) {\r\n        this.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        //this.currentObserver.completed();\r\n        this._startNextStream();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { fromPromise } from \"../global/Operator\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { ConcatObserver } from \"../observer/ConcatObserver\";\r\nimport { ClassMapUtils } from \"../utils/ClassMapUtils\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"ConcatStream\")\r\nexport class ConcatStream extends BaseStream {\r\n    public static create(sources: Array<Stream>) {\r\n        var obj = new this(sources);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _sources: Collection<Stream> = Collection.create<Stream>();\r\n\r\n    constructor(sources: Array<Stream>) {\r\n        super(null);\r\n\r\n        var self = this;\r\n\r\n        //todo don't set scheduler here?\r\n        this.scheduler = sources[0].scheduler;\r\n\r\n        sources.forEach((source) => {\r\n            if (JudgeUtils.isPromise(source)) {\r\n                self._sources.addChild(fromPromise(source));\r\n            }\r\n            else {\r\n                self._sources.addChild(source);\r\n            }\r\n        });\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this,\r\n            count = this._sources.getCount(),\r\n            d = GroupDisposable.create();\r\n\r\n        function loopRecursive(i) {\r\n            if (i === count) {\r\n                observer.completed();\r\n\r\n                return;\r\n            }\r\n\r\n            d.add(self._sources.getChild(i).buildStream(ConcatObserver.create(\r\n                observer, () => {\r\n                    loopRecursive(i + 1);\r\n                })\r\n            ));\r\n        }\r\n\r\n        this.scheduler.publishRecursive(observer, 0, loopRecursive);\r\n\r\n        return GroupDisposable.create(d);\r\n    }\r\n}\r\n","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\n\r\nexport class IgnoreElementsObserver extends Observer {\r\n    public static create(currentObserver: IObserver) {\r\n        return new this(currentObserver);\r\n    }\r\n\r\n    private _currentObserver: IObserver = null;\r\n\r\n    constructor(currentObserver: IObserver) {\r\n        super(null, null, null);\r\n\r\n        this._currentObserver = currentObserver;\r\n    }\r\n\r\n    protected onNext(value) {\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this._currentObserver.completed();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { IgnoreElementsObserver } from \"../observer/IgnoreElementsObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"IgnoreElementsStream\")\r\nexport class IgnoreElementsStream extends BaseStream {\r\n    public static create(source: Stream) {\r\n        var obj = new this(source);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n\r\n    constructor(source: Stream) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        return this._source.buildStream(IgnoreElementsObserver.create(observer));\r\n    }\r\n}\r\n","import { root } from \"../global/Variable\";\r\n\r\nroot.requestNextAnimationFrame = (function() {\r\n    var originalRequestAnimationFrame = undefined,\r\n        wrapper = undefined,\r\n        callback = undefined,\r\n        geckoVersion = null,\r\n        userAgent = root.navigator && root.navigator.userAgent,\r\n        index = 0,\r\n        self = this;\r\n\r\n    wrapper = function(time) {\r\n        time = root.performance.now();\r\n        self.callback(time);\r\n    };\r\n\r\n    /*!\r\n     bug!\r\n     below code:\r\n     when invoke b after 1s, will only invoke b, not invoke a!\r\n\r\n     function a(time){\r\n     console.log(\"a\", time);\r\n     webkitRequestAnimationFrame(a);\r\n     }\r\n\r\n     function b(time){\r\n     console.log(\"b\", time);\r\n     webkitRequestAnimationFrame(b);\r\n     }\r\n\r\n     a();\r\n\r\n     setTimeout(b, 1000);\r\n\r\n\r\n\r\n     so use requestAnimationFrame priority!\r\n     */\r\n    if (root.requestAnimationFrame) {\r\n        return requestAnimationFrame;\r\n    }\r\n\r\n\r\n    // Workaround for Chrome 10 bug where Chrome\r\n    // does not pass the time to the animation function\r\n\r\n    if (root.webkitRequestAnimationFrame) {\r\n        // Define the wrapper\r\n\r\n        // Make the switch\r\n\r\n        originalRequestAnimationFrame = root.webkitRequestAnimationFrame;\r\n\r\n        root.webkitRequestAnimationFrame = function(callback, element) {\r\n            self.callback = callback;\r\n\r\n            // Browser calls the wrapper and wrapper calls the callback\r\n\r\n            return originalRequestAnimationFrame(wrapper, element);\r\n        }\r\n    }\r\n\r\n    //修改time参数\r\n    if (root.msRequestAnimationFrame) {\r\n        originalRequestAnimationFrame = root.msRequestAnimationFrame;\r\n\r\n        root.msRequestAnimationFrame = function(callback) {\r\n            self.callback = callback;\r\n\r\n            return originalRequestAnimationFrame(wrapper);\r\n        }\r\n    }\r\n\r\n    // Workaround for Gecko 2.0, which has a bug in\r\n    // mozRequestAnimationFrame() that restricts animations\r\n    // to 30-40 fps.\r\n\r\n    if (root.mozRequestAnimationFrame) {\r\n        // Check the Gecko version. Gecko is used by browsers\r\n        // other than Firefox. Gecko 2.0 corresponds to\r\n        // Firefox 4.0.\r\n\r\n        index = userAgent.indexOf('rv:');\r\n\r\n        if (userAgent.indexOf('Gecko') != -1) {\r\n            geckoVersion = userAgent.substr(index + 3, 3);\r\n\r\n            if (geckoVersion === '2.0') {\r\n                // Forces the return statement to fall through\r\n                // to the setTimeout() function.\r\n\r\n                root.mozRequestAnimationFrame = undefined;\r\n            }\r\n        }\r\n    }\r\n\r\n    return root.webkitRequestAnimationFrame ||\r\n        root.mozRequestAnimationFrame ||\r\n        root.oRequestAnimationFrame ||\r\n        root.msRequestAnimationFrame ||\r\n\r\n        function(callback, element) {\r\n            var start,\r\n                finish;\r\n\r\n            root.setTimeout(function() {\r\n                start = root.performance.now();\r\n                callback(start);\r\n                finish = root.performance.now();\r\n\r\n                self.timeout = 1000 / 60 - (finish - start);\r\n\r\n            }, self.timeout);\r\n        };\r\n}());\r\n\r\nroot.cancelNextRequestAnimationFrame = root.cancelRequestAnimationFrame\r\n    || root.webkitCancelAnimationFrame\r\n    || root.webkitCancelRequestAnimationFrame\r\n    || root.mozCancelRequestAnimationFrame\r\n    || root.oCancelRequestAnimationFrame\r\n    || root.msCancelRequestAnimationFrame\r\n    || clearTimeout;\r\n\r\n","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { GameObject } from \"../core/entityObject/gameObject/GameObject\";\r\n\r\n@registerClass(\"RenderUtils\")\r\nexport class RenderUtils {\r\n    public static getGameObjectRenderList(sourceList: Collection<GameObject>) {\r\n        var renderList = [];\r\n        // GameObjectLOD:any = ClassUtils.getClass(\"GameObjectLOD\");\r\n\r\n        sourceList.forEach((child: GameObject) => {\r\n            var activeGameObject: GameObject = null;\r\n\r\n            activeGameObject = child;\r\n\r\n            // if(activeGameObject.isVisible && !InstanceUtils.isObjectInstance(activeGameObject)){\r\n            if (activeGameObject.isVisible) {\r\n                renderList.push(activeGameObject);\r\n            }\r\n        });\r\n\r\n        //todo optimize:use temp Collection\r\n        return Collection.create<GameObject>(renderList);\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { EntityObject } from \"../EntityObject\";\r\nimport { ThreeDTransform } from \"../../../component/transform/ThreeDTransform\";\r\nimport { cloneAttributeAsBasicType } from \"../../../definition/typescript/decorator/clone\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { RenderUtils } from \"../../../utils/RenderUtils\";\r\n\r\n@registerClass(\"GameObject\")\r\nexport class GameObject extends EntityObject {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        obj.initWhenCreate();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public transform: ThreeDTransform;\r\n    public parent: GameObject;\r\n\r\n    @cloneAttributeAsBasicType()\r\n    public renderGroup: number = 0;\r\n    @cloneAttributeAsBasicType()\r\n    public renderPriority: number = 0;\r\n    @cloneAttributeAsBasicType()\r\n    public isVisible: boolean = true;\r\n\r\n    protected children: Collection<GameObject>;\r\n\r\n    public initWhenCreate() {\r\n        super.initWhenCreate();\r\n\r\n        this.name = `gameObject${String(this.uid)}`;\r\n    }\r\n\r\n    protected createTransform() {\r\n        return ThreeDTransform.create();\r\n    }\r\n\r\n    protected getRenderList() {\r\n        return RenderUtils.getGameObjectRenderList(this.getChildren());\r\n    }\r\n}","import { EntityObject } from \"../EntityObject\";\r\n\r\nexport abstract class Scene extends EntityObject {\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { Scene } from \"../Scene\";\r\nimport { GameObject } from \"../../gameObject/GameObject\";\r\nimport { requireSetter, assert } from \"../../../../definition/typescript/decorator/contract\";\r\nimport { JudgeUtils } from \"../../../../utils/JudgeUtils\";\r\nimport { Log } from \"../../../../utils/Log\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { Renderer } from \"../../../../renderer/renderer/Renderer\";\r\nimport { RenderUtils } from \"../../../../utils/RenderUtils\";\r\nimport { CameraController } from \"../../../../component/camera/controller/CameraController\";\r\n\r\n@registerClass(\"GameObjectScene\")\r\nexport class GameObjectScene extends Scene {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _currentCamera: GameObject = null;\r\n    get currentCamera(): any {\r\n        return this._currentCamera || this._cameraList.getChild(0);\r\n    }\r\n    @requireSetter(function(arg: any) {\r\n        if (JudgeUtils.isNumber(arg)) {\r\n            let index: number = arg;\r\n\r\n            assert(!!this._cameraList.getChild(index), Log.info.FUNC_NOT_EXIST(\"current camera in cameraList\"));\r\n        }\r\n    })\r\n    set currentCamera(arg: any) {\r\n        if (JudgeUtils.isNumber(arg)) {\r\n            let index: number = arg;\r\n\r\n            this._currentCamera = this._cameraList.getChild(index);\r\n        }\r\n        else if (arg instanceof GameObject) {\r\n            let currentCamera: GameObject = arg;\r\n\r\n            this._currentCamera = currentCamera;\r\n        }\r\n    }\r\n\r\n    private _cameraList: Collection<GameObject> = Collection.create<GameObject>();\r\n\r\n    public addChild(child: GameObject): GameObject {\r\n        var cameraList = this._getCameras(child);\r\n\r\n        if (cameraList.getCount() > 0) {\r\n            this._cameraList.addChildren(cameraList);\r\n        }\r\n\r\n        return <GameObject>super.addChild(child);\r\n    }\r\n\r\n    public update(elapsed: number) {\r\n        var currentCamera = this._getCurrentCameraComponent();\r\n\r\n        if (currentCamera) {\r\n            currentCamera.update(elapsed);\r\n        }\r\n\r\n        super.update(elapsed);\r\n    }\r\n\r\n    public render(renderer: Renderer) {\r\n        // this.shadowManager.setShadowRenderListForCurrentLoop();\r\n        //\r\n        // this.renderTargetRendererManager.render(renderer, this.currentCamera);\r\n\r\n        super.render(renderer, this.currentCamera);\r\n    }\r\n\r\n    protected getRenderList() {\r\n        return RenderUtils.getGameObjectRenderList(this.getChildren());\r\n    }\r\n\r\n    protected createTransform() {\r\n        return null;\r\n    }\r\n\r\n    private _getCameras(gameObject: GameObject) {\r\n        return this._find(gameObject, this._isCamera);\r\n    }\r\n\r\n    private _find(gameObject: GameObject, judgeFunc) {\r\n        var self = this,\r\n            resultArr: Collection<GameObject> = Collection.create<GameObject>();\r\n        var find = (gameObject: GameObject) => {\r\n            if (judgeFunc.call(self, gameObject)) {\r\n                resultArr.addChild(gameObject);\r\n            }\r\n\r\n            gameObject.forEach((child: GameObject) => {\r\n                find(child);\r\n            });\r\n        }\r\n\r\n        find(gameObject);\r\n\r\n        return resultArr;\r\n    }\r\n\r\n    private _isCamera(child: GameObject) {\r\n        return child.hasComponent(CameraController);\r\n    }\r\n\r\n    private _getCurrentCameraComponent(): CameraController {\r\n        if (!this.currentCamera) {\r\n            return null;\r\n        }\r\n\r\n        return this.currentCamera.getComponent(CameraController);\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { EntityObject } from \"../EntityObject\";\r\nimport { GameObject } from \"../gameObject/GameObject\";\r\nimport { GameObjectScene } from \"./gameObjectScene/GameObjectScene\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { JudgeUtils } from \"../../../utils/JudgeUtils\";\r\n\r\n@registerClass(\"SceneDispatcher\")\r\nexport class SceneDispatcher extends EntityObject {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        obj.initWhenCreate();\r\n\r\n        return obj;\r\n    }\r\n\r\n    get currentCamera(): GameObject {\r\n        return this.gameObjectScene.currentCamera;\r\n    }\r\n    set currentCamera(arg: GameObject) {\r\n        this.gameObjectScene.currentCamera = arg;\r\n    }\r\n\r\n    public name: string = `scene${String(this.uid)}`;\r\n\r\n    public gameObjectScene: GameObjectScene = GameObjectScene.create();\r\n\r\n    public addChild(child: EntityObject): EntityObject {\r\n        if (child instanceof GameObject) {\r\n            this.gameObjectScene.addChild(child);\r\n        }\r\n        child.parent = this;\r\n\r\n        return this;\r\n    }\r\n\r\n    public dispose() {\r\n        this.gameObjectScene.dispose();\r\n    }\r\n\r\n    public hasChild(child: EntityObject): boolean {\r\n        if (child instanceof GameObject) {\r\n            return this.gameObjectScene.hasChild(child);\r\n        }\r\n    }\r\n\r\n    public addChildren(children: EntityObject);\r\n    public addChildren(children: Array<EntityObject>);\r\n    public addChildren(children: Collection<EntityObject>);\r\n\r\n    public addChildren(...args) {\r\n        if (args[0] instanceof EntityObject) {\r\n            let child: EntityObject = <EntityObject>args[0];\r\n\r\n            this.addChild(child);\r\n        }\r\n        if (args[0] instanceof Collection) {\r\n            let children: Collection<EntityObject> = <Collection<EntityObject>>args[0],\r\n                self = this;\r\n\r\n            children.forEach((child: EntityObject) => {\r\n                self.addChild(child);\r\n            });\r\n        }\r\n        else if (JudgeUtils.isArrayExactly(args[0])) {\r\n            let children: Array<EntityObject> = <Array<EntityObject>>args[0];\r\n\r\n            for (let child of children) {\r\n                this.addChild(child);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public getChildren() {\r\n        return this.gameObjectScene.getChildren();\r\n    }\r\n\r\n    protected createTransform() {\r\n        return null;\r\n    }\r\n}","import { ensure, assert } from \"../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../Log\";\r\n\r\nexport abstract class TimeController {\r\n    public elapsed: number = null;\r\n    public pauseElapsed: number = 0;\r\n    public pauseTime: number = null;\r\n    public startTime: number = null;\r\n\r\n    public start() {\r\n        this.startTime = this.getNow();\r\n        this.pauseElapsed = null;\r\n    }\r\n\r\n    public stop() {\r\n        this.startTime = null;\r\n    }\r\n\r\n    public pause() {\r\n        this.pauseTime = this.getNow();\r\n    }\r\n\r\n    public resume() {\r\n        this.pauseElapsed += this.getNow() - this.pauseTime;\r\n        this.pauseTime = null;\r\n    }\r\n\r\n    @ensure(function() {\r\n        assert(this.elapsed >= 0, Log.info.FUNC_SHOULD(`elapsed:${this.elapsed}`, \">= 0\"));\r\n    })\r\n    public computeElapseTime(time: number) {\r\n        if (this.pauseElapsed) {\r\n            this.elapsed = time - this.pauseElapsed - this.startTime;\r\n        }\r\n        else {\r\n            this.elapsed = time - this.startTime;\r\n        }\r\n\r\n        if (this.elapsed < 0) {\r\n            this.elapsed = 0;\r\n        }\r\n\r\n        return this.elapsed;\r\n    }\r\n\r\n    protected abstract getNow();\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { TimeController } from \"./TimeController\";\r\nimport { root } from \"../../definition/Variable\";\r\n\r\nconst STARTING_FPS = 60,\r\n    GAMETIME_SCALE = 1000;\r\n\r\n@registerClass(\"DirectorTimeController\")\r\nexport class DirectorTimeController extends TimeController {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public gameTime: number = null;\r\n    public fps: number = null;\r\n    public isTimeChange: boolean = false;\r\n    public deltaTime: number = null;\r\n\r\n    private _lastTime: number = null;\r\n\r\n    public tick(time: number) {\r\n        this.deltaTime = this._lastTime !== null ? time - this._lastTime : time;\r\n        this._updateFps(this.deltaTime);\r\n        this.gameTime = time / GAMETIME_SCALE;\r\n\r\n        this._lastTime = time;\r\n    }\r\n\r\n    public start() {\r\n        super.start();\r\n\r\n        this.isTimeChange = true;\r\n        this.elapsed = 0;\r\n    }\r\n\r\n    public resume() {\r\n        super.resume();\r\n\r\n        this.isTimeChange = true;\r\n    }\r\n\r\n    protected getNow() {\r\n        return root.performance.now();\r\n    }\r\n\r\n    private _updateFps(deltaTime: number) {\r\n        if (this._lastTime === null) {\r\n            this.fps = STARTING_FPS;\r\n        }\r\n        else {\r\n            this.fps = 1000 / deltaTime;\r\n        }\r\n    }\r\n}","import { WebGLState } from \"../state/WebGLState\";\r\nimport { BasicState } from \"../state/BasicState\";\r\nimport { RenderCommand } from \"../command/RenderCommand\";\r\nimport { virtual } from \"../../definition/typescript/decorator/virtual\";\r\n\r\nexport abstract class Renderer {\r\n    private _webglState: WebGLState = null;\r\n    get webglState() {\r\n        return this._webglState ? this._webglState : BasicState.create();\r\n    }\r\n    set webglState(webglState: WebGLState) {\r\n        this._webglState = webglState;\r\n    }\r\n\r\n    // public skyboxCommand:QuadCommand = null;\r\n\r\n    public abstract addCommand(command: RenderCommand): void;\r\n    public abstract hasCommand(): boolean;\r\n    public abstract render(): void;\r\n    public abstract clear(): void;\r\n\r\n    @virtual\r\n    public init() {\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { ensureGetter, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../utils/Log\";\r\nimport { Vector3 } from \"../math/Vector3\";\r\nimport { Vector4 } from \"../math/Vector4\";\r\nimport { cache } from \"../definition/typescript/decorator/cache\";\r\n\r\ndeclare var Math: any;\r\n\r\n@registerClass(\"Color\")\r\nexport class Color {\r\n    public static create(colorVal?: string) {\r\n        var obj = new this();\r\n\r\n        obj.initWhenCreate(colorVal);\r\n\r\n        return obj;\r\n    }\r\n\r\n    set dirty(dirty: boolean) {\r\n        if (dirty) {\r\n            this._clearCache();\r\n        }\r\n    }\r\n\r\n    private _r: number = null;\r\n    @ensureGetter(function(r: number) {\r\n        assert(r >= 0, Log.info.FUNC_SHOULD(\"r\", `>= 0, but actual is ${r}`));\r\n    })\r\n    get r() {\r\n        return this._r;\r\n    }\r\n    set r(r: number) {\r\n        if (this._r !== r) {\r\n            this.dirty = true;\r\n\r\n            this._r = r;\r\n        }\r\n    }\r\n\r\n    private _g: number = null;\r\n    @ensureGetter(function(g: number) {\r\n        assert(g >= 0, Log.info.FUNC_SHOULD(\"g\", `>= 0, but actual is ${g}`));\r\n    })\r\n    get g() {\r\n        return this._g;\r\n    }\r\n    set g(g: number) {\r\n        if (this._g !== g) {\r\n            this.dirty = true;\r\n\r\n            this._g = g;\r\n        }\r\n    }\r\n\r\n    private _b: number = null;\r\n    @ensureGetter(function(b: number) {\r\n        assert(b >= 0, Log.info.FUNC_SHOULD(\"b\", `>= 0, but actual is ${b}`));\r\n    })\r\n    get b() {\r\n        return this._b;\r\n    }\r\n    set b(b: number) {\r\n        if (this._b !== b) {\r\n            this.dirty = true;\r\n\r\n            this._b = b;\r\n        }\r\n    }\r\n\r\n    private _a: number = null;\r\n    @ensureGetter(function(a: number) {\r\n        assert(a >= 0, Log.info.FUNC_SHOULD(\"a\", `>= 0, but actual is ${a}`));\r\n    })\r\n    get a() {\r\n        return this._a;\r\n    }\r\n    set a(a: number) {\r\n        if (this._a !== a) {\r\n            this.dirty = true;\r\n\r\n            this._a = a;\r\n        }\r\n    }\r\n\r\n    private _colorString: string = null;\r\n    private _colorVec3Cache: Vector3 = null;\r\n    private _colorVec4Cache: Vector4 = null;\r\n\r\n    public initWhenCreate(colorVal?: string) {\r\n        if (!colorVal) {\r\n            return;\r\n        }\r\n\r\n        this._colorString = colorVal;\r\n        this._setColor(colorVal);\r\n    }\r\n\r\n    @cache(function() {\r\n        return this._colorVec3Cache !== null;\r\n    }, function() {\r\n        return this._colorVec3Cache;\r\n    }, function(result) {\r\n        this._colorVec3Cache = result;\r\n    })\r\n    public toVector3() {\r\n        return Vector3.create(this.r, this.g, this.b);\r\n    }\r\n\r\n    @cache(function() {\r\n        return this._colorVec4Cache !== null;\r\n    }, function() {\r\n        return this._colorVec4Cache;\r\n    }, function(result) {\r\n        this._colorVec4Cache = result;\r\n    })\r\n    public toVector4() {\r\n        return Vector4.create(this.r, this.g, this.b, this.a);\r\n    }\r\n\r\n    public toString() {\r\n        return this._colorString;\r\n    }\r\n\r\n    public clone() {\r\n        return Color.create(this._colorString);\r\n    }\r\n\r\n    public isEqual(color: Color) {\r\n        return this.r === color.r && this.g === color.g && this.b === color.b && this.a === color.a;\r\n    }\r\n\r\n    private _setColor(colorVal: string) {\r\n        const REGEX_RGBA = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*([^\\)]+)\\)$/i,\r\n            REGEX_RGBA_2 = /^rgba\\((\\d+\\.\\d+),\\s*(\\d+\\.\\d+),\\s*(\\d+\\.\\d+),\\s*([^\\)]+)\\)$/i,\r\n            REGEX_RGB = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/i,\r\n            REGEX_RGB_2 = /^rgb\\((\\d+\\.\\d+),\\s*(\\d+\\.\\d+),\\s*(\\d+\\.\\d+)\\)$/i,\r\n            REGEX_NUM = /^\\#([0-9a-f]{6})$/i;\r\n        var color = null;\r\n\r\n        // rgba(255,0,0,0)\r\n\r\n        if (REGEX_RGBA.test(colorVal)) {\r\n            color = REGEX_RGBA.exec(colorVal);\r\n\r\n            this.r = this._getColorValue(color, 1);\r\n            this.g = this._getColorValue(color, 2);\r\n            this.b = this._getColorValue(color, 3);\r\n            this.a = Number(color[4]);\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        // rgba(0.1,0.0,0.3,0.2)\r\n\r\n        if (REGEX_RGBA_2.test(colorVal)) {\r\n            color = REGEX_RGBA_2.exec(colorVal);\r\n\r\n            this.r = parseFloat(color[1]);\r\n            this.g = parseFloat(color[2]);\r\n            this.b = parseFloat(color[3]);\r\n            this.a = Number(color[4]);\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        // rgb(255,0,0)\r\n\r\n        if (REGEX_RGB.test(colorVal)) {\r\n            color = REGEX_RGB.exec(colorVal);\r\n\r\n            this.r = this._getColorValue(color, 1);\r\n            this.g = this._getColorValue(color, 2);\r\n            this.b = this._getColorValue(color, 3);\r\n            this.a = 1;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        /*!\r\n         it will cause ambiguity: rgb(x,x,x)\r\n         so the format should be:\r\n         rgb(x.x,x.x,x.x)\r\n         */\r\n        if (REGEX_RGB_2.test(colorVal)) {\r\n            color = REGEX_RGB_2.exec(colorVal);\r\n\r\n            this.r = parseFloat(color[1]);\r\n            this.g = parseFloat(color[2]);\r\n            this.b = parseFloat(color[3]);\r\n            this.a = 1;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n        // #ffffff\r\n\r\n        if (REGEX_NUM.test(colorVal)) {\r\n            color = REGEX_NUM.exec(colorVal);\r\n\r\n            this._setHex(parseInt(color[1], 16));\r\n\r\n            return this;\r\n\r\n        }\r\n    }\r\n\r\n    private _getColorValue(color, index, num = 255) {\r\n        return Math.min(num, parseInt(color[index], 10)) / num;\r\n    }\r\n\r\n    private _setHex(hex) {\r\n        hex = Math.floor(hex);\r\n\r\n        this.r = (hex >> 16 & 255) / 255;\r\n        this.g = (hex >> 8 & 255) / 255;\r\n        this.b = (hex & 255) / 255;\r\n        this.a = 1;\r\n\r\n        return this;\r\n    }\r\n\r\n    private _clearCache() {\r\n        this._colorVec3Cache = null;\r\n        this._colorVec4Cache = null;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Renderer } from \"./Renderer\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { RenderCommand } from \"../command/RenderCommand\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport { ensure, assert, requireCheck } from \"../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { DeviceManager, ESide } from \"../../device/DeviceManager\";\r\nimport { WebGLState } from \"../state/WebGLState\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\n\r\n/*!\r\nstart from 0, so its max is 32\r\n */\r\n// const RENDER_GROUP_MAX = 31,\r\n//     RENDER_PRIORITY_MAX = 31,\r\n//     /*!\r\n//     shader id start from 1, so its max is 1024\r\n//      */\r\n//     SHADER_ID_MAX = 1024,\r\n//     TEXTURE_ID_MAX = 1024,\r\n//     BUFFER_ID_MAX = 1024,\r\n//\r\n//     TOTAL_BIT = 30,\r\n//     RENDER_GROUP_MOVE_LEFT_BIT = TOTAL_BIT - 5,\r\n//     RENDER_PRIORITY_MOVE_LEFT_BIT = TOTAL_BIT - 5 - 5,\r\n//     SHADER_ID_MOVE_LEFT_BIT = TOTAL_BIT - 5 - 5 - 10;\r\n\r\n@registerClass(\"WebGLRenderer\")\r\nexport class WebGLRenderer extends Renderer {\r\n    public static create(): WebGLRenderer {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _commandQueue: Collection<RenderCommand> = Collection.create<RenderCommand>();\r\n\r\n    private _clearOptions: any = {\r\n        color: Color.create(\"#000000\")\r\n    };\r\n\r\n    @ensure(function() {\r\n        assert(!this._commandQueue.hasRepeatItems(), Log.info.FUNC_SHOULD_NOT(\"has duplicate render command\"));\r\n    })\r\n    public addCommand(command: RenderCommand) {\r\n        this._commandQueue.addChild(command);\r\n\r\n        command.init();\r\n    }\r\n\r\n    public hasCommand() {\r\n        // return this._commandQueue.getCount() > 0 || !!this.skyboxCommand;\r\n        return this._commandQueue.getCount() > 0;\r\n    }\r\n\r\n    public clear() {\r\n        DeviceManager.getInstance().clear(this._clearOptions);\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        assert(!!this.webglState, Log.info.FUNC_MUST_DEFINE(\"webglState\"));\r\n    })\r\n    public render() {\r\n        var deviceManager: DeviceManager = DeviceManager.getInstance(),\r\n            webglState: WebGLState = this.webglState;\r\n        // transparentCommandArr:Array<RenderCommand> = [],\r\n        // opaqueQuadCommandArr:Array<QuadCommand> = [];\r\n\r\n        this._commandQueue.forEach((command: RenderCommand) => {\r\n            command.webglState = webglState;\r\n\r\n            /*!\r\n            //todo optimize: if all commands->blendType === EBlendType.ADDITIVE, sort the transparentCommandArr as the opaque command arr(but it's not necessarily because many rendering effects do not fall into this category?)\r\n             However, if the blending is additive-only, then this is not needed. In the case of our game Oort Online, the “effects” pass only contains geometries rendered with additive blending, which is correct no matter the order; this means that we can employ more efficient sorting for this group.\r\n             */\r\n            // if(command.blend){\r\n            //     //todo optimize: sort command here\r\n            //     transparentCommandArr.push(command);\r\n            // }\r\n            // else if(command instanceof QuadCommand){\r\n            //     this._buildOpaqueCommandSortId(command);\r\n            //\r\n            //     opaqueQuadCommandArr.push(command);\r\n            // }\r\n            // else{\r\n            command.execute();\r\n            // }\r\n        }, this);\r\n\r\n        // if(opaqueQuadCommandArr.length > 0){\r\n        //     this._sortOpaqueQuadCommand(opaqueQuadCommandArr);\r\n        //\r\n        //     for(let command of opaqueQuadCommandArr){\r\n        //         command.execute();\r\n        //     }\r\n        // }\r\n        //\r\n        // if(transparentCommandArr.length > 0){\r\n        //     deviceManager.depthWrite = false;\r\n        //\r\n        //     this._renderSortedTransparentCommands(<Array<QuadCommand>>transparentCommandArr);\r\n        //\r\n        //     deviceManager.depthWrite = true;\r\n        // }\r\n\r\n        // if(this.skyboxCommand){\r\n        //     deviceManager.depthFunc = EDepthFunction.LEQUAL;\r\n        //     this.skyboxCommand.webglState = webglState;\r\n        //     this.skyboxCommand.execute();\r\n        //     deviceManager.depthFunc = EDepthFunction.LESS;\r\n        // }\r\n\r\n        this._clearCommand();\r\n        this.webglState = null;\r\n    }\r\n\r\n    public init() {\r\n        var deviceManager = DeviceManager.getInstance();\r\n\r\n        deviceManager.depthTest = true;\r\n        deviceManager.blend = false;\r\n        deviceManager.setColorWrite(true, true, true, true);\r\n        deviceManager.side = ESide.FRONT;\r\n        deviceManager.depthWrite = true;\r\n    }\r\n\r\n    public setClearColor(color: Color) {\r\n        this._setClearOptions({\r\n            color: color\r\n        });\r\n    }\r\n\r\n    // @requireCheck(function(transparentCommandArr:Array<RenderCommand>){\r\n    //     assert(!!Director.getInstance().scene.currentCamera, Log.info.FUNC_NOT_EXIST(\"current camera\"));\r\n    //\r\n    //     for (let command of transparentCommandArr){\r\n    //         assert(command instanceof QuadCommand, Log.info.FUNC_MUST_BE(\"transparent command\", \"QuadCommand\"));\r\n    //     }\r\n    // })\r\n    // private _renderSortedTransparentCommands(transparentCommandArr:Array<QuadCommand>) {\r\n    //     var self = this;\r\n    //\r\n    //     for (let command of SortUtils.insertSort(transparentCommandArr, (a:QuadCommand, b:QuadCommand) => {\r\n    //         return self._getObjectZDistanceInCameraCoordinate(a) < self._getObjectZDistanceInCameraCoordinate(b);\r\n    //         })){\r\n    //         command.execute();\r\n    //     }\r\n    // }\r\n    //\r\n    // private _getObjectZDistanceInCameraCoordinate(cmd:QuadCommand){\r\n    //     return cmd.mMatrix.applyMatrix(cmd.vMatrix, true).getTranslation().z;\r\n    // }\r\n\r\n    private _clearCommand() {\r\n        this._commandQueue.forEach((command: RenderCommand) => {\r\n            command.dispose();\r\n        });\r\n\r\n        this._commandQueue.removeAllChildren();\r\n\r\n        // if(this.skyboxCommand){\r\n        //     this.skyboxCommand.dispose();\r\n        //     this.skyboxCommand = null;\r\n        // }\r\n    }\r\n\r\n    private _setClearOptions(clearOptions: any) {\r\n        ExtendUtils.extend(this._clearOptions, clearOptions);\r\n    }\r\n}","import \"wonder-frp/dist/es2015/stream/ConcatStream\";\r\nimport \"wonder-frp/dist/es2015/stream/IgnoreElementsStream\";\r\nimport \"wonder-frp/dist/es2015/extend/root\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../definition/typescript/decorator/singleton\";\r\nimport { DeviceManager } from \"../device/DeviceManager\";\r\nimport { SceneDispatcher } from \"./entityObject/scene/SceneDispatcher\";\r\nimport { Renderer } from \"../renderer/renderer/Renderer\";\r\nimport { IDisposable } from \"wonder-frp/dist/es2015/Disposable/IDisposable\";\r\nimport { DirectorTimeController } from \"../utils/time/DirectorTimeController\";\r\nimport { WebGLRenderer } from \"../renderer/renderer/WebGLRenderer\";\r\nimport { callFunc, intervalRequest } from \"wonder-frp/dist/es2015/global/Operator\";\r\nimport { GameObjectScene } from \"./entityObject/scene/gameObjectScene/GameObjectScene\";\r\nimport { BasicState } from \"../renderer/state/BasicState\";\r\nimport { EventManager } from \"../event/EventManager\";\r\nimport { CustomEvent } from \"../event/object/CustomEvent\";\r\nimport { EEngineEvent } from \"../event/EEngineEvent\";\r\n\r\nenum EGameState {\r\n    NORMAL,\r\n    STOP,\r\n    PAUSE\r\n}\r\n\r\n//todo invoke scene.onExit\r\n\r\n@singleton(true)\r\n@registerClass(\"Director\")\r\nexport class Director {\r\n    public static getInstance(): any { };\r\n\r\n    private constructor() { }\r\n\r\n    get gameTime() {\r\n        return this._timeController.gameTime;\r\n    }\r\n\r\n    get fps() {\r\n        return this._timeController.fps;\r\n    }\r\n\r\n    get isNormal() {\r\n        return this._gameState === EGameState.NORMAL;\r\n    }\r\n\r\n    get isStop() {\r\n        return this._gameState === EGameState.STOP;\r\n    }\r\n\r\n    get isPause() {\r\n        return this._gameState === EGameState.PAUSE;\r\n    }\r\n\r\n    get isTimeChange() {\r\n        return this._timeController.isTimeChange;\r\n    }\r\n\r\n    get elapsed() {\r\n        return this._timeController.elapsed;\r\n    }\r\n\r\n    get view() {\r\n        return DeviceManager.getInstance().view;\r\n    }\r\n\r\n    public scene: SceneDispatcher = null;\r\n    public renderer: Renderer = null;\r\n\r\n    private _gameLoop: IDisposable = null;\r\n    private _gameState: EGameState = EGameState.NORMAL;\r\n    private _timeController: DirectorTimeController = DirectorTimeController.create();\r\n\r\n\r\n    public initWhenCreate() {\r\n        this.scene = SceneDispatcher.create();\r\n        this.renderer = WebGLRenderer.create();\r\n    }\r\n\r\n    public start() {\r\n        this._gameState = EGameState.NORMAL;\r\n\r\n        this._startLoop();\r\n    }\r\n\r\n    public stop() {\r\n        this._gameLoop && this._gameLoop.dispose();\r\n        this._gameState = EGameState.STOP;\r\n        this._timeController.stop();\r\n    }\r\n\r\n    public pause() {\r\n        if (this._gameState === EGameState.PAUSE) {\r\n            return;\r\n        }\r\n\r\n        this._gameState = EGameState.PAUSE;\r\n        this._timeController.pause();\r\n    }\r\n\r\n    public resume() {\r\n        this._gameState = EGameState.NORMAL;\r\n        this._timeController.resume();\r\n    }\r\n\r\n    //todo add dispose\r\n\r\n    public getDeltaTime() {\r\n        return this._timeController.deltaTime;\r\n    }\r\n\r\n    private _startLoop() {\r\n        var self = this;\r\n\r\n        // console.log(IgnoreElementsStream, ConcatStream);\r\n\r\n        this._gameLoop = this._buildInitStream()\r\n            .ignoreElements()\r\n            .concat(this._buildLoopStream())\r\n            .subscribe((time) => {\r\n                //todo need polyfill\r\n                /*!\r\n                 I assume that the time is DOMHighResTimeStamp, but it may be DOMTimeStamp in some browser!\r\n                 so it need polyfill\r\n                 */\r\n                self._loopBody(time);\r\n                // }, (e) => {\r\n                //     console.error(e);\r\n                //     throw e;\r\n                // });\r\n            });\r\n    }\r\n\r\n    private _buildInitStream() {\r\n        return callFunc(() => {\r\n            this._init();\r\n        }, this);\r\n    }\r\n\r\n    private _init() {\r\n        this._initGameObjectScene();\r\n    }\r\n\r\n    private _initGameObjectScene() {\r\n        var gameObjectScene: GameObjectScene = this.scene.gameObjectScene;\r\n\r\n        gameObjectScene.init();\r\n\r\n        //todo not put here?\r\n        this.renderer.init();\r\n\r\n        this._timeController.start();\r\n    }\r\n\r\n    private _buildLoopStream() {\r\n        return intervalRequest();\r\n    }\r\n\r\n    private _loopBody(time) {\r\n        var elapsed: number = null;\r\n\r\n        if (this._gameState === EGameState.PAUSE || this._gameState === EGameState.STOP) {\r\n            return false;\r\n        }\r\n\r\n        elapsed = this._timeController.computeElapseTime(time);\r\n\r\n        this._run(elapsed);\r\n\r\n        return true;\r\n    }\r\n\r\n    private _run(elapsed: number) {\r\n        this._timeController.tick(elapsed);\r\n\r\n        EventManager.trigger(CustomEvent.create(<any>EEngineEvent.STARTLOOP));\r\n\r\n        this._update(elapsed);\r\n\r\n        this._render();\r\n\r\n        EventManager.trigger(CustomEvent.create(<any>EEngineEvent.ENDLOOP));\r\n    }\r\n\r\n    private _update(elapsed: number) {\r\n        this.scene.gameObjectScene.update(elapsed);\r\n    }\r\n\r\n    private _render() {\r\n        this.scene.gameObjectScene.render(this.renderer);\r\n\r\n        this.renderer.clear();\r\n\r\n        if (this.renderer.hasCommand()) {\r\n            this.renderer.webglState = BasicState.create();\r\n            this.renderer.render();\r\n        }\r\n    }\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { Program } from \"../../../../renderer/program/Program\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\n\r\n@registerClass(\"ProgramTable\")\r\nexport class ProgramTable {\r\n    public static lastUsedProgram: Program = null;\r\n\r\n    private static _table: Hash<Program> = Hash.create<Program>();\r\n\r\n    public static hasProgram(key: string) {\r\n        return this._table.hasChild(key);\r\n    }\r\n\r\n    public static addProgram(key: string, program: Program) {\r\n        this._table.addChild(key, program);\r\n    }\r\n\r\n    public static getProgram(key: string) {\r\n        return this._table.getChild(key);\r\n    }\r\n\r\n    public static dispose() {\r\n        this._table.forEach((program: Program) => {\r\n            program.dispose();\r\n        });\r\n\r\n        this.lastUsedProgram = null;\r\n    }\r\n\r\n    public static clearAll() {\r\n        this._table.removeAllChildren();\r\n\r\n        this.lastUsedProgram = null;\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { DebugConfig } from \"../config/DebugConfig\";\r\nimport { EScreenSize } from \"../device/EScreenSize\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\nimport { DeviceManager } from \"../device/DeviceManager\";\r\nimport { GPUDetector } from \"../device/GPUDetector\";\r\nimport { CompileConfig } from \"../config/CompileConfig\";\r\nimport { MainData, ContextConfigData } from \"./data/MainData\";\r\nimport { RectRegion } from \"../structure/RectRegion\";\r\n\r\n@registerClass(\"Main\")\r\nexport class Main {\r\n    private static _canvasId: string = null;\r\n    private static _contextConfig: ContextConfigData = null;\r\n    private static _useDevicePixelRatio: boolean = null;\r\n\r\n    public static setConfig({\r\n            canvasId = null,\r\n        isTest = DebugConfig.isTest,\r\n        screenSize = EScreenSize.FULL,\r\n        useDevicePixelRatio = false,\r\n        contextConfig = {\r\n            options: {\r\n                alpha: true,\r\n                depth: true,\r\n                stencil: false,\r\n                antialias: true,\r\n                premultipliedAlpha: true,\r\n                preserveDrawingBuffer: false\r\n            }\r\n        }\r\n        }) {\r\n        MainData.screenSize = <EScreenSize & RectRegion>screenSize;\r\n        this._canvasId = canvasId;\r\n        this._useDevicePixelRatio = useDevicePixelRatio;\r\n        this._contextConfig = {\r\n            options: ExtendUtils.extend({\r\n                alpha: true,\r\n                depth: true,\r\n                stencil: false,\r\n                antialias: true,\r\n                premultipliedAlpha: true,\r\n                preserveDrawingBuffer: false\r\n            }, contextConfig.options)\r\n        };\r\n\r\n        this._setIsTest(isTest);\r\n\r\n        return this;\r\n    }\r\n\r\n    public static init() {\r\n        DeviceManager.getInstance().createGL(this._canvasId, this._contextConfig, this._useDevicePixelRatio);\r\n        DeviceManager.getInstance().setScreen();\r\n        GPUDetector.getInstance().detect();\r\n\r\n        return this;\r\n    }\r\n\r\n    private static _setIsTest(isTestFromDebugConfig: boolean) {\r\n        if (CompileConfig.closeContractTest) {\r\n            MainData.isTest = false;\r\n        }\r\n        else {\r\n            MainData.isTest = isTestFromDebugConfig;\r\n        }\r\n    }\r\n}\r\n","import { DomEvent } from \"./DomEvent\";\r\nimport { IPointEventData } from \"../interface/IEventData\";\r\nimport { Point } from \"../../structure/Point\";\r\nimport { EEventType } from \"./EEventType\";\r\nimport { MouseEvent } from \"./MouseEvent\";\r\nimport { TouchEvent } from \"./TouchEvent\";\r\n\r\nexport abstract class PointEvent extends DomEvent {\r\n    public event: IPointEventData;\r\n\r\n    //Get cursor location(related to document)\r\n    public abstract location: Point;\r\n    //Returns the current cursor location in screen coordinates(related to canvas)\r\n    public abstract locationInView: Point;\r\n    public abstract button: number | null;\r\n    public readonly abstract wheel: number | null;\r\n    public readonly abstract movementDelta: Point;\r\n\r\n    get lastX() {\r\n        return this.eventObj.lastX;\r\n    }\r\n    set lastX(x: number) {\r\n        this.eventObj.lastX = x;\r\n    }\r\n\r\n    get lastY() {\r\n        return this.eventObj.lastY;\r\n    }\r\n    set lastY(y: number) {\r\n        this.eventObj.lastY = y;\r\n    }\r\n\r\n    public readonly type: EEventType = EEventType.POINT;\r\n\r\n    public eventObj: MouseEvent | TouchEvent = null;\r\n\r\n    public abstract getDataFromEventObj(eventObj: TouchEvent | MouseEvent): void;\r\n\r\n    protected cloneHelper(eventObj: PointEvent) {\r\n        eventObj.event = this.event;\r\n\r\n        return <PointEvent>this.copyMember(eventObj, this, [\"eventObj\", \"target\", \"currentTarget\", \"isStopPropagation\", \"phase\", \"lastX\", \"lastY\"]);\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { PointEvent } from \"./PointEvent\";\r\nimport { EEventName } from \"./EventNameHandler\";\r\nimport { MouseEvent } from \"./MouseEvent\";\r\nimport { Point } from \"../../structure/Point\";\r\nimport { IPointEventData } from \"../interface/IEventData\";\r\n\r\n@registerClass(\"MousePointEvent\")\r\nexport class MousePointEvent extends PointEvent {\r\n    public static create(eventName: EEventName) {\r\n        var obj = new this(null, eventName);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public eventObj: MouseEvent;\r\n\r\n    get location(): Point {\r\n        return this.eventObj.location;\r\n    }\r\n    set location(point: Point) {\r\n        this.eventObj.location = point;\r\n    }\r\n\r\n    get locationInView(): Point {\r\n        return this.eventObj.locationInView;\r\n    }\r\n    set locationInView(locationInView: Point) {\r\n        this.eventObj.locationInView = locationInView;\r\n    }\r\n\r\n    get button() {\r\n        return this.eventObj.button;\r\n    }\r\n    set button(button: number) {\r\n        this.eventObj.button = button;\r\n    }\r\n\r\n    get wheel() {\r\n        return this.eventObj.wheel;\r\n    }\r\n\r\n    get movementDelta() {\r\n        return this.eventObj.movementDelta;\r\n    }\r\n\r\n    public getDataFromEventObj(e: MouseEvent) {\r\n        this.eventObj = e;\r\n\r\n        this.event = <IPointEventData>e.event;\r\n    }\r\n\r\n    public clone() {\r\n        return this.cloneHelper(MousePointEvent.create(<EEventName>this.name));\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { PointEvent } from \"./PointEvent\";\r\nimport { EEventName } from \"./EventNameHandler\";\r\nimport { TouchEvent } from \"./TouchEvent\";\r\nimport { Point } from \"../../structure/Point\";\r\nimport { ITouchData, IPointEventData } from \"../interface/IEventData\";\r\n\r\n@registerClass(\"TouchPointEvent\")\r\nexport class TouchPointEvent extends PointEvent {\r\n    public static create(eventName: EEventName) {\r\n        var obj = new this(null, eventName);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public eventObj: TouchEvent;\r\n\r\n    get location(): Point {\r\n        return this.eventObj.location;\r\n    }\r\n    set location(point: Point) {\r\n        this.eventObj.location = point;\r\n    }\r\n\r\n    get locationInView(): Point {\r\n        return this.eventObj.locationInView;\r\n    }\r\n    set locationInView(locationInView: Point) {\r\n        this.eventObj.locationInView = locationInView;\r\n    }\r\n\r\n    get wheel() {\r\n        return null;\r\n    }\r\n\r\n    get movementDelta() {\r\n        return this.eventObj.movementDelta;\r\n    }\r\n\r\n    public button: number = null;\r\n\r\n    public getDataFromEventObj(e: TouchEvent) {\r\n        var touchData: ITouchData = e.touchData;\r\n\r\n        this.eventObj = e;\r\n\r\n        this.event = <IPointEventData>{\r\n            clientX: touchData.clientX,\r\n            clientY: touchData.clientY,\r\n            pageX: touchData.pageX,\r\n            pageY: touchData.pageY,\r\n\r\n            target: touchData.target,\r\n            currentTarget: e.currentTarget\r\n        }\r\n    }\r\n\r\n    public clone() {\r\n        return this.cloneHelper(TouchPointEvent.create(<EEventName>this.name));\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Material } from \"./Material\";\r\nimport { ensureGetter, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { Shader } from \"../renderer/shader/shader/Shader\";\r\nimport { Log } from \"../utils/Log\";\r\nimport { SceneDispatcher } from \"../core/entityObject/scene/SceneDispatcher\";\r\nimport { Director } from \"../core/Director\";\r\nimport { QuadCommand } from \"../renderer/command/QuadCommand\";\r\n\r\n@registerClass(\"ShaderManager\")\r\nexport class ShaderManager {\r\n    public static create(material: Material) {\r\n        var obj = new this(material);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(material: Material) {\r\n        this._material = material;\r\n    }\r\n\r\n    //private _shader:Shader = null;\r\n    @ensureGetter(function(shader: Shader) {\r\n        assert(!!shader, Log.info.FUNC_NOT_EXIST(\"shader\"));\r\n    })\r\n    get shader() {\r\n        var scene: SceneDispatcher = Director.getInstance().scene;\r\n\r\n        // return scene.isUseShader ? this._otherShaderMap.getChild(<any>scene.currentShaderType) : this._mainShader;\r\n        return this._mainShader;\r\n    }\r\n\r\n    // get mapManager(){\r\n    //     return this.shader.mapManager;\r\n    // }\r\n\r\n    private _material: Material = null;\r\n    //private _sceneShader:Shader = null;\r\n    //private _unUseSceneShaderSubscription:wdFrp.IDisposable = null;\r\n    // private _otherShaderMap:wdCb.Hash<Shader> = wdCb.Hash.create<Shader>();\r\n    private _mainShader: Shader = null;\r\n\r\n    public setShader(shader: Shader) {\r\n        this._mainShader = shader;\r\n\r\n        // this._mainShader.mapManager.material = this._material;\r\n    }\r\n\r\n    public init() {\r\n        var material = this._material;\r\n\r\n        // this._otherShaderMap.forEach((shader:Shader) => {\r\n        //     shader.init(material);\r\n        // });\r\n\r\n        this._mainShader.init(material);\r\n    }\r\n\r\n    public dispose() {\r\n        // this._otherShaderMap.forEach((shader:Shader) => {\r\n        //     shader.dispose();\r\n        // });\r\n\r\n        this._mainShader.dispose();\r\n    }\r\n\r\n    public update(quadCmd: QuadCommand) {\r\n        this.shader.update(quadCmd, this._material);\r\n    }\r\n\r\n    // public addShader(shaderKey:EShaderTypeOfScene, shader:Shader){\r\n    //     this._otherShaderMap.addChild(<any>shaderKey, shader);\r\n    // }\r\n\r\n    // public hasShader(shaderKey:EShaderTypeOfScene){\r\n    //     return this._otherShaderMap.hasChild(<any>shaderKey);\r\n    // }\r\n\r\n    // public getShader(shaderKey:EShaderTypeOfScene){\r\n    //     return this._otherShaderMap.getChild(<any>shaderKey);\r\n    // }\r\n}","import { Color } from \"../structure/Color\";\r\nimport { cloneAttributeAsCloneable, cloneAttributeAsBasicType, CloneUtils } from \"../definition/typescript/decorator/clone\";\r\nimport { Geometry } from \"../component/geometry/Geometry\";\r\nimport { ShaderManager } from \"./ShaderManager\";\r\nimport { QuadCommand } from \"../renderer/command/QuadCommand\";\r\nimport { Shader } from \"../renderer/shader/shader/Shader\";\r\nimport { Program } from \"../renderer/program/Program\";\r\n\r\nexport abstract class Material {\r\n    get program() {\r\n        return this.shader.program;\r\n    }\r\n\r\n    // private _blendType:EBlendType = null;\r\n    // @cloneAttributeAsBasicType({\r\n    //     order:1\r\n    // })\r\n    // get blendType(){\r\n    //     return this._blendType;\r\n    // }\r\n    // set blendType(blendType:EBlendType){\r\n    //     if(blendType === null){\r\n    //         return;\r\n    //     }\r\n    //\r\n    //     switch (blendType) {\r\n    //         case EBlendType.NONE:\r\n    //             this.blend = false;\r\n    //             this.blendSrc = EBlendFunc.ONE;\r\n    //             this.blendDst = EBlendFunc.ZERO;\r\n    //             this.blendEquation = EBlendEquation.ADD;\r\n    //             break;\r\n    //         case EBlendType.NORMAL:\r\n    //             this.blend = true;\r\n    //             this.blendSrc = EBlendFunc.SRC_ALPHA;\r\n    //             this.blendDst = EBlendFunc.ONE_MINUS_SRC_ALPHA;\r\n    //             this.blendEquation = EBlendEquation.ADD;\r\n    //             break;\r\n    //         case EBlendType.PREMULTIPLIED:\r\n    //             this.blend = true;\r\n    //             this.blendSrc = EBlendFunc.ONE;\r\n    //             this.blendDst = EBlendFunc.ONE_MINUS_SRC_ALPHA;\r\n    //             this.blendEquation = EBlendEquation.ADD;\r\n    //             break;\r\n    //         case EBlendType.ADDITIVE:\r\n    //             this.blend = true;\r\n    //             this.blendSrc = EBlendFunc.ONE;\r\n    //             this.blendDst = EBlendFunc.ONE;\r\n    //             this.blendEquation = EBlendEquation.ADD;\r\n    //             break;\r\n    //         case EBlendType.ADDITIVEALPHA:\r\n    //             this.blend = true;\r\n    //             this.blendSrc = EBlendFunc.SRC_ALPHA;\r\n    //             this.blendDst = EBlendFunc.ONE;\r\n    //             this.blendEquation = EBlendEquation.ADD;\r\n    //             break;\r\n    //         case EBlendType.MULTIPLICATIVE:\r\n    //             this.blend = true;\r\n    //             this.blendSrc = EBlendFunc.DST_COLOR;\r\n    //             this.blendDst = EBlendFunc.ZERO;\r\n    //             this.blendEquation = EBlendEquation.ADD;\r\n    //             break;\r\n    //         default:\r\n    //             Log.error(true, Log.info.FUNC_INVALID(\"blendType\"));\r\n    //             break;\r\n    //     }\r\n    //\r\n    //     this._blendType = blendType;\r\n    // }\r\n\r\n    // @cloneAttributeAsCloneable()\r\n    // get envMap(){\r\n    //     return this.mapManager.getEnvMap();\r\n    // }\r\n    // set envMap(envMap:CubemapTexture){\r\n    //     this.mapManager.setEnvMap(envMap);\r\n    // }\r\n\r\n    // private _blendSrc:EBlendFunc= EBlendFunc.ONE;\r\n    // @cloneAttributeAsBasicType()\r\n    // get blendSrc(){\r\n    //     return this._blendSrc;\r\n    // }\r\n    // set blendSrc(blendSrc:EBlendFunc){\r\n    //     if(this._blendSrc === blendSrc){\r\n    //         return;\r\n    //     }\r\n    //\r\n    //     this._blendSrc = blendSrc;\r\n    //     this.blendFuncSeparate = null;\r\n    // }\r\n    //\r\n    // private _blendDst:EBlendFunc= EBlendFunc.ZERO;\r\n    // @cloneAttributeAsBasicType()\r\n    // get blendDst(){\r\n    //     return this._blendDst;\r\n    // }\r\n    // set blendDst(blendDst:EBlendFunc){\r\n    //     if(this._blendDst === blendDst){\r\n    //         return;\r\n    //     }\r\n    //\r\n    //     this._blendDst = blendDst;\r\n    //     this.blendFuncSeparate = null;\r\n    // }\r\n    //\r\n    // private _blendEquation:EBlendEquation = EBlendEquation.ADD;\r\n    // @cloneAttributeAsBasicType()\r\n    // get blendEquation(){\r\n    //     return this._blendEquation;\r\n    // }\r\n    // set blendEquation(blendEquation:EBlendEquation){\r\n    //     if(this._blendEquation === blendEquation){\r\n    //         return;\r\n    //     }\r\n    //\r\n    //     this._blendEquation = blendEquation;\r\n    //     this.blendEquationSeparate = null;\r\n    // }\r\n\r\n    // private _alphaToCoverage:boolean = false;\r\n    // @cloneAttributeAsBasicType()\r\n    // @ensureGetter(function(alphaToCoverage:boolean){\r\n    //     it(\"if enable alphaToCoverage, multiSample should be enabled\", () => {\r\n    //         if(alphaToCoverage){\r\n    //             chai.expect(DeviceManager.getInstance().contextConfig.options.antialias).true;\r\n    //         }\r\n    //     });\r\n    // })\r\n    // get alphaToCoverage(){\r\n    //     return this._alphaToCoverage;\r\n    // }\r\n    // set alphaToCoverage(alphaToCoverage:boolean){\r\n    //     this._alphaToCoverage = alphaToCoverage;\r\n    // }\r\n\r\n    private _color: Color = Color.create(\"#ffffff\");\r\n    @cloneAttributeAsCloneable()\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(color: Color) {\r\n        if (this._color.isEqual(color)) {\r\n            return;\r\n        }\r\n\r\n        this._color = color;\r\n    }\r\n\r\n    // get mapManager(){\r\n    //     return this._shaderManager.mapManager;\r\n    // }\r\n\r\n    get shader() {\r\n        return this._shaderManager.shader;\r\n    }\r\n\r\n    // @cloneAttributeAsBasicType()\r\n    // public redWrite:boolean = true;\r\n    // @cloneAttributeAsBasicType()\r\n    // public greenWrite:boolean = true;\r\n    // @cloneAttributeAsBasicType()\r\n    // public blueWrite:boolean = true;\r\n    // @cloneAttributeAsBasicType()\r\n    // public alphaWrite:boolean = true;\r\n    // @cloneAttributeAsBasicType()\r\n    // public polygonOffsetMode:EPolygonOffsetMode = EPolygonOffsetMode.NONE;\r\n    // @cloneAttributeAsBasicType()\r\n    // public side:ESide = ESide.FRONT;\r\n    // @cloneAttributeAsBasicType()\r\n    // public blend:boolean = false;\r\n    // @cloneAttributeAsBasicType({\r\n    //     order:-1\r\n    // })\r\n    // public blendFuncSeparate:Array<EBlendFunc> = null;\r\n    // @cloneAttributeAsBasicType()\r\n    // public blendEquationSeparate:Array<EBlendEquation> = [EBlendEquation.ADD, EBlendEquation.ADD];\r\n    @cloneAttributeAsBasicType()\r\n    public geometry: Geometry = null;\r\n\r\n    private _shaderManager: ShaderManager = ShaderManager.create(this);\r\n\r\n    // public abstract getTextureForRenderSort():Texture;\r\n\r\n    public clone() {\r\n        return CloneUtils.clone(this);\r\n    }\r\n\r\n    public initWhenCreate() {\r\n        this._shaderManager.setShader(this.createShader());\r\n    }\r\n\r\n    public init() {\r\n        this._shaderManager.init();\r\n    }\r\n\r\n    public dispose() {\r\n        this._shaderManager.dispose();\r\n    }\r\n\r\n    public updateShader(quadCmd: QuadCommand) {\r\n        this._shaderManager.update(quadCmd);\r\n    }\r\n\r\n    // public addShader(shaderKey:EShaderTypeOfScene, shader:Shader){\r\n    //     this._shaderManager.addShader(shaderKey, shader);\r\n    // }\r\n    //\r\n    // public hasShader(shaderKey:EShaderTypeOfScene){\r\n    //     return this._shaderManager.hasShader(shaderKey);\r\n    // }\r\n\r\n    // public getShader(shaderKey:EShaderTypeOfScene){\r\n    //     return this._shaderManager.getShader(shaderKey);\r\n    // }\r\n\r\n    // public hasMap(map:Texture){\r\n    //     return this.mapManager.hasMap(map);\r\n    // }\r\n\r\n    protected abstract createShader(): Shader;\r\n}","import { JudgeUtils } from \"./JudgeUtils\";\r\n\r\nexport class ArrayUtils {\r\n    public static removeRepeatItems(arr: Array<any>, isEqual: (a: any, b: any) => boolean = (a, b) => {\r\n        return a === b;\r\n    }) {\r\n        var resultArr = [],\r\n            self = this;\r\n\r\n        arr.forEach(function(ele) {\r\n            if (self.contain(resultArr, function(val) {\r\n                return isEqual(val, ele);\r\n            })) {\r\n                return;\r\n            }\r\n\r\n            resultArr.push(ele);\r\n        });\r\n\r\n        return resultArr;\r\n    }\r\n\r\n    public static contain(arr: Array<any>, ele: any) {\r\n        if (JudgeUtils.isFunction(ele)) {\r\n            let func: Function = ele;\r\n\r\n            for (let i = 0, len = arr.length; i < len; i++) {\r\n                let value = arr[i];\r\n\r\n                if (!!func.call(null, value, i)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0, len = arr.length; i < len; i++) {\r\n                let value = arr[i];\r\n\r\n                if (ele === value || (value.contain && value.contain(ele))) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { ArrayUtils as ArrayUtils$ } from \"wonder-commonlib/dist/es2015/utils/ArrayUtils\";\r\n\r\n@registerClass(\"ArrayUtils\")\r\nexport class ArrayUtils extends ArrayUtils$ {\r\n    public static hasRepeatItems(arr: Array<any>) {\r\n        var noRepeatArr = [],\r\n            hasRepeat: boolean = false;\r\n\r\n        for (let item of arr) {\r\n            if (!item) {\r\n                continue;\r\n            }\r\n\r\n            if (this.contain(noRepeatArr, item)) {\r\n                hasRepeat = true;\r\n\r\n                break;\r\n            }\r\n\r\n            noRepeatArr.push(item);\r\n        }\r\n\r\n        return hasRepeat;\r\n    }\r\n\r\n    public static contain(arr: Array<any>, item: any): boolean {\r\n        var c: any = null;\r\n\r\n        for (let i = 0, len = arr.length; i < len; i++) {\r\n            c = arr[i];\r\n\r\n            if (item.uid && c.uid && item.uid == c.uid) {\r\n                return true;\r\n            }\r\n            else if (item === c) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Program } from \"./Program\";\r\nimport { ArrayBuffer } from \"../buffer/ArrayBuffer\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport { requireCheck, assert, it } from \"../../definition/typescript/decorator/contract\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { Matrix3 } from \"../../math/Matrix3\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { ArrayUtils } from \"../../utils/ArrayUtils\";\r\nimport { cache } from \"../../definition/typescript/decorator/cache\";\r\nimport { BufferTable } from \"../../core/entityObject/scene/cache/BufferTable\";\r\n\r\n@registerClass(\"GLSLDataSender\")\r\nexport class GLSLDataSender {\r\n    public static create(program: Program) {\r\n        var obj = new this(program);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(program: Program) {\r\n        this._program = program;\r\n    }\r\n\r\n    private _program: Program = null;\r\n    private _uniformCache: Object = {};\r\n    private _vertexAttribHistory: Array<boolean> = [];\r\n    private _getUniformLocationCache: Object = {};\r\n    private _toSendBufferArr: Array<ArrayBuffer> = [];\r\n\r\n    public sendFloat1(name: string, data: any) {\r\n        var gl = null,\r\n            pos = null;\r\n\r\n        if (this._uniformCache[name] == data) {\r\n            return;\r\n        }\r\n\r\n        this._recordUniformData(name, data);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform1f(pos, Number(data));\r\n    }\r\n\r\n    public sendFloat2(name: string, data: any) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name];\r\n\r\n        if (recordedData && recordedData[0] === data[0] && recordedData[1] === data[1]) {\r\n            return;\r\n        }\r\n\r\n        this._recordUniformData(name, data);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform2f(pos, data[0], data[1]);\r\n    }\r\n\r\n    public sendFloat3(name: string, data: any) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name];\r\n\r\n        if (recordedData && recordedData[0] === data[0] && recordedData[1] === data[1] && recordedData[2] === data[2]) {\r\n            return;\r\n        }\r\n\r\n        this._recordUniformData(name, data);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform3f(pos, data[0], data[1], data[2]);\r\n    }\r\n\r\n    public sendFloat4(name: string, data: any) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name];\r\n\r\n        if (recordedData && recordedData[0] === data[0] && recordedData[1] === data[1] && recordedData[2] === data[2] && recordedData[3] === data[3]) {\r\n            return;\r\n        }\r\n\r\n        this._recordUniformData(name, data);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform4f(pos, data[0], data[1], data[2], data[3]);\r\n    }\r\n\r\n    public sendVector2(name: string, data: any) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name];\r\n\r\n        if (recordedData && recordedData[0] == data.x && recordedData[1] == data.y) {\r\n            return;\r\n        }\r\n\r\n        let x = data.x,\r\n            y = data.y;\r\n\r\n        this._recordUniformData(name, [x, y]);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform2f(pos, x, y);\r\n    }\r\n\r\n    public sendVector3(name: string, data: any) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name];\r\n\r\n        if (recordedData && recordedData[0] == data.x && recordedData[1] == data.y && recordedData[2] == data.z) {\r\n            return;\r\n        }\r\n\r\n        let x = data.x,\r\n            y = data.y,\r\n            z = data.z;\r\n\r\n        this._recordUniformData(name, [x, y, z]);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform3f(pos, x, y, z);\r\n    }\r\n\r\n    public sendVector4(name: string, data: any) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name];\r\n\r\n        if (recordedData && recordedData[0] == data.x && recordedData[1] == data.y && recordedData[2] == data.z && recordedData[3] == data.w) {\r\n            return;\r\n        }\r\n\r\n        let x = data.x,\r\n            y = data.y,\r\n            z = data.z,\r\n            w = data.w;\r\n\r\n        this._recordUniformData(name, [x, y, z, w]);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform4f(pos, x, y, z, w);\r\n    }\r\n\r\n    public sendColor3(name: string, data: Color) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name],\r\n            convertedData = null;\r\n\r\n        if (recordedData && recordedData[0] == data.r && recordedData[1] == data.g && recordedData[2] == data.b) {\r\n            return;\r\n        }\r\n\r\n        let r = data.r,\r\n            g = data.g,\r\n            b = data.b;\r\n\r\n        this._recordUniformData(name, [r, g, b]);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform3f(pos, r, g, b);\r\n    }\r\n\r\n    @requireCheck(function(name: string, data: number) {\r\n        assert(JudgeUtils.isNumber(data), Log.info.FUNC_MUST_BE(\"data\", \"be number\"));\r\n    })\r\n    public sendNum1(name: string, data: number) {\r\n        var gl = null,\r\n            pos = null;\r\n\r\n        if (this._uniformCache[name] === data) {\r\n            return;\r\n        }\r\n\r\n        this._recordUniformData(name, data);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform1i(pos, data);\r\n    }\r\n\r\n    public sendMatrix3(name: string, data: Matrix3) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniformMatrix3fv(pos, false, data.values);\r\n    }\r\n\r\n    public sendMatrix4(name: string, data: Matrix4) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniformMatrix4fv(pos, false, data.values);\r\n    }\r\n\r\n    @requireCheck(function(name: string, data: Array<number> | Float32Array) {\r\n        it(`data should be array, but actual is ${data}`, () => {\r\n            expect(JudgeUtils.isFloatArray(data) || JudgeUtils.isArrayExactly(data)).true;\r\n        });\r\n        it(\"name shouldn't be the first matrix of the array\", () => {\r\n            expect(/\\[0\\]$/.test(name)).false;\r\n        });\r\n    })\r\n    public sendMatrix4Array(name: string, data: Array<number> | Float32Array) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            pos = this.getUniformLocation(`${name}[0]`);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniformMatrix4fv(pos, false, data);\r\n    }\r\n\r\n    @requireCheck(function(name: string, data: Array<number>) {\r\n        assert(JudgeUtils.isArrayExactly(data), Log.info.FUNC_SHOULD(\"data\", `be array, but actual is ${data}`));\r\n\r\n        for (let unit of data) {\r\n            assert(JudgeUtils.isNumber(unit), Log.info.FUNC_SHOULD(\"data\", `be Array<number>, but actual is ${data}`));\r\n        }\r\n    })\r\n    public sendSampleArray(name: string, data: Array<number>) {\r\n        var gl = null,\r\n            pos = null,\r\n            recordedData: any = this._uniformCache[name],\r\n            isEqual: boolean = true;\r\n\r\n        if (recordedData) {\r\n            for (let i = 0, len = data.length; i < len; i++) {\r\n                if (recordedData[i] !== data[i]) {\r\n                    isEqual = false;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (isEqual) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        this._recordUniformData(name, data);\r\n\r\n        gl = DeviceManager.getInstance().gl;\r\n        pos = this.getUniformLocation(name);\r\n\r\n        if (this._isUniformDataNotExistByLocation(pos)) {\r\n            return;\r\n        }\r\n\r\n        gl.uniform1iv(pos, data);\r\n    }\r\n\r\n    /*!\r\n     not use @cache,\r\n     here judge return pos of \"getChild\", so it don't need to invoke \"hasChild\"\r\n     */\r\n    public getUniformLocation(name: string) {\r\n        var pos = null,\r\n            gl = DeviceManager.getInstance().gl;\r\n\r\n        pos = this._getUniformLocationCache[name];\r\n\r\n        if (pos !== void 0) {\r\n            return pos;\r\n        }\r\n\r\n        pos = gl.getUniformLocation(this._program.glProgram, name);\r\n\r\n        this._getUniformLocationCache[name] = pos;\r\n\r\n        return pos;\r\n    }\r\n\r\n    public addBufferToToSendList(pos: number, buffer: ArrayBuffer) {\r\n        this._toSendBufferArr[pos] = buffer;\r\n\r\n        this._toSendBuffersUidStr += String(buffer.uid);\r\n    }\r\n\r\n    private _toSendBuffersUidStr: string = \"\";\r\n\r\n    @requireCheck(function() {\r\n        assert(!ArrayUtils.hasRepeatItems(this._toSendBufferArr), Log.info.FUNC_SHOULD_NOT(\"_toSendBufferArr\", \"has repeat buffer\"));\r\n    })\r\n    @cache(function() {\r\n        return BufferTable.lastBindedArrayBufferListUidStr === this._toSendBuffersUidStr;\r\n    }, function() {\r\n    }, function() {\r\n        BufferTable.lastBindedArrayBufferListUidStr = this._toSendBuffersUidStr;\r\n\r\n    })\r\n    // public sendAllBufferData(vaoManager:VAOManager){\r\n    public sendAllBufferData() {\r\n        var toSendBufferArr = this._toSendBufferArr;\r\n\r\n        for (let pos = 0, len = toSendBufferArr.length; pos < len; pos++) {\r\n            let buffer = toSendBufferArr[pos];\r\n\r\n            if (!buffer) {\r\n                continue;\r\n            }\r\n\r\n            this.sendBuffer(pos, buffer);\r\n        }\r\n    }\r\n\r\n    public clearBufferList() {\r\n        this._toSendBufferArr = [];\r\n        this._toSendBuffersUidStr = \"\";\r\n    }\r\n\r\n    public sendBuffer(pos: number, buffer: ArrayBuffer) {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer.buffer);\r\n        gl.vertexAttribPointer(pos, buffer.size, gl[buffer.type], false, 0, 0);\r\n\r\n        if (this._vertexAttribHistory[pos] !== true) {\r\n            gl.enableVertexAttribArray(pos);\r\n\r\n            this._vertexAttribHistory[pos] = true;\r\n        }\r\n    }\r\n\r\n    public disableVertexAttribArray() {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        for (let i in this._vertexAttribHistory) {\r\n            //make sure this is a number)\r\n            let iAsNumber = +i;\r\n\r\n            if (iAsNumber > gl.VERTEX_ATTRIB_ARRAY_ENABLED || !this._vertexAttribHistory[iAsNumber]) {\r\n                continue;\r\n            }\r\n            this._vertexAttribHistory[iAsNumber] = false;\r\n            gl.disableVertexAttribArray(iAsNumber);\r\n        }\r\n\r\n        this._vertexAttribHistory = [];\r\n    }\r\n\r\n    public clearAllCache() {\r\n        this._getUniformLocationCache = {};\r\n\r\n        this._uniformCache = {};\r\n    }\r\n\r\n    public dispose() {\r\n        this.disableVertexAttribArray();\r\n    }\r\n\r\n    private _recordUniformData(name: string, data: any) {\r\n        this._uniformCache[name] = data;\r\n    }\r\n\r\n    private _isUniformDataNotExistByLocation(pos: number) {\r\n        return pos === null;\r\n    }\r\n}","export enum EVariableType {\r\n    FLOAT_1 = <any>\"FLOAT_1\",\r\n    FLOAT_2 = <any>\"FLOAT_2\",\r\n    FLOAT_3 = <any>\"FLOAT_3\",\r\n    FLOAT_4 = <any>\"FLOAT_4\",\r\n    VECTOR_2 = <any>\"VECTOR_2\",\r\n    VECTOR_3 = <any>\"VECTOR_3\",\r\n    VECTOR_4 = <any>\"VECTOR_4\",\r\n    COLOR_3 = <any>\"COLOR_3\",\r\n    FLOAT_MAT3 = <any>\"FLOAT_MAT3\",\r\n    FLOAT_MAT4 = <any>\"FLOAT_MAT4\",\r\n    BUFFER = <any>\"BUFFER\",\r\n    SAMPLER_CUBE = <any>\"SAMPLER_CUBE\",\r\n    SAMPLER_2D = <any>\"SAMPLER_2D\",\r\n    NUMBER_1 = <any>\"NUMBER_1\",\r\n    STRUCTURE = <any>\"STRUCTURE\",\r\n    STRUCTURES = <any>\"STRUCTURES\",\r\n\r\n    SAMPLER_ARRAY = <any>\"SAMPLER_ARRAY\",\r\n    FLOAT_MAT4_ARRAY = <any>\"FLOAT_MAT4_ARRAY\"\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Entity } from \"../../core/Entity\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { GLSLDataSender } from \"./GLSLDataSender\";\r\nimport { JudgeUtils } from \"../../utils/JudgeUtils\";\r\nimport { ProgramTable } from \"../../core/entityObject/scene/cache/ProgramTable\";\r\nimport { DeviceManager } from \"../../device/DeviceManager\";\r\nimport { BufferTable } from \"../../core/entityObject/scene/cache/BufferTable\";\r\nimport { EVariableType } from \"../shader/variable/EVariableType\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { requireCheck, assert } from \"../../definition/typescript/decorator/contract\";\r\nimport { ArrayBuffer } from \"../buffer/ArrayBuffer\";\r\nimport { Shader } from \"../shader/shader/Shader\";\r\n\r\n@registerClass(\"Program\")\r\nexport class Program extends Entity {\r\n    public static create(): Program {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public glProgram: any = null;\r\n\r\n    private _getAttribLocationCache: Hash<number> = Hash.create<number>();\r\n    private _sender: GLSLDataSender = GLSLDataSender.create(this);\r\n\r\n    public use() {\r\n        if (JudgeUtils.isEqual(this, ProgramTable.lastUsedProgram)) {\r\n            return;\r\n        }\r\n\r\n        ProgramTable.lastUsedProgram = this;\r\n\r\n        DeviceManager.getInstance().gl.useProgram(this.glProgram);\r\n\r\n        this._sender.disableVertexAttribArray();\r\n\r\n        BufferTable.lastBindedArrayBufferListUidStr = null;\r\n    }\r\n\r\n    /*!\r\n     not use @cache,\r\n     here judge return pos of \"getChild\", so it don't need to invoke \"hasChild\"\r\n     */\r\n    public getAttribLocation(name: string) {\r\n        var pos = null,\r\n            gl = DeviceManager.getInstance().gl;\r\n\r\n        pos = this._getAttribLocationCache.getChild(name);\r\n\r\n        if (pos !== void 0) {\r\n            return pos;\r\n        }\r\n\r\n        pos = gl.getAttribLocation(this.glProgram, name);\r\n\r\n        this._getAttribLocationCache.addChild(name, pos);\r\n\r\n        return pos;\r\n    }\r\n\r\n    public getUniformLocation(name: string) {\r\n        return this._sender.getUniformLocation(name);\r\n    }\r\n\r\n    public sendUniformData(name: string, type: EVariableType, data: any) {\r\n        if (data === null) {\r\n            return;\r\n        }\r\n\r\n        switch (type) {\r\n            case EVariableType.FLOAT_1:\r\n                this._sender.sendFloat1(name, data);\r\n                break;\r\n            case EVariableType.FLOAT_2:\r\n                this._sender.sendFloat2(name, data);\r\n                break;\r\n            case EVariableType.FLOAT_3:\r\n                this._sender.sendFloat3(name, data);\r\n                break;\r\n            case EVariableType.FLOAT_4:\r\n                this._sender.sendFloat4(name, data);\r\n                break;\r\n            case EVariableType.VECTOR_2:\r\n                this._sender.sendVector2(name, data);\r\n                break;\r\n            case EVariableType.VECTOR_3:\r\n                this._sender.sendVector3(name, data);\r\n                break;\r\n            case EVariableType.VECTOR_4:\r\n                this._sender.sendVector4(name, data);\r\n                break;\r\n            case EVariableType.COLOR_3:\r\n                this._sender.sendColor3(name, data);\r\n                break;\r\n            case EVariableType.FLOAT_MAT3:\r\n                this._sender.sendMatrix3(name, data);\r\n                break;\r\n            case EVariableType.FLOAT_MAT4:\r\n                this._sender.sendMatrix4(name, data);\r\n                break;\r\n            case EVariableType.NUMBER_1:\r\n            case EVariableType.SAMPLER_CUBE:\r\n            case EVariableType.SAMPLER_2D:\r\n                this._sender.sendNum1(name, data);\r\n                break;\r\n            case EVariableType.FLOAT_MAT4_ARRAY:\r\n                this._sender.sendMatrix4Array(name, data);\r\n                break;\r\n            case EVariableType.SAMPLER_ARRAY:\r\n                this._sender.sendSampleArray(name, data);\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_INVALID(\"EVariableType:\", type));\r\n                break;\r\n        }\r\n    }\r\n\r\n    @requireCheck(function(name: string, type: EVariableType, buffer: ArrayBuffer) {\r\n        assert(buffer instanceof ArrayBuffer, Log.info.FUNC_MUST_BE(\"ArrayBuffer\"));\r\n\r\n        assert(type === EVariableType.BUFFER, Log.info.FUNC_SHOULD(\"type\", `be EVariableType.BUFFER, but actual is ${type}`));\r\n    })\r\n    public sendAttributeBuffer(name: string, type: EVariableType, buffer: ArrayBuffer) {\r\n        var pos: number = null;\r\n\r\n        pos = this.getAttribLocation(name);\r\n\r\n        if (pos === -1) {\r\n            return;\r\n        }\r\n\r\n        this._sender.addBufferToToSendList(pos, buffer);\r\n    }\r\n\r\n    public sendStructureData(name: string, type: EVariableType, data: any) {\r\n        this.sendUniformData(name, type, data);\r\n    }\r\n\r\n    public sendFloat1(name: string, data: any) {\r\n        this._sender.sendFloat1(name, data);\r\n    }\r\n\r\n    public sendFloat2(name: string, data: any) {\r\n        this._sender.sendFloat2(name, data);\r\n    }\r\n\r\n    public sendFloat3(name: string, data: any) {\r\n        this._sender.sendFloat3(name, data);\r\n    }\r\n\r\n    public sendFloat4(name: string, data: any) {\r\n        this._sender.sendFloat4(name, data);\r\n    }\r\n\r\n    public sendVector2(name: string, data: any) {\r\n        this._sender.sendVector2(name, data);\r\n    }\r\n\r\n    public sendVector3(name: string, data: any) {\r\n        this._sender.sendVector3(name, data);\r\n    }\r\n\r\n    public sendVector4(name: string, data: any) {\r\n        this._sender.sendVector4(name, data);\r\n    }\r\n\r\n    public sendColor3(name: string, data: any) {\r\n        this._sender.sendColor3(name, data);\r\n    }\r\n\r\n    public sendNum1(name: string, data: any) {\r\n        this._sender.sendNum1(name, data);\r\n    }\r\n\r\n    public sendMatrix3(name: string, data: any) {\r\n        this._sender.sendMatrix3(name, data);\r\n    }\r\n\r\n    public sendMatrix4(name: string, data: any) {\r\n        this._sender.sendMatrix4(name, data);\r\n    }\r\n\r\n    public sendMatrix4Array(name: string, data: Float32Array) {\r\n        this._sender.sendMatrix4Array(name, data);\r\n    }\r\n\r\n    public sendSampleArray(name: string, data: any) {\r\n        this._sender.sendSampleArray(name, data);\r\n    }\r\n\r\n    // public sendAllBufferData(vaoManager:VAOManager){\r\n    public sendAllBufferData() {\r\n        // this._sender.sendAllBufferData(vaoManager);\r\n        this._sender.sendAllBufferData();\r\n        this._sender.clearBufferList();\r\n    }\r\n\r\n    public initWithShader(shader: Shader) {\r\n        var gl = DeviceManager.getInstance().gl,\r\n            vs = null,\r\n            fs = null;\r\n\r\n        if (this.glProgram) {\r\n            this.dispose();\r\n        }\r\n\r\n        this.glProgram = DeviceManager.getInstance().gl.createProgram();\r\n\r\n        vs = shader.createVsShader();\r\n        fs = shader.createFsShader();\r\n\r\n        gl.attachShader(this.glProgram, vs);\r\n        gl.attachShader(this.glProgram, fs);\r\n\r\n\r\n        /*!\r\n         if warn:\"Attribute 0 is disabled. This has significant performance penalty\" when run,\r\n         then do this before linkProgram:\r\n         gl.bindAttribLocation( this.glProgram, 0, \"a_position\");\r\n\r\n\r\n\r\n         can reference here:\r\n         http://stackoverflow.com/questions/20305231/webgl-warning-attribute-0-is-disabled-this-has-significant-performance-penalt?answertab=votes#tab-top\r\n\r\n\r\n         OpenGL requires attribute zero to be enabled otherwise it will not render anything.\r\n         On the other hand OpenGL ES 2.0 on which WebGL is based does not. So, to emulate OpenGL ES 2.0 on top of OpenGL if you don't enable attribute 0 the browser has to make a buffer for you large enough for the number of vertices you've requested to be drawn, fill it with the correct value (see gl.vertexAttrib),\r\n         attach it to attribute zero, and enable it.\r\n\r\n         It does all this behind the scenes but it's important for you to know that it takes time to create and fill that buffer. There are optimizations the browser can make but in the general case,\r\n         if you were to assume you were running on OpenGL ES 2.0 and used attribute zero as a constant like you are supposed to be able to do, without the warning you'd have no idea of the work the browser is doing on your behalf to emulate that feature of OpenGL ES 2.0 that is different from OpenGL.\r\n\r\n         require your particular case the warning doesn't have much meaning. It looks like you are only drawing a single point. But it would not be easy for the browser to figure that out so it just warns you anytime you draw and attribute 0 is not enabled.\r\n         */\r\n        /*!\r\n         Always have vertex attrib 0 array enabled. If you draw with vertex attrib 0 array disabled, you will force the browser to do complicated emulation when running on desktop OpenGL (e.g. on Mac OSX). This is because in desktop OpenGL, nothing gets drawn if vertex attrib 0 is not array-enabled. You can use bindAttribLocation() to force a vertex attribute to use location 0, and use enableVertexAttribArray() to make it array-enabled.\r\n         */\r\n        gl.bindAttribLocation(this.glProgram, 0, \"a_position\");\r\n\r\n\r\n        gl.linkProgram(this.glProgram);\r\n\r\n        Log.error(gl.getProgramParameter(this.glProgram, gl.LINK_STATUS) === false, gl.getProgramInfoLog(this.glProgram));\r\n\r\n\r\n\r\n\r\n        /*!\r\n         should detach and delete shaders after linking the program\r\n\r\n         explain:\r\n         The shader object, due to being attached to the program object, will continue to exist even if you delete the shader object. It will only be deleted by the system when it is no longer attached to any program object (and when the user has asked to delete it, of course).\r\n\r\n         \"Deleting\" the shader, as with all OpenGL objects, merely sets a flag that says you don't need it any more. OpenGL will keep it around for as long as it needs it itself, and will do the actual delete any time later (most likely, but not necessarily, after the program is deleted).\r\n         */\r\n        gl.deleteShader(vs);\r\n        gl.deleteShader(fs);\r\n\r\n        return this;\r\n    }\r\n\r\n    public dispose() {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        gl.deleteProgram(this.glProgram);\r\n        this.glProgram = null;\r\n\r\n        this._sender.dispose();\r\n\r\n        this._clearAllCache();\r\n    }\r\n\r\n    private _clearAllCache() {\r\n        this._getAttribLocationCache.removeAllChildren();\r\n        this._sender.clearAllCache();\r\n    }\r\n}","import { Shader } from \"../shader/Shader\";\r\nimport { virtual } from \"../../../definition/typescript/decorator/virtual\";\r\nimport { Program } from \"../../program/Program\";\r\nimport { RenderCommand } from \"../../command/RenderCommand\";\r\nimport { Material } from \"../../../material/Material\";\r\n\r\nexport abstract class ShaderLib {\r\n    public shader: Shader = null;\r\n\r\n    @virtual\r\n    public sendShaderVariables(program: Program, cmd: RenderCommand, material: Material) {\r\n    }\r\n\r\n    @virtual\r\n    public init() {\r\n    }\r\n\r\n    @virtual\r\n    public dispose() {\r\n    }\r\n}","import { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { ensureGetter, it, ensure } from \"../../../definition/typescript/decorator/contract\";\r\nimport { Program } from \"../../program/Program\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { cacheGetter } from \"../../../definition/typescript/decorator/cache\";\r\nimport { ProgramTable } from \"../../../core/entityObject/scene/cache/ProgramTable\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { ShaderLib } from \"../lib/ShaderLib\";\r\nimport { ShaderSourceBuilder } from \"../sourceBuilder/ShaderSourceBuilder\";\r\nimport { RenderCommand } from \"../../command/RenderCommand\";\r\nimport { Material } from \"../../../material/Material\";\r\nimport { DeviceManager } from \"../../../device/DeviceManager\";\r\nimport { execOnlyOnce } from \"../../../definition/typescript/decorator/control\";\r\nimport { JudgeUtils } from \"../../../utils/JudgeUtils\";\r\nimport { Log } from \"../../../utils/Log\";\r\nimport { $BREAK } from \"wonder-commonlib/dist/es2015/global/Const\";\r\nimport { EVariableType } from \"../variable/EVariableType\";\r\n\r\nexport abstract class Shader {\r\n    private _attributes: Hash<ShaderData> = Hash.create<ShaderData>();\r\n    get attributes() {\r\n        return this._attributes;\r\n    }\r\n    set attributes(attributes: Hash<ShaderData>) {\r\n        if (this._isNotEqual(attributes, this._attributes)) {\r\n            this.definitionDataDirty = true;\r\n        }\r\n        this._attributes = attributes;\r\n    }\r\n\r\n    private _uniforms: Hash<ShaderData> = Hash.create<ShaderData>();\r\n    get uniforms() {\r\n        return this._uniforms;\r\n    }\r\n    set uniforms(uniforms: Hash<ShaderData>) {\r\n        if (this._isNotEqual(uniforms, this._uniforms)) {\r\n            this.definitionDataDirty = true;\r\n        }\r\n        this._uniforms = uniforms;\r\n    }\r\n\r\n    private _vsSource: string = \"\";\r\n    get vsSource() {\r\n        return this._vsSource;\r\n    }\r\n    set vsSource(vsSource: string) {\r\n        if (vsSource !== this._vsSource) {\r\n            this.definitionDataDirty = true;\r\n        }\r\n        this._vsSource = vsSource;\r\n    }\r\n\r\n    private _fsSource: string = \"\";\r\n    get fsSource() {\r\n        return this._fsSource;\r\n    }\r\n    set fsSource(fsSource: string) {\r\n        if (fsSource !== this._fsSource) {\r\n            this.definitionDataDirty = true;\r\n        }\r\n        this._fsSource = fsSource;\r\n    }\r\n\r\n    get dirty() {\r\n        return this.libDirty || this.definitionDataDirty;\r\n    }\r\n\r\n    @ensureGetter(function(program: Program) {\r\n        it(`program should exist(its table key is ${this._getProgramTableKey()}`, () => {\r\n            expect(program).exist;\r\n        }, this);\r\n    })\r\n    @cacheGetter(function() {\r\n        return this._programCache !== null;\r\n    }, function() {\r\n        return this._programCache;\r\n    }, function(program: Program) {\r\n        this._programCache = program;\r\n    })\r\n    get program() {\r\n        return ProgramTable.getProgram(this._getProgramTableKey());\r\n    }\r\n\r\n    public libDirty: boolean = false;\r\n    public definitionDataDirty: boolean = false;\r\n    // public mapManager:MapManager = MapManager.create();\r\n\r\n    protected libs: Collection<ShaderLib> = Collection.create<ShaderLib>();\r\n    protected sourceBuilder: ShaderSourceBuilder = this.createShaderSourceBuilder();\r\n\r\n    private _programCache: Program = null;\r\n    // private _instanceStateCache:InstanceState = null;\r\n\r\n    public abstract update(cmd: RenderCommand, material: Material);\r\n\r\n    public createVsShader() {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        return this._initShader(gl.createShader(gl.VERTEX_SHADER), this.vsSource);\r\n    }\r\n\r\n    public createFsShader() {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        return this._initShader(gl.createShader(gl.FRAGMENT_SHADER), this.fsSource);\r\n    }\r\n\r\n    @execOnlyOnce(\"_isInit\")\r\n    public init(material: Material) {\r\n        this.libs.forEach((lib: ShaderLib) => {\r\n            lib.init();\r\n        });\r\n\r\n        this.judgeRefreshShader(null, material);\r\n\r\n        // this.mapManager.init();\r\n    }\r\n\r\n    public dispose() {\r\n        this.attributes.removeAllChildren();\r\n        this.uniforms.removeAllChildren();\r\n\r\n        this.libs.forEach((lib: ShaderLib) => {\r\n            lib.dispose();\r\n        });\r\n\r\n        // this.mapManager.dispose();\r\n\r\n        this._clearAllCache();\r\n    }\r\n\r\n    public hasLib(lib: ShaderLib);\r\n    public hasLib(_class: Function);\r\n\r\n    public hasLib(...args) {\r\n        if (args[0] instanceof ShaderLib) {\r\n            let lib: ShaderLib = args[0];\r\n\r\n            return this.libs.hasChild(lib);\r\n        }\r\n        else {\r\n            let _class = args[0];\r\n\r\n            return this.libs.hasChildWithFunc((lib: ShaderLib) => {\r\n                return lib instanceof _class;\r\n            })\r\n        }\r\n    }\r\n\r\n    @ensure(function() {\r\n        it(\"should set ShaderLib.shader to be this\", () => {\r\n            this.libs.forEach((lib: ShaderLib) => {\r\n                expect(lib.shader === this).true;\r\n            });\r\n        }, this);\r\n        it(\"libDirty should be true\", () => {\r\n            expect(this.libDirty).true;\r\n        }, this);\r\n    })\r\n    public addLib(lib: ShaderLib) {\r\n        this.libs.addChild(lib);\r\n\r\n        lib.shader = this;\r\n\r\n        this.libDirty = true;\r\n    }\r\n\r\n    @ensure(function(val, lib: ShaderLib) {\r\n        it(\"should add shader lib to the top\", () => {\r\n            expect(JudgeUtils.isEqual(lib, this.libs.getChild(0))).true;\r\n        }, this);\r\n        it(\"should set ShaderLib.shader to be this\", () => {\r\n            this.libs.forEach((lib: ShaderLib) => {\r\n                expect(lib.shader === this).true;\r\n            });\r\n        }, this);\r\n        it(\"libDirty should be true\", () => {\r\n            expect(this.libDirty).true;\r\n        }, this);\r\n    })\r\n    public addShaderLibToTop(lib: ShaderLib) {\r\n        this.libs.unShiftChild(lib);\r\n\r\n        lib.shader = this;\r\n\r\n        this.libDirty = true;\r\n    }\r\n\r\n    public getLib(libClass: Function) {\r\n        return this.libs.findOne((lib: ShaderLib) => {\r\n            return lib instanceof libClass;\r\n        });\r\n    }\r\n\r\n    public getLibs() {\r\n        return this.libs;\r\n    }\r\n\r\n    public removeLib(lib: ShaderLib);\r\n    public removeLib(func: Function);\r\n\r\n    public removeLib(...args) {\r\n        this.libDirty = true;\r\n\r\n        return this.libs.removeChild(args[0]);\r\n    }\r\n\r\n    public removeAllLibs() {\r\n        this.libDirty = true;\r\n\r\n        this.libs.removeAllChildren();\r\n    }\r\n\r\n    public sortLib(func: (a: ShaderLib, b: ShaderLib) => any) {\r\n        this.libDirty = true;\r\n\r\n        this.libs.sort(func, true);\r\n    }\r\n\r\n    protected abstract createShaderSourceBuilder(): ShaderSourceBuilder;\r\n    protected abstract buildDefinitionData(cmd: RenderCommand, material: Material): void;\r\n\r\n\r\n    protected judgeRefreshShader(cmd: RenderCommand, material: Material) {\r\n        if (this.libDirty) {\r\n            // this._instanceStateCache = null;\r\n            this.buildDefinitionData(cmd, material);\r\n        }\r\n\r\n        if (this.definitionDataDirty) {\r\n            this._programCache = null;\r\n            this._registerAndUpdateProgram();\r\n            this._programCache = null;\r\n        }\r\n\r\n\r\n        this.libDirty = false;\r\n        this.definitionDataDirty = false;\r\n    }\r\n\r\n    private _registerAndUpdateProgram() {\r\n        var key = this._getProgramTableKey();\r\n\r\n        if (ProgramTable.hasProgram(key)) {\r\n            return;\r\n        }\r\n\r\n        ProgramTable.addProgram(key, Program.create());\r\n        this._updateProgram();\r\n    }\r\n\r\n    private _updateProgram() {\r\n        this.program.initWithShader(this);\r\n    }\r\n\r\n    private _getProgramTableKey() {\r\n        return `${this.vsSource}\\n${this.fsSource}`;\r\n    }\r\n\r\n    private _initShader(shader, source) {\r\n        var gl = DeviceManager.getInstance().gl;\r\n\r\n        gl.shaderSource(shader, source);\r\n        gl.compileShader(shader);\r\n\r\n        if (gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n            return shader;\r\n        }\r\n        else {\r\n            Log.log(gl.getShaderInfoLog(shader));\r\n            Log.log(\"attributes:\\n\", this.attributes);\r\n            Log.log(\"uniforms:\\n\", this.uniforms);\r\n            Log.log(\"source:\\n\", source);\r\n        }\r\n    }\r\n\r\n    private _isNotEqual(list1: Hash<ShaderData>, list2: Hash<ShaderData>) {\r\n        var result = false;\r\n\r\n        list1.forEach((data: ShaderData, key: string) => {\r\n            var list2Data = list2.getChild(key);\r\n\r\n            if (!list2Data || data.type !== list2Data.type || data.value !== list2Data.value) {\r\n                result = true;\r\n                return $BREAK;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    private _clearAllCache() {\r\n        this._programCache = null;\r\n        // this._instanceStateCache = null;\r\n    }\r\n}\r\n\r\nexport type ShaderData = {\r\n    type: EVariableType;\r\n    value?: any;\r\n    textureId?: string;\r\n}\r\n\r\n    // type InstanceState = {\r\n    //     isModelMatrixInstance:boolean;\r\n    //     isNormalMatrixInstance:boolean;\r\n    //     isHardwareInstance:boolean;\r\n    //     isBatchInstance:boolean\r\n    // }","export enum EVariableCategory {\r\n    /*! avoid to equal 0\r\n    for example, when compare to texture index, it may equal texture 0\r\n    */\r\n    ENGINE = <any>\"ENGINE\",\r\n    CUSTOM = <any>\"CUSTOM\"\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { requireCheck, it } from \"../definition/typescript/decorator/contract\";\r\nimport { EVariableType } from \"../renderer/shader/variable/EVariableType\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { JudgeUtils } from \"./JudgeUtils\";\r\nimport { ArrayBuffer } from \"../renderer/buffer/ArrayBuffer\";\r\nimport { EBufferType } from \"../renderer/buffer/EBufferType\";\r\nimport { Log } from \"./Log\";\r\n\r\n@registerClass(\"BufferUtils\")\r\nexport class BufferUtils {\r\n    @requireCheck(function(type: EVariableType, value: Array<any>) {\r\n        it(`value:${value} should be array`, () => {\r\n            expect(JudgeUtils.isArrayExactly(value)).true;\r\n        });\r\n    })\r\n    public static convertArrayToArrayBuffer(type: EVariableType, value: Array<any>) {\r\n        var size = this._getBufferSize(type);\r\n\r\n        return ArrayBuffer.create(value, size, EBufferType.FLOAT);\r\n    }\r\n\r\n    private static _getBufferSize(type: EVariableType) {\r\n        var size = null;\r\n\r\n        switch (type) {\r\n            case EVariableType.FLOAT_1:\r\n            case EVariableType.NUMBER_1:\r\n                size = 1;\r\n                break;\r\n            case EVariableType.FLOAT_2:\r\n                size = 2;\r\n                break;\r\n            case EVariableType.FLOAT_3:\r\n                size = 3;\r\n                break;\r\n            case EVariableType.FLOAT_4:\r\n                size = 4;\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_UNEXPECT(\"EVariableType\", type));\r\n                break;\r\n        }\r\n\r\n        return size;\r\n    }\r\n}","import { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { ShaderData } from \"../shader/Shader\";\r\nimport { requireCheck, assert } from \"../../../definition/typescript/decorator/contract\";\r\nimport { JudgeUtils } from \"../../../utils/JudgeUtils\";\r\nimport { Log } from \"../../../utils/Log\";\r\nimport { EVariableCategory } from \"../variable/EVariableCategory\";\r\nimport { BufferUtils } from \"../../../utils/BufferUtils\";\r\n\r\nexport abstract class ShaderSourceBuilder {\r\n    public attributes: Hash<ShaderData> = Hash.create<ShaderData>();\r\n    public uniforms: Hash<ShaderData> = Hash.create<ShaderData>();\r\n    public vsSource: string = null;\r\n    public fsSource: string = null;\r\n\r\n    public abstract build(...args): void;\r\n\r\n    public abstract clearShaderDefinition(): void;\r\n\r\n    public dispose() {\r\n        this.clearShaderDefinition();\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        this.attributes.forEach((data: ShaderData) => {\r\n            assert(!JudgeUtils.isFloatArray(data.value), Log.info.FUNC_SHOULD_NOT(\"attribute->value\", \"be Float array\"));\r\n        });\r\n    })\r\n    protected convertAttributesData() {\r\n        this.attributes\r\n            .filter((data: ShaderData) => {\r\n                return data.value !== EVariableCategory.ENGINE && JudgeUtils.isArrayExactly(data.value);\r\n            })\r\n            .forEach((data: ShaderData, key: string) => {\r\n                data.value = BufferUtils.convertArrayToArrayBuffer(data.type, data.value);\r\n            });\r\n    }\r\n}\r\n\r\nexport type SourceDefine = {\r\n    name: string;\r\n    value: any;\r\n}","export const main_begin: string = \"void main(void){\\n\";\r\nexport const main_end: string = \"}\\n\";\r\n\r\n// export const setPos_mvp: string = \"gl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\\n\"\r\nexport const setPos_mvp: string = \"gl_Position = u_pMatrix * u_vMatrix * u_mMatrix * vec4(a_position, 1.0);\\n\"\r\n","export const empty:GLSLChunk = {top:\"\", define:\"\", varDeclare:\"\", funcDeclare:\"\", funcDefine:\"\", body:\"\"};\nexport const NULL:number = -1.0;\nexport const basic_materialColor_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"vec4 totalColor = vec4(u_color, 1.0);\\n\"};\nexport const end_basic_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"gl_FragColor = vec4(totalColor.rgb, totalColor.a * u_opacity);\\n\"};\nexport const common_define:GLSLChunk = {top: \"\",define: \"#define NULL -1.0\\n\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const common_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const common_function:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"mat2 transpose(mat2 m) {\\n  return mat2(  m[0][0], m[1][0],   // new col 0\\n                m[0][1], m[1][1]    // new col 1\\n             );\\n  }\\nmat3 transpose(mat3 m) {\\n  return mat3(  m[0][0], m[1][0], m[2][0],  // new col 0\\n                m[0][1], m[1][1], m[2][1],  // new col 1\\n                m[0][2], m[1][2], m[2][2]   // new col 1\\n             );\\n  }\\n\\nbool isRenderListEmpty(int isRenderListEmpty){\\n  return isRenderListEmpty == 1;\\n}\\n\",body: \"\"};\nexport const common_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const highp_fragment:GLSLChunk = {top: \"precision highp float;\\nprecision highp int;\\n\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const lowp_fragment:GLSLChunk = {top: \"precision lowp float;\\nprecision lowp int;\\n\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const mediump_fragment:GLSLChunk = {top: \"precision mediump float;\\nprecision mediump int;\\n\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport type GLSLChunk = {top?:string;define?:string;varDeclare?:string;funcDeclare?:string;funcDefine?:string;body?:string;}\n","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { EVariableType } from \"./EVariableType\";\r\nimport { Log } from \"../../../utils/Log\";\r\n\r\nconst _table = Hash.create<string>();\r\n\r\n//todo remove <any>\r\n_table.addChild(<any>EVariableType.FLOAT_1, \"float\");\r\n_table.addChild(<any>EVariableType.FLOAT_2, \"vec2\");\r\n_table.addChild(<any>EVariableType.FLOAT_3, \"vec3\");\r\n_table.addChild(<any>EVariableType.FLOAT_4, \"vec4\");\r\n\r\n_table.addChild(<any>EVariableType.VECTOR_2, \"vec2\");\r\n_table.addChild(<any>EVariableType.VECTOR_3, \"vec3\");\r\n_table.addChild(<any>EVariableType.VECTOR_4, \"vec4\");\r\n\r\n_table.addChild(<any>EVariableType.FLOAT_MAT3, \"mat3\");\r\n_table.addChild(<any>EVariableType.FLOAT_MAT4, \"mat4\");\r\n_table.addChild(<any>EVariableType.NUMBER_1, \"int\");\r\n_table.addChild(<any>EVariableType.SAMPLER_CUBE, \"samplerCube\");\r\n_table.addChild(<any>EVariableType.SAMPLER_2D, \"sampler2D\");\r\n\r\n@registerClass(\"VariableTypeTable\")\r\nexport class VariableTypeTable {\r\n    public static getVariableType(type: EVariableType) {\r\n        //todo remove <any>\r\n        var result = _table.getChild(<any>type);\r\n\r\n        Log.error(result === void 0, Log.info.FUNC_NOT_EXIST(type, \"in VariableTypeTable\"));\r\n\r\n        return result;\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { ShaderSourceBuilder, SourceDefine } from \"./ShaderSourceBuilder\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { requireCheck, assert } from \"../../../definition/typescript/decorator/contract\";\r\nimport { EngineShaderLib } from \"../lib/EngineShaderLib\";\r\nimport { Log } from \"../../../utils/Log\";\r\nimport { main_begin, main_end } from \"../snippet/ShaderSnippet\";\r\nimport { GPUDetector, EGPUPrecision } from \"../../../device/GPUDetector\";\r\nimport { lowp_fragment, mediump_fragment, highp_fragment } from \"../chunk/ShaderChunk\";\r\nimport { ShaderData } from \"../shader/Shader\";\r\nimport { VariableTypeTable } from \"../variable/VariableTypeTable\";\r\nimport { EVariableType } from \"../variable/EVariableType\";\r\n\r\n//todo add custom define\r\n@registerClass(\"EngineShaderSourceBuilder\")\r\nexport class EngineShaderSourceBuilder extends ShaderSourceBuilder {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public vsSourceTop: string = \"\";\r\n    public vsSourceDefine: string = \"\";\r\n    public vsSourceVarDeclare: string = \"\";\r\n    public vsSourceFuncDeclare: string = \"\";\r\n    public vsSourceFuncDefine: string = \"\";\r\n    public vsSourceBody: string = \"\";\r\n\r\n    public fsSourceTop: string = \"\";\r\n    public fsSourceDefine: string = \"\";\r\n    public fsSourceVarDeclare: string = \"\";\r\n    public fsSourceFuncDeclare: string = \"\";\r\n    public fsSourceFuncDefine: string = \"\";\r\n    public fsSourceBody: string = \"\";\r\n\r\n    public vsSourceDefineList: Collection<SourceDefine> = Collection.create<SourceDefine>();\r\n    public fsSourceDefineList: Collection<SourceDefine> = Collection.create<SourceDefine>();\r\n\r\n    public vsSourceExtensionList: Collection<string> = Collection.create<string>();\r\n    public fsSourceExtensionList: Collection<string> = Collection.create<string>();\r\n\r\n    @requireCheck(function(libs: Collection<EngineShaderLib>) {\r\n        assert(this.vsSource === null, Log.info.FUNC_SHOULD(\"vsSource\", \"be null\"));\r\n        assert(this.fsSource === null, Log.info.FUNC_SHOULD(\"fsSource\", \"be null\"));\r\n    })\r\n    public build(libs: Collection<EngineShaderLib>) {\r\n        this._readLibSource(libs);\r\n\r\n        if (this.vsSource === null) {\r\n            this._buildVsSource();\r\n        }\r\n        if (this.fsSource === null) {\r\n            this._buildFsSource();\r\n        }\r\n\r\n        this.convertAttributesData();\r\n    }\r\n\r\n    public clearShaderDefinition() {\r\n        this.attributes.removeAllChildren();\r\n        this.uniforms.removeAllChildren();\r\n        this.vsSourceDefineList.removeAllChildren();\r\n        this.fsSourceDefineList.removeAllChildren();\r\n\r\n        this.vsSourceTop = \"\";\r\n        this.vsSourceDefine = \"\";\r\n        this.vsSourceVarDeclare = \"\";\r\n        this.vsSourceFuncDeclare = \"\";\r\n        this.vsSourceFuncDefine = \"\";\r\n        this.vsSourceBody = \"\";\r\n        this.vsSource = null;\r\n\r\n        this.fsSourceTop = \"\";\r\n        this.fsSourceDefine = \"\";\r\n        this.fsSourceVarDeclare = \"\";\r\n        this.fsSourceFuncDeclare = \"\";\r\n        this.fsSourceFuncDefine = \"\";\r\n        this.fsSourceBody = \"\";\r\n        this.fsSource = null;\r\n    }\r\n\r\n    private _readLibSource(libs: Collection<EngineShaderLib>) {\r\n        var setSourceLibs = libs.filter((lib: EngineShaderLib) => {\r\n            return lib.vsSource !== null || lib.fsSource !== null;\r\n        });\r\n\r\n        this._judgeAndSetVsSource(setSourceLibs);\r\n        this._judgeAndSetFsSource(setSourceLibs);\r\n\r\n        this._judgeAndSetPartSource(libs);\r\n    }\r\n\r\n    private _judgeAndSetVsSource(setSourceLibs: Collection<EngineShaderLib>) {\r\n        var setVsSourceLib = setSourceLibs.findOne((lib: EngineShaderLib) => {\r\n            return lib.vsSource !== null;\r\n        });\r\n\r\n        if (setVsSourceLib) {\r\n            this.vsSource = setVsSourceLib.vsSource;\r\n        }\r\n    }\r\n\r\n    private _judgeAndSetFsSource(setSourceLibs: Collection<EngineShaderLib>) {\r\n        var setFsSourceLib = setSourceLibs.findOne((lib: EngineShaderLib) => {\r\n            return lib.fsSource !== null;\r\n        });\r\n\r\n        if (setFsSourceLib) {\r\n            this.fsSource = setFsSourceLib.fsSource;\r\n        }\r\n    }\r\n\r\n    private _judgeAndSetPartSource(libs: Collection<EngineShaderLib>) {\r\n        var vsSource = this.vsSource,\r\n            fsSource = this.fsSource,\r\n            attributes = this.attributes,\r\n            uniforms = this.uniforms,\r\n            vsSourceDefineList = this.vsSourceDefineList,\r\n            fsSourceDefineList = this.fsSourceDefineList,\r\n            vsSourceExtensionList = this.vsSourceExtensionList,\r\n            fsSourceExtensionList = this.fsSourceExtensionList,\r\n            vsSourceTop = \"\",\r\n            vsSourceDefine = \"\",\r\n            vsSourceVarDeclare = \"\",\r\n            vsSourceFuncDeclare = \"\",\r\n            vsSourceFuncDefine = \"\",\r\n            vsSourceBody = \"\",\r\n            fsSourceTop = \"\",\r\n            fsSourceDefine = \"\",\r\n            fsSourceVarDeclare = \"\",\r\n            fsSourceFuncDeclare = \"\",\r\n            fsSourceFuncDefine = \"\",\r\n            fsSourceBody = \"\";\r\n\r\n        libs.forEach((lib: EngineShaderLib) => {\r\n            attributes.addChildren(lib.attributes);\r\n            uniforms.addChildren(lib.uniforms);\r\n\r\n            if (vsSource === null) {\r\n                vsSourceTop += lib.vsSourceTop;\r\n                vsSourceDefine += lib.vsSourceDefine;\r\n                vsSourceVarDeclare += lib.vsSourceVarDeclare;\r\n                vsSourceFuncDeclare += lib.vsSourceFuncDeclare;\r\n                vsSourceFuncDefine += lib.vsSourceFuncDefine;\r\n                vsSourceBody += lib.vsSourceBody;\r\n\r\n                vsSourceDefineList.addChildren(lib.vsSourceDefineList);\r\n                vsSourceExtensionList.addChildren(lib.vsSourceExtensionList);\r\n            }\r\n\r\n            if (fsSource === null) {\r\n                fsSourceTop += lib.fsSourceTop;\r\n                fsSourceDefine += lib.fsSourceDefine;\r\n                fsSourceVarDeclare += lib.fsSourceVarDeclare;\r\n                fsSourceFuncDeclare += lib.fsSourceFuncDeclare;\r\n                fsSourceFuncDefine += lib.fsSourceFuncDefine;\r\n                fsSourceBody += lib.fsSourceBody;\r\n\r\n                fsSourceDefineList.addChildren(lib.fsSourceDefineList);\r\n                fsSourceExtensionList.addChildren(lib.fsSourceExtensionList);\r\n            }\r\n        });\r\n\r\n        if (vsSource === null) {\r\n            this.vsSourceTop = vsSourceTop;\r\n            this.vsSourceDefine = vsSourceDefine;\r\n            this.vsSourceVarDeclare = vsSourceVarDeclare;\r\n            this.vsSourceFuncDeclare = vsSourceFuncDeclare;\r\n            this.vsSourceFuncDefine = vsSourceFuncDefine;\r\n            this.vsSourceBody = vsSourceBody;\r\n        }\r\n\r\n        if (fsSource === null) {\r\n            this.fsSourceTop = fsSourceTop;\r\n            this.fsSourceDefine = fsSourceDefine;\r\n            this.fsSourceVarDeclare = fsSourceVarDeclare;\r\n            this.fsSourceFuncDeclare = fsSourceFuncDeclare;\r\n            this.fsSourceFuncDefine = fsSourceFuncDefine;\r\n            this.fsSourceBody = fsSourceBody;\r\n        }\r\n    }\r\n\r\n    private _buildVsSource() {\r\n        this.vsSource = this._buildVsSourceTop() + this._buildVsSourceDefine() + this._buildVsSourceVarDeclare() + this._buildVsSourceFuncDeclare() + this._buildVsSourceFuncDefine() + this._buildVsSourceBody();\r\n    }\r\n\r\n    private _buildFsSource() {\r\n        this.fsSource = this._buildFsSourceTop() + this._buildFsSourceDefine() + this._buildFsSourceVarDeclare() + this._buildFsSourceFuncDeclare() + this._buildFsSourceFuncDefine() + this._buildFsSourceBody();\r\n    }\r\n\r\n    private _buildVsSourceTop() {\r\n        return this._buildVsSourceExtension() + this._getPrecisionSource() + this.vsSourceTop;\r\n    }\r\n\r\n    private _buildVsSourceDefine() {\r\n        return this._buildSourceDefine(this.vsSourceDefineList) + this.vsSourceDefine;\r\n    }\r\n\r\n    private _buildVsSourceExtension() {\r\n        return this._buildSourceExtension(this.vsSourceExtensionList);\r\n    }\r\n\r\n    private _buildVsSourceVarDeclare() {\r\n        return this._generateAttributeSource() + this._generateUniformSource(this.vsSourceVarDeclare, this.vsSourceFuncDefine, this.vsSourceBody) + this.vsSourceVarDeclare;\r\n    }\r\n\r\n    private _buildVsSourceFuncDeclare() {\r\n        return this.vsSourceFuncDeclare;\r\n    }\r\n\r\n    private _buildVsSourceFuncDefine() {\r\n        return this.vsSourceFuncDefine;\r\n    }\r\n\r\n    private _buildVsSourceBody() {\r\n        return main_begin + this.vsSourceBody + main_end;\r\n    }\r\n\r\n    private _buildFsSourceTop() {\r\n        return this._buildFsSourceExtension() + this._getPrecisionSource() + this.fsSourceTop;\r\n    }\r\n\r\n    private _buildFsSourceDefine() {\r\n        return this._buildSourceDefine(this.fsSourceDefineList) + this.fsSourceDefine;\r\n    }\r\n\r\n    private _buildFsSourceExtension() {\r\n        return this._buildSourceExtension(this.fsSourceExtensionList);\r\n    }\r\n\r\n    private _buildFsSourceVarDeclare() {\r\n        return this._generateUniformSource(this.fsSourceVarDeclare, this.fsSourceFuncDefine, this.fsSourceBody) + this.fsSourceVarDeclare;\r\n    }\r\n\r\n    private _buildFsSourceFuncDeclare() {\r\n        return this.fsSourceFuncDeclare;\r\n    }\r\n\r\n    private _buildFsSourceFuncDefine() {\r\n        return this.fsSourceFuncDefine;\r\n    }\r\n\r\n    private _buildFsSourceBody() {\r\n        return main_begin + this.fsSourceBody + main_end;\r\n    }\r\n\r\n    private _buildSourceDefine(defineList: Collection<SourceDefine>) {\r\n        var result = \"\";\r\n\r\n        defineList.forEach((sourceDefine: SourceDefine) => {\r\n            if (sourceDefine.value === void 0) {\r\n                result += `#define ${sourceDefine.name}\\n`;\r\n            }\r\n            else {\r\n                result += `#define ${sourceDefine.name} ${sourceDefine.value}\\n`;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    private _buildSourceExtension(extensionList: Collection<string>) {\r\n        var result = \"\";\r\n\r\n        extensionList.forEach((name: string) => {\r\n            result += `#extension ${name} : enable\\n`;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    private _getPrecisionSource() {\r\n        var precision = GPUDetector.getInstance().precision,\r\n            result = null;\r\n\r\n        switch (precision) {\r\n            case EGPUPrecision.HIGHP:\r\n                result = highp_fragment.top;\r\n                break;\r\n            case EGPUPrecision.MEDIUMP:\r\n                result = mediump_fragment.top;\r\n                break;\r\n            case EGPUPrecision.LOWP:\r\n                result = lowp_fragment.top;\r\n                break;\r\n            default:\r\n                result = \"\";\r\n                break;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private _generateAttributeSource() {\r\n        var result = \"\";\r\n\r\n        this.attributes.filter((data: ShaderData, key: string) => {\r\n            return !!data;\r\n        }).forEach((data: ShaderData, key: string) => {\r\n            result += `attribute ${VariableTypeTable.getVariableType(data.type)} ${key};\\n`;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    private _generateUniformSource(sourceVarDeclare: string, sourceFuncDefine: string, sourceBody: string) {\r\n        var result = \"\",\r\n            self = this;\r\n\r\n        this.uniforms.filter((data: ShaderData, key: string) => {\r\n            return !!data && data.type !== EVariableType.STRUCTURE && data.type !== EVariableType.STRUCTURES && !self._isExistInSource(key, sourceVarDeclare) && (self._isExistInSource(key, sourceFuncDefine) || self._isExistInSource(key, sourceBody));\r\n        }).forEach((data: ShaderData, key: string) => {\r\n            result += `uniform ${VariableTypeTable.getVariableType(data.type)} ${key};\\n`;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    private _isExistInSource(key: string, source: string) {\r\n        return source.indexOf(key) !== -1;\r\n    }\r\n}\r\n\r\n","import { Shader } from \"./Shader\";\r\nimport { EngineShaderSourceBuilder } from \"../sourceBuilder/EngineShaderSourceBuilder\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { EngineShaderLib } from \"../lib/EngineShaderLib\";\r\nimport { RenderCommand } from \"../../command/RenderCommand\";\r\nimport { Material } from \"../../../material/Material\";\r\nimport { ShaderSourceBuilder } from \"../sourceBuilder/ShaderSourceBuilder\";\r\n\r\nexport abstract class EngineShader extends Shader {\r\n    protected sourceBuilder: EngineShaderSourceBuilder;\r\n    protected libs: Collection<EngineShaderLib>;\r\n\r\n    protected buildDefinitionData(cmd: RenderCommand, material: Material) {\r\n        this.libs.forEach((lib: EngineShaderLib) => {\r\n            lib.setShaderDefinition(cmd, material);\r\n        });\r\n\r\n        this.sourceBuilder.clearShaderDefinition();\r\n\r\n        this.sourceBuilder.build(this.libs);\r\n\r\n        this.attributes = this.sourceBuilder.attributes;\r\n        this.uniforms = this.sourceBuilder.uniforms;\r\n        this.vsSource = this.sourceBuilder.vsSource;\r\n        this.fsSource = this.sourceBuilder.fsSource;\r\n    }\r\n\r\n    protected createShaderSourceBuilder(): ShaderSourceBuilder {\r\n        return EngineShaderSourceBuilder.create();\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { EngineShader } from \"./EngineShader\";\r\nimport { QuadCommand } from \"../../command/QuadCommand\";\r\nimport { Material } from \"../../../material/Material\";\r\nimport { EngineShaderLib } from \"../lib/EngineShaderLib\";\r\n\r\n@registerClass(\"CommonShader\")\r\nexport class CommonShader extends EngineShader {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public update(cmd: QuadCommand, material: Material) {\r\n        var program = null;\r\n\r\n        this.judgeRefreshShader(cmd, material);\r\n\r\n        program = this.program;\r\n\r\n        program.use();\r\n\r\n        this.libs.forEach((lib: EngineShaderLib) => {\r\n            lib.sendShaderVariables(program, cmd, material);\r\n        });\r\n\r\n        // this.mapManager.bindAndUpdate();\r\n        // this.mapManager.sendData(program);\r\n    }\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { EVariableType } from \"./EVariableType\";\r\nimport { EVariableCategory } from \"./EVariableCategory\";\r\n\r\n@registerClass(\"VariableLib\")\r\nexport class VariableLib {\r\n    //todo group?(common,cubemap...)\r\n\r\n    public static a_position: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_positionVec2: ShaderVariable = {\r\n        type: EVariableType.FLOAT_2,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_currentFramePosition: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_nextFramePosition: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_normal: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_currentFrameNormal: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_nextFrameNormal: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_color: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_texCoord: ShaderVariable = {\r\n        type: EVariableType.FLOAT_2,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_tangent: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_color: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_mMatrix: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_vMatrix: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_pMatrix: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_mvpMatrix: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_vpMatrix: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_normalMatrix: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_samplerCube0: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_CUBE,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_sampler2D0: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_sampler2D1: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_lightMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMap1Sampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMap2Sampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMap3Sampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_specularMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_emissionMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_normalMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_reflectionMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_refractionMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_cameraPos: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_refractionRatio: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_reflectivity: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_map0SourceRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_map1SourceRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMapSourceRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_map0RepeatRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_map1RepeatRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMapRepeatRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_combineMode: ShaderVariable = {\r\n        type: EVariableType.NUMBER_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_mixRatio: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_lightMapIntensity: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuse: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_specular: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_emission: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_shininess: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_lightModel: ShaderVariable = {\r\n        type: EVariableType.NUMBER_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_isBothSide: ShaderVariable = {\r\n        type: EVariableType.NUMBER_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_opacity: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_ambient: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_directionLights: ShaderVariable = {\r\n        type: EVariableType.STRUCTURES,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_pointLights: ShaderVariable = {\r\n        type: EVariableType.STRUCTURES,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_vpMatrixFromLight: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_lightPos: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_farPlane: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_interpolation: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_tilesHeightNumber: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_tilesWidthNumber: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_amplitude: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_jointColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_time: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_speed: ShaderVariable = {\r\n        type: EVariableType.VECTOR_2,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_shift: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_alphaThreshold: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_fireColor: ShaderVariable = {\r\n        type: EVariableType.STRUCTURE,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_layerHeightDatas: ShaderVariable = {\r\n        type: EVariableType.STRUCTURES,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_layerSampler2Ds: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_ARRAY,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_herb1Color: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_herb2Color: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_herb3Color: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_groundColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_ampScale: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_woodColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_roadColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_skyColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_cloudColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_brickColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_waveData: ShaderVariable = {\r\n        type: EVariableType.STRUCTURE,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_windMatrix: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_bumpMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_bumpMap1Sampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_bumpMap2Sampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_bumpMap3Sampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_levelData: ShaderVariable = {\r\n        type: EVariableType.STRUCTURE,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_mVec4_0: ShaderVariable = {\r\n        type: EVariableType.FLOAT_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n\r\n    public static a_mVec4_1: ShaderVariable = {\r\n        type: EVariableType.FLOAT_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_mVec4_2: ShaderVariable = {\r\n        type: EVariableType.FLOAT_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_mVec4_3: ShaderVariable = {\r\n        type: EVariableType.FLOAT_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_normalVec4_0: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_normalVec4_1: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_normalVec4_2: ShaderVariable = {\r\n        type: EVariableType.FLOAT_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_isRenderListEmpty: ShaderVariable = {\r\n        type: EVariableType.NUMBER_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_isReflectionRenderListEmpty: ShaderVariable = {\r\n        type: EVariableType.NUMBER_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_isRefractionRenderListEmpty: ShaderVariable = {\r\n        type: EVariableType.NUMBER_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_bitmapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_page: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_pageSampler2Ds: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_ARRAY,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_mixMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMap1RepeatRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMap2RepeatRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_diffuseMap3RepeatRegion: ShaderVariable = {\r\n        type: EVariableType.VECTOR_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_grassMapDatas: ShaderVariable = {\r\n        type: EVariableType.STRUCTURES,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_quadIndex: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_grassMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_windData: ShaderVariable = {\r\n        type: EVariableType.STRUCTURES,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_vertexIndex: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_grassRangeWidth: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_grassRangeHeight: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_terrainRangeWidth: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_terrainRangeHeight: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_terrainMinHeight: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_terrainMaxHeight: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_terrainSubdivisions: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_terrainScaleY: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_terrainPositionY: ShaderVariable = {\r\n        type: EVariableType.FLOAT_1,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_heightMapSampler: ShaderVariable = {\r\n        type: EVariableType.SAMPLER_2D,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_lightColor: ShaderVariable = {\r\n        type: EVariableType.VECTOR_3,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_jointIndice: ShaderVariable = {\r\n        type: EVariableType.FLOAT_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static a_jointWeight: ShaderVariable = {\r\n        type: EVariableType.FLOAT_4,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n\r\n    public static u_jointMatrices: ShaderVariable = {\r\n        type: EVariableType.FLOAT_MAT4_ARRAY,\r\n        value: EVariableCategory.ENGINE\r\n    };\r\n}\r\n\r\nexport type ShaderVariable = {\r\n    type: EVariableType;\r\n    value: any\r\n}","import { ShaderLib } from \"./ShaderLib\";\r\nimport { EngineShader } from \"../shader/EngineShader\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { ShaderVariable, VariableLib } from \"../variable/VariableLib\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { virtual } from \"../../../definition/typescript/decorator/virtual\";\r\nimport { RenderCommand } from \"../../command/RenderCommand\";\r\nimport { Material } from \"../../../material/Material\";\r\nimport { Program } from \"../../program/Program\";\r\nimport { EVariableType } from \"../variable/EVariableType\";\r\nimport { requireCheck, assert, it } from \"../../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../../../utils/Log\";\r\nimport { GLSLChunk, empty } from \"../chunk/ShaderChunk\";\r\nimport { JudgeUtils } from \"../../../utils/JudgeUtils\";\r\nimport expect from \"wonder-expect.js\";\r\nimport { PathUtils } from \"wonder-commonlib/dist/es2015/utils/PathUtils\";\r\n// import { SourceDefine } from \"../sourceBuilder/ShaderSourceBuilder\";\r\n\r\nexport abstract class EngineShaderLib extends ShaderLib {\r\n    public shader: EngineShader;\r\n\r\n    public abstract vsChunk: GLSLChunk;\r\n    public abstract fsChunk: GLSLChunk;\r\n\r\n    public attributes: Hash<ShaderVariable> = Hash.create<ShaderVariable>();\r\n    public uniforms: Hash<ShaderVariable> = Hash.create<ShaderVariable>();\r\n    public vsSourceTop: string = \"\";\r\n    public vsSourceDefine: string = \"\";\r\n    public vsSourceVarDeclare: string = \"\";\r\n    public vsSourceFuncDeclare: string = \"\";\r\n    public vsSourceFuncDefine: string = \"\";\r\n    public vsSourceBody: string = \"\";\r\n    public vsSource: string = null;\r\n\r\n    public fsSourceTop: string = \"\";\r\n    public fsSourceDefine: string = \"\";\r\n    public fsSourceVarDeclare: string = \"\";\r\n    public fsSourceFuncDeclare: string = \"\";\r\n    public fsSourceFuncDefine: string = \"\";\r\n    public fsSourceBody: string = \"\";\r\n    public fsSource: string = null;\r\n    public vsSourceDefineList: Collection<any> = Collection.create<any>();\r\n    public fsSourceDefineList: Collection<any> = Collection.create<any>();\r\n    public vsSourceExtensionList: Collection<string> = Collection.create<string>();\r\n    public fsSourceExtensionList: Collection<string> = Collection.create<string>();\r\n\r\n    @virtual\r\n    public setShaderDefinition(cmd: RenderCommand, material: Material) {\r\n        var vs = null,\r\n            fs = null;\r\n\r\n        this._clearShaderDefinition();\r\n\r\n        vs = this.getVsChunk();\r\n        fs = this.getFsChunk();\r\n\r\n        vs && this.setVsSource(vs);\r\n        fs && this.setFsSource(fs);\r\n    }\r\n\r\n    protected sendAttributeBuffer(program: Program, name: string, data: any) {\r\n        program.sendAttributeBuffer(name, EVariableType.BUFFER, data);\r\n    }\r\n\r\n    @requireCheck(function(program: Program, name: string, data: any) {\r\n        assert(!!VariableLib[name], `${name} should exist in VariableLib`);\r\n    })\r\n    protected sendUniformData(program: Program, name: string, data: any) {\r\n        program.sendUniformData(name, VariableLib[name].type, data);\r\n    }\r\n\r\n    protected getVsChunk();\r\n    protected getVsChunk(chunk: GLSLChunk);\r\n\r\n    protected getVsChunk(...args) {\r\n        var chunk = args.length === 0 ? this.vsChunk : args[0];\r\n\r\n        return this._getChunk(chunk, EShaderLibType.vs);\r\n    }\r\n\r\n    protected getFsChunk();\r\n    protected getFsChunk(chunk: GLSLChunk);\r\n\r\n    protected getFsChunk(...args) {\r\n        var chunk = args.length === 0 ? this.fsChunk : args[0];\r\n\r\n        return this._getChunk(chunk, EShaderLibType.fs);\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        assert(this.vsSource === null, Log.info.FUNC_SHOULD(\"vsSource\", \"be null\"));\r\n    })\r\n    protected setVsSource(vs: GLSLChunk | string, operator: string = \"=\") {\r\n        if (JudgeUtils.isString(vs)) {\r\n            this.vsSource = <string>vs;\r\n        }\r\n        else {\r\n            this._setSource(vs, EShaderLibType.vs, operator);\r\n        }\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        assert(this.fsSource === null, Log.info.FUNC_SHOULD(\"fsSource\", \"be null\"));\r\n    })\r\n    protected setFsSource(fs: GLSLChunk | string, operator: string = \"=\") {\r\n        if (JudgeUtils.isString(fs)) {\r\n            this.fsSource = <string>fs;\r\n        }\r\n        else {\r\n            this._setSource(fs, EShaderLibType.fs, operator);\r\n        }\r\n    }\r\n\r\n    protected addAttributeVariable(variableArr: Array<string>) {\r\n        this._addVariable(this.attributes, variableArr);\r\n    }\r\n\r\n    protected addUniformVariable(variableArr: Array<string>) {\r\n        this._addVariable(this.uniforms, variableArr);\r\n    }\r\n\r\n    @requireCheck(function(target: Hash<ShaderVariable>, variableArr: Array<string>) {\r\n        variableArr.forEach((variable: string) => {\r\n            it(\"should exist in VariableLib\", function() {\r\n                expect(VariableLib[variable]).exist;\r\n            });\r\n        });\r\n    })\r\n    private _addVariable(target: Hash<ShaderVariable>, variableArr: Array<string>) {\r\n        variableArr.forEach((variable: string) => {\r\n            assert(VariableLib[variable], Log.info.FUNC_SHOULD(variable, \"exist in VariableLib\"));\r\n\r\n            target.addChild(variable, VariableLib[variable]);\r\n        });\r\n    }\r\n\r\n    private _clearShaderDefinition() {\r\n        this.attributes.removeAllChildren();\r\n        this.uniforms.removeAllChildren();\r\n        this.vsSourceDefineList.removeAllChildren();\r\n        this.fsSourceDefineList.removeAllChildren();\r\n        this.vsSourceExtensionList.removeAllChildren();\r\n        this.fsSourceExtensionList.removeAllChildren();\r\n\r\n        this.vsSourceTop = \"\";\r\n        this.vsSourceDefine = \"\";\r\n        this.vsSourceVarDeclare = \"\";\r\n        this.vsSourceFuncDeclare = \"\";\r\n        this.vsSourceFuncDefine = \"\";\r\n        this.vsSourceBody = \"\";\r\n        this.vsSource = null;\r\n\r\n        this.fsSourceTop = \"\";\r\n        this.fsSourceDefine = \"\";\r\n        this.fsSourceVarDeclare = \"\";\r\n        this.fsSourceFuncDeclare = \"\";\r\n        this.fsSourceFuncDefine = \"\";\r\n        this.fsSourceBody = \"\";\r\n        this.fsSource = null;\r\n    }\r\n\r\n    private _getChunk(chunk: GLSLChunk | null, sourceType: EShaderLibType) {\r\n        var key = null;\r\n\r\n        if (chunk === null) {\r\n            return empty;\r\n        }\r\n\r\n        return chunk;\r\n    }\r\n\r\n    private _setSource(chunk: GLSLChunk, sourceType: EShaderLibType, operator: string) {\r\n        if (!chunk) {\r\n            return;\r\n        }\r\n\r\n        switch (operator) {\r\n            case \"+\":\r\n                this[`${sourceType}SourceTop`] += chunk.top;\r\n                this[`${sourceType}SourceDefine`] += chunk.define;\r\n                this[`${sourceType}SourceVarDeclare`] += chunk.varDeclare;\r\n                this[`${sourceType}SourceFuncDeclare`] += chunk.funcDeclare;\r\n                this[`${sourceType}SourceFuncDefine`] += chunk.funcDefine;\r\n                this[`${sourceType}SourceBody`] += chunk.body;\r\n                break;\r\n            case \"=\":\r\n                this[`${sourceType}SourceTop`] = chunk.top;\r\n                this[`${sourceType}SourceDefine`] = chunk.define;\r\n                this[`${sourceType}SourceVarDeclare`] = chunk.varDeclare;\r\n                this[`${sourceType}SourceFuncDeclare`] = chunk.funcDeclare;\r\n                this[`${sourceType}SourceFuncDefine`] = chunk.funcDefine;\r\n                this[`${sourceType}SourceBody`] = chunk.body;\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_INVALID(\"opertor:\", operator));\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\nenum EShaderLibType {\r\n    vs = <any>\"vs\",\r\n    fs = <any>\"fs\"\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { EngineShaderLib } from \"../EngineShaderLib\";\r\nimport { Program } from \"../../../program/Program\";\r\nimport { QuadCommand } from \"../../../command/QuadCommand\";\r\nimport { EngineMaterial } from \"../../../../material/EngineMaterial\";\r\nimport { common_vertex, common_fragment, GLSLChunk, common_define, common_function } from \"../../chunk/ShaderChunk\";\r\n\r\n@registerClass(\"CommonShaderLib\")\r\nexport class CommonShaderLib extends EngineShaderLib {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public vsChunk: GLSLChunk = common_vertex;\r\n    public fsChunk: GLSLChunk = common_fragment;\r\n\r\n    public sendShaderVariables(program: Program, cmd: QuadCommand, material: EngineMaterial) {\r\n        this.sendUniformData(program, \"u_vMatrix\", cmd.vMatrix);\r\n        this.sendUniformData(program, \"u_pMatrix\", cmd.pMatrix);\r\n        this.sendUniformData(program, \"u_mMatrix\", cmd.mMatrix);\r\n    }\r\n\r\n    public setShaderDefinition(cmd: QuadCommand, material: EngineMaterial) {\r\n        super.setShaderDefinition(cmd, material);\r\n\r\n        //todo use VariableLib.xxx?\r\n        // this.addUniformVariable([\"u_vMatrix\", \"u_pMatrix\"]);\r\n        this.addUniformVariable([\"u_vMatrix\", \"u_pMatrix\", \"u_mMatrix\"]);\r\n\r\n        this.vsSourceDefine = common_define.define + common_vertex.define;\r\n        this.vsSourceFuncDefine = common_function.funcDefine + common_vertex.funcDefine;\r\n\r\n        this.fsSourceDefine = common_define.define + common_fragment.define;\r\n        this.fsSourceFuncDefine = common_function.funcDefine + common_fragment.funcDefine;\r\n    }\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { EngineShaderLib } from \"../EngineShaderLib\";\r\nimport { Program } from \"../../../program/Program\";\r\nimport { QuadCommand } from \"../../../command/QuadCommand\";\r\nimport { EngineMaterial } from \"../../../../material/EngineMaterial\";\r\nimport { ArrayBuffer } from \"../../../buffer/ArrayBuffer\";\r\nimport { EBufferDataType } from \"../../../buffer/EBufferDataType\";\r\nimport { GLSLChunk } from \"../../chunk/ShaderChunk\";\r\n\r\n@registerClass(\"VerticeCommonShaderLib\")\r\nexport class VerticeCommonShaderLib extends EngineShaderLib {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public vsChunk: GLSLChunk = null;\r\n    public fsChunk: GLSLChunk = null;\r\n\r\n    public sendShaderVariables(program: Program, cmd: QuadCommand, material: EngineMaterial) {\r\n        this._sendAttributeVariables(program, cmd);\r\n    }\r\n\r\n    public setShaderDefinition(cmd: QuadCommand, material: EngineMaterial) {\r\n        super.setShaderDefinition(cmd, material);\r\n\r\n        this.addAttributeVariable([\"a_position\"]);\r\n    }\r\n\r\n    private _sendAttributeVariables(program: Program, cmd: QuadCommand) {\r\n        var verticeBuffer = <ArrayBuffer>cmd.buffers.getChild(EBufferDataType.VERTICE);\r\n\r\n        if (!verticeBuffer) {\r\n            return;\r\n        }\r\n\r\n        this.sendAttributeBuffer(program, \"a_position\", verticeBuffer);\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Geometry } from \"../component/geometry/Geometry\";\r\nimport { Shader } from \"../renderer/shader/shader/Shader\";\r\nimport { VerticeCommonShaderLib } from \"../renderer/shader/lib/common/VerticeCommonShaderLib\";\r\n\r\n@registerClass(\"ShaderLibUtils\")\r\nexport class ShaderLibUtils {\r\n    public static addVerticeShaderLib(geometry: Geometry, shader: Shader) {\r\n        // if(GlobalGeometryUtils.hasMorphData(geometry)){\r\n        //     let CommonMorphShaderLib = ClassUtils.getClass(\"CommonMorphShaderLib\"),\r\n        //         VerticeMorphShaderLib = ClassUtils.getClass(\"VerticeMorphShaderLib\");\r\n        //\r\n        //     shader.addLib(CommonMorphShaderLib.create());\r\n        //     shader.addLib(VerticeMorphShaderLib.create());\r\n        // }\r\n        // else if(GlobalGeometryUtils.hasSkinSkeletonData(geometry)){\r\n        //     let VerticeSkinSkeletonShaderLib = ClassUtils.getClass(\"VerticeSkinSkeletonShaderLib\");\r\n        //\r\n        //     shader.addLib(VerticeCommonShaderLib.create());\r\n        //     shader.addLib(VerticeSkinSkeletonShaderLib.create());\r\n        // }\r\n        // else{\r\n        shader.addLib(VerticeCommonShaderLib.create());\r\n        // }\r\n    }\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { EngineShaderLib } from \"../EngineShaderLib\";\r\nimport { Program } from \"../../../program/Program\";\r\nimport { QuadCommand } from \"../../../command/QuadCommand\";\r\nimport { EngineMaterial } from \"../../../../material/EngineMaterial\";\r\nimport { GLSLChunk, end_basic_fragment } from \"../../chunk/ShaderChunk\";\r\n\r\n@registerClass(\"EndShaderLib\")\r\nexport class EndShaderLib extends EngineShaderLib {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public vsChunk: GLSLChunk = null;\r\n    public fsChunk: GLSLChunk = end_basic_fragment;\r\n\r\n    public sendShaderVariables(program: Program, cmd: QuadCommand, material: EngineMaterial) {\r\n        // program.sendAllBufferData(cmd.vaoManager);\r\n        program.sendAllBufferData();\r\n    }\r\n}","import { Material } from \"./Material\";\r\nimport { virtual } from \"../definition/typescript/decorator/virtual\";\r\nimport { Shader } from \"../renderer/shader/shader/Shader\";\r\nimport { CommonShader } from \"../renderer/shader/shader/CommonShader\";\r\nimport { CommonShaderLib } from \"../renderer/shader/lib/common/CommonShaderLib\";\r\nimport { ShaderLibUtils } from \"../utils/ShaderLibUtils\";\r\nimport { ShaderLib } from \"../renderer/shader/lib/ShaderLib\";\r\nimport { EndShaderLib } from \"../renderer/shader/lib/common/EndShaderLib\";\r\n\r\nexport abstract class EngineMaterial extends Material {\r\n    // @cloneAttributeAsBasicType()\r\n    // public refractionRatio:number = 0;\r\n    // @cloneAttributeAsBasicType()\r\n    // public reflectivity:number = null;\r\n    // @cloneAttributeAsBasicType()\r\n    // public mapCombineMode:ETextureCombineMode = ETextureCombineMode.MIX;\r\n    // @cloneAttributeAsBasicType()\r\n    // public mapMixRatio:number = 0.5;\r\n\r\n    public init() {\r\n        this._addTopShaderLib();\r\n        this.addShaderLib();\r\n        this._addEndShaderLib();\r\n\r\n        super.init();\r\n    }\r\n\r\n    @virtual\r\n    protected addShaderLib() {\r\n    }\r\n\r\n    // protected addNormalShaderLib(){\r\n    //     // var NormalMorphShaderLib = ClassUtils.getClass(\"NormalMorphShaderLib\");\r\n    //     //\r\n    //     // if(GlobalGeometryUtils.hasMorphData(this.geometry)\r\n    //     //     && !this.shader.hasLib(NormalMorphShaderLib)){\r\n    //     //     this._addShaderLibToTop(NormalMorphShaderLib.create());\r\n    //     // }\r\n    //     // else if(!this.shader.hasLib(NormalCommonShaderLib)){\r\n    //     //     this._addShaderLibToTop(NormalCommonShaderLib.create());\r\n    //     // }\r\n    // }\r\n\r\n    protected createShader(): Shader {\r\n        return CommonShader.create();\r\n    }\r\n\r\n    private _addTopShaderLib() {\r\n        this.shader.addLib(CommonShaderLib.create());\r\n\r\n        // InstanceUtils.addModelMatrixShaderLib(this.shader, this.geometry.entityObject);\r\n\r\n        ShaderLibUtils.addVerticeShaderLib(this.geometry, this.shader);\r\n    }\r\n\r\n    private _addShaderLibToTop(lib: ShaderLib) {\r\n        this.shader.addShaderLibToTop(lib);\r\n    }\r\n\r\n    private _addEndShaderLib() {\r\n        this.shader.addLib(EndShaderLib.create());\r\n    }\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { EngineShaderLib } from \"../EngineShaderLib\";\r\nimport { Program } from \"../../../program/Program\";\r\nimport { QuadCommand } from \"../../../command/QuadCommand\";\r\nimport { BasicMaterial } from \"../../../../material/BasicMaterial\";\r\nimport { GLSLChunk, basic_materialColor_fragment } from \"../../chunk/ShaderChunk\";\r\n\r\n@registerClass(\"BasicMaterialColorShaderLib\")\r\nexport class BasicMaterialColorShaderLib extends EngineShaderLib {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public vsChunk: GLSLChunk = null;\r\n    public fsChunk: GLSLChunk = basic_materialColor_fragment;\r\n\r\n    public sendShaderVariables(program: Program, cmd: QuadCommand, material: BasicMaterial) {\r\n        this.sendUniformData(program, \"u_color\", material.color.toVector3());\r\n    }\r\n\r\n    public setShaderDefinition(cmd: QuadCommand, material: BasicMaterial) {\r\n        super.setShaderDefinition(cmd, material);\r\n\r\n        this.addUniformVariable([\"u_color\"]);\r\n    }\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { EngineShaderLib } from \"../EngineShaderLib\";\r\nimport { Program } from \"../../../program/Program\";\r\nimport { QuadCommand } from \"../../../command/QuadCommand\";\r\nimport { BasicMaterial } from \"../../../../material/BasicMaterial\";\r\nimport { setPos_mvp } from \"../../snippet/ShaderSnippet\";\r\nimport { GLSLChunk } from \"../../chunk/ShaderChunk\";\r\n\r\n@registerClass(\"BasicShaderLib\")\r\nexport class BasicShaderLib extends EngineShaderLib {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public vsChunk: GLSLChunk = null;\r\n    public fsChunk: GLSLChunk = null;\r\n\r\n    public sendShaderVariables(program: Program, cmd: QuadCommand, material: BasicMaterial) {\r\n        this.sendUniformData(program, \"u_opacity\", material.opacity);\r\n    }\r\n\r\n    public setShaderDefinition(cmd: QuadCommand, material: BasicMaterial) {\r\n        super.setShaderDefinition(cmd, material);\r\n\r\n        this.addUniformVariable([\"u_opacity\"]);\r\n\r\n        this.vsSourceBody = setPos_mvp;\r\n    }\r\n}","import { registerClass } from \"../../../../definition/typescript/decorator/registerClass\";\r\nimport { EngineShaderLib } from \"../EngineShaderLib\";\r\nimport { QuadCommand } from \"../../../command/QuadCommand\";\r\nimport { StandardBasicMaterial } from \"../../../../material/StandardBasicMaterial\";\r\nimport { GLSLChunk, end_basic_fragment } from \"../../chunk/ShaderChunk\";\r\n\r\n@registerClass(\"EndBasicShaderLib\")\r\nexport class EndBasicShaderLib extends EngineShaderLib {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public vsChunk: GLSLChunk = null;\r\n    public fsChunk: GLSLChunk = end_basic_fragment;\r\n\r\n    public setShaderDefinition(cmd: QuadCommand, material: StandardBasicMaterial) {\r\n        super.setShaderDefinition(cmd, material);\r\n\r\n        if (material.alphaTest !== null) {\r\n            this.fsSourceBody += `if (gl_FragColor.a < ${material.alphaTest}){\r\n    discard;\r\n}\\n`;\r\n        }\r\n    }\r\n}","import { EngineMaterial } from \"./EngineMaterial\";\r\nimport { cloneAttributeAsBasicType } from \"../definition/typescript/decorator/clone\";\r\nimport { virtual } from \"../definition/typescript/decorator/virtual\";\r\nimport { BasicMaterialColorShaderLib } from \"../renderer/shader/lib/basic/BasicMaterialColorShaderLib\";\r\nimport { BasicShaderLib } from \"../renderer/shader/lib/basic/BasicShaderLib\";\r\nimport { EndBasicShaderLib } from \"../renderer/shader/lib/basic/EndBasicShaderLib\";\r\n\r\nexport abstract class StandardBasicMaterial extends EngineMaterial {\r\n    // @ensureGetter(function(mapList:wdCb.Collection<Texture>){\r\n    //     assert(mapList.getCount() <= 2, wdCb.Log.info.FUNC_SUPPORT(\"only\", \"map.count <= 2\"));\r\n    // })\r\n    // @cloneAttributeAsCustomType(function(source:StandardBasicMaterial, target:StandardBasicMaterial, memberName:string){\r\n    //     source[memberName].forEach((map:BasicTexture|ProceduralTexture) => {\r\n    //         target.mapManager.addMap(map.clone());\r\n    //     });\r\n    // })\r\n    // get mapList(){\r\n    //     return this.mapManager.getMapList();\r\n    // }\r\n    //\r\n    // private _map:Texture|TextureAsset|Array<Texture>|Array<TextureAsset> = null;\r\n    // @requireSetter(function(map:Texture|TextureAsset|Array<Texture>|Array<TextureAsset>){\r\n    //     if(map instanceof Texture || map instanceof TextureAsset){\r\n    //     }\r\n    //     else{\r\n    //         let mapArr:Array<any> = map;\r\n    //\r\n    //         it(\"map should be array\", () => {\r\n    //             chai.expect(mapArr).be.a(\"array\");\r\n    //         });\r\n    //         it(\"map.count should < 3\", () => {\r\n    //             chai.expect(mapArr.length).lessThan(3);\r\n    //         });\r\n    //     }\r\n    // })\r\n    // set map(map:Texture|TextureAsset|Array<Texture>|Array<TextureAsset>){\r\n    //     this._map = map;\r\n    //\r\n    //     this._addMap();\r\n    // }\r\n    // get map(){\r\n    //     return this.mapList.getChild(0);\r\n    // }\r\n\r\n    @cloneAttributeAsBasicType()\r\n    public opacity: number = 1.0;\r\n    @cloneAttributeAsBasicType()\r\n    public alphaTest: number = null;\r\n\r\n    @virtual\r\n    protected addExtendShaderLib() {\r\n    }\r\n\r\n    protected addShaderLib() {\r\n        var envMap = null;\r\n\r\n        // if(this.geometry.hasColors()){\r\n        //     this.shader.addLib(BasicVertexColorShaderLib.create());\r\n        // }\r\n        // else{\r\n        this.shader.addLib(BasicMaterialColorShaderLib.create());\r\n        // }\r\n\r\n        this.shader.addLib(BasicShaderLib.create());\r\n\r\n        // this._setMapShaderLib();\r\n\r\n        // envMap = this.envMap;\r\n        // if(envMap){\r\n        //     InstanceUtils.addNormalModelMatrixShaderLib(this.shader, this.geometry.entityObject);\r\n        //\r\n        //     this._setEnvMapShaderLib(envMap);\r\n        // }\r\n\r\n        this.addExtendShaderLib();\r\n\r\n        this.shader.addLib(EndBasicShaderLib.create());\r\n    }\r\n\r\n    // private _setMapShaderLib(){\r\n    //     var mapManager = this.mapManager,\r\n    //         mapCount = mapManager.getMapCount();\r\n    //\r\n    //     if(mapCount > 0){\r\n    //         if(mapCount > 1){\r\n    //             this.shader.addLib(MultiMapShaderLib.create());\r\n    //         }\r\n    //         else{\r\n    //             this.shader.addLib(BasicMapShaderLib.create());\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n    // private _setEnvMapShaderLib(envMap:CubemapTexture){\r\n    //     this.addNormalShaderLib();\r\n    //\r\n    //     this.shader.addLib(CommonEnvMapShaderLib.create());\r\n    //\r\n    //     switch (envMap.mode){\r\n    //         case EEnvMapMode.BASIC:\r\n    //             this.shader.addLib(BasicForBasicEnvMapShaderLib.create());\r\n    //             break;\r\n    //         case EEnvMapMode.REFLECTION:\r\n    //             this.shader.addLib(ReflectionForBasicEnvMapShaderLib.create());\r\n    //             break;\r\n    //         case EEnvMapMode.REFRACTION:\r\n    //             this.shader.addLib(RefractionForBasicEnvMapShaderLib.create());\r\n    //             break;\r\n    //         case EEnvMapMode.FRESNEL:\r\n    //             this.shader.addLib(FresnelForBasicEnvMapShaderLib.create());\r\n    //             break;\r\n    //         default:\r\n    //             Log.error(true, Log.info.FUNC_INVALID(\"EEnvMapMode\"));\r\n    //             break;\r\n    //     }\r\n    // }\r\n\r\n    // private _addMap(){\r\n    //     var map = this._map;\r\n    //\r\n    //     if(map === null){\r\n    //         return;\r\n    //     }\r\n    //\r\n    //     if(map instanceof Texture || map instanceof TextureAsset){\r\n    //         this.mapManager.addMap(<Texture&TextureAsset>map);\r\n    //     }\r\n    //     else{\r\n    //         for(let m of map){\r\n    //             this.mapManager.addMap(<Texture&TextureAsset>m);\r\n    //         }\r\n    //     }\r\n    // }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { StandardBasicMaterial } from \"./StandardBasicMaterial\";\r\n\r\n@registerClass(\"BasicMaterial\")\r\nexport class BasicMaterial extends StandardBasicMaterial {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        obj.initWhenCreate();\r\n\r\n        return obj;\r\n    }\r\n\r\n    // public getTextureForRenderSort():Texture{\r\n    //     // return this.mapList.getChild(0);\r\n    //     return null;\r\n    // }\r\n}","export enum EVariableSemantic {\r\n    POSITION = <any>\"POSITION\",\r\n    NORMAL = <any>\"NORMAL\",\r\n    TEXCOORD = <any>\"TEXCOORD\",\r\n    TANGENT = <any>\"TANGENT\",\r\n    COLOR = <any>\"COLOR\",\r\n\r\n    MODEL = <any>\"MODEL\",\r\n    VIEW = <any>\"VIEW\",\r\n    PROJECTION = <any>\"PROJECTION\",\r\n    MODEL_VIEW = <any>\"MODEL_VIEW\",\r\n    MODEL_VIEW_PROJECTION = <any>\"MODEL_VIEW_PROJECTION\",\r\n    MODEL_INVERSE = <any>\"MODEL_INVERSE\",\r\n    VIEW_INVERSE = <any>\"VIEW_INVERSE\",\r\n    PROJECTION_INVERSE = <any>\"PROJECTION_INVERSE\",\r\n    MODEL_VIEW_INVERSE = <any>\"MODEL_VIEW_INVERSE\",\r\n    MODEL_VIEW_PROJECTION_INVERSE = <any>\"MODEL_VIEW_PROJECTION_INVERSE\",\r\n    MODEL_INVERSE_TRANSPOSE = <any>\"MODEL_INVERSE_TRANSPOSE\",\r\n    MODEL_VIEW_INVERSE_TRANSPOSE = <any>\"MODEL_VIEW_INVERSE_TRANSPOSE\",\r\n    VIEWPORT = <any>\"VIEWPORT\"\r\n\r\n    //\"LOCAL\" (FLOAT_MAT4), \"MODEL\" (FLOAT_MAT4), \"VIEW\" (FLOAT_MAT4), \"PROJECTION\" (FLOAT_MAT4), \"MODELVIEW\" (FLOAT_MAT4), \"MODELVIEWPROJECTION\" (FLOAT_MAT4), \"MODELINVERSE\" (FLOAT_MAT4), \"VIEWINVERSE\" (FLOAT_MAT4), \"PROJECTIONINVERSE\" (FLOAT_MAT4), \"MODELVIEWINVERSE\" (FLOAT_MAT4), \"MODELVIEWPROJECTIONINVERSE\" (FLOAT_MAT4), \"MODELINVERSETRANSPOSE\" (FLOAT_MAT3), \"MODELVIEWINVERSETRANSPOSE\" (FLOAT_MAT3), \"VIEWPORT\" (FLOAT_VEC4).\r\n}","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { ensure, it } from \"../../../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\n\r\nconst _table = Hash.create<string>();\r\n\r\n_table.addChild(\"lightMap\", \"u_lightMapSampler\");\r\n_table.addChild(\"diffuseMap\", \"u_diffuseMapSampler\");\r\n_table.addChild(\"diffuseMap1\", \"u_diffuseMap1Sampler\");\r\n_table.addChild(\"diffuseMap2\", \"u_diffuseMap2Sampler\");\r\n_table.addChild(\"diffuseMap3\", \"u_diffuseMap3Sampler\");\r\n_table.addChild(\"specularMap\", \"u_specularMapSampler\");\r\n_table.addChild(\"emissionMap\", \"u_emissionMapSampler\");\r\n_table.addChild(\"normalMap\", \"u_normalMapSampler\");\r\n_table.addChild(\"reflectionMap\", \"u_reflectionMapSampler\");\r\n_table.addChild(\"refractionMap\", \"u_refractionMapSampler\");\r\n_table.addChild(\"bitmap\", \"u_bitmapSampler\");\r\n\r\n_table.addChild(\"bumpMap\", \"u_bumpMapSampler\");\r\n_table.addChild(\"bumpMap1\", \"u_bumpMap1Sampler\");\r\n_table.addChild(\"bumpMap2\", \"u_bumpMap2Sampler\");\r\n_table.addChild(\"bumpMap3\", \"u_bumpMap3Sampler\");\r\n\r\n_table.addChild(\"mixMap\", \"u_mixMapSampler\");\r\n\r\n_table.addChild(\"grassMap\", \"u_grassMapSampler\");\r\n\r\n_table.addChild(\"heightMap\", \"u_heightMapSampler\");\r\n\r\n\r\n@registerClass(\"VariableNameTable\")\r\nexport class VariableNameTable {\r\n    @ensure(function(variableName: string) {\r\n        it(\"variableName should in VariableNameTable\", () => {\r\n            expect(variableName).exist;\r\n        });\r\n    })\r\n    public static getVariableName(name: string) {\r\n        return _table.getChild(name);\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { requireCheck, it, ensure } from \"../definition/typescript/decorator/contract\";\r\nimport expect from \"wonder-expect.js\";\r\n\r\n@registerClass(\"MathUtils\")\r\nexport class MathUtils {\r\n    public static clamp(num: number, below: number, up: number): number {\r\n        if (num < below) {\r\n            return below;\r\n        }\r\n        else if (num > up) {\r\n            return up;\r\n        }\r\n\r\n        return num;\r\n    }\r\n\r\n    public static bigThan(num: number, below: number) {\r\n        return num < below ? below : num;\r\n    }\r\n\r\n    public static generateZeroToOne() {\r\n        return Math.random();\r\n    }\r\n\r\n    @requireCheck(function(min: number, max: number) {\r\n        it(\"min should <= max\", () => {\r\n            expect(min).lte(max);\r\n        });\r\n    })\r\n    public static generateMinToMax(min: number, max: number) {\r\n        return Math.random() * (max + 1 - min) + min;\r\n    }\r\n\r\n    public static generateInteger(min: number, max: number) {\r\n        return Math.floor(this.generateMinToMax(min, max));\r\n    }\r\n\r\n    @ensure(function(val) {\r\n        it(\"result should >= 0\", () => {\r\n            expect(val).gte(0);\r\n        });\r\n    })\r\n    public static mod(a: number, b: number) {\r\n        var n = Math.floor(a / b);\r\n\r\n        a -= n * b;\r\n\r\n        if (a < 0) {\r\n            a += b;\r\n        }\r\n\r\n        return a;\r\n    }\r\n\r\n    @requireCheck(function(a: number, b: number) {\r\n        it(\"a,b should >= 0\", () => {\r\n            expect(a).gte(0);\r\n            expect(b).gte(0);\r\n        });\r\n    })\r\n    @ensure(function(val) {\r\n        it(\"result should >= 0\", () => {\r\n            expect(val).gte(0);\r\n        });\r\n    })\r\n    public static maxFloorIntegralMultiple(a: number, b: number) {\r\n        if (b == 0) {\r\n            return a;\r\n        }\r\n\r\n        if (a < b) {\r\n            return 0;\r\n        }\r\n\r\n        return Math.floor(a / b) * b;\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { TimeController } from \"./TimeController\";\r\nimport { Director } from \"../../core/Director\";\r\nimport { root } from \"../../definition/Variable\";\r\n\r\n@registerClass(\"CommonTimeController\")\r\nexport class CommonTimeController extends TimeController {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    protected getNow() {\r\n        if (Director.getInstance().isTimeChange) {\r\n            return Director.getInstance().elapsed;\r\n        }\r\n\r\n        return root.performance.now();\r\n    }\r\n}"],"names":["Log","Log$","this","expect","JudgeUtils","JudgeUtils$","CloneType","CloneUtils","Vector2","Matrix3","Vector4","Vector3","Quaternion","Matrix4","index","requireCheck","assert","root","registerClass","Entity","ETransformState","EEngineEvent","EventManager","EDrawMode","ViewWebGL","RectRegion","EScreenSize","DeviceManager","ESide","EPolygonOffsetMode","EDepthFunction","EBlendFunc","EBlendEquation","EBlendType","ECanvasType","EBufferUsage","Buffer","EBufferType","BufferTable","BufferTableKey","GPUDetector","EGPUPrecision","ElementBuffer","EBufferDataType","ArrayBuffer","BufferDataTable","BasicBufferContainer","BasicGeometryData","SortUtils","ComponentInitOrderTable","ComponentManager","EntityObjectManager","EEventType","define","EEventName","EventNameHandler","chrome","firefox","_table","EventTable","DomEventListenerMap","DomEventRegister","msie","version","Point","EMouseButton","MouseEvent","mobile","MouseEventHandler","TouchEvent","TouchEventHandler","KeyboardEvent","KeyboardEventHandler","CustomEventListenerMap","CustomEventRegister","CustomEventHandler","EventHandlerFactory","DomEventBinder","CustomEventBinder","EventBinderFactory","CustomEvent","DomEventDispatcher","EventUtils","EEventPhase","CustomEventDispatcher","EventDispatcherFactory","BasicCameraController","PerspectiveCamera","Face3","GeometryUtils","BoxGeometry","BasicState","GlUtils","SingleDrawCommand","MeshRenderer","ThreeDTransform","RenderUtils","GameObject","GameObjectScene","SceneDispatcher","DirectorTimeController","Color","WebGLRenderer","Director","ProgramTable","Main","MousePointEvent","TouchPointEvent","ShaderManager","ArrayUtils","ArrayUtils$","GLSLDataSender","EVariableType","Program","EVariableCategory","BufferUtils","empty","VariableTypeTable","EngineShaderSourceBuilder","CommonShader","VariableLib","CommonShaderLib","VerticeCommonShaderLib","ShaderLibUtils","EndShaderLib","BasicMaterialColorShaderLib","BasicShaderLib","EndBasicShaderLib","BasicMaterial","EVariableSemantic","VariableNameTable","MathUtils","CommonTimeController"],"mappings":"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,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;SAErF,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;SACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;SACrD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;SACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;SACrD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;SACrD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;SACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;SACrD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;SACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;SACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;SACrD,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAA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,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,EACpD,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;SAE3D,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;SAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;SAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;SAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;SAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;SAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;SAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;SAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;SAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG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"}