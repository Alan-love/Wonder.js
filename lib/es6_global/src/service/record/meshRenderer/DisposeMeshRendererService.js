// Generated by BUCKLESCRIPT VERSION 2.1.0, PLEASE EDIT WITH CARE
'use strict';

import * as Contract$WonderLog               from "../../../../../../node_modules/wonder-log/lib/es6_global/src/Contract.js";
import * as ArrayService$Wonderjs            from "../../atom/ArrayService.js";
import * as MainStateData$Wonderjs           from "../../state/main/data/MainStateData.js";
import * as IsDebugMainService$Wonderjs      from "../../state/main/state/IsDebugMainService.js";
import * as ArrayService$WonderCommonlib     from "../../../../../../node_modules/wonder-commonlib/lib/es6_global/src/ArrayService.js";
import * as DisposeComponentService$Wonderjs from "../../primitiive/component/DisposeComponentService.js";

var _removeFromRenderArray = DisposeComponentService$Wonderjs.removeFromArray;

var _batchRemoveFromRenderArray = DisposeComponentService$Wonderjs.batchRemoveFromArray;

function isAlive(meshRenderer, param) {
  return DisposeComponentService$Wonderjs.isAlive(meshRenderer, param[/* disposedIndexArray */3]);
}

function _disposeData(meshRenderer, record) {
  return /* record */[
          /* index */record[/* index */0],
          /* renderGameObjectArray */record[/* renderGameObjectArray */1],
          /* gameObjectMap */DisposeComponentService$Wonderjs.disposeSparseMapData(meshRenderer, record[/* gameObjectMap */2]),
          /* disposedIndexArray */record[/* disposedIndexArray */3]
        ];
}

function handleDisposeComponent(meshRenderer, gameObjectUid, record) {
  Contract$WonderLog.requireCheck((function () {
          return DisposeComponentService$Wonderjs.checkComponentShouldAlive(meshRenderer, isAlive, record);
        }), IsDebugMainService$Wonderjs.getIsDebug(MainStateData$Wonderjs.stateData));
  var record$1 = _disposeData(meshRenderer, record);
  return /* record */[
          /* index */record$1[/* index */0],
          /* renderGameObjectArray */DisposeComponentService$Wonderjs.removeFromArray(gameObjectUid, record[/* renderGameObjectArray */1]),
          /* gameObjectMap */record$1[/* gameObjectMap */2],
          /* disposedIndexArray */ArrayService$Wonderjs.push(meshRenderer, record[/* disposedIndexArray */3])
        ];
}

function handleBatchDisposeComponent(meshRendererArray, isGameObjectDisposedMap, record) {
  Contract$WonderLog.requireCheck((function () {
          return DisposeComponentService$Wonderjs.checkComponentShouldAliveWithBatchDispose(meshRendererArray, isAlive, record);
        }), IsDebugMainService$Wonderjs.getIsDebug(MainStateData$Wonderjs.stateData));
  var record_000 = /* index */record[/* index */0];
  var record_001 = /* renderGameObjectArray */DisposeComponentService$Wonderjs.batchRemoveFromArray(isGameObjectDisposedMap, record[/* renderGameObjectArray */1]);
  var record_002 = /* gameObjectMap */record[/* gameObjectMap */2];
  var record_003 = /* disposedIndexArray */record[/* disposedIndexArray */3].concat(meshRendererArray);
  var record$1 = /* record */[
    record_000,
    record_001,
    record_002,
    record_003
  ];
  return ArrayService$WonderCommonlib.reduceOneParam((function (record, meshRenderer) {
                return _disposeData(meshRenderer, record);
              }), record$1, meshRendererArray);
}

export {
  _removeFromRenderArray      ,
  _batchRemoveFromRenderArray ,
  isAlive                     ,
  _disposeData                ,
  handleDisposeComponent      ,
  handleBatchDisposeComponent ,
  
}
/* Contract-WonderLog Not a pure module */
