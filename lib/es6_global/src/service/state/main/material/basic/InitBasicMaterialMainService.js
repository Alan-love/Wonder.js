// Generated by BUCKLESCRIPT VERSION 2.1.0, PLEASE EDIT WITH CARE
'use strict';

import * as JobConfigService$Wonderjs                    from "../../../../primitiive/JobConfigService.js";
import * as ReduceStateMainService$Wonderjs              from "../../array/ReduceStateMainService.js";
import * as InitMaterialMainService$Wonderjs             from "../InitMaterialMainService.js";
import * as RenderConfigMainService$Wonderjs             from "../../renderConfig/RenderConfigMainService.js";
import * as ShaderIndexBasicMaterialMainService$Wonderjs from "./ShaderIndexBasicMaterialMainService.js";

function _getShaderLibs(param) {
  var shaderName = "render_basic";
  return JobConfigService$Wonderjs.unsafeFindFirst(param[/* material_shaders */2], shaderName, (function (param) {
                  return JobConfigService$Wonderjs.filterTargetName(param[/* name */0], shaderName);
                }))[/* shader_libs */1];
}

function _getShaderTuple(materialIndex, state) {
  var shaderRecord = RenderConfigMainService$Wonderjs.getShaders(state);
  return /* tuple */[
          materialIndex,
          _getShaderLibs(shaderRecord),
          shaderRecord
        ];
}

function _getStateTuple(state) {
  var basicMaterialRecord = state[/* basicMaterialRecord */15];
  return /* tuple */[
          basicMaterialRecord[/* gameObjectMap */3],
          basicMaterialRecord[/* shaderIndexMap */1],
          state
        ];
}

function initMaterial(gl, materialIndex, state) {
  return InitMaterialMainService$Wonderjs.initMaterial(gl, _getShaderTuple(materialIndex, state), ShaderIndexBasicMaterialMainService$Wonderjs.setShaderIndex, _getStateTuple(state));
}

function initMaterials(materialIndexArr, gl, state) {
  return ReduceStateMainService$Wonderjs.reduceState((function (state, materialIndex) {
                return initMaterial(gl, materialIndex, state);
              }), state, materialIndexArr);
}

function handleInitComponent(gl, index, state) {
  return InitMaterialMainService$Wonderjs.handleInitComponent(gl, _getShaderTuple(index, state), ShaderIndexBasicMaterialMainService$Wonderjs.setShaderIndex, _getStateTuple(state));
}

function init(gl, state) {
  var basicMaterialRecord = state[/* basicMaterialRecord */15];
  return InitMaterialMainService$Wonderjs.init(gl, /* tuple */[
              basicMaterialRecord[/* index */0],
              basicMaterialRecord[/* disposedIndexArray */5]
            ], initMaterial, state);
}

export {
  _getShaderLibs      ,
  _getShaderTuple     ,
  _getStateTuple      ,
  initMaterial        ,
  initMaterials       ,
  handleInitComponent ,
  init                ,
  
}
/* JobConfigService-Wonderjs Not a pure module */
