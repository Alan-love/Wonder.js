// Generated by BUCKLESCRIPT VERSION 3.1.4, PLEASE EDIT WITH CARE

import * as BufferService$Wonderjs from "../../../../primitive/buffer/BufferService.js";
import * as BufferSettingService$Wonderjs from "../../../../record/main/setting/BufferSettingService.js";
import * as IndexComponentService$Wonderjs from "../../../../primitive/component/IndexComponentService.js";
import * as RecordBasicMaterialMainService$Wonderjs from "./RecordBasicMaterialMainService.js";
import * as TextureCountMapMaterialService$Wonderjs from "../../../../record/main/material/TextureCountMapMaterialService.js";

function _initDataWhenCreate(index, basicMaterialRecord) {
  return /* record */[
          /* index */basicMaterialRecord[/* index */0],
          /* buffer */basicMaterialRecord[/* buffer */1],
          /* shaderIndices */basicMaterialRecord[/* shaderIndices */2],
          /* colors */basicMaterialRecord[/* colors */3],
          /* textureIndices */basicMaterialRecord[/* textureIndices */4],
          /* mapUnits */basicMaterialRecord[/* mapUnits */5],
          /* textureCountMap */TextureCountMapMaterialService$Wonderjs.setCount(index, TextureCountMapMaterialService$Wonderjs.getDefaultCount(/* () */0), basicMaterialRecord[/* textureCountMap */6]),
          /* defaultColor */basicMaterialRecord[/* defaultColor */7],
          /* gameObjectMap */basicMaterialRecord[/* gameObjectMap */8],
          /* groupCountMap */basicMaterialRecord[/* groupCountMap */9],
          /* disposedIndexArray */basicMaterialRecord[/* disposedIndexArray */10],
          /* materialArrayForWorkerInit */basicMaterialRecord[/* materialArrayForWorkerInit */11]
        ];
}

function create(state) {
  var basicMaterialRecord = RecordBasicMaterialMainService$Wonderjs.getRecord(state);
  var match = IndexComponentService$Wonderjs.generateIndex(basicMaterialRecord[/* index */0], basicMaterialRecord[/* disposedIndexArray */10]);
  var index = match[0];
  var basicMaterialRecord$1 = _initDataWhenCreate(index, basicMaterialRecord);
  state[/* basicMaterialRecord */15] = /* Some */[/* record */[
      /* index */match[1],
      /* buffer */basicMaterialRecord$1[/* buffer */1],
      /* shaderIndices */basicMaterialRecord$1[/* shaderIndices */2],
      /* colors */basicMaterialRecord$1[/* colors */3],
      /* textureIndices */basicMaterialRecord$1[/* textureIndices */4],
      /* mapUnits */basicMaterialRecord$1[/* mapUnits */5],
      /* textureCountMap */basicMaterialRecord$1[/* textureCountMap */6],
      /* defaultColor */basicMaterialRecord$1[/* defaultColor */7],
      /* gameObjectMap */basicMaterialRecord$1[/* gameObjectMap */8],
      /* groupCountMap */basicMaterialRecord$1[/* groupCountMap */9],
      /* disposedIndexArray */match[2],
      /* materialArrayForWorkerInit */basicMaterialRecord$1[/* materialArrayForWorkerInit */11]
    ]];
  return BufferService$Wonderjs.checkNotExceedMaxCount(BufferSettingService$Wonderjs.getBasicMaterialCount(state[/* settingRecord */0]), /* tuple */[
              state,
              index
            ]);
}

export {
  _initDataWhenCreate ,
  create ,
  
}
/* BufferService-Wonderjs Not a pure module */
