// Generated by BUCKLESCRIPT VERSION 2.1.0, PLEASE EDIT WITH CARE
'use strict';

import * as BufferService$Wonderjs                  from "../../../../primitive/buffer/BufferService.js";
import * as BufferSettingService$Wonderjs           from "../../../../record/main/setting/BufferSettingService.js";
import * as IndexComponentService$Wonderjs          from "../../../../primitive/component/IndexComponentService.js";
import * as RecordBasicMaterialMainService$Wonderjs from "./RecordBasicMaterialMainService.js";
import * as TextureCountMapMaterialService$Wonderjs from "../../../../record/main/material/TextureCountMapMaterialService.js";

function _initDataWhenCreate(index, basicMaterialRecord) {
  var newrecord = basicMaterialRecord.slice();
  newrecord[/* textureCountMap */6] = TextureCountMapMaterialService$Wonderjs.setCount(index, TextureCountMapMaterialService$Wonderjs.getDefaultCount(/* () */0), basicMaterialRecord[/* textureCountMap */6]);
  return newrecord;
}

function create(state) {
  var basicMaterialRecord = RecordBasicMaterialMainService$Wonderjs.getRecord(state);
  var match = IndexComponentService$Wonderjs.generateIndex(basicMaterialRecord[/* index */0], basicMaterialRecord[/* disposedIndexArray */10]);
  var index = match[0];
  var basicMaterialRecord$1 = _initDataWhenCreate(index, basicMaterialRecord);
  var newrecord = basicMaterialRecord$1.slice();
  state[/* basicMaterialRecord */15] = /* Some */[(newrecord[/* index */0] = match[1], newrecord)];
  return BufferService$Wonderjs.checkNotExceedMaxCount(BufferSettingService$Wonderjs.getBasicMaterialCount(state[/* settingRecord */0]), /* tuple */[
              state,
              index
            ]);
}

export {
  _initDataWhenCreate ,
  create              ,
  
}
/* BufferService-Wonderjs Not a pure module */
