// Generated by BUCKLESCRIPT VERSION 2.1.0, PLEASE EDIT WITH CARE
'use strict';

import * as AliveMaterialService$Wonderjs           from "../../../primitive/material/AliveMaterialService.js";
import * as CopyArrayBufferService$Wonderjs         from "../../../primitive/copy/CopyArrayBufferService.js";
import * as RestoreMaterialService$Wonderjs         from "../../../record/main/material/RestoreMaterialService.js";
import * as InitLightMaterialMainService$Wonderjs   from "../material/light/InitLightMaterialMainService.js";
import * as RecordLightMaterialMainService$Wonderjs from "../material/light/RecordLightMaterialMainService.js";

function _resetShaderIndices(state) {
  var record = RecordLightMaterialMainService$Wonderjs.getRecord(state);
  var newrecord = state.slice();
  var newrecord$1 = record.slice();
  newrecord[/* lightMaterialRecord */16] = /* Some */[(newrecord$1[/* shaderIndices */2] = RestoreMaterialService$Wonderjs.resetShaderIndices(record[/* index */0], record[/* defaultShaderIndex */6], record[/* shaderIndices */2]), newrecord$1)];
  return newrecord;
}

function restore(gl, currentState, targetState) {
  var targetState$1 = _resetShaderIndices(targetState);
  var targetState$2 = InitLightMaterialMainService$Wonderjs.initMaterials(AliveMaterialService$Wonderjs.getAllAliveMaterials(RecordLightMaterialMainService$Wonderjs.getRecord(targetState$1)[/* gameObjectMap */10]), gl, targetState$1);
  var currentLightMaterialRecord = RecordLightMaterialMainService$Wonderjs.getRecord(currentState);
  var targetLightMaterialRecord = RecordLightMaterialMainService$Wonderjs.getRecord(targetState$2);
  var newBuffer = CopyArrayBufferService$Wonderjs.copyArrayBufferData(targetLightMaterialRecord[/* buffer */1], currentLightMaterialRecord[/* buffer */1]);
  var newrecord = targetState$2.slice();
  var newrecord$1 = targetLightMaterialRecord.slice();
  newrecord[/* lightMaterialRecord */16] = /* Some */[(newrecord$1[/* buffer */1] = newBuffer, newrecord$1)];
  return newrecord;
}

export {
  _resetShaderIndices ,
  restore             ,
  
}
/* AliveMaterialService-Wonderjs Not a pure module */
