// Generated by BUCKLESCRIPT VERSION 2.1.0, PLEASE EDIT WITH CARE
'use strict';

import * as TypeArrayService$Wonderjs               from "../../../primitive/buffer/TypeArrayService.js";
import * as AliveMaterialService$Wonderjs           from "../../../primitive/material/AliveMaterialService.js";
import * as RestoreMaterialService$Wonderjs         from "../../../record/main/material/RestoreMaterialService.js";
import * as InitLightMaterialMainService$Wonderjs   from "../material/light/InitLightMaterialMainService.js";
import * as RecordLightMaterialMainService$Wonderjs from "../material/light/RecordLightMaterialMainService.js";

function _resetShaderIndices(state) {
  var record = RecordLightMaterialMainService$Wonderjs.getRecord(state);
  var newrecord = state.slice();
  var newrecord$1 = record.slice();
  newrecord[/* lightMaterialRecord */16] = /* Some */[(newrecord$1[/* shaderIndices */2] = RestoreMaterialService$Wonderjs.resetShaderIndices(record[/* index */0], record[/* defaultShaderIndex */6], record[/* shaderIndices */2]), newrecord$1)];
  return newrecord;
}

function _restoreTypeArrays(currentLightMaterialRecord, targetLightMaterialRecord) {
  var match = +(currentLightMaterialRecord[/* shaderIndices */2] === targetLightMaterialRecord[/* shaderIndices */2] && currentLightMaterialRecord[/* diffuseColors */3] === targetLightMaterialRecord[/* diffuseColors */3] && currentLightMaterialRecord[/* specularColors */4] === targetLightMaterialRecord[/* specularColors */4]);
  if (match !== 0) {
    return /* tuple */[
            currentLightMaterialRecord,
            targetLightMaterialRecord
          ];
  } else {
    RecordLightMaterialMainService$Wonderjs.setDefaultTypeArrData(currentLightMaterialRecord[/* index */0], /* tuple */[
          currentLightMaterialRecord[/* defaultShaderIndex */6],
          currentLightMaterialRecord[/* defaultDiffuseColor */7],
          currentLightMaterialRecord[/* defaultSpecularColor */8],
          currentLightMaterialRecord[/* defaultShininess */9]
        ], /* tuple */[
          currentLightMaterialRecord[/* shaderIndices */2],
          currentLightMaterialRecord[/* diffuseColors */3],
          currentLightMaterialRecord[/* specularColors */4],
          currentLightMaterialRecord[/* shininess */5]
        ]);
    TypeArrayService$Wonderjs.fillUint32ArrayWithUint32Array(/* tuple */[
          currentLightMaterialRecord[/* shaderIndices */2],
          0
        ], /* tuple */[
          targetLightMaterialRecord[/* shaderIndices */2],
          0
        ], targetLightMaterialRecord[/* shaderIndices */2].length);
    TypeArrayService$Wonderjs.fillFloat32ArrayWithFloat32Array(/* tuple */[
          currentLightMaterialRecord[/* diffuseColors */3],
          0
        ], /* tuple */[
          targetLightMaterialRecord[/* diffuseColors */3],
          0
        ], targetLightMaterialRecord[/* diffuseColors */3].length);
    TypeArrayService$Wonderjs.fillFloat32ArrayWithFloat32Array(/* tuple */[
          currentLightMaterialRecord[/* specularColors */4],
          0
        ], /* tuple */[
          targetLightMaterialRecord[/* specularColors */4],
          0
        ], targetLightMaterialRecord[/* specularColors */4].length);
    TypeArrayService$Wonderjs.fillFloat32ArrayWithFloat32Array(/* tuple */[
          currentLightMaterialRecord[/* shininess */5],
          0
        ], /* tuple */[
          targetLightMaterialRecord[/* shininess */5],
          0
        ], targetLightMaterialRecord[/* shininess */5].length);
    return /* tuple */[
            currentLightMaterialRecord,
            targetLightMaterialRecord
          ];
  }
}

function restore(gl, currentState, targetState) {
  var targetState$1 = _resetShaderIndices(targetState);
  var targetState$2 = InitLightMaterialMainService$Wonderjs.initMaterials(AliveMaterialService$Wonderjs.getAllAliveMaterials(RecordLightMaterialMainService$Wonderjs.getRecord(targetState$1)[/* gameObjectMap */10]), gl, targetState$1);
  var currentLightMaterialRecord = RecordLightMaterialMainService$Wonderjs.getRecord(currentState);
  var targetLightMaterialRecord = RecordLightMaterialMainService$Wonderjs.getRecord(targetState$2);
  var match = _restoreTypeArrays(currentLightMaterialRecord, targetLightMaterialRecord);
  var currentLightMaterialRecord$1 = match[0];
  var newrecord = targetState$2.slice();
  var newrecord$1 = match[1].slice();
  newrecord[/* lightMaterialRecord */16] = /* Some */[(newrecord$1[/* buffer */1] = currentLightMaterialRecord$1[/* buffer */1], newrecord$1[/* shaderIndices */2] = currentLightMaterialRecord$1[/* shaderIndices */2], newrecord$1[/* diffuseColors */3] = currentLightMaterialRecord$1[/* diffuseColors */3], newrecord$1[/* specularColors */4] = currentLightMaterialRecord$1[/* specularColors */4], newrecord$1[/* shininess */5] = currentLightMaterialRecord$1[/* shininess */5], newrecord$1)];
  return newrecord;
}

export {
  _resetShaderIndices ,
  _restoreTypeArrays  ,
  restore             ,
  
}
/* TypeArrayService-Wonderjs Not a pure module */
