// Generated by BUCKLESCRIPT VERSION 2.1.0, PLEASE EDIT WITH CARE
'use strict';

import * as AliveMaterialService$Wonderjs           from "../../../primitive/material/AliveMaterialService.js";
import * as CopyArrayBufferService$Wonderjs         from "../../../primitive/copy/CopyArrayBufferService.js";
import * as RestoreMaterialService$Wonderjs         from "../../../record/main/material/RestoreMaterialService.js";
import * as InitBasicMaterialMainService$Wonderjs   from "../material/basic/InitBasicMaterialMainService.js";
import * as RecordBasicMaterialMainService$Wonderjs from "../material/basic/RecordBasicMaterialMainService.js";

function _resetShaderIndices(state) {
  var record = RecordBasicMaterialMainService$Wonderjs.getRecord(state);
  var newrecord = state.slice();
  var newrecord$1 = record.slice();
  newrecord[/* basicMaterialRecord */15] = /* Some */[(newrecord$1[/* shaderIndices */2] = RestoreMaterialService$Wonderjs.resetShaderIndices(record[/* index */0], record[/* defaultShaderIndex */4], record[/* shaderIndices */2]), newrecord$1)];
  return newrecord;
}

function restore(gl, currentState, targetState) {
  var targetState$1 = _resetShaderIndices(targetState);
  var targetState$2 = InitBasicMaterialMainService$Wonderjs.initMaterials(AliveMaterialService$Wonderjs.getAllAliveMaterials(RecordBasicMaterialMainService$Wonderjs.getRecord(targetState$1)[/* gameObjectMap */6]), gl, targetState$1);
  var currentBasicMaterialRecord = RecordBasicMaterialMainService$Wonderjs.getRecord(currentState);
  var targetBasicMaterialRecord = RecordBasicMaterialMainService$Wonderjs.getRecord(targetState$2);
  var newBuffer = CopyArrayBufferService$Wonderjs.copyArrayBufferData(targetBasicMaterialRecord[/* buffer */1], currentBasicMaterialRecord[/* buffer */1]);
  var newrecord = targetState$2.slice();
  var newrecord$1 = targetBasicMaterialRecord.slice();
  newrecord[/* basicMaterialRecord */15] = /* Some */[(newrecord$1[/* buffer */1] = newBuffer, newrecord$1)];
  return newrecord;
}

export {
  _resetShaderIndices ,
  restore             ,
  
}
/* AliveMaterialService-Wonderjs Not a pure module */
