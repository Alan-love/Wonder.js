// Generated by BUCKLESCRIPT VERSION 2.1.0, PLEASE EDIT WITH CARE
'use strict';

import * as ArrayService$Wonderjs                             from "../../../atom/ArrayService.js";
import * as CreateTransformMainService$Wonderjs               from "../transform/CreateTransformMainService.js";
import * as CreateObjectInstanceService$Wonderjs              from "../../../record/instance/objectInstance/CreateObjectInstanceService.js";
import * as AddGameObjectComponentMainService$Wonderjs        from "../gameObject/AddGameObjectComponentMainService.js";
import * as CreateGameObjectGameObjectService$Wonderjs        from "../../../record/gameObject/CreateGameObjectGameObjectService.js";
import * as ObjectInstanceArraySourceInstanceService$Wonderjs from "../../../record/instance/sourceInstance/ObjectInstanceArraySourceInstanceService.js";

function _addObjectInstnace(sourceInstance, uid, objectInstanceArrayMap) {
  ArrayService$Wonderjs.push(uid, ObjectInstanceArraySourceInstanceService$Wonderjs.unsafeGetObjectInstanceArray(sourceInstance, objectInstanceArrayMap));
  return objectInstanceArrayMap;
}

function createInstance(sourceInstance, state) {
  var sourceInstanceRecord = state[/* sourceInstanceRecord */6];
  var match = CreateGameObjectGameObjectService$Wonderjs.create(state[/* gameObjectRecord */10]);
  var uid = match[1];
  var newrecord = state.slice();
  var newrecord$1 = sourceInstanceRecord.slice();
  newrecord$1[/* objectInstanceArrayMap */1] = _addObjectInstnace(sourceInstance, uid, sourceInstanceRecord[/* objectInstanceArrayMap */1]);
  newrecord[/* sourceInstanceRecord */6] = newrecord$1;
  newrecord[/* gameObjectRecord */10] = match[0];
  var match$1 = CreateTransformMainService$Wonderjs.create(newrecord);
  var state$1 = match$1[0];
  var match$2 = CreateObjectInstanceService$Wonderjs.create(sourceInstance, uid, state$1[/* objectInstanceRecord */7]);
  var newrecord$2 = state$1.slice();
  newrecord$2[/* objectInstanceRecord */7] = match$2[0];
  var state$2 = AddGameObjectComponentMainService$Wonderjs.addObjectInstanceComponent(uid, match$2[1], AddGameObjectComponentMainService$Wonderjs.addTransformComponent(uid, match$1[1], newrecord$2));
  return /* tuple */[
          state$2,
          uid
        ];
}

export {
  _addObjectInstnace ,
  createInstance     ,
  
}
/* ArrayService-Wonderjs Not a pure module */
