// Generated by BUCKLESCRIPT VERSION 2.1.0, PLEASE EDIT WITH CARE
'use strict';

import * as HashMapSystem$WonderCommonlib        from "../../../../../../node_modules/wonder-commonlib/lib/es6_global/src/HashMapSystem.js";
import * as SparseMapSystem$WonderCommonlib      from "../../../../../../node_modules/wonder-commonlib/lib/es6_global/src/SparseMapSystem.js";
import * as ShaderRestoreFromStateUtils$Wonderjs from "../utils/ShaderRestoreFromStateUtils.js";

function _getGLSLLocationData(state) {
  return state[/* glslLocationData */20];
}

function _getLocation(param, getGlLocationFunc, gl) {
  var locationMap = param[2];
  var name = param[1];
  var match = HashMapSystem$WonderCommonlib.get(name, locationMap);
  if (match) {
    return match[0];
  } else {
    var pos = getGlLocationFunc(param[0], name, gl);
    HashMapSystem$WonderCommonlib.set(name, pos, locationMap);
    return pos;
  }
}

function _getGlAttribLocation(program, name, gl) {
  return gl.getAttribLocation(program, name);
}

function _getGlUniformLocation(program, name, gl) {
  return gl.getUniformLocation(program, name);
}

function getAttribLocation(program, name, attributeLocationMap, gl) {
  return _getLocation(/* tuple */[
              program,
              name,
              attributeLocationMap
            ], _getGlAttribLocation, gl);
}

function getUniformLocation(program, name, uniformLocationMap, gl) {
  return _getLocation(/* tuple */[
              program,
              name,
              uniformLocationMap
            ], _getGlUniformLocation, gl);
}

function getAttributeLocationMap(shaderIndex, state) {
  return SparseMapSystem$WonderCommonlib.get(shaderIndex, state[/* glslLocationData */20][/* attributeLocationMap */0]);
}

function setAttributeLocationMap(shaderIndex, attributeLocationMap, state) {
  SparseMapSystem$WonderCommonlib.set(shaderIndex, attributeLocationMap, state[/* glslLocationData */20][/* attributeLocationMap */0]);
  return state;
}

function getUniformLocationMap(shaderIndex, state) {
  return SparseMapSystem$WonderCommonlib.get(shaderIndex, state[/* glslLocationData */20][/* uniformLocationMap */1]);
}

function setUniformLocationMap(shaderIndex, uniformLocationMap, state) {
  SparseMapSystem$WonderCommonlib.set(shaderIndex, uniformLocationMap, state[/* glslLocationData */20][/* uniformLocationMap */1]);
  return state;
}

function createLocationMap() {
  return HashMapSystem$WonderCommonlib.createEmpty(/* () */0);
}

function deepCopyStateForRestore(state) {
  return state;
}

function restore(intersectShaderIndexDataArray, currentState, targetState) {
  var match = currentState[/* glslLocationData */20];
  var newrecord = targetState.slice();
  newrecord[/* glslLocationData */20] = /* record */[
    /* attributeLocationMap */ShaderRestoreFromStateUtils$Wonderjs.getIntersectShaderRelatedMap(intersectShaderIndexDataArray, match[/* attributeLocationMap */0]),
    /* uniformLocationMap */ShaderRestoreFromStateUtils$Wonderjs.getIntersectShaderRelatedMap(intersectShaderIndexDataArray, match[/* uniformLocationMap */1])
  ];
  return newrecord;
}

export {
  _getGLSLLocationData    ,
  _getLocation            ,
  _getGlAttribLocation    ,
  _getGlUniformLocation   ,
  getAttribLocation       ,
  getUniformLocation      ,
  getAttributeLocationMap ,
  setAttributeLocationMap ,
  getUniformLocationMap   ,
  setUniformLocationMap   ,
  createLocationMap       ,
  deepCopyStateForRestore ,
  restore                 ,
  
}
/* HashMapSystem-WonderCommonlib Not a pure module */
