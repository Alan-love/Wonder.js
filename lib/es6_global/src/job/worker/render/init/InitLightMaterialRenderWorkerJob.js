// Generated by BUCKLESCRIPT VERSION 2.1.0, PLEASE EDIT WITH CARE
'use strict';

import * as MostUtils$Wonderjs                                       from "../../../../asset/utils/MostUtils.js";
import * as MessageService$Wonderjs                                  from "../../../../service/primitive/worker/MessageService.js";
import * as StateRenderWorkerService$Wonderjs                        from "../../../../service/state/render_worker/state/StateRenderWorkerService.js";
import * as InitInitLightMaterialService$Wonderjs                    from "../../../../service/state/init_material/init_lightMaterial/material/InitInitLightMaterialService.js";
import * as InitMaterialRenderWorkerJobUtils$Wonderjs                from "./utils/InitMaterialRenderWorkerJobUtils.js";
import * as CreateTypeArrayLightMaterialService$Wonderjs             from "../../../../service/record/all/material/light/CreateTypeArrayLightMaterialService.js";
import * as RecordLightMaterialRenderWorkerService$Wonderjs          from "../../../../service/state/render_worker/material/light/RecordLightMaterialRenderWorkerService.js";
import * as CreateInitLightMaterialStateRenderWorkerService$Wonderjs from "../../../../service/state/render_worker/material/light/CreateInitLightMaterialStateRenderWorkerService.js";

function _createTypeArrays(count, state) {
  var lightMaterialRecord = RecordLightMaterialRenderWorkerService$Wonderjs.getRecord(state);
  var match = CreateTypeArrayLightMaterialService$Wonderjs.createTypeArrays(lightMaterialRecord[/* buffer */0], count);
  state[/* lightMaterialRecord */12] = /* Some */[/* record */[
      /* buffer */lightMaterialRecord[/* buffer */0],
      /* shaderIndices : Some */[match[0]],
      /* diffuseColors : Some */[match[1]],
      /* specularColors : Some */[match[2]],
      /* shininess : Some */[match[3]],
      /* index */lightMaterialRecord[/* index */5],
      /* disposedIndexArray */lightMaterialRecord[/* disposedIndexArray */6],
      /* isSourceInstanceMap */lightMaterialRecord[/* isSourceInstanceMap */7]
    ]];
  return state;
}

function execJob(_, e, stateData) {
  return MostUtils$Wonderjs.callFunc((function () {
                var state = StateRenderWorkerService$Wonderjs.unsafeGetState(stateData);
                var data = MessageService$Wonderjs.getRecord(e);
                data.lightMaterialData;
                var count = data.bufferData.lightMaterialDataBufferCount;
                StateRenderWorkerService$Wonderjs.setState(stateData, InitMaterialRenderWorkerJobUtils$Wonderjs.initMaterials(/* tuple */[
                          CreateInitLightMaterialStateRenderWorkerService$Wonderjs.createInitMaterialState,
                          InitInitLightMaterialService$Wonderjs.init
                        ], RecordLightMaterialRenderWorkerService$Wonderjs.getRecord(state)[/* isSourceInstanceMap */7], _createTypeArrays(count, state)));
                return e;
              }));
}

export {
  _createTypeArrays ,
  execJob           ,
  
}
/* MostUtils-Wonderjs Not a pure module */
