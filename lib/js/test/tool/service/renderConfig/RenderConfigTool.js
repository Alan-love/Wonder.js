// Generated by BUCKLESCRIPT VERSION 2.1.0, PLEASE EDIT WITH CARE
'use strict';

var ParseRenderConfigService$Wonderjs      = require("../../../../src/service/record/main/renderConfig/ParseRenderConfigService.js");
var GetDataRenderConfigService$Wonderjs    = require("../../../../src/service/record/all/renderConfig/GetDataRenderConfigService.js");
var InitBasicMaterialStateTool$Wonderjs    = require("../../state/InitBasicMaterialStateTool.js");
var RecordRenderConfigMainService$Wonderjs = require("../../../../src/service/state/main/renderConfig/RecordRenderConfigMainService.js");

function buildRenderConfig($staropt$star, $staropt$star$1, _) {
  var shaders = $staropt$star ? $staropt$star[0] : "\n{\n  \"static_branchs\": [\n    {\n      \"name\": \"modelMatrix_instance\",\n      \"value\": [\n        \"modelMatrix_noInstance\",\n        \"modelMatrix_hardware_instance\",\n        \"modelMatrix_batch_instance\"\n      ]\n    },\n    {\n      \"name\": \"normalMatrix_instance\",\n      \"value\": [\n        \"normalMatrix_noInstance\",\n        \"normalMatrix_hardware_instance\",\n        \"normalMatrix_batch_instance\"\n      ]\n    }\n  ],\n  \"groups\": [\n    {\n      \"name\": \"top\",\n      \"value\": [\n        \"common\",\n        \"vertex\"\n      ]\n    },\n    {\n      \"name\": \"end\",\n      \"value\": [\n        \"end\"\n      ]\n    }\n  ],\n  \"material_shaders\": [\n    {\n      \"name\": \"render_basic\",\n      \"shader_libs\": [\n        {\n          \"type\": \"group\",\n          \"name\": \"top\"\n        },\n        {\n          \"type\": \"static_branch\",\n          \"name\": \"modelMatrix_instance\"\n        },\n        {\n          \"name\": \"basic\"\n        },\n        {\n          \"name\": \"basic_end\"\n        },\n        {\n          \"type\": \"group\",\n          \"name\": \"end\"\n        }\n      ]\n    },\n    {\n      \"name\": \"front_render_light\",\n      \"shader_libs\": [\n        {\n          \"type\": \"group\",\n          \"name\": \"top\"\n        },\n        {\n          \"name\": \"normal\"\n        },\n        {\n          \"type\": \"static_branch\",\n          \"name\": \"modelMatrix_instance\"\n        },\n        {\n          \"type\": \"static_branch\",\n          \"name\": \"normalMatrix_instance\"\n        },\n        {\n          \"name\": \"light_common\"\n        },\n        {\n          \"name\": \"light_setWorldPosition\"\n        },\n        {\n          \"name\": \"noDiffuseMap\"\n        },\n        {\n          \"name\": \"noSpecularMap\"\n        },\n        {\n          \"name\": \"noLightMap\"\n        },\n        {\n          \"name\": \"noEmissionMap\"\n        },\n        {\n          \"name\": \"noNormalMap\"\n        },\n        {\n          \"name\": \"noShadowMap\"\n        },\n        {\n          \"name\": \"light\"\n        },\n        {\n          \"name\": \"ambient_light\"\n        },\n        {\n          \"name\": \"direction_light\"\n        },\n        {\n          \"name\": \"point_light\"\n        },\n        {\n          \"name\": \"light_end\"\n        },\n        {\n          \"type\": \"group\",\n          \"name\": \"end\"\n        }\n      ]\n    }\n  ]\n}\n        ";
  var shaderLibs = $staropt$star$1 ? $staropt$star$1[0] : "\n[\n  {\n    \"name\": \"common\",\n    \"glsls\": [\n      {\n        \"type\": \"vs\",\n        \"name\": \"common_vertex\"\n      },\n      {\n        \"type\": \"fs\",\n        \"name\": \"common_fragment\"\n      }\n    ],\n    \"variables\": {\n      \"uniforms\": [\n        {\n          \"name\": \"u_vMatrix\",\n          \"field\": \"vMatrix\",\n          \"type\": \"mat4\",\n          \"from\": \"camera\"\n        },\n        {\n          \"name\": \"u_pMatrix\",\n          \"field\": \"pMatrix\",\n          \"type\": \"mat4\",\n          \"from\": \"camera\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"modelMatrix_noInstance\",\n    \"glsls\": [\n      {\n        \"type\": \"vs\",\n        \"name\": \"modelMatrix_noInstance_vertex\"\n      }\n    ],\n    \"variables\": {\n      \"uniforms\": [\n        {\n          \"name\": \"u_mMatrix\",\n          \"field\": \"mMatrix\",\n          \"type\": \"mat4\",\n          \"from\": \"model\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"modelMatrix_hardware_instance\",\n    \"glsls\": [\n      {\n        \"type\": \"vs\",\n        \"name\": \"modelMatrix_hardware_instance_vertex\"\n      }\n    ],\n    \"variables\": {\n      \"attributes\": [\n        {\n          \"name\": \"a_mVec4_0\",\n          \"buffer\": \"instance_mMatrix\",\n          \"type\": \"vec4\"\n        },\n        {\n          \"name\": \"a_mVec4_1\",\n          \"buffer\": \"instance_mMatrix\",\n          \"type\": \"vec4\"\n        },\n        {\n          \"name\": \"a_mVec4_2\",\n          \"buffer\": \"instance_mMatrix\",\n          \"type\": \"vec4\"\n        },\n        {\n          \"name\": \"a_mVec4_3\",\n          \"buffer\": \"instance_mMatrix\",\n          \"type\": \"vec4\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"modelMatrix_batch_instance\",\n    \"glsls\": [\n      {\n        \"type\": \"vs\",\n        \"name\": \"modelMatrix_batch_instance_vertex\"\n      }\n    ],\n    \"variables\": {\n      \"uniforms\": [\n        {\n          \"name\": \"u_mMatrix\",\n          \"field\": \"mMatrix\",\n          \"type\": \"mat4\",\n          \"from\": \"model\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"vertex\",\n    \"variables\": {\n      \"attributes\": [\n        {\n          \"name\": \"a_position\",\n          \"buffer\": \"vertex\",\n          \"type\": \"vec3\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"basic\",\n    \"glsls\": [\n      {\n        \"type\": \"vs\",\n        \"name\": \"webgl1_basic_vertex\"\n      },\n      {\n        \"type\": \"fs\",\n        \"name\": \"webgl1_basic_fragment\"\n      }\n    ],\n    \"variables\": {\n      \"uniforms\": [\n        {\n          \"name\": \"u_color\",\n          \"field\": \"color\",\n          \"type\": \"float3\",\n          \"from\": \"basicMaterial\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"basic_end\",\n    \"glsls\": [\n      {\n        \"type\": \"fs\",\n        \"name\": \"webgl1_basic_end_fragment\"\n      }\n    ]\n  },\n  {\n    \"name\": \"normalMatrix_noInstance\",\n    \"glsls\": [\n      {\n        \"type\": \"vs\",\n        \"name\": \"normalMatrix_noInstance_vertex\"\n      }\n    ],\n    \"variables\": {\n      \"uniforms\": [\n        {\n          \"name\": \"u_normalMatrix\",\n          \"field\": \"normalMatrix\",\n          \"type\": \"mat3\",\n          \"from\": \"model\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"normalMatrix_hardware_instance\",\n    \"glsls\": [\n      {\n        \"type\": \"vs\",\n        \"name\": \"normalMatrix_hardware_instance_vertex\"\n      }\n    ],\n    \"variables\": {\n      \"attributes\": [\n        {\n          \"name\": \"a_normalVec3_0\",\n          \"buffer\": \"instance_normalMatrix\",\n          \"type\": \"vec3\"\n        },\n        {\n          \"name\": \"a_normalVec3_1\",\n          \"buffer\": \"instance_normalMatrix\",\n          \"type\": \"vec3\"\n        },\n        {\n          \"name\": \"a_normalVec3_2\",\n          \"buffer\": \"instance_normalMatrix\",\n          \"type\": \"vec3\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"normalMatrix_batch_instance\",\n    \"glsls\": [\n      {\n        \"type\": \"vs\",\n        \"name\": \"normalMatrix_batch_instance_vertex\"\n      }\n    ],\n    \"variables\": {\n      \"uniforms\": [\n        {\n          \"name\": \"u_normalMatrix\",\n          \"field\": \"normalMatrix\",\n          \"type\": \"mat3\",\n          \"from\": \"model\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"normal\",\n    \"variables\": {\n      \"attributes\": [\n        {\n          \"name\": \"a_normal\",\n          \"buffer\": \"normal\",\n          \"type\": \"vec3\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"light_common\",\n    \"glsls\": [\n      {\n        \"type\": \"vs\",\n        \"name\": \"webgl1_frontLight_common_vertex\"\n      },\n      {\n        \"type\": \"fs\",\n        \"name\": \"webgl1_frontLight_common_fragment\"\n      }\n    ]\n  },\n  {\n    \"name\": \"light_setWorldPosition\",\n    \"glsls\": [\n      {\n        \"type\": \"vs\",\n        \"name\": \"webgl1_frontLight_setWorldPosition_vertex\"\n      }\n    ]\n  },\n  {\n    \"name\": \"noDiffuseMap\",\n    \"glsls\": [\n      {\n        \"type\": \"fs\",\n        \"name\": \"webgl1_noDiffuseMap_fragment\"\n      }\n    ],\n    \"variables\": {\n      \"uniforms\": [\n        {\n          \"name\": \"u_diffuse\",\n          \"field\": \"diffuseColor\",\n          \"type\": \"float3\",\n          \"from\": \"lightMaterial\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"noSpecularMap\",\n    \"glsls\": [\n      {\n        \"type\": \"fs\",\n        \"name\": \"webgl1_noSpecularMap_fragment\"\n      }\n    ],\n    \"variables\": {\n      \"uniforms\": [\n        {\n          \"name\": \"u_specular\",\n          \"field\": \"specularColor\",\n          \"type\": \"float3\",\n          \"from\": \"lightMaterial\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"noLightMap\",\n    \"glsls\": [\n      {\n        \"type\": \"fs\",\n        \"name\": \"webgl1_noLightMap_fragment\"\n      }\n    ]\n  },\n  {\n    \"name\": \"noEmissionMap\",\n    \"glsls\": [\n      {\n        \"type\": \"fs\",\n        \"name\": \"webgl1_noEmissionMap_fragment\"\n      }\n    ]\n  },\n  {\n    \"name\": \"noNormalMap\",\n    \"glsls\": [\n      {\n        \"type\": \"vs\",\n        \"name\": \"webgl1_noNormalMap_vertex\"\n      },\n      {\n        \"type\": \"fs\",\n        \"name\": \"webgl1_noNormalMap_fragment\"\n      }\n    ]\n  },\n  {\n    \"name\": \"noShadowMap\",\n    \"glsls\": [\n      {\n        \"type\": \"fs\",\n        \"name\": \"webgl1_noShadowMap_fragment\"\n      }\n    ]\n  },\n  {\n    \"name\": \"light\",\n    \"glsls\": [\n      {\n        \"type\": \"vs\",\n        \"name\": \"webgl1_frontLight_vertex\"\n      },\n      {\n        \"type\": \"vs_function\",\n        \"name\": \"defineLightCount\"\n      },\n      {\n        \"type\": \"fs\",\n        \"name\": \"webgl1_frontLight_fragment\"\n      },\n      {\n        \"type\": \"fs_function\",\n        \"name\": \"defineLightCount\"\n      }\n    ],\n    \"variables\": {\n      \"uniforms\": [\n        {\n          \"name\": \"u_shininess\",\n          \"from\": \"lightMaterial\",\n          \"field\": \"shininess\",\n          \"type\": \"float\"\n        },\n        {\n          \"name\": \"u_cameraPos\",\n          \"from\": \"camera\",\n          \"field\": \"position\",\n          \"type\": \"vec3\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"ambient_light\",\n    \"glsls\": [\n      {\n        \"type\": \"fs\",\n        \"name\": \"webgl1_ambientLight_fragment\"\n      }\n    ],\n    \"variables\": {\n      \"uniforms\": [\n        {\n          \"name\": \"sendAmbientLight\",\n          \"from\": \"ambientLight\",\n          \"field\": \"send\",\n          \"type\": \"function\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"direction_light\",\n    \"variables\": {\n      \"uniforms\": [\n        {\n          \"name\": \"sendDirectionLight\",\n          \"from\": \"directionLight\",\n          \"field\": \"send\",\n          \"type\": \"function\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"point_light\",\n    \"variables\": {\n      \"uniforms\": [\n        {\n          \"name\": \"sendPointLight\",\n          \"from\": \"pointLight\",\n          \"field\": \"send\",\n          \"type\": \"function\"\n        }\n      ]\n    }\n  },\n  {\n    \"name\": \"light_end\",\n    \"glsls\": [\n      {\n        \"type\": \"fs\",\n        \"name\": \"webgl1_frontLight_end_fragment\"\n      }\n    ]\n  },\n  {\n    \"name\": \"end\",\n    \"variables\": {\n      \"attributes\": [\n        {\n          \"buffer\": \"index\"\n        }\n      ]\n    }\n  }\n]\n        ";
  return /* tuple */[
          shaders,
          shaderLibs
        ];
}

function create(param, state) {
  var newrecord = state.slice();
  newrecord[/* renderConfigRecord */4] = /* Some */[/* record */[
      /* shaders */ParseRenderConfigService$Wonderjs.convertShadersToRecord(JSON.parse(param[0])),
      /* shaderLibs */ParseRenderConfigService$Wonderjs.convertShaderLibsToRecord(JSON.parse(param[1]))
    ]];
  return newrecord;
}

var getRecord = RecordRenderConfigMainService$Wonderjs.getRecord;

function getShaders(state) {
  return GetDataRenderConfigService$Wonderjs.getShaders(InitBasicMaterialStateTool$Wonderjs.createStateWithoutMaterialData(state)[/* renderConfigRecord */1]);
}

function getShaderLibs(state) {
  return GetDataRenderConfigService$Wonderjs.getShaderLibs(InitBasicMaterialStateTool$Wonderjs.createStateWithoutMaterialData(state)[/* renderConfigRecord */1]);
}

var getMaterialShaderLibRecordArr = GetDataRenderConfigService$Wonderjs.getMaterialShaderLibDataArr;

exports.buildRenderConfig             = buildRenderConfig;
exports.create                        = create;
exports.getRecord                     = getRecord;
exports.getShaders                    = getShaders;
exports.getShaderLibs                 = getShaderLibs;
exports.getMaterialShaderLibRecordArr = getMaterialShaderLibRecordArr;
/* GetDataRenderConfigService-Wonderjs Not a pure module */
