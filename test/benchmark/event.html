<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>benchmark</title>
</head>

<body>
    <script src="../e2e/js/AssetTool.js"></script>
    <script src="../e2e/js/ReplaceFetchTool.js"></script>
    <script src="../e2e/js/ScheduleTool.js"></script>
    <script src="../e2e/js/BasicBoxesTool.js"></script>
    <script src="../e2e/js/LightBoxesTool.js"></script>
    <script src="../e2e/js/PositionTool.js"></script>
    <script src="../e2e/js/LightTool.js"></script>
    <script src="../e2e/js/CameraTool.js"></script>
    <script src="../e2e/js/CustomGeometryTool.js"></script>
    <script src="../e2e/js/BasicMaterialTool.js"></script>
    <script src="../e2e/js/LightMaterialTool.js"></script>
    <script src="../e2e/js/InstanceBasicBoxesTool.js"></script>
    <script src="../e2e/js/InstanceLightBoxesTool.js"></script>
    <script src="../e2e/js/RedoUndoTool.js"></script>
    <script src="../e2e/js/RandomTool.js"></script>



    <script src="../../dist/wd.js"></script>



    <script>
        window.onload = function () {
            ReplaceFetchTool.replaceFetchForTest();

            return AssetTool.load(["./data/setting.json", "./data/"], null, function () {
                return initSample(wd.unsafeGetState());
            });


            function initSample(state) {
                wd.startDirector(state);

                var state = wd.unsafeGetState();



                var state =
                    wd.onMouseEvent(1, 0, (event, state) => {
                        console.log("mousedown");

                        return state;
                    }, state);



                var state =
                    wd.onCustomGlobalEvent(
                        "wd_pointdown", 1, (event, state) => {
                            console.log("pointdown");

                            return state;
                        }, state);



                var state =
                    wd.onMouseEvent(0, 0, (event, state) => {
                        console.log("click");

                        return state;
                    }, state);



                var state =
                    wd.onCustomGlobalEvent(
                        "wd_pointtap", 0, (event, state) => {
                            console.log("pointtap");

                            return state;
                        }, state);



                // var state =
                //     wd.onMouseEvent(3, 0, (event, state) => {
                //         console.log("mousemove");

                //         return state;
                //     }, state);



                // var state =
                //     wd.onCustomGlobalEvent(
                //         "wd_pointmove", 3, (event, state) => {
                //             console.log("pointmove");

                //             return state;
                //         }, state);


                var state =
                    wd.onMouseEvent(4, 0, (event, state) => {
                        console.log("mousewheel");

                        return state;
                    }, state);



                var state =
                    wd.onCustomGlobalEvent(
                        "wd_pointscale", 4, (event, state) => {
                            console.log("pointscale");

                            return state;
                        }, state);



                var state =
                    wd.onMouseEvent(5, 0, (event, state) => {
                        console.log("mousedrag");

                        return state;
                    }, state);



                var state =
                    wd.onCustomGlobalEvent(
                        "wd_pointdrag", 5, (event, state) => {
                            console.log("pointdrag");

                            return state;
                        }, state);





                var state =
                    wd.onKeyboardEvent(6, 0, (event, state) => {
                        console.log("keyup", event);

                        return state;
                    }, state);








                var state =
                    wd.onTouchEvent(10, 0, (event, state) => {
                        console.log("touchend");

                        return state;
                    }, state);



                var state =
                    wd.onCustomGlobalEvent(
                        "wd_pointup", 2, (event, state) => {
                            console.log("pointup");

                            return state;
                        }, state);









                // var [state, gameObject1] = wd.createGameObject(state);

                // var [state, gameObject2] = wd.createGameObject(state);





                // var count = 1000;

                // var state = state;


                // var value = 0;

                // console.profile("onCustomGameObjectEvent");
                // var n0 = performance.now();

                // for (var i = 0; i < count; i++) {
                //     state =
                //         wd.onMouseEvent(0, 0, (event, state) => {
                //             return state;
                //         }, state);





                //     state =
                //         wd.onCustomGameObjectEvent(
                //             "a1", gameObject1, 0, (event, state) => {
                //                 value += 1;

                //                 return state;
                //             }, state);

                //     state =
                //         wd.onCustomGameObjectEvent(
                //             "a1", gameObject1, 1, (event, state) => {
                //                 value += 1;

                //                 return state;
                //             }, state);
                // }



                // var n1 = performance.now();
                // console.profileEnd();



                // console.profile("triggerCustomGameObjectEvent");

                // var n2 = performance.now();


                // var state =
                //     wd.triggerCustomGameObjectEvent(
                //         wd.createCustomEvent("a1"),

                //         gameObject1, state
                //     );

                // var n3 = performance.now();
                // console.profileEnd();

                // console.log(n1 - n0, n3 - n2)
                // console.log(n1 - n0, n2 - n1)
            }
        };
    </script>
</body>

</html>